<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>NextJs</title>
      <link href="2020/04/22/nextjs/"/>
      <url>2020/04/22/nextjs/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Next-Jsä»‹ç»"><a href="#1-Next-Jsä»‹ç»" class="headerlink" title="1.Next.Jsä»‹ç»"></a>1.Next.Jsä»‹ç»</h2><h3 id="1-1-next-jsæ˜¯ä»€ä¹ˆ"><a href="#1-1-next-jsæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 next.jsæ˜¯ä»€ä¹ˆ"></a>1.1 next.jsæ˜¯ä»€ä¹ˆ</h3><p>next.jsä½œä¸ºä¸€æ¬¾è½»é‡çº§çš„åº”ç”¨æ¡†æ¶ï¼Œä¸»è¦ç”¨äºæ„å»ºé™æ€ç½‘ç«™å’Œåç«¯æ¸²æŸ“ç½‘ç«™ã€‚</p><blockquote><p>Next.js åªæ”¯æŒ<a href="https://reactjs.org/blog/2017/09/26/react-v16.0.html">React 16</a>.<br>ç”±äºæˆ‘ä»¬ä½¿ç”¨ React 16 çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ä¸å¾—ä¸æ”¾å¼ƒå¯¹ React 15 ä»¥åŠä»¥ä¸‹ç‰ˆæœ¬çš„æ”¯æŒ. å½“å‰è¯‘ç‰ˆä¸º7.0.0-canary.8</p></blockquote><h3 id="1-2-æ¡†æ¶ç‰¹ç‚¹"><a href="#1-2-æ¡†æ¶ç‰¹ç‚¹" class="headerlink" title="1.2 æ¡†æ¶ç‰¹ç‚¹"></a>1.2 æ¡†æ¶ç‰¹ç‚¹</h3><ul><li>ä½¿ç”¨åç«¯æ¸²æŸ“</li><li>è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼ˆcode splittingï¼‰ï¼Œä»¥è·å¾—æ›´å¿«çš„ç½‘é¡µåŠ è½½é€Ÿåº¦</li><li>ç®€æ´çš„å‰ç«¯è·¯ç”±å®ç°</li><li>ä½¿ç”¨webpackè¿›è¡Œæ„å»ºï¼Œæ”¯æŒæ¨¡å—çƒ­æ›´æ–°ï¼ˆHot Module Replacementï¼‰</li><li>å¯ä¸ä¸»æµNodeæœåŠ¡å™¨è¿›è¡Œå¯¹æ¥ï¼ˆå¦‚expressï¼‰</li><li>å¯è‡ªå®šä¹‰babelå’Œwebpackçš„é…ç½®</li></ul><h2 id="2-Nexté¡¹ç›®åˆ›å»º"><a href="#2-Nexté¡¹ç›®åˆ›å»º" class="headerlink" title="2.Nexté¡¹ç›®åˆ›å»º"></a>2.Nexté¡¹ç›®åˆ›å»º</h2><h3 id="2-1-å®‰è£…create-next-appè„šæ‰‹æ¶"><a href="#2-1-å®‰è£…create-next-appè„šæ‰‹æ¶" class="headerlink" title="2.1 å®‰è£…create-next-appè„šæ‰‹æ¶"></a>2.1 å®‰è£…create-next-appè„šæ‰‹æ¶</h3><p><a href="https://create-next-app.js.org/get-started-with-examples">https://create-next-app.js.org/get-started-with-examples</a></p><pre class=" language-javascript"><code class="language-javascript">yarn global add create<span class="token operator">-</span>next<span class="token operator">-</span>app@<span class="token number">9.5</span><span class="token punctuation">.</span><span class="token number">0</span>create<span class="token operator">-</span>next<span class="token operator">-</span>app my<span class="token operator">-</span>project<span class="token comment" spellcheck="true">// create-next-app my-project --example with-typescript    //éœ€è¦ç­‰æ¯”è¾ƒä¹…</span>cd my<span class="token operator">-</span>projectyarn dev</code></pre><p><img src="/2020/04/22/nextjs/1603177898229.png"></p><h3 id="2-2-æ·»åŠ antd"><a href="#2-2-æ·»åŠ antd" class="headerlink" title="2.2 æ·»åŠ antd"></a>2.2 æ·»åŠ antd</h3><p>å®‰è£…<code>antd</code>å’ŒæŒ‰éœ€åŠ è½½çš„<code>babel-plugin-import</code>ã€‚</p><pre class=" language-javascript"><code class="language-javascript">yarn add antd@<span class="token number">3.9</span><span class="token punctuation">.</span><span class="token number">2</span> babel<span class="token operator">-</span>plugin<span class="token operator">-</span><span class="token keyword">import</span>   <span class="token comment" spellcheck="true">//ant designå’ŒæŒ‰éœ€åŠ è½½</span>yarn add @zeit<span class="token operator">/</span>next<span class="token operator">-</span>css @zeit<span class="token operator">/</span>next<span class="token operator">-</span>less less   <span class="token comment" spellcheck="true">//æ ·å¼</span>yarn add babel<span class="token operator">-</span>plugin<span class="token operator">-</span>module<span class="token operator">-</span>resolver    <span class="token comment" spellcheck="true">//å–åˆ«å</span>yarn add next<span class="token operator">-</span>compose<span class="token operator">-</span>plugins   <span class="token comment" spellcheck="true">//åˆå¹¶æ’ä»¶</span></code></pre><p>è·Ÿç›®å½•ä¸‹å»ºç«‹<code>.babelrc</code></p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token string">"presets"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"next/babel"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token string">"plugins"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token comment" spellcheck="true">// è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ¹è·¯å¾„ï¼Œé¿å…ç›¸å¯¹è·¯å¾„çš„æ··ä¹±ï¼Œå¦‚import Head from '@/components/Head'</span>    <span class="token punctuation">[</span>      <span class="token string">"module-resolver"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"alias"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>          <span class="token string">"@"</span><span class="token punctuation">:</span> <span class="token string">"./"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span>      <span class="token string">"import"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"libraryName"</span><span class="token punctuation">:</span> <span class="token string">"antd"</span><span class="token punctuation">,</span>        <span class="token string">"style"</span><span class="token punctuation">:</span> <span class="token string">"css"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>æ ¹ç›®å½•æœ‰ä¸ª<code>next.config.js</code>ï¼Œä¸“é—¨ç”¨æ¥ä¿®æ”¹<code>next</code>ä»¥åŠ<code>webpack</code>çš„é…ç½®ã€‚æ›´æ”¹å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/* eslint-disable */</span><span class="token keyword">const</span> withCss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-css'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withLess <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-less'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withPlugins <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"next-compose-plugins"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">[</span>withCss<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withLess<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">withPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>style<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">{</span>  distDir<span class="token punctuation">:</span> <span class="token string">'dist'</span><span class="token punctuation">,</span>  webpack<span class="token punctuation">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token punctuation">{</span> isServer <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> antStyles <span class="token operator">=</span> <span class="token regex">/antd\/.*?\/style\/css.*?/</span>      <span class="token keyword">const</span> origExternals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>config<span class="token punctuation">.</span>externals<span class="token punctuation">]</span>      config<span class="token punctuation">.</span>externals <span class="token operator">=</span> <span class="token punctuation">[</span>        <span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>antStyles<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> origExternals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            origExternals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token operator">...</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> origExternals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> origExternals<span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span>      config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        test<span class="token punctuation">:</span> antStyles<span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token string">'null-loader'</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> config  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="2-3-ä½¿ç”¨antdç»„ä»¶"><a href="#2-3-ä½¿ç”¨antdç»„ä»¶" class="headerlink" title="2.3 ä½¿ç”¨antdç»„ä»¶"></a>2.3 ä½¿ç”¨antdç»„ä»¶</h3><pre class=" language-javascript"><code class="language-javascript">#pages<span class="token operator">/</span>index<span class="token punctuation">.</span>js<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Pagination <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token operator">&lt;</span>Pagination defaultCurrent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> total<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span></code></pre><h3 id="2-4-ä½¿ç”¨less"><a href="#2-4-ä½¿ç”¨less" class="headerlink" title="2.4 ä½¿ç”¨less"></a>2.4 ä½¿ç”¨less</h3><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span> ç¼–å†™index<span class="token punctuation">.</span>less<span class="token punctuation">.</span>title<span class="token punctuation">{</span>  text<span class="token operator">-</span>align<span class="token punctuation">:</span> center<span class="token punctuation">;</span>  font<span class="token operator">-</span>size<span class="token punctuation">:</span> 30px<span class="token punctuation">;</span><span class="token punctuation">}</span>#<span class="token number">2</span><span class="token punctuation">.</span>åœ¨pagesç›®å½•ä¸‹æ–°å»ºtyping<span class="token punctuation">.</span>d<span class="token punctuation">.</span>tsdeclare module <span class="token string">'slash2'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.css'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.less'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.scss'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.sass'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.svg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.png'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.jpg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.jpeg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.gif'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.bmp'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.tiff'</span><span class="token punctuation">;</span>declare module <span class="token string">'omit.js'</span><span class="token punctuation">;</span>#<span class="token number">3</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tsxä¸­ä½¿ç”¨less<span class="token keyword">import</span> <span class="token string">'./index.less'</span>#<span class="token number">4</span><span class="token punctuation">.</span>ç»™lesså¼€å¯æ¨¡å—åŒ–   ä¿®æ”¹nuxt<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js<span class="token punctuation">[</span>withLess<span class="token punctuation">,</span> <span class="token punctuation">{</span>    cssModules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h2 id="3-NextåŸºæœ¬ä½¿ç”¨"><a href="#3-NextåŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.NextåŸºæœ¬ä½¿ç”¨"></a>3.NextåŸºæœ¬ä½¿ç”¨</h2><h3 id="3-1-åˆ›å»ºè§†å›¾"><a href="#3-1-åˆ›å»ºè§†å›¾" class="headerlink" title="3.1  åˆ›å»ºè§†å›¾"></a>3.1  åˆ›å»ºè§†å›¾</h3><p>pagesç›®å½•ä¸‹æ–°å»ºabout.tsx</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'next/link'</span><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'../components/Layout'</span><span class="token keyword">const</span> AboutPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"About | Next.js + TypeScript Example"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>This is the about page<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>      <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">></span>Go home<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> AboutPage</code></pre><p>æµè§ˆå™¨è®¿é—®ï¼š<a href="http://localhost:3000/about">http://localhost:3000/about</a></p><blockquote><p>Next.js æ²¡æœ‰è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œè·¯ç”±çš„è§„åˆ™è·Ÿ PHP æœ‰ç‚¹åƒã€‚åªè¦åœ¨ pages æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºçš„æ–‡ä»¶ï¼Œéƒ½ä¼šé»˜è®¤ç”Ÿæˆä»¥æ–‡ä»¶åå‘½åçš„è·¯ç”±</p></blockquote><h3 id="3-2-é¡µé¢è·³è½¬å’Œè·¯ç”±å‚æ•°"><a href="#3-2-é¡µé¢è·³è½¬å’Œè·¯ç”±å‚æ•°" class="headerlink" title="3.2 é¡µé¢è·³è½¬å’Œè·¯ç”±å‚æ•°"></a>3.2 é¡µé¢è·³è½¬å’Œè·¯ç”±å‚æ•°</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„aæ ‡ç­¾åœ¨é¡µé¢ä¹‹é—´è¿›è¡Œè·³è½¬ï¼Œä½†æ¯è·³è½¬ä¸€æ¬¡ï¼Œéƒ½éœ€è¦å»æœåŠ¡ç«¯è¯·æ±‚ä¸€æ¬¡ã€‚ä¸ºäº†å¢åŠ é¡µé¢çš„è®¿é—®é€Ÿåº¦ï¼Œæ¨èä½¿ç”¨<code>next/link</code>ç»„ä»¶è¿›è¡Œè·³è½¬ã€‚å°† index.js æ”¹å†™ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Pagination <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'next/link'</span><span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token operator">&lt;</span>Pagination defaultCurrent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> total<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">></span>About Page<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>    <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span></code></pre><blockquote><p><strong>Linkæ ‡ç­¾æ”¯æŒä»»æ„reactç»„ä»¶ä½œä¸ºå…¶å­å…ƒç´ ï¼Œä¸ä¸€å®šè¦ç”¨aæ ‡ç­¾ï¼Œåªè¦è¯¥å­å…ƒç´ èƒ½å“åº”onClickäº‹ä»¶</strong>ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>Go about page<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></code></pre><blockquote><p><strong>Linkæ ‡ç­¾ä¸æ”¯æŒæ·»åŠ styleå’ŒclassNameç­‰å±æ€§ï¼Œå¦‚æœè¦ç»™é“¾æ¥å¢åŠ æ ·å¼ï¼Œéœ€è¦åœ¨å­å…ƒç´ ä¸Šæ·»åŠ </strong>ï¼š</p></blockquote><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">"about-link"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span><span class="token string">'#ff0000'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>Go about page<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></code></pre><h3 id="3-3-è·¯ç”±ä¼ å‚"><a href="#3-3-è·¯ç”±ä¼ å‚" class="headerlink" title="3.3 è·¯ç”±ä¼ å‚"></a>3.3 è·¯ç”±ä¼ å‚</h3><p>å¦‚æœéœ€è¦ç»™è·¯ç”±ä¼ å‚æ•°ï¼Œåˆ™ä½¿ç”¨<code>query string</code>çš„å½¢å¼ï¼Œå°† index.tsx æ”¹å†™ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'next/link'</span><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'../components/Layout'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Pagination <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.less'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span><span class="token keyword">const</span> PostLink <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span>any<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>li<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* &lt;Link href={`/about?title=${props.title}`}>      &lt;a>{props.title}&lt;/a>    &lt;/Link> */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> pathname<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> props<span class="token punctuation">.</span>title <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> IndexPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"Home | Next.js + TypeScript Example"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>Hello Next<span class="token punctuation">.</span>js ğŸ‘‹<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token operator">&lt;</span>Pagination defaultCurrent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> total<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about?title=hello"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">></span>About Page<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"Hello next.js"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"next.js is awesome"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"Deploy apps with Zeit"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage</code></pre><p>å–å‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦å€ŸåŠ©æ¡†æ¶æä¾›çš„<code>withRouter</code>æ–¹æ³•ï¼Œå‚æ•°å°è£…åœ¨ query å¯¹è±¡ä¸­ï¼Œå°† about.tsx æ”¹å†™ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">"next/link"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/Layout"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">const</span> AboutPage <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"About | Next.js + TypeScript Example"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    è¿™æ˜¯Abouté¡µé¢    <span class="token punctuation">{</span>flag <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">></span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>AboutPage<span class="token punctuation">)</span><span class="token punctuation">;</span>#æ³¨æ„ï¼šè¿™è¾¹æœ‰ä¸ªbugï¼Œå½“nextå’Œantdç»“åˆä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªé¡µé¢ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°antdç»„ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢ä¸èƒ½è¢«åˆ·æ–°ï¼Œå¦åˆ™è·¯ç”±å¯¼èˆªå¤±æ•ˆï¼Œantdçš„æ ·å¼ä¹Ÿä¸ä¼šè¢«åŠ è½½#å› æ­¤è¿™è¾¹åœ¨abouté¡µé¢ä¸­ä½¿ç”¨äº†Buttonç»„ä»¶ï¼Œå³ä½¿Buttonç»„ä»¶æ²¡æœ‰è¢«æ¸²æŸ“åˆ°é¡µé¢</code></pre><blockquote><p><strong>å¦‚æœå¸Œæœ›æµè§ˆå™¨åœ°å€æ ä¸æ˜¾ç¤ºquery stringï¼Œå¯ä»¥ä½¿ç”¨Linkæ ‡ç­¾çš„aså±æ€§ï¼š</strong></p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Link <span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"/t/123"</span> href<span class="token operator">=</span><span class="token string">"/about?title=123"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>a<span class="token operator">></span>About Page2<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></code></pre><h3 id="3-4-Layout"><a href="#3-4-Layout" class="headerlink" title="3.4 Layout"></a>3.4 Layout</h3><p>æ‰€è°“çš„layoutå°±æ˜¯å°±æ˜¯ç»™ä¸åŒçš„é¡µé¢æ·»åŠ ç›¸åŒçš„headerï¼Œfooterï¼Œnavbarç­‰é€šç”¨çš„éƒ¨åˆ†ï¼ŒåŒæ—¶åˆä¸éœ€è¦å†™é‡å¤çš„ä»£ç ã€‚åœ¨next.jsä¸­å¯ä»¥é€šè¿‡å…±äº«æŸäº›ç»„ä»¶å®ç°layoutã€‚</p><p>åœ¨componentsç›®å½•ä¸‹åˆ›å»ºLayout.tsx</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> ReactNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'next/link'</span><span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">'next/head'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  children<span class="token operator">?</span><span class="token punctuation">:</span> ReactNode  title<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token keyword">const</span> Layout <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">'This is the default title'</span> <span class="token punctuation">}</span><span class="token punctuation">:</span> Props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>Head<span class="token operator">></span>      <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>      <span class="token operator">&lt;</span>meta charSet<span class="token operator">=</span><span class="token string">"utf-8"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"initial-scale=1.0, width=device-width"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>    <span class="token operator">&lt;</span>header<span class="token operator">></span>      <span class="token operator">&lt;</span>nav<span class="token operator">></span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>        <span class="token operator">|</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>        <span class="token operator">|</span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/users"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>Users List<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>        <span class="token operator">|</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"/api/users"</span><span class="token operator">></span>Users API<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span>    <span class="token punctuation">{</span>children<span class="token punctuation">}</span>    <span class="token operator">&lt;</span>footer<span class="token operator">></span>      <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>span<span class="token operator">></span>I'm here to stay <span class="token punctuation">(</span>Footer<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> Layout</code></pre><p>åœ¨é¡µé¢ä¸­å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªLayoutå¸ƒå±€ç»„ä»¶äº†</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> IndexPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"Home | Next.js + TypeScript Example"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>Hello Next<span class="token punctuation">.</span>js ğŸ‘‹<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token operator">&lt;</span>Pagination defaultCurrent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> total<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about?title=hello"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">></span>About Page<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"Hello next.js"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"next.js is awesome"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>PostLink title<span class="token operator">=</span><span class="token string">"Deploy apps with Zeit"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage</code></pre><h3 id="3-5-åŠ¨æ€è·¯ç”±"><a href="#3-5-åŠ¨æ€è·¯ç”±" class="headerlink" title="3.5 åŠ¨æ€è·¯ç”±"></a>3.5 åŠ¨æ€è·¯ç”±</h3><p><img src="/2020/04/22/nextjs/1603180292853.png"></p><p>é€šè¿‡localhost:3000/users/zs   å³å¯è®¿é—®[id].tsx</p><p>é€šè¿‡localhost:3000/users   å³å¯è®¿é—®index.tsx</p><h2 id="4-æ ·å¼åŠ è½½"><a href="#4-æ ·å¼åŠ è½½" class="headerlink" title="4.æ ·å¼åŠ è½½"></a>4.æ ·å¼åŠ è½½</h2><p>å¯¹äºReactåº”ç”¨ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥å¢åŠ æ ·å¼ã€‚ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š </p><ol><li>ä½¿ç”¨ä¼ ç»ŸCSSæ–‡ä»¶ï¼ˆåŒ…æ‹¬SASSï¼ŒLessç­‰ï¼‰ </li><li>åœ¨JSæ–‡ä»¶ä¸­æ’å…¥CSS</li></ol><p>ä½¿ç”¨ä¼ ç»ŸCSSæ–‡ä»¶åœ¨å®é™…ä½¿ç”¨ä¸­ä¼šç”¨åˆ°æŒºå¤šçš„é—®é¢˜ï¼Œæ‰€ä»¥next.jsæ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚next.jså†…éƒ¨é»˜è®¤ä½¿ç”¨<a href="https://github.com/zeit/styled-jsx">styled-jsx</a>æ¡†æ¶å‘jsæ–‡ä»¶ä¸­æ’å…¥CSSã€‚è¿™ç§æ–¹å¼å¼•å…¥çš„æ ·å¼åœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œç”šè‡³çˆ¶å­ç»„ä»¶ä¹‹é—´éƒ½ä¸ä¼šç›¸äº’å½±å“ã€‚</p><h3 id="4-1-styled-jsx"><a href="#4-1-styled-jsx" class="headerlink" title="4.1  styled-jsx"></a>4.1  styled-jsx</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨styled-jsxã€‚å°†<code>about.tsx</code>çš„å†…å®¹æ›¿æ¢å¦‚ä¸‹ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">"next/link"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/Layout"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"antd"</span><span class="token punctuation">;</span><span class="token keyword">const</span> AboutPage <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>Layout title<span class="token operator">=</span><span class="token string">"About | Next.js + TypeScript Example"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>        è¿™æ˜¯Abouté¡µé¢        <span class="token punctuation">{</span>flag <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>            Primary          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>        <span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>style jsx<span class="token operator">></span>        <span class="token punctuation">{</span><span class="token template-string"><span class="token string">`          h1 {            background-color: blue;            font-size: 60px;          }          .container {            color: red;          }        `</span></span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>AboutPage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœéœ€è¦ä¸ºå¯¼èˆªå¢åŠ æ ·å¼ï¼Œéœ€è¦ä¿®æ”¹<code>Layout.tsx</code>ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> ReactNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">"next/link"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">"next/head"</span><span class="token punctuation">;</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  children<span class="token operator">?</span><span class="token punctuation">:</span> ReactNode<span class="token punctuation">;</span>  title<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> Layout <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">"This is the default title"</span> <span class="token punctuation">}</span><span class="token punctuation">:</span> Props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>Head<span class="token operator">></span>      <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>      <span class="token operator">&lt;</span>meta charSet<span class="token operator">=</span><span class="token string">"utf-8"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"initial-scale=1.0, width=device-width"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>    <span class="token operator">&lt;</span>header<span class="token operator">></span>      <span class="token operator">&lt;</span>nav<span class="token operator">></span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span>        <span class="token operator">|</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span>        <span class="token operator">|</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">"/users"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">></span>Users List<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span>        <span class="token operator">|</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"/api/users"</span><span class="token operator">></span>Users API<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span>    <span class="token punctuation">{</span>children<span class="token punctuation">}</span>    <span class="token operator">&lt;</span>footer<span class="token operator">></span>      <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>span<span class="token operator">></span>I'm here to stay <span class="token punctuation">(</span>Footer<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">></span>    <span class="token operator">&lt;</span>style jsx<span class="token operator">></span>      <span class="token punctuation">{</span><span class="token template-string"><span class="token string">`        a {          color: #ef141f;          font-size: 26px;          line-height: 40px;          text-decoration: none;          padding: 0 10px;          text-transform: uppercase;        }        a:hover {          opacity: 0.8;        }      `</span></span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Layout<span class="token punctuation">;</span></code></pre><h3 id="4-2-å…¨å±€æ ·å¼"><a href="#4-2-å…¨å±€æ ·å¼" class="headerlink" title="4.2  å…¨å±€æ ·å¼"></a>4.2  å…¨å±€æ ·å¼</h3><p>å½“æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›å…¨å±€çš„æ ·å¼ï¼Œæ¯”å¦‚rest.cssæˆ–è€…é¼ æ ‡æ‚¬æµ®åœ¨aæ ‡ç­¾ä¸Šæ—¶å‡ºç°ä¸‹åˆ’çº¿ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦åœ¨<code>style-jsx</code>æ ‡ç­¾ä¸Šå¢åŠ <code>global</code>å…³é”®è¯å°±è¡Œäº†ï¼Œæˆ‘ä»¬åœ¨<code>Layout.tsx</code>æ–°å¢å¦‚ä¸‹æ ·å¼ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>style jsx global<span class="token operator">></span>      <span class="token punctuation">{</span><span class="token template-string"><span class="token string">`        a:hover {          text-decoration: underline;        }      `</span></span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h3 id="4-3-ä½¿ç”¨Less-Sass-Cssç­‰"><a href="#4-3-ä½¿ç”¨Less-Sass-Cssç­‰" class="headerlink" title="4.3  ä½¿ç”¨Less/Sass/Cssç­‰"></a>4.3  ä½¿ç”¨Less/Sass/Cssç­‰</h3><p>æ”¯æŒç”¨<code>.css</code>, <code>.scss</code>, <code>.less</code> or <code>.style</code>ï¼Œéœ€è¦é…ç½®é»˜è®¤æ–‡ä»¶ <code>next.config.js</code></p><p>ä¸‹è½½å®‰è£…</p><pre class=" language-cmd"><code class="language-cmd">yarn add @zeit/next-less less    yarn add @zeit/next-css            yarn add @zeit/next-sass node-sass</code></pre><p>ä¿®æ”¹æ ¹ç›®å½•ä¸‹åˆ›å»º<code>next.config.js</code></p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> withCss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-css'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withLess <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-less'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withSass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@zeit/next-sass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">[</span>withCss<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withLess<span class="token punctuation">,</span> <span class="token punctuation">{</span>    cssModules<span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withSass<span class="token punctuation">,</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// cssModules: true</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span></code></pre><p>åœ¨<code>pages</code>ä¸­åˆ›å»º<code>styles.less</code></p><pre class=" language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token selector"><span class="token class">.example</span> </span><span class="token punctuation">{</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@font-size</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span></code></pre><p>åœ¨about.jsä¸­ä½¿ç”¨</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> lessobj <span class="token keyword">from</span> <span class="token string">"./styles.less"</span><span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token punctuation">{</span>lessobj<span class="token punctuation">.</span>example<span class="token punctuation">}</span><span class="token operator">></span>pppp<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></code></pre><h2 id="5-é™æ€æ–‡ä»¶æœåŠ¡"><a href="#5-é™æ€æ–‡ä»¶æœåŠ¡" class="headerlink" title="5.é™æ€æ–‡ä»¶æœåŠ¡"></a>5.é™æ€æ–‡ä»¶æœåŠ¡</h2><h3 id="5-1-å›¾ç‰‡çš„ä½¿ç”¨"><a href="#5-1-å›¾ç‰‡çš„ä½¿ç”¨" class="headerlink" title="5.1 å›¾ç‰‡çš„ä½¿ç”¨"></a>5.1 å›¾ç‰‡çš„ä½¿ç”¨</h3><p>é¡¹ç›®ä¸­ç”¨åˆ°çš„ä¸€äº›é™æ€èµ„æºï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€æ ·å¼æ–‡ä»¶ã€å­—ä½“å›¾æ ‡ã€éŸ³é¢‘è§†é¢‘ç­‰æ–‡ä»¶éƒ½åº”è¯¥æ”¾åˆ°ä¸€ä¸ªstaticç›®å½•ä¸‹ã€‚</p><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹å«<code>static</code>ã€‚é€šè¿‡ä»£ç å¯ä»¥é€šè¿‡<code>/static/</code>æ¥å¼•å…¥ç›¸å…³çš„é™æ€èµ„æºã€‚</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"../static/images/timg1.jpg"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><h3 id="5-2-å­—ä½“å›¾æ ‡çš„ä½¿ç”¨"><a href="#5-2-å­—ä½“å›¾æ ‡çš„ä½¿ç”¨" class="headerlink" title="5.2 å­—ä½“å›¾æ ‡çš„ä½¿ç”¨"></a>5.2 å­—ä½“å›¾æ ‡çš„ä½¿ç”¨</h3><p>ä»Font AweSomeå®˜ç½‘ä¸‹è½½å­—ä½“å›¾æ ‡(å‹ç¼©åŒ…)ï¼Œç„¶åå°†é‡Œé¢çš„fontså’Œcssæ–‡ä»¶å¤¹æ‹·è´åˆ°é¡¹ç›®staticç›®å½•ä¸‹</p><p><a href="https://fontawesome.dashgame.com/">https://fontawesome.dashgame.com/</a></p><p><img src="/2020/04/22/nextjs/1583649395753.png"></p><p>å®‰è£…next-fontså’Œnext-images</p><pre><code>yarn add next-fonts@1.0.3yarn add next-images@1.3.1</code></pre><p>åœ¨next.config.jsä¸­è¿›è¡Œé…ç½®</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/* eslint-disable */</span><span class="token keyword">const</span> withCss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-css'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withLess <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@zeit/next-less'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withSass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@zeit/next-sass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> withFonts <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'next-fonts'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withImages <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'next-images'</span><span class="token punctuation">)</span><span class="token keyword">const</span> withPlugins <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"next-compose-plugins"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">[</span>withCss<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withLess<span class="token punctuation">,</span> <span class="token punctuation">{</span>    cssModules<span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withSass<span class="token punctuation">,</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// cssModules: true</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withFonts<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>withImages<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span></code></pre><p>åœ¨about.jsä¸­ä½¿ç”¨å­—ä½“å›¾æ ‡</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">'@/static/css/font-awesome.css'</span><span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"fa fa-star"</span><span class="token operator">></span>å­—ä½“å›¾æ ‡<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></code></pre><h2 id="6-Nextçš„SSR"><a href="#6-Nextçš„SSR" class="headerlink" title="6.Nextçš„SSR"></a>6.Nextçš„SSR</h2><h3 id="6-1-SSRä»‹ç»"><a href="#6-1-SSRä»‹ç»" class="headerlink" title="6.1 SSRä»‹ç»"></a>6.1 SSRä»‹ç»</h3><p>æœåŠ¡å™¨ç«¯æ¸²æŸ“(SSR: Server Side Rendering)ï¼Œreactå‰ç«¯åšå¥½çš„ç•Œé¢ï¼Œåå°æŠŠç•Œé¢æ¸²æŸ“æˆhtmlä¹‹åï¼Œåœ¨ä¼ ç»™å‰å°ã€‚</p><p>å¥½å¤„ï¼š</p><blockquote><p>1.SEOä¼˜åŒ–</p><p>2.åŠ å¿«é¦–å±æ¸²æŸ“é€Ÿåº¦</p></blockquote><h3 id="6-2-è¿œç¨‹æ•°æ®è·å–"><a href="#6-2-è¿œç¨‹æ•°æ®è·å–" class="headerlink" title="6.2 è¿œç¨‹æ•°æ®è·å–"></a>6.2 è¿œç¨‹æ•°æ®è·å–</h3><p>Next.jsæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„è·å–è¿œç¨‹æ•°æ®çš„æ¥å£:<code>getInitialProps</code>ï¼Œé€šè¿‡<code>getInitialProps</code>æˆ‘ä»¬å¯ä»¥è·å–åˆ°è¿œç¨‹æ•°æ®å¹¶èµ‹å€¼ç»™é¡µé¢çš„propsã€‚<code>getInitialProps</code>å³å¯ä»¥ç”¨åœ¨æœåŠ¡ç«¯ä¹Ÿå¯ä»¥ç”¨åœ¨å‰ç«¯ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®‰è£…<a href="https://github.com/developit/unfetch">isomorphic-unfetch</a>ï¼Œå®ƒæ˜¯åŸºäºfetchå®ç°çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ï¼š</p><pre><code>yarn add isomorphic-unfetch</code></pre><h4 id="6-2-1-æ— çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps"><a href="#6-2-1-æ— çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps" class="headerlink" title="6.2.1  æ— çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps"></a>6.2.1  æ— çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps</h4><p>æ–°å»ºhome.tsxï¼Œç„¶åæˆ‘ä»¬ä¿®æ”¹<code>home.tsx</code>å¦‚ä¸‹ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"antd"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/Layout"</span><span class="token punctuation">;</span><span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">"isomorphic-unfetch"</span><span class="token punctuation">;</span>type IProps <span class="token operator">=</span> <span class="token punctuation">{</span>  shows<span class="token punctuation">:</span>     <span class="token punctuation">{</span>      show<span class="token punctuation">:</span> <span class="token punctuation">{</span>        id<span class="token punctuation">:</span> number<span class="token punctuation">;</span>        name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>Layout<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Marvel TV Shows<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>ul<span class="token operator">></span>        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>shows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> show <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>show<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>show<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>      <span class="token operator">&lt;</span>Button<span class="token operator">></span>æŒ‰é’®<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>Home<span class="token punctuation">.</span>getInitialProps <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://api.tvmaze.com/search/shows?q=marvel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>    shows<span class="token punctuation">:</span> data<span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Home<span class="token punctuation">;</span></code></pre><h4 id="6-2-2-æœ‰çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps"><a href="#6-2-2-æœ‰çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps" class="headerlink" title="6.2.2  æœ‰çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps"></a>6.2.2  æœ‰çŠ¶æ€ç»„ä»¶å®šä¹‰getInitialProps</h4><p>æ–°å»ºuser.tsxï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@/components/layout'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">'isomorphic-unfetch'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token number">43519</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`https://api.tvmaze.com/shows/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span> show <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>show<span class="token punctuation">.</span>summary<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>            <span class="token operator">&lt;</span>Layout<span class="token operator">></span>                <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>show<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>                <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>show<span class="token punctuation">.</span>summary<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>                <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>show<span class="token punctuation">.</span>image<span class="token punctuation">.</span>medium<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>        <span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="6-3-getInitialPropsçš„åŸç†"><a href="#6-3-getInitialPropsçš„åŸç†" class="headerlink" title="6.3 getInitialPropsçš„åŸç†"></a>6.3 getInitialPropsçš„åŸç†</h3><p>å½“é¡µé¢æ¸²æŸ“æ—¶åŠ è½½æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•<code>getInitialProps</code>ã€‚å®ƒèƒ½å¼‚æ­¥è·å–æ•°æ®ï¼Œå¹¶ç»‘å®šåœ¨ç»„ä»¶çš„<code>props</code>ä¸Šã€‚</p><p>getInitialProps()èƒ½å¤Ÿåœ¨æœåŠ¡çš„è¿è¡Œï¼Œä¹Ÿèƒ½å¤Ÿåœ¨clientè¿è¡Œã€‚å½“é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼ŒgetInitialProps()ä¼šæ‰§è¡Œï¼ŒgetInitialProps()è¿”å›çš„æ•°æ®ï¼Œä¼šåºåˆ—åŒ–åæ·»åŠ åˆ° <code>window.__NEXT_DATA__.props</code>ä¸Šï¼Œå†™å…¥HTMLæºç é‡Œï¼Œç±»ä¼¼äº<code>&lt;script&gt;window.__NEXT_DATA__={props:{xxx}}&lt;/script&gt;</code>ã€‚è¿™æ ·æœåŠ¡ç«¯çš„getInitialProps()å°±å®ç°äº†æŠŠæ•°æ®ä¼ é€ç»™äº†å®¢æˆ·ç«¯ã€‚</p><p>å®¢æˆ·ç«¯çš„æ”¶åˆ°äº†HTMLæºç ï¼Œæœ‰äº†æ•°æ®ï¼Œæƒ³åšä»€ä¹ˆéƒ½å¯ä»¥ã€‚æ¯”å¦‚å¯ä»¥æ‹¿ç€<code>window.__NEXT_DATA__.props</code>çš„æ•°æ®æ¥åˆå§‹åŒ–Reactç»„ä»¶çš„propså±æ€§ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><blockquote><p>å½“é¡µé¢æ˜¯ç”¨æˆ·é€šè¿‡è¶…é“¾æ¥è·³è½¬è¿‡å»ï¼Œè€Œä¸æ˜¯ç”¨æˆ·è¾“å…¥ç½‘å€æˆ–åˆ·æ–°æ¥è®¿é—®çš„ï¼Œè¿™æ—¶å€™æ˜¯çº¯å®¢æˆ·ç«¯çš„è¡Œä¸ºï¼Œæ²¡æœ‰HTTPè¯·æ±‚å‘å‡ºå»ã€‚ç”¨æˆ·å¦‚æœé€šè¿‡è¶…é“¾æ¥è·³è½¬å›è¿™ä¸ªé¡µé¢ï¼Œå®¢æˆ·ç«¯çš„getInitialProps()å¼€å§‹èµ·ä½œç”¨äº†ï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–HTMLæºç é‡Œ window.__NEXT_DATA__.propsé‡Œçš„æ•°æ®å¹¶ä½œä¸ºReactç»„ä»¶çš„propsã€‚</p><p>å½“é¡µé¢åˆæ¬¡åŠ è½½æˆ–è€…åˆ·æ–°é¡µé¢æ—¶ï¼Œ<code>getInitialProps</code>åªä¼šåŠ è½½åœ¨æœåŠ¡ç«¯ã€‚åªæœ‰å½“è·¯ç”±è·³è½¬æ—¶ï¼Œå®¢æˆ·ç«¯æ‰ä¼šæ‰§è¡Œ<code>getInitialProps</code>ã€‚</p></blockquote><p><strong>æ³¨æ„ï¼š<code>getInitialProps</code>å°†ä¸èƒ½ä½¿ç”¨åœ¨å­ç»„ä»¶ä¸­ã€‚åªèƒ½ä½¿ç”¨åœ¨<code>pages</code>é¡µé¢ä¸­ã€‚</strong></p><h3 id="6-4-getInitialPropsçš„å…¥å‚"><a href="#6-4-getInitialPropsçš„å…¥å‚" class="headerlink" title="6.4  getInitialPropsçš„å…¥å‚"></a>6.4  getInitialPropsçš„å…¥å‚</h3><p>Nextå¯¹Reactç»„ä»¶çš„getInitialPropsç”Ÿå‘½å‘¨æœŸæ–¹æ³•åšäº†æ”¹é€ ï¼Œä¼ å…¥ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼Œå…·æœ‰ä¸åŒçš„å±æ€§ï¼š</p><ul><li>req: HTTPè¯·æ±‚å¯¹è±¡ï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ç‹¬æœ‰ï¼‰</li><li>res: HTTPå“åº”å¯¹è±¡ï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ç‹¬æœ‰ï¼‰</li><li>pathname: URLä¸­çš„è·¯å¾„éƒ¨åˆ†</li><li>queryï¼šURLä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸²éƒ¨åˆ†è§£æå‡ºçš„å¯¹è±¡</li><li>errï¼šé”™è¯¯å¯¹è±¡ï¼Œå¦‚æœåœ¨æ¸²æŸ“æ—¶å‘ç”Ÿäº†é”™è¯¯</li><li>xhrï¼šXMLHttpRequestå¯¹è±¡ï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ç‹¬æœ‰ï¼‰</li></ul><h2 id="7-åå°mock"><a href="#7-åå°mock" class="headerlink" title="7.åå°mock"></a>7.åå°mock</h2><pre class=" language-javascript"><code class="language-javascript">pages<span class="token operator">/</span>apiä¸­å¯ä»¥å†™mockæ¥å£page<span class="token operator">/</span>api<span class="token operator">/</span>city<span class="token operator">/</span>index<span class="token punctuation">.</span>ts    é€šè¿‡localhost<span class="token punctuation">:</span><span class="token number">3000</span><span class="token operator">/</span>api<span class="token operator">/</span>cityå³å¯è®¿é—®è¯¥æ¥å£page<span class="token operator">/</span>api<span class="token operator">/</span>city<span class="token operator">/</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>ts   é€šè¿‡localhost<span class="token punctuation">:</span><span class="token number">3000</span><span class="token operator">/</span>api<span class="token operator">/</span>city<span class="token operator">/</span>wuxiå³å¯è®¿é—®è¯¥æ¥å£</code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//page/api/city/index.ts</span><span class="token keyword">import</span> <span class="token punctuation">{</span> NextApiRequest<span class="token punctuation">,</span> NextApiResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'next'</span><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span>_req<span class="token punctuation">:</span> NextApiRequest<span class="token punctuation">,</span> res<span class="token punctuation">:</span> NextApiResponse<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'å—äº¬'</span><span class="token punctuation">,</span><span class="token string">'æ— é”¡'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> statusCode<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> err<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> handler</code></pre>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NextJs </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant Design Pro</title>
      <link href="2020/02/25/ant-design-pro/"/>
      <url>2020/02/25/ant-design-pro/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Ant-Design-Proä»‹ç»"><a href="#1-Ant-Design-Proä»‹ç»" class="headerlink" title="1.Ant Design Proä»‹ç»"></a>1.Ant Design Proä»‹ç»</h1><p>Ant Design Pro æ˜¯ä¸€ä¸ªä¼ä¸šçº§ä¸­åå°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆ</p><blockquote><p>ç‰¹æ€§</p></blockquote><ul><li><strong>ä¼˜é›…ç¾è§‚</strong>ï¼šåŸºäº Ant Design ä½“ç³»ç²¾å¿ƒè®¾è®¡</li><li><strong>å¸¸è§è®¾è®¡æ¨¡å¼</strong>ï¼šæç‚¼è‡ªä¸­åå°åº”ç”¨çš„å…¸å‹é¡µé¢å’Œåœºæ™¯</li><li><strong>æœ€æ–°æŠ€æœ¯æ ˆ</strong>ï¼šä½¿ç”¨ React/dva/antd ç­‰å‰ç«¯å‰æ²¿æŠ€æœ¯å¼€å‘</li><li><strong>å“åº”å¼</strong>ï¼šé’ˆå¯¹ä¸åŒå±å¹•å¤§å°è®¾è®¡</li><li><strong>ä¸»é¢˜</strong>ï¼šå¯é…ç½®çš„ä¸»é¢˜æ»¡è¶³å¤šæ ·åŒ–çš„å“ç‰Œè¯‰æ±‚</li><li><strong>å›½é™…åŒ–</strong>ï¼šå†…å»ºä¸šç•Œé€šç”¨çš„å›½é™…åŒ–æ–¹æ¡ˆ</li><li><strong>æœ€ä½³å®è·µ</strong>ï¼šè‰¯å¥½çš„å·¥ç¨‹å®è·µåŠ©æ‚¨æŒç»­äº§å‡ºé«˜è´¨é‡ä»£ç </li><li><strong>Mock æ•°æ®</strong>ï¼šå®ç”¨çš„æœ¬åœ°æ•°æ®è°ƒè¯•æ–¹æ¡ˆ</li><li><strong>UI æµ‹è¯•</strong>ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ä¿éšœå‰ç«¯äº§å“è´¨é‡</li></ul><p><img src="https://i.loli.net/2020/11/03/dCVM1AmtL3OrY4P.png"></p><p>åˆ›å»ºé¡¹ç›®ï¼š</p><p>yarn create umi myprotest</p><p>yarn install</p><p>yarn start</p><p>æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºé¡¹ç›®çš„æ—¶å€™é€‰æ‹©V5ç‰ˆæœ¬</p><p>â€‹        Pro V4+antd@4 ç‰ˆæœ¬æƒé™éªŒè¯ä¸å¥½ç”¨ã€‚<strong>Pro V4+antd@4 å¯ä»¥æŸ¥çœ‹å®Œæ•´ç‰ˆçš„ant design proé¡¹ç›®</strong>ã€‚</p><p>â€‹        Pro V4+antd@3 ç‰ˆæœ¬æœ‰åŒºå—ä¸å¥½ç”¨</p><h1 id="2-ç›®å½•ç»“æ„å’Œé…ç½®ä»‹ç»"><a href="#2-ç›®å½•ç»“æ„å’Œé…ç½®ä»‹ç»" class="headerlink" title="2.ç›®å½•ç»“æ„å’Œé…ç½®ä»‹ç»"></a>2.ç›®å½•ç»“æ„å’Œé…ç½®ä»‹ç»</h1><h2 id="2-1-ç›®å½•ç»“æ„"><a href="#2-1-ç›®å½•ç»“æ„" class="headerlink" title="2.1 ç›®å½•ç»“æ„"></a>2.1 ç›®å½•ç»“æ„</h2><p><img src="https://i.loli.net/2020/11/03/PN8yAJ3OzcvteQM.png"></p><h2 id="2-2-é…ç½®æ–‡ä»¶"><a href="#2-2-é…ç½®æ–‡ä»¶" class="headerlink" title="2.2 é…ç½®æ–‡ä»¶"></a>2.2 é…ç½®æ–‡ä»¶</h2><h3 id="2-2-1-config-ts"><a href="#2-2-1-config-ts" class="headerlink" title="2.2.1 config.ts"></a>2.2.1 config.ts</h3><p>è¯¥æ–‡ä»¶ç±»ä¼¼.umirc.tsæ–‡ä»¶</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//å¼•å…¥umiä¸­çš„é…ç½®æ–‡ä»¶çš„ç±»å‹ tsä¸­è¦ç”¨</span><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¼•å…¥é»˜è®¤çš„é…ç½®æ–‡ä»¶</span><span class="token keyword">import</span> defaultSettings <span class="token keyword">from</span> <span class="token string">'./defaultSettings'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä»£ç†é…ç½®æ–‡ä»¶</span><span class="token keyword">import</span> proxy <span class="token keyword">from</span> <span class="token string">'./proxy'</span><span class="token punctuation">;</span><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å½“å‰å¼€å‘ç¯å¢ƒ\å‘å¸ƒç¯å¢ƒ</span><span class="token keyword">const</span> <span class="token punctuation">{</span> REACT_APP_ENV <span class="token punctuation">}</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¼å‡ºé…ç½®å¯¹è±¡</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//æ–‡ä»¶åæ”¯æŒhashå‘½å</span>  hash<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//å¯ç”¨dvaæ’ä»¶</span>  <span class="token comment" spellcheck="true">//æ¯ä¸ªæ’ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª id å’Œä¸€ä¸ª keyï¼Œid æ˜¯è·¯å¾„çš„ç®€å†™ï¼Œkey æ˜¯è¿›ä¸€æ­¥ç®€åŒ–åç”¨äºé…ç½®çš„å”¯ä¸€å€¼ã€‚</span>  <span class="token comment" spellcheck="true">//æ¯”å¦‚æ’ä»¶ /node_modules/@umijs/plugin-antd ,id ä¸º @umijs/plugin-antdï¼Œkey ä¸º antdã€‚</span>  antd<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//å¯ç”¨dvaæ’ä»¶</span>  dva<span class="token punctuation">:</span> <span class="token punctuation">{</span>    hmr<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//çƒ­æ›´æ–°</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//å¯ç”¨layoutå¸ƒå±€æ’ä»¶  ant design proä¸­éœ€è¦ä½¿ç”¨</span>  layout<span class="token punctuation">:</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'Ant Design Pro'</span><span class="token punctuation">,</span>    locale<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true">//å›½é™…åŒ–</span>    siderWidth<span class="token punctuation">:</span> <span class="token number">208</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//ä¾§è¾¹æ å®½åº¦</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//å¯ç”¨localeå›½é™…åŒ–æ’ä»¶ é…ç½®ä¹‹åæ‰å¯ä»¥ä½¿ç”¨useIntl </span>  locale<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//é»˜è®¤çš„è¯­è¨€ç¯å¢ƒ</span>    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//antdå¼€å¯å›½é™…åŒ–</span>    antd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true">// default true, when it is true, will use `navigator.language` overwrite default</span>    baseNavigator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//é…ç½®æŒ‰éœ€åŠ è½½   å³æ˜¯å¦æŠŠæ„å»ºäº§ç‰©è¿›è¡Œæ‹†åˆ†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¸‹è½½é¢å¤–çš„ JS å†æ‰§è¡Œã€‚</span>  dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span>    loading<span class="token punctuation">:</span> <span class="token string">'@/components/PageLoading/index'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//å…¼å®¹ie11</span>  targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>    ie<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// umi routes: https://umijs.org/docs/routing</span>  <span class="token comment" spellcheck="true">//è·¯ç”±é…ç½®</span>  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//ä¸ä½¿ç”¨é»˜è®¤çš„é¡µé¢å¸ƒå±€æ¨¡æ¿ï¼Œå¦‚æœæ­¤å±æ€§ä¸å†™å°±ä¼šä½¿ç”¨é»˜è®¤é¡µé¢å¸ƒå±€æ¨¡æ¿(app.tsxä¸­å£°æ˜çš„layout)</span>      layout<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//å­è·¯ç”±</span>      routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          name<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>          path<span class="token punctuation">:</span> <span class="token string">'/user/login'</span><span class="token punctuation">,</span>          component<span class="token punctuation">:</span> <span class="token string">'./user/login'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/welcome'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'welcome'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// access: 'canUser',  //åªæœ‰userç™»å½•å¯ä»¥è®¿é—®  åœ¨access.tsä¸­æœ‰å£°æ˜</span>      icon<span class="token punctuation">:</span> <span class="token string">'smile'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æŒ‡å®šiconå›¾æ ‡  å¯ä»¥ä½¿ç”¨ant designä¸­çš„å›¾æ ‡</span>      component<span class="token punctuation">:</span> <span class="token string">'./Welcome'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>      icon<span class="token punctuation">:</span> <span class="token string">'crown'</span><span class="token punctuation">,</span>      access<span class="token punctuation">:</span> <span class="token string">'canAdmin'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//åªæœ‰adminç™»å½•å¯ä»¥è®¿é—®  åœ¨access.tsä¸­æœ‰å£°æ˜</span>      component<span class="token punctuation">:</span> <span class="token string">'./Admin'</span><span class="token punctuation">,</span>      routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          path<span class="token punctuation">:</span> <span class="token string">'/admin/sub-page'</span><span class="token punctuation">,</span>          name<span class="token punctuation">:</span> <span class="token string">'sub-page'</span><span class="token punctuation">,</span>          icon<span class="token punctuation">:</span> <span class="token string">'smile'</span><span class="token punctuation">,</span>          component<span class="token punctuation">:</span> <span class="token string">'./Welcome'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      name<span class="token punctuation">:</span> <span class="token string">'list.table-list'</span><span class="token punctuation">,</span>      icon<span class="token punctuation">:</span> <span class="token string">'table'</span><span class="token punctuation">,</span>      path<span class="token punctuation">:</span> <span class="token string">'/list'</span><span class="token punctuation">,</span>      component<span class="token punctuation">:</span> <span class="token string">'./ListTableList'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      redirect<span class="token punctuation">:</span> <span class="token string">'/welcome'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      component<span class="token punctuation">:</span> <span class="token string">'./404'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// Theme for antd: https://ant.design/docs/react/customize-theme-cn</span>  theme<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ...darkTheme,</span>    <span class="token comment" spellcheck="true">// ä¸»è¦é¢œè‰²,</span>    <span class="token string">'primary-color'</span><span class="token punctuation">:</span> defaultSettings<span class="token punctuation">.</span>primaryColor<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//ä¸»é¢˜é¢œè‰²é…ç½®</span>    <span class="token comment" spellcheck="true">// 'font-size-base': '14px',</span>    <span class="token comment" spellcheck="true">// 'badge-font-size': '12px',</span>    <span class="token comment" spellcheck="true">// 'btn-font-size-lg': '@font-size-base',</span>    <span class="token comment" spellcheck="true">// 'menu-dark-bg': '#00182E',</span>    <span class="token comment" spellcheck="true">// 'menu-dark-submenu-bg': '#000B14',</span>    <span class="token comment" spellcheck="true">// 'layout-sider-background': '#00182E',</span>    <span class="token comment" spellcheck="true">// 'layout-body-background': '#f0f2f5',</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// @ts-ignore</span>  title<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  ignoreMomentLocale<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//ä»£ç†</span>  proxy<span class="token punctuation">:</span> proxy<span class="token punctuation">[</span>REACT_APP_ENV <span class="token operator">||</span> <span class="token string">'dev'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  manifest<span class="token punctuation">:</span> <span class="token punctuation">{</span>    basePath<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//åˆ«å</span>  alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token string">'@'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="2-2-2-defaultSettings-ts"><a href="#2-2-2-defaultSettings-ts" class="headerlink" title="2.2.2 defaultSettings.ts"></a>2.2.2 defaultSettings.ts</h3><p>é¡µé¢æ ·å¼çš„é…ç½®æ–‡ä»¶</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Settings <span class="token keyword">as</span> LayoutSettings <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-layout'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  navTheme<span class="token punctuation">:</span> <span class="token string">'dark'</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">//ä¸»é¢˜é¢œè‰²   dark light</span>  primaryColor<span class="token punctuation">:</span> <span class="token string">'#1890ff'</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">//ä¸»è¦é¢œè‰²</span>  layout<span class="token punctuation">:</span> <span class="token string">'mix'</span><span class="token punctuation">,</span>             <span class="token comment" spellcheck="true">//å¸ƒå±€æ–¹å¼  slide</span>  contentWidth<span class="token punctuation">:</span> <span class="token string">'Fluid'</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true">//å†…å®¹å®½åº¦</span>  fixedHeader<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//å›ºå®šå¤´</span>  fixSiderbar<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">//å›ºå®šå·¦ä¾§å†…å®¹</span>  colorWeak<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">//å¼±è§†</span>  menu<span class="token punctuation">:</span> <span class="token punctuation">{</span>    locale<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">//èœå•å›½é™…åŒ–</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  title<span class="token punctuation">:</span> <span class="token string">'Ant Design Pro'</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">//æ ‡é¢˜</span>  pwa<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  iconfontUrl<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">//iconå›¾æ ‡åœ°å€</span><span class="token punctuation">}</span> <span class="token keyword">as</span> LayoutSettings <span class="token operator">&amp;</span> <span class="token punctuation">{</span>  pwa<span class="token punctuation">:</span> boolean<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="2-2-3-proxy-ts"><a href="#2-2-3-proxy-ts" class="headerlink" title="2.2.3 proxy.ts"></a>2.2.3 proxy.ts</h3><p>è¯¥æ–‡ä»¶ä¸»è¦æ˜¯ä»£ç†çš„é…ç½®æ–‡ä»¶ï¼Œä»…åœ¨å¼€å‘ç¯å¢ƒæœ‰æ•ˆ</p><h3 id="2-2-4-app-tsx"><a href="#2-2-4-app-tsx" class="headerlink" title="2.2.4 app.tsx"></a>2.2.4 app.tsx</h3><p>app.tsxä¸ºè¿è¡Œæ—¶é…ç½®æ–‡ä»¶ï¼Œå¯¼å‡ºçš„ä¿¡æ¯ä¼šä½¿ç”¨å¯¹åº”çš„æ’ä»¶åœ¨è¿è¡Œæ—¶é…ç½®åˆ°ç¨‹åºä¸­</p><h2 id="2-3-é…ç½®è¯¦è§£"><a href="#2-3-é…ç½®è¯¦è§£" class="headerlink" title="2.3 é…ç½®è¯¦è§£"></a>2.3 é…ç½®è¯¦è§£</h2><h3 id="2-3-1-è·¯ç”±å’Œèœå•"><a href="#2-3-1-è·¯ç”±å’Œèœå•" class="headerlink" title="2.3.1 è·¯ç”±å’Œèœå•"></a>2.3.1 è·¯ç”±å’Œèœå•</h3><p>ant design proä¼šæ ¹æ®é…ç½®çš„è·¯ç”±è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„èœå•</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// umi routes: https://umijs.org/docs/routing</span><span class="token comment" spellcheck="true">// hideChildrenInMenu ç”¨äºéšè—ä¸éœ€è¦åœ¨èœå•ä¸­å±•ç¤ºçš„å­è·¯ç”±ã€‚ç”¨æ³•å¯ä»¥æŸ¥çœ‹ åˆ†æ­¥è¡¨å• çš„é…ç½®ã€‚</span><span class="token comment" spellcheck="true">// hideInMenu å¯ä»¥åœ¨èœå•ä¸­ä¸å±•ç¤ºè¿™ä¸ªè·¯ç”±ï¼ŒåŒ…æ‹¬å­è·¯ç”±ã€‚</span><span class="token comment" spellcheck="true">//è·¯ç”±é…ç½®</span>routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//ä¸ä½¿ç”¨é»˜è®¤çš„é¡µé¢å¸ƒå±€æ¨¡æ¿ï¼Œå¦‚æœæ­¤å±æ€§ä¸å†™å°±ä¼šä½¿ç”¨é»˜è®¤é¡µé¢å¸ƒå±€æ¨¡æ¿(app.tsxä¸­å£°æ˜çš„layout)</span>        layout<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//å­è·¯ç”±</span>        routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>                path<span class="token punctuation">:</span> <span class="token string">'/user/login'</span><span class="token punctuation">,</span>                component<span class="token punctuation">:</span> <span class="token string">'./user/login'</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/welcome'</span><span class="token punctuation">,</span>        name<span class="token punctuation">:</span> <span class="token string">'welcome'</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// access: 'canUser',  //åªæœ‰userç™»å½•å¯ä»¥è®¿é—®  åœ¨access.tsä¸­æœ‰å£°æ˜</span>        icon<span class="token punctuation">:</span> <span class="token string">'smile'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æŒ‡å®šiconå›¾æ ‡  å¯ä»¥ä½¿ç”¨ant designä¸­çš„å›¾æ ‡</span>        component<span class="token punctuation">:</span> <span class="token string">'./Welcome'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>        name<span class="token punctuation">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>        icon<span class="token punctuation">:</span> <span class="token string">'crown'</span><span class="token punctuation">,</span>        access<span class="token punctuation">:</span> <span class="token string">'canAdmin'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//åªæœ‰adminç™»å½•å¯ä»¥è®¿é—®  åœ¨access.tsä¸­æœ‰å£°æ˜</span>        component<span class="token punctuation">:</span> <span class="token string">'./Admin'</span><span class="token punctuation">,</span>        routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>                path<span class="token punctuation">:</span> <span class="token string">'/admin/sub-page'</span><span class="token punctuation">,</span>                name<span class="token punctuation">:</span> <span class="token string">'sub-page'</span><span class="token punctuation">,</span>                icon<span class="token punctuation">:</span> <span class="token string">'smile'</span><span class="token punctuation">,</span>                component<span class="token punctuation">:</span> <span class="token string">'./Welcome'</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        name<span class="token punctuation">:</span> <span class="token string">'list.table-list'</span><span class="token punctuation">,</span>        icon<span class="token punctuation">:</span> <span class="token string">'table'</span><span class="token punctuation">,</span>        path<span class="token punctuation">:</span> <span class="token string">'/list'</span><span class="token punctuation">,</span>        component<span class="token punctuation">:</span> <span class="token string">'./ListTableList'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>        redirect<span class="token punctuation">:</span> <span class="token string">'/welcome'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        component<span class="token punctuation">:</span> <span class="token string">'./404'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><h3 id="2-3-2-æƒé™"><a href="#2-3-2-æƒé™" class="headerlink" title="2.3.2 æƒé™"></a>2.3.2 æƒé™</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token number">1</span><span class="token punctuation">.</span>å½“è¦è®¾å®šæŸäº›èœå•åªæœ‰éƒ¨åˆ†ç”¨æˆ·å¯è§çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨èœå•é…ç½®ä¸­å†™ access<span class="token punctuation">:</span> <span class="token string">'canAdmin'</span><span class="token number">2</span><span class="token punctuation">.</span>canAdminçš„ä¿¡æ¯åœ¨src<span class="token operator">/</span>access<span class="token punctuation">.</span>tsä¸­å£°æ˜ï¼Œè¯¥æ–‡ä»¶ä¸­å¯¼å‡ºçš„accesså‡½æ•°ä¼šç”¨æ’ä»¶@umijs<span class="token operator">/</span>plugin<span class="token operator">-</span>accessè¿›è¡Œè¿è¡Œæ—¶é…ç½®ï¼Œå‡½æ•°è¿”å›çš„ç»“æœè¦æ˜¯ä¸‹é¢ç±»å‹ <span class="token operator">*</span>  è¿”å›ç»“æœ<span class="token punctuation">:</span> <span class="token operator">*</span>  <span class="token punctuation">{</span> <span class="token operator">*</span>     canAdmin<span class="token punctuation">:</span><span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token operator">*</span>     canUser<span class="token punctuation">:</span><span class="token keyword">false</span> <span class="token operator">*</span>  <span class="token punctuation">}</span><span class="token number">3</span><span class="token punctuation">.</span>useAccessï¼šå¯ä»¥åœ¨é¡µé¢æ ¹æ®ä¸åŒçš„ç™»å½•ç”¨æˆ·æ˜¾ç¤ºä¸åŒçš„ä¿¡æ¯   <span class="token keyword">import</span> <span class="token punctuation">{</span> useAccess<span class="token punctuation">,</span> Access <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>   <span class="token keyword">const</span> access <span class="token operator">=</span> <span class="token function">useAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//æ­¤å¤„ä¸ºå½“å‰è¿”å›çš„ç»“æœæ•°æ®</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span>access<span class="token punctuation">.</span>canReadFoo<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...</span>   <span class="token punctuation">}</span>    <span class="token operator">&lt;</span>Access     accessible<span class="token operator">=</span><span class="token punctuation">{</span>access<span class="token punctuation">.</span>canReadFoo<span class="token punctuation">}</span>     fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>Can not read foo content<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>          <span class="token operator">></span>          Foo content<span class="token punctuation">.</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Access<span class="token operator">></span></code></pre><h3 id="2-3-3-å¸ƒå±€"><a href="#2-3-3-å¸ƒå±€" class="headerlink" title="2.3.3 å¸ƒå±€"></a>2.3.3 å¸ƒå±€</h3><pre class=" language-javascript"><code class="language-javascript">å½“æŸä¸ªè·¯ç”±ä¸éœ€è¦å¸ƒå±€æ–‡ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨config<span class="token punctuation">.</span>tsçš„è·¯ç”±é…ç½®ä¸­è®¾å®šlayout<span class="token punctuation">:</span> <span class="token boolean">false</span>å³å¯ï¼Œå¦‚æœæ²¡æœ‰å†™è¿™ä¸ªï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤çš„å¸ƒå±€æ–‡ä»¶é»˜è®¤çš„å¸ƒå±€æ–‡ä»¶åœ¨app<span class="token punctuation">.</span>tsxä¸­layoutä¸­å£°æ˜ï¼Œä¼šä½¿ç”¨@umijs<span class="token operator">/</span>plugin<span class="token operator">-</span>layoutè¿›è¡Œè¿è¡Œæ—¶é…ç½®</code></pre><h3 id="2-3-4-InitialState"><a href="#2-3-4-InitialState" class="headerlink" title="2.3.4 InitialState"></a>2.3.4 InitialState</h3><p>åœ¨app.tsxä¸­å¯¼å‡ºgetInitialStateæ–¹æ³•ï¼Œä¼šä½¿ç”¨@umijs/plugin-initial-stateæ’ä»¶è¿›è¡Œè¿è¡Œæ—¶é…ç½®ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ•´ä¸ªåº”ç”¨æœ€å¼€å§‹æ‰§è¡Œï¼Œè¿”å›å€¼ä¼šä½œä¸ºå…¨å±€å…±äº«çš„æ•°æ®ã€‚(æ¯æ¬¡åˆ·æ–°é¡µé¢çš„ä¹‹åéƒ½ä¼šæ‰§è¡Œ)</p><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span> app<span class="token punctuation">.</span>tsxä½¿ç”¨getInitialStateæä¾›å…¨å±€å…±äº«æ•°æ®<span class="token comment" spellcheck="true">/**@umijs/plugin-initial-state  ä¼šå¯ç”¨è¿™ä¸ªæ’ä»¶* getInitialStateä¼šåœ¨æ•´ä¸ªåº”ç”¨æœ€å¼€å§‹æ‰§è¡Œï¼Œè¿”å›å€¼ä¼šä½œä¸ºå…¨å±€å…±äº«çš„æ•°æ®* å…¶ä»–ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨useModelæ¥è·å–è¿™ä»½æ•°æ® (ç±»ä¼¼ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼)*/</span><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getInitialState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token punctuation">{</span>  currentUser<span class="token operator">?</span><span class="token punctuation">:</span> API<span class="token punctuation">.</span>CurrentUser<span class="token punctuation">;</span>  settings<span class="token operator">?</span><span class="token punctuation">:</span> LayoutSettings<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// å¦‚æœæ˜¯ç™»å½•é¡µé¢ï¼Œä¸æ‰§è¡Œ</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> <span class="token string">'/user/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> currentUser <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">queryCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        currentUser<span class="token punctuation">,</span>        settings<span class="token punctuation">:</span> defaultSettings<span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>    settings<span class="token punctuation">:</span> defaultSettings<span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span>#<span class="token number">2</span><span class="token punctuation">.</span>åœ¨å…¶ä»–ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡useModelè·å–ä¸Šé¢æš´éœ²çš„æ•°æ®<span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//initialStateæ˜¯getInitialStateæ–¹æ³•çš„è¿”å›å€¼</span><span class="token comment" spellcheck="true">//loadingæ˜¯æ•°æ®åŠ è½½çŠ¶æ€</span><span class="token comment" spellcheck="true">//refreshå¯ä»¥é‡æ–°æ‰§è¡ŒgetInitialStateæ–¹æ³•</span><span class="token keyword">const</span> <span class="token punctuation">{</span> initialState<span class="token punctuation">,</span>loading<span class="token punctuation">,</span>refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'@@initialState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   </code></pre><h3 id="2-3-5-å›½é™…åŒ–"><a href="#2-3-5-å›½é™…åŒ–" class="headerlink" title="2.3.5 å›½é™…åŒ–"></a>2.3.5 å›½é™…åŒ–</h3><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span>src<span class="token operator">/</span>locales æ˜¯å›½é™…åŒ–çš„é…ç½®æ–‡ä»¶#<span class="token number">2</span><span class="token punctuation">.</span>SelectLangæ˜¯è¯­è¨€é€‰æ‹©ç»„ä»¶<span class="token keyword">import</span> <span class="token punctuation">{</span> SelectLang <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>#<span class="token number">3</span><span class="token punctuation">.</span>useIntlå›½é™…åŒ–åº“<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntl<span class="token punctuation">,</span>FormattedMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//useIntl().formatMessage  ä½¿ç”¨formatMessageè¿™ä¸ªapiè¿›è¡Œå›½é™…åŒ–</span><span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    id<span class="token punctuation">:</span> <span class="token string">'menu.home'</span><span class="token punctuation">,</span>    defaultMessage<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//ä½¿ç”¨FormattedMessageç»„ä»¶è¿›è¡Œå›½é™…åŒ–</span><span class="token operator">&lt;</span>button<span class="token operator">></span><span class="token operator">&lt;</span>FormattedMessage id<span class="token operator">=</span><span class="token string">"menu.admin"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><h1 id="3-çŸ¥è¯†ç‚¹ä»‹ç»"><a href="#3-çŸ¥è¯†ç‚¹ä»‹ç»" class="headerlink" title="3.çŸ¥è¯†ç‚¹ä»‹ç»"></a>3.çŸ¥è¯†ç‚¹ä»‹ç»</h1><h2 id="3-1-å°è£…ç»„ä»¶ä»‹ç»"><a href="#3-1-å°è£…ç»„ä»¶ä»‹ç»" class="headerlink" title="3.1 å°è£…ç»„ä»¶ä»‹ç»"></a>3.1 å°è£…ç»„ä»¶ä»‹ç»</h2><p>Footer ç½‘é¡µåº•éƒ¨ç»„ä»¶çš„å°è£…</p><p>HeaderDropdown é¼ æ ‡ç§»åŠ¨çš„ä¸‹æ‹‰ç»„ä»¶çš„å°è£…</p><p>PageLoading  é¡µé¢åŠ è½½ç»„ä»¶çš„å°è£…   éœ€è¦åœ¨config.tsä¸­é…ç½®</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//PageLoading  pro-layoutå°è£…çš„ä¸€ä¸ªç®€å•çš„åŠ è½½é¡µé¢</span><span class="token keyword">import</span> <span class="token punctuation">{</span> PageLoading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-layout'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// loading components from code split</span><span class="token comment" spellcheck="true">// https://umijs.org/plugin/umi-plugin-react.html#dynamicimport</span><span class="token keyword">export</span> <span class="token keyword">default</span> PageLoading<span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//é…ç½®æŒ‰éœ€åŠ è½½   å³æ˜¯å¦æŠŠæ„å»ºäº§ç‰©è¿›è¡Œæ‹†åˆ†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¸‹è½½é¢å¤–çš„ JS å†æ‰§è¡Œã€‚</span>dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span>    loading<span class="token punctuation">:</span> <span class="token string">'@/components/PageLoading/index'</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><p>RightContent  ç™»å½•åå³ä¸Šä¾§ç»„ä»¶çš„å°è£…(åŒ…å«æœç´¢ã€ç”¨æˆ·å¤´åƒã€è¯­è¨€é€‰æ‹©ç­‰ä¿¡æ¯)</p><h2 id="3-2-procomponents"><a href="#3-2-procomponents" class="headerlink" title="3.2  procomponents"></a>3.2  procomponents</h2><p><a href="https://procomponents.ant.design/components/layout#api">https://procomponents.ant.design/components/layout#api</a></p><h3 id="3-2-1-é«˜çº§å¸ƒå±€ProLayout"><a href="#3-2-1-é«˜çº§å¸ƒå±€ProLayout" class="headerlink" title="3.2.1 é«˜çº§å¸ƒå±€ProLayout"></a>3.2.1 é«˜çº§å¸ƒå±€ProLayout</h3><h4 id="a-BasicLayout-amp-amp-BasicLayoutProps"><a href="#a-BasicLayout-amp-amp-BasicLayoutProps" class="headerlink" title="a) BasicLayout&amp;&amp;BasicLayoutProps"></a>a) BasicLayout&amp;&amp;BasicLayoutProps</h4><p>BasicLayout åŸºç¡€é¡µé¢å¸ƒå±€ï¼ŒåŒ…å«äº†å¤´éƒ¨å¯¼èˆªï¼Œä¾§è¾¹æ å’Œé€šçŸ¥æ ç­‰ç­‰ã€‚</p><p>ProLayout ä¸ umi é…åˆä½¿ç”¨ä¼šæœ‰æœ€å¥½çš„æ•ˆæœï¼Œumi ä¼šæŠŠ config.ts ä¸­çš„è·¯ç”±å¸®æˆ‘ä»¬è‡ªåŠ¨æ³¨å…¥åˆ°é…ç½®çš„ layout ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å…å»æ‰‹å†™èœå•çš„çƒ¦æ¼ã€‚</p><p>BasicLayoutPropsåŸºæœ¬é¡µé¢å¸ƒå±€çš„å±æ€§</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">/** * app.tsx :  è¿™è¾¹æ²¡æœ‰ç›´æ¥ä½¿ç”¨BasicLayoutï¼Œè€Œæ˜¯å†™ä¸€ä¸ªç®­å¤´å‡½æ•°è¿”å›BasicLayoutPropsçš„å®ç°ï¼ŒåŸå› åœ¨äºæ­¤å¤„è¦æ ¹æ®initialStateå¤„ç†é¡µé¢åˆ‡æ¢ã€‚ * @umijs/plugin-layout * é»˜è®¤ç™»å½•åçš„é¡µé¢å¸ƒå±€æ¨¡æ¿ (æ­¤å¤„æƒé™éªŒè¯çš„ä»£ç å·²ç»å°è£…ï¼Œçœ‹ä¸åˆ°äº†ï¼Œåœ¨è€ç‰ˆæœ¬çš„é¡¹ç›®ä¸­å¯ä»¥çœ‹åˆ°æºä»£ç ) */</span><span class="token keyword">export</span> <span class="token keyword">const</span> layout <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  initialState<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>  initialState<span class="token punctuation">:</span> <span class="token punctuation">{</span> settings<span class="token operator">?</span><span class="token punctuation">:</span> LayoutSettings<span class="token punctuation">;</span> currentUser<span class="token operator">?</span><span class="token punctuation">:</span> API<span class="token punctuation">.</span>CurrentUser <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span> BasicLayoutProps <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//æ¸²æŸ“é¡¶éƒ¨å³ä¾§å†…å®¹</span>    rightContentRender<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>RightContent <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//å…³é—­ contentçš„ margin</span>    disableContentMargin<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//æ¸²æŸ“ç½‘é¡µåº•éƒ¨é¡µé¢</span>    footerRender<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>Footer <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//å½“åˆ‡æ¢é¡µé¢çš„æ—¶å€™è§¦å‘çš„äº‹ä»¶</span>    onPageChange<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œé‡å®šå‘åˆ° login</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>initialState<span class="token operator">?</span><span class="token punctuation">.</span>currentUser<span class="token operator">?</span><span class="token punctuation">.</span>userid <span class="token operator">&amp;&amp;</span> history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> <span class="token string">'/user/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//æ¸²æŸ“è·¯å¾„å¯¼èˆª(ä»£ç ä¸ºåæ¥æ–°å¢)</span>    breadcrumbRender<span class="token punctuation">:</span> <span class="token punctuation">(</span>routers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>        breadcrumbName<span class="token punctuation">:</span> <span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>          id<span class="token punctuation">:</span> <span class="token string">'menu.home'</span><span class="token punctuation">,</span>          defaultMessage<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">...</span>routers<span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//è·¯å¾„å¯¼èˆªç›¸å…³(ä»£ç ä¸ºåæ¥æ–°å¢)</span>    itemRender<span class="token punctuation">:</span> <span class="token punctuation">(</span>route<span class="token punctuation">,</span> params<span class="token punctuation">,</span> routes<span class="token punctuation">,</span> paths<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> first <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> first <span class="token operator">?</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>paths<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>breadcrumbName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>      <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>breadcrumbName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//æ¸²æŸ“menuèœå•å¤´çš„æ–¹æ³•(ä»£ç ä¸ºåæ¥æ–°å¢)</span>    menuHeaderRender<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>div<span class="token operator">></span>æµ‹è¯•èœå•<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//æ¸²æŸ“èœå•æ•°æ®(æ­¤å¤„å¯ä»¥ä¿®æ”¹è¿”å›çš„èœå•æ•°æ®ä»è€Œå®ç°æ¸²æŸ“æœåŠ¡å™¨è¿”å›çš„èœå•ä¿¡æ¯)</span>    <span class="token comment" spellcheck="true">//menuData ä¸ºconfit.tsä¸­é…ç½®çš„èœå•ä¿¡æ¯</span>    menuDataRender<span class="token punctuation">:</span> <span class="token punctuation">(</span>menuData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> menuData<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">/*      return [        {          path: '/user',          layout: false,          //å­è·¯ç”±          routes: [            {              name: 'login',              path: '/user/login',              component: './user/login',            },          ],        },        {          path: '/welcome',          name: 'welcome',          icon: &lt;QuestionCircleOutlined />,          component: './Welcome',        },      ];      */</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//ä¼ å…¥é…ç½®å‚æ•°</span>    <span class="token operator">...</span>initialState<span class="token operator">?</span><span class="token punctuation">.</span>settings<span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="b-PageContainer"><a href="#b-PageContainer" class="headerlink" title="b) PageContainer"></a>b) PageContainer</h4><p>æ­£æ–‡å†…å®¹ç»„ä»¶ï¼Œå°è£…äº† ant design çš„ PageHeader ç»„ä»¶ï¼Œå¢åŠ äº† tabList å’Œ contentã€‚ æ ¹æ®å½“å‰çš„è·¯ç”±å¡«å…¥ title å’Œ breadcrumbã€‚</p><pre class=" language-typescript"><code class="language-typescript">  <span class="token comment" spellcheck="true">//content æŒ‡å®šé¡µé¢å†…å®¹</span>  <span class="token comment" spellcheck="true">//title æŒ‡å®šé¡µé¢æ ‡é¢˜</span>  <span class="token comment" spellcheck="true">//pageHeaderRender é‡æ–°æ¸²æŸ“é¡µé¢å¤´</span>  <span class="token comment" spellcheck="true">//footer ç½‘é¡µå°¾éƒ¨å†…å®¹</span>  <span class="token comment" spellcheck="true">//tabList åˆ‡æ¢çš„tabåˆ—è¡¨</span>  <span class="token operator">&lt;</span>PageContainer    content<span class="token operator">=</span><span class="token string">" è¿™ä¸ªé¡µé¢åªæœ‰ admin æƒé™æ‰èƒ½æŸ¥çœ‹"</span>    title<span class="token operator">=</span><span class="token string">"ç®¡ç†å‘˜é¡µé¢å¤´éƒ¨ä¿¡æ¯"</span>    pageHeaderRender<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>æµ‹è¯•<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    footer<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>div<span class="token operator">></span>é¡µé¢å°¾å·´<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">}</span>    tabList<span class="token operator">=</span><span class="token punctuation">{</span>       <span class="token punctuation">[</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>tab<span class="token punctuation">:</span><span class="token operator">&lt;</span>div<span class="token operator">></span>å¼ ä¸‰<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span><span class="token string">"æå››"</span><span class="token punctuation">,</span>tab<span class="token punctuation">:</span><span class="token operator">&lt;</span>div<span class="token operator">></span>æå››<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>æ­£æ–‡å†…å®¹<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>PageContainer<span class="token operator">></span></code></pre><h4 id="c-DefaultFooter"><a href="#c-DefaultFooter" class="headerlink" title="c) DefaultFooter"></a>c) DefaultFooter</h4><p>ç½‘é¡µé»˜è®¤çš„åº•éƒ¨ç»„ä»¶</p><pre class=" language-typescript"><code class="language-typescript"><span class="token operator">&lt;</span>DefaultFooter    copyright<span class="token operator">=</span><span class="token string">"2019 èš‚èšé‡‘æœä½“éªŒæŠ€æœ¯éƒ¨å‡ºå“"</span>    links<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>      <span class="token punctuation">{</span>        key<span class="token punctuation">:</span> <span class="token string">'Ant Design Pro'</span><span class="token punctuation">,</span>        title<span class="token punctuation">:</span> <span class="token string">'Ant Design Pro'</span><span class="token punctuation">,</span>        href<span class="token punctuation">:</span> <span class="token string">'https://pro.ant.design'</span><span class="token punctuation">,</span>        blankTarget<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        key<span class="token punctuation">:</span> <span class="token string">'github'</span><span class="token punctuation">,</span>        title<span class="token punctuation">:</span> <span class="token operator">&lt;</span>GithubOutlined <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>        href<span class="token punctuation">:</span> <span class="token string">'https://github.com/ant-design/ant-design-pro'</span><span class="token punctuation">,</span>        blankTarget<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        key<span class="token punctuation">:</span> <span class="token string">'Ant Design'</span><span class="token punctuation">,</span>        title<span class="token punctuation">:</span> <span class="token string">'Ant Design'</span><span class="token punctuation">,</span>        href<span class="token punctuation">:</span> <span class="token string">'https://ant.design'</span><span class="token punctuation">,</span>        blankTarget<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h4 id="d-PageLoading"><a href="#d-PageLoading" class="headerlink" title="d) PageLoading"></a>d) PageLoading</h4><p>åŠ è½½é¡µé¢ç»„ä»¶ï¼Œéœ€è¦åœ¨config.tsä¸­é…ç½®ã€‚é…ç½®ä¹‹ååŠ è½½é¡µé¢å°±é»˜è®¤ä¼šç”¨è¯¥ç»„ä»¶</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//é…ç½®æŒ‰éœ€åŠ è½½   å³æ˜¯å¦æŠŠæ„å»ºäº§ç‰©è¿›è¡Œæ‹†åˆ†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¸‹è½½é¢å¤–çš„ JS å†æ‰§è¡Œã€‚</span>dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span>    loading<span class="token punctuation">:</span> <span class="token string">'@/components/PageLoading/index'</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><h4 id="e-FooterToolbar"><a href="#e-FooterToolbar" class="headerlink" title="e) FooterToolbar"></a>e) FooterToolbar</h4><p>åº•éƒ¨å·¥å…·æ ç»„ä»¶</p><pre class=" language-typescript"><code class="language-typescript"><span class="token operator">&lt;</span>FooterToolbar    extra<span class="token operator">=</span><span class="token punctuation">{</span>        <span class="token operator">&lt;</span>div<span class="token operator">></span>        å·²é€‰æ‹©é¡¹<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>        <span class="token operator">&lt;</span>span<span class="token operator">></span>æœåŠ¡è°ƒç”¨æ¬¡æ•°æ€»è®¡ä¸‡<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">}</span>    <span class="token operator">></span>        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**æ‰¹é‡åˆ é™¤æŒ‰é’® */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>Button<span class="token operator">></span>æ‰¹é‡åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**æ‰¹é‡å®¡æ‰¹æŒ‰é’® */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>æ‰¹é‡å®¡æ‰¹<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>FooterToolbar<span class="token operator">></span></code></pre><h3 id="3-2-2-é«˜çº§è¡¨æ ¼ProTable"><a href="#3-2-2-é«˜çº§è¡¨æ ¼ProTable" class="headerlink" title="3.2.2  é«˜çº§è¡¨æ ¼ProTable"></a>3.2.2  é«˜çº§è¡¨æ ¼ProTable</h3><h4 id="a-ProColumns"><a href="#a-ProColumns" class="headerlink" title="a) ProColumns"></a>a) ProColumns</h4><p>é«˜çº§åˆ—ï¼Œä¼šåµŒå¥—åœ¨é«˜çº§è¡¨æ ¼ä¸­ä½¿ç”¨</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å®šä¹‰é«˜çº§åˆ—(ä¼šåµŒå¥—åœ¨é«˜çº§è¡¨æ ¼ä¸­)</span>  <span class="token keyword">const</span> columns<span class="token punctuation">:</span> ProColumns<span class="token operator">&lt;</span>TableListItem<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'è§„åˆ™åç§°'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//é¡µé¢æ˜¾ç¤ºçš„æ ‡é¢˜</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//å¯¹åº”æ•°æ®æºä¸­çš„å­—æ®µ</span>      tip<span class="token punctuation">:</span> <span class="token string">'è§„åˆ™åç§°æ˜¯å”¯ä¸€çš„ key'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//tipæç¤ºä¿¡æ¯</span>      formItemProps<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æ ¡éªŒè§„åˆ™</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            required<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>            message<span class="token punctuation">:</span> <span class="token string">'è§„åˆ™åç§°ä¸ºå¿…å¡«é¡¹'</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ¸²æŸ“åˆ—çš„æ–¹æ³• : domä¸ºé¡µé¢å…ƒç´ ,entityä¸ºæ•°æ®æº</span>      render<span class="token punctuation">:</span> <span class="token punctuation">(</span>dom<span class="token punctuation">,</span> entity<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">&lt;</span>a onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setRow</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'æè¿°'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'desc'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//inputçš„typeç±»å‹</span>      valueType<span class="token punctuation">:</span> <span class="token string">'textarea'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'æœåŠ¡è°ƒç”¨æ¬¡æ•°'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'callNo'</span><span class="token punctuation">,</span>      sorter<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ–°å»ºè¡¨å•å’ŒæŸ¥è¯¢çš„å±•å¼€è¡¨å•ä¸­ä¸æ˜¾ç¤ºå½“å‰ä¿¡æ¯</span>      hideInForm<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ¸²æŸ“æ–‡å­—çš„æ–¹æ³•</span>      renderText<span class="token punctuation">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ä¸‡`</span></span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'çŠ¶æ€'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'status'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ–°å»ºè¡¨å•å’ŒæŸ¥è¯¢çš„å±•å¼€è¡¨å•ä¸­ä¸æ˜¾ç¤ºå½“å‰ä¿¡æ¯</span>      hideInForm<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æšä¸¾å€¼</span>      valueEnum<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token number">0</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'å…³é—­'</span><span class="token punctuation">,</span> status<span class="token punctuation">:</span> <span class="token string">'Default'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'è¿è¡Œä¸­'</span><span class="token punctuation">,</span> status<span class="token punctuation">:</span> <span class="token string">'Processing'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token number">2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'å·²ä¸Šçº¿'</span><span class="token punctuation">,</span> status<span class="token punctuation">:</span> <span class="token string">'Success'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token number">3</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">'å¼‚å¸¸'</span><span class="token punctuation">,</span> status<span class="token punctuation">:</span> <span class="token string">'Error'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'ä¸Šæ¬¡è°ƒåº¦æ—¶é—´'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'updatedAt'</span><span class="token punctuation">,</span>      sorter<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// inputçš„typeç±»å‹</span>      valueType<span class="token punctuation">:</span> <span class="token string">'dateTime'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// æ–°å»ºè¡¨å•æŸ¥è¯¢çš„å±•å¼€è¡¨å•ä¸­ä¸æ˜¾ç¤ºå½“å‰ä¿¡æ¯</span>      <span class="token comment" spellcheck="true">// hideInForm: true,</span>      <span class="token comment" spellcheck="true">// è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹(ä¼šåœ¨æ–°å¢è¡¨å•å’ŒæŸ¥è¯¢çš„å±•å¼€è¡¨å•ä¸­æ˜¾ç¤º,è¦çœ‹åˆ°è¿™ä¸ªå±æ€§çš„ç»“æœéœ€è¦æŠŠhideInForm: trueå»æ‰)</span>      renderFormItem<span class="token punctuation">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token punctuation">{</span> defaultRender<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//è·å–å½“å‰æ•°æ®çš„çŠ¶æ€ä¿¡æ¯</span>        <span class="token keyword">const</span> status <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFieldValue</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token operator">===</span> <span class="token string">'3'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Input <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> placeholder<span class="token operator">=</span><span class="token string">"è¯·è¾“å…¥å¼‚å¸¸åŸå› ï¼"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token function">defaultRender</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'æ“ä½œ'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'option'</span><span class="token punctuation">,</span>      valueType<span class="token punctuation">:</span> <span class="token string">'option'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ¸²æŸ“æ“ä½œæ çš„æ–¹æ³•</span>      render<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> record<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**é…ç½®æŒ‰é’® */</span><span class="token punctuation">}</span>          <span class="token operator">&lt;</span>a            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token comment" spellcheck="true">//ç‚¹å‡»é…ç½®æŒ‰é’®è®©æ›´æ–°è¡¨å•å¯è§</span>              <span class="token function">handleUpdateModalVisible</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">//ç‚¹å‡»é…ç½®æŒ‰é’®è®¾ç½®æ›´æ–°è¡¨å•çš„æ•°æ®</span>              <span class="token function">setStepFormValues</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token operator">></span>            é…ç½®          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>          <span class="token operator">&lt;</span>Divider type<span class="token operator">=</span><span class="token string">"vertical"</span> <span class="token operator">/</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**è®¢é˜…è­¦æŠ¥æŒ‰é’® */</span><span class="token punctuation">}</span>          <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>è®¢é˜…è­¦æŠ¥<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h4 id="b-ProTable-amp-ActionType"><a href="#b-ProTable-amp-ActionType" class="headerlink" title="b) ProTable&amp;ActionType"></a>b) ProTable&amp;ActionType</h4><p>ProTable é«˜çº§è¡¨æ ¼</p><p>ActionType  è®°å½•é«˜çº§è¡¨æ ¼çš„å¸¸ç”¨äº‹ä»¶  (reload reset reloadAndRestç­‰äº‹ä»¶)</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">import</span> ProTable<span class="token punctuation">,</span> <span class="token punctuation">{</span> ProColumns<span class="token punctuation">,</span> ActionType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-table'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//actionRef è®°å½•é«˜çº§è¡¨æ ¼çš„å¸¸ç”¨äº‹ä»¶  (reload reset reloadAndRestç­‰äº‹ä»¶)</span><span class="token keyword">const</span> actionRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>ActionType<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>ProTable<span class="token operator">&lt;</span>TableListItem<span class="token operator">></span>        headerTitle<span class="token operator">=</span><span class="token string">"æŸ¥è¯¢è¡¨æ ¼"</span> <span class="token comment" spellcheck="true">//è¡¨æ ¼æ ‡é¢˜</span>        actionRef<span class="token operator">=</span><span class="token punctuation">{</span>actionRef<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//è¡¨æ ¼äº‹ä»¶çš„å¼•ç”¨</span>        rowKey<span class="token operator">=</span><span class="token string">"key"</span> <span class="token comment" spellcheck="true">//è¡¨æ ¼æ¯ä¸€è¡Œçš„keyï¼Œè¿™è¾¹ä¸ºæ•°æ®æºä¸­æ¯ä¸€æ¡æ•°æ®çš„key</span>        search<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>          labelWidth<span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æœç´¢lableçš„å®½åº¦   å¦‚æœä¸æƒ³æ˜¾ç¤ºæœç´¢æ ï¼Œè®¾ç½®æˆfalseå³å¯</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æ¸²æŸ“å·¥å…·æ (æ–°å»ºæŒ‰é’®)</span>        toolBarRender<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>          <span class="token comment" spellcheck="true">//ç‚¹å‡»æ–°å»ºæŒ‰é’®ï¼Œè®©æ–°å»ºè¡¨å•å¯è§</span>          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>æ–°å»º<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//è®¾ç½®è¡¨æ ¼æ•°æ® (columnsé…ç½®çš„sorteræ²¡æœ‰ç”¨ï¼Œè¿™è¾¹å…¥å‚çš„sorterä¸ºç©ºï¼Œè¦å®ç°æ’åºï¼Œæ‰‹åŠ¨storterå†™æ­»)</span>        request<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> sorter<span class="token punctuation">,</span> filter<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>         <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æŒ‡å®šè¡¨æ ¼åˆ—</span>        columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//é€‰ä¸­æ¯ä¸€è¡Œ(æ‰“é’©)ï¼Œè®°å½•ä¸‹é€‰ä¸­çš„æ•°æ®</span>        rowSelection<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h3 id="3-2-3-é«˜çº§æè¿°ProDescriptions"><a href="#3-2-3-é«˜çº§æè¿°ProDescriptions" class="headerlink" title="3.2.3 é«˜çº§æè¿°ProDescriptions"></a>3.2.3 é«˜çº§æè¿°ProDescriptions</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">import</span> ProDescriptions <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-descriptions'</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>ProDescriptions<span class="token operator">&lt;</span>TableListItem<span class="token operator">></span>    <span class="token comment" spellcheck="true">//å‡ åˆ—æ˜¾ç¤º</span>    column<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//æ ‡é¢˜ å¦‚æœrowå­˜åœ¨åˆ™å–nameï¼Œå¦‚æœrowä¸å­˜åœ¨åˆ™ä¸å–nameï¼Œé¿å…rowä¸å­˜åœ¨çš„æ—¶å€™æŠ¥é”™</span>    title<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token operator">?</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//è®¾ç½®ProDescriptionsçš„æ•°æ®</span>    request<span class="token operator">=</span><span class="token punctuation">{</span>async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>        data<span class="token punctuation">:</span> row <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//ä¼ å‚ï¼Œå‚æ•°æ”¹å˜çš„æ—¶å€™ä¼šè§¦å‘é¡µé¢åˆ·æ–°</span>    params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>        id<span class="token punctuation">:</span> row<span class="token operator">?</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//è®¾ç½®ProDescriptionsçš„åˆ—æ•°æ®</span>    columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h2 id="3-3-ç™»å½•é¡µé¢åŠæµç¨‹"><a href="#3-3-ç™»å½•é¡µé¢åŠæµç¨‹" class="headerlink" title="3.3 ç™»å½•é¡µé¢åŠæµç¨‹"></a>3.3 ç™»å½•é¡µé¢åŠæµç¨‹</h2><h3 id="3-3-1-ç™»å½•é¡µé¢åŠå­ç»„ä»¶"><a href="#3-3-1-ç™»å½•é¡µé¢åŠå­ç»„ä»¶" class="headerlink" title="3.3.1 ç™»å½•é¡µé¢åŠå­ç»„ä»¶"></a>3.3.1 ç™»å½•é¡µé¢åŠå­ç»„ä»¶</h3><p>user/login/index.tsx   ç™»å½•é¡µé¢</p><p>user/login/components/login/index.tsx  å°è£…çš„loginç»„ä»¶ï¼ŒåŒæ—¶æŠŠTabã€Submitã€Usernameã€Passwordã€Mobileã€Captchaç­‰ç»„ä»¶æŒ‚åœ¨åˆ°å½“å‰index.tsxä¸­</p><p>LoginContext.tsx  ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸»è¦é€šè¿‡ä¸Šä¸‹æ–‡åœ¨user/login/components/login/index.tsxä¸­ç»™å­ç»„ä»¶å…±äº«å’Œæš´éœ²æ•°æ®</p><p>LoginItem.tsx    ç™»å½•é¡¹ï¼Œä¸»è¦åœ¨è¿™é‡Œé€šè¿‡map.tsxä¸­çš„é…ç½®åŠ¨æ€åˆ›å»ºç™»å½•å­ç»„ä»¶ï¼ŒåŒ…æ‹¬Usernameã€Passwordã€Mobileã€Captchaç­‰</p><p>LoginSumit.tsx  æäº¤ç™»å½•è¡¨å•çš„ç»„ä»¶</p><p>LoginTab.tsx  ç™»å½•åˆ‡æ¢Tabç»„ä»¶</p><h3 id="3-3-2-ç™»å½•æµç¨‹"><a href="#3-3-2-ç™»å½•æµç¨‹" class="headerlink" title="3.3.2 ç™»å½•æµç¨‹"></a>3.3.2 ç™»å½•æµç¨‹</h3><ol><li><p>æäº¤ç™»å½•è¡¨å•</p></li><li><p>è°ƒç”¨fakeAccountLoginè¿™ä¸ªserviceå‘é€ç™»å½•è¯·æ±‚</p></li><li><p>ç™»å½•æˆåŠŸä¹‹åè·³å›å›è°ƒåœ°å€ </p><p>æ³¨æ„ï¼šè¿™è¾¹ä½¿ç”¨window.location.href=â€xxâ€ï¼Œä¼šåˆ·æ–°é¡µé¢ï¼Œä»è€Œè§¦å‘app.tsxä¸­çš„getInitialStateæ–¹æ³•é‡æ–°æ‰§è¡Œ</p></li><li><p>æ ¹æ®å½“å‰urlä»è·¯ç”±é…ç½®ä¸­æ‰¾å¯»ç›¸åº”çš„è§„åˆ™ï¼Œç„¶åæ ¹æ®getInitialStateä¸­çš„CurrentUseråšæƒé™éªŒè¯ï¼Œå‘ˆç°ç™»å½•åçš„ç”¨æˆ·èœå•å’Œé¡µé¢</p></li></ol><h2 id="3-4-åˆ—è¡¨é¡µæµç¨‹"><a href="#3-4-åˆ—è¡¨é¡µæµç¨‹" class="headerlink" title="3.4 åˆ—è¡¨é¡µæµç¨‹"></a>3.4 åˆ—è¡¨é¡µæµç¨‹</h2><h3 id="3-4-1-åˆ—è¡¨é¡µé¢åŠå­ç»„ä»¶"><a href="#3-4-1-åˆ—è¡¨é¡µé¢åŠå­ç»„ä»¶" class="headerlink" title="3.4.1 åˆ—è¡¨é¡µé¢åŠå­ç»„ä»¶"></a>3.4.1 åˆ—è¡¨é¡µé¢åŠå­ç»„ä»¶</h3><p>pages/ListTableList/index.tsx   åˆ—è¡¨é¡µé¢</p><p>pages/ListTableList/service.ts  åˆ—è¡¨é¡µé¢çš„è¯·æ±‚æ–‡ä»¶</p><p>pages/ListTableList/data.d.ts   åˆ—è¡¨é¡µé¢çš„ç±»å‹å£°æ˜æ–‡ä»¶</p><p>pages/ListTableList/components/createForm.tsx  åˆ›å»ºè¡¨å•çš„ç»„ä»¶</p><p>pages/ListTableList/components/updateForm.tsx  æ›´æ–°è¡¨å•çš„ç»„ä»¶</p><h3 id="3-4-2-åˆ—è¡¨æµç¨‹"><a href="#3-4-2-åˆ—è¡¨æµç¨‹" class="headerlink" title="3.4.2 åˆ—è¡¨æµç¨‹"></a>3.4.2 åˆ—è¡¨æµç¨‹</h3><h4 id="a-åˆ—è¡¨é¡µé¢å±•ç¤ºã€æŸ¥è¯¢ã€åˆ†é¡µ"><a href="#a-åˆ—è¡¨é¡µé¢å±•ç¤ºã€æŸ¥è¯¢ã€åˆ†é¡µ" class="headerlink" title="a) åˆ—è¡¨é¡µé¢å±•ç¤ºã€æŸ¥è¯¢ã€åˆ†é¡µ"></a>a) åˆ—è¡¨é¡µé¢å±•ç¤ºã€æŸ¥è¯¢ã€åˆ†é¡µ</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//è®¾ç½®è¡¨æ ¼æ•°æ® (columnsé…ç½®çš„sorteræ²¡æœ‰ç”¨ï¼Œè¿™è¾¹å…¥å‚çš„sorterä¸ºç©ºï¼Œè¦å®ç°æ’åºï¼Œæ‰‹åŠ¨storterå†™æ­»)</span>request<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> sorter<span class="token punctuation">,</span> filter<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>         <span class="token function">queryRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>params<span class="token punctuation">,</span> sorter<span class="token punctuation">:</span> <span class="token punctuation">{</span> callNo<span class="token punctuation">:</span> <span class="token string">'ascend'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> filter <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h4 id="b-è§„åˆ™æ–°å¢"><a href="#b-è§„åˆ™æ–°å¢" class="headerlink" title="b) è§„åˆ™æ–°å¢"></a>b) è§„åˆ™æ–°å¢</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//1.ç‚¹å‡»æ–°å»ºæŒ‰é’®ï¼Œè®©æ–°å»ºè¡¨å•æ¨¡æ€æ¡†å¯è§</span><span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">handleModalVisible</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>    <span class="token operator">&lt;</span>PlusOutlined <span class="token operator">/</span><span class="token operator">></span> æ–°å»º<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//2.ç‚¹å‡»æ–°å»ºè¡¨å•çš„æäº¤è¡¨å•æŒ‰é’®ï¼Œå‘é€è¯·æ±‚ï¼Œç„¶åè®©æ–°å»ºè¡¨å•ä¸å¯è§ï¼Œç„¶åè®©å¤–è¾¹çš„è¡¨å•åˆ·æ–°é¡µé¢</span><span class="token operator">&lt;</span>CreateForm onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">handleModalVisible</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span> modalVisible<span class="token operator">=</span><span class="token punctuation">{</span>createModalVisible<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**åµŒå¥—ä¸€ä¸ªProTable */</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>ProTable<span class="token operator">&lt;</span>TableListItem<span class="token punctuation">,</span> TableListItem<span class="token operator">></span>          <span class="token comment" spellcheck="true">//ç‚¹å‡»æäº¤æŒ‰é’® å‘é€è¯·æ±‚ è®©å¤–éƒ¨çš„ProTableåˆ·æ–°è¡¨æ ¼</span>          onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>async <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> success <span class="token operator">=</span> await <span class="token function">handleAdd</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token function">handleModalVisible</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>actionRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>                actionRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//æ¯ä¸€è¡Œçš„ç´¢å¼•</span>          rowKey<span class="token operator">=</span><span class="token string">"key"</span>          <span class="token comment" spellcheck="true">//è¡¨æ ¼çš„ç±»å‹</span>          type<span class="token operator">=</span><span class="token string">"form"</span>          <span class="token comment" spellcheck="true">//æŒ‡å®šè¡¨æ ¼çš„åˆ—  æ­¤æ—¶columnsä¸­é…ç½®çš„hideInFormç”Ÿæ•ˆäº†</span>          columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>CreateForm<span class="token operator">></span></code></pre><h4 id="c-è§„åˆ™æ›´æ–°"><a href="#c-è§„åˆ™æ›´æ–°" class="headerlink" title="c) è§„åˆ™æ›´æ–°"></a>c) è§„åˆ™æ›´æ–°</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//1.ç‚¹å‡»é…ç½®æŒ‰é’®ï¼Œè®©é…ç½®è¡¨å•å¯è§ï¼Œå¹¶è®¾ç½®é…ç½®è¡¨å•çš„æ•°æ®</span><span class="token function">handleUpdateModalVisible</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç‚¹å‡»é…ç½®æŒ‰é’®è®¾ç½®æ›´æ–°è¡¨å•çš„æ•°æ®</span><span class="token function">setStepFormValues</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//2.ç‚¹å‡»é…ç½®è¡¨å•çš„æäº¤æŒ‰é’®ï¼Œå‘é€è¯·æ±‚ï¼Œç„¶åè®©é…ç½®è¡¨å•ä¸å¯è§ï¼Œç„¶åè®©å¤–è¾¹çš„è¡¨å•åˆ·æ–°é¡µé¢</span><span class="token operator">&lt;</span>UpdateForm          <span class="token comment" spellcheck="true">//æäº¤è¡¨å• å‘é€è¯·æ±‚ è®©å¤–éƒ¨çš„ProTableåˆ·æ–°è¡¨æ ¼</span>          onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>async <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> success <span class="token operator">=</span> await <span class="token function">handleUpdate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token function">handleUpdateModalVisible</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token function">setStepFormValues</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>actionRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>                actionRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//å–æ¶ˆæ›´æ–°è¡¨å•</span>          onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token function">handleUpdateModalVisible</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">setStepFormValues</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//æ›´æ–°è¡¨å•çš„æ˜¾ç¤ºéšè—çŠ¶æ€</span>          updateModalVisible<span class="token operator">=</span><span class="token punctuation">{</span>updateModalVisible<span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//æ›´æ–°è¡¨å•çš„æ•°æ®</span>          values<span class="token operator">=</span><span class="token punctuation">{</span>stepFormValues<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h4 id="d-è§„åˆ™é€‰ä¸­"><a href="#d-è§„åˆ™é€‰ä¸­" class="headerlink" title="d) è§„åˆ™é€‰ä¸­"></a>d) è§„åˆ™é€‰ä¸­</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//1.é€‰ä¸­è§„åˆ™ï¼Œä¿å­˜é€‰ä¸­çš„æ•°æ®åˆ°selectedRowsæ•°ç»„</span>rowSelection<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>    onChange<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> selectedRows<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setSelectedRows</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//2.å¦‚æœé€‰ä¸­è¡Œçš„é•¿åº¦>0ï¼Œåˆ™è®©åº•éƒ¨FooterToolbaræ˜¾ç¤ºå‡ºæ¥</span><span class="token comment" spellcheck="true">//ç‚¹å‡»æ‰¹é‡åˆ é™¤ï¼Œå‘é€è¯·æ±‚ï¼Œè®¾ç½®é€‰ä¸­çš„selectedRowsæ•°ç»„ä¸ºç©º(è®©FooterToolbarä¸å¯è§)ï¼ŒåŒæ—¶è®©å¤–è¾¹çš„è¡¨å•åˆ·æ–°é¡µé¢</span><span class="token punctuation">{</span>selectedRowsState<span class="token operator">?</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>FooterToolbar          extra<span class="token operator">=</span><span class="token punctuation">{</span>            <span class="token operator">&lt;</span>div<span class="token operator">></span>              å·²é€‰æ‹© <span class="token operator">&lt;</span>a style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontWeight<span class="token punctuation">:</span> <span class="token number">600</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>selectedRowsState<span class="token punctuation">.</span>length<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span> é¡¹<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>              <span class="token operator">&lt;</span>span<span class="token operator">></span>                æœåŠ¡è°ƒç”¨æ¬¡æ•°æ€»è®¡ <span class="token punctuation">{</span>selectedRowsState<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> pre <span class="token operator">+</span> item<span class="token punctuation">.</span>callNo<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span> ä¸‡              <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>          <span class="token punctuation">}</span>        <span class="token operator">></span>          <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**æ‰¹é‡åˆ é™¤æŒ‰é’® */</span><span class="token punctuation">}</span>          <span class="token operator">&lt;</span>Button            onClick<span class="token operator">=</span><span class="token punctuation">{</span>async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              await <span class="token function">handleRemove</span><span class="token punctuation">(</span>selectedRowsState<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token function">setSelectedRows</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              actionRef<span class="token punctuation">.</span>current<span class="token operator">?</span><span class="token punctuation">.</span>reloadAndRest<span class="token operator">?</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token operator">></span>            æ‰¹é‡åˆ é™¤          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>           <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**æ‰¹é‡å®¡æ‰¹æŒ‰é’® */</span><span class="token punctuation">}</span>          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>æ‰¹é‡å®¡æ‰¹<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>FooterToolbar<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h4 id="e-æŸ¥çœ‹è§„åˆ™åç§°"><a href="#e-æŸ¥çœ‹è§„åˆ™åç§°" class="headerlink" title="e) æŸ¥çœ‹è§„åˆ™åç§°"></a>e) æŸ¥çœ‹è§„åˆ™åç§°</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//1.ç‚¹å‡»è§„åˆ™åç§°è®°å½•å½“å‰ç‚¹å‡»çš„è§„åˆ™æ•°æ®(row)</span><span class="token operator">&lt;</span>a onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setRow</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token comment" spellcheck="true">//2.å½“å‰è®°å½•çš„è§„åˆ™æœ‰æ•°æ®çš„æ—¶å€™ï¼Œè®©æŠ½å±‰å¯è§ï¼Œå¹¶ä½¿ç”¨ProDescriptionså±•ç¤ºæ•°æ®</span><span class="token comment" spellcheck="true">// ç‚¹å‡»æŠ½å±‰ç»„ä»¶çš„å…³é—­æŒ‰é’®çš„æ—¶å€™ï¼Œè®©rowæ•°æ®ç½®ç©º(æ­¤æ—¶Drawerä¼šéšè—)</span><span class="token operator">&lt;</span>Drawer        width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//å½“rowæ•°æ®å­˜åœ¨çš„æ—¶å€™è®©æŠ½å±‰ç»„ä»¶æ˜¾ç¤º</span>        visible<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span>row<span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//å…³é—­æŠ½å±‰ç»„ä»¶çš„æ—¶å€™è§¦å‘çš„æ–¹æ³•</span>        onClose<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token function">setRow</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æ˜¯å¦æ˜¾ç¤ºæŠ½å±‰ç»„ä»¶çš„å…³é—­æŒ‰é’®</span>        closable<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">false</span><span class="token punctuation">}</span>      <span class="token operator">></span>         <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/**å¦‚æœrowä¸­æœ‰ä¿¡æ¯åˆ™æ˜¾ç¤ºè§„åˆ™çš„è¯¦ç»†ä¿¡æ¯ */</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span>row<span class="token operator">?</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>          <span class="token operator">&lt;</span>ProDescriptions<span class="token operator">&lt;</span>TableListItem<span class="token operator">></span>            <span class="token comment" spellcheck="true">//å‡ åˆ—æ˜¾ç¤º</span>            column<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//æ ‡é¢˜ å¦‚æœrowå­˜åœ¨åˆ™å–nameï¼Œå¦‚æœrowä¸å­˜åœ¨åˆ™ä¸å–nameï¼Œé¿å…rowä¸å­˜åœ¨çš„æ—¶å€™æŠ¥é”™</span>            title<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token operator">?</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//è®¾ç½®ProDescriptionsçš„æ•°æ®</span>            request<span class="token operator">=</span><span class="token punctuation">{</span>async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>              data<span class="token punctuation">:</span> row <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//ä¼ å‚ï¼Œå‚æ•°æ”¹å˜çš„æ—¶å€™ä¼šè§¦å‘reload</span>            params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>              id<span class="token punctuation">:</span> row<span class="token operator">?</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//è®¾ç½®ProDescriptionsçš„åˆ—æ•°æ®</span>            columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>          <span class="token operator">/</span><span class="token operator">></span>        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Drawer<span class="token operator">></span></code></pre><h1 id="4-ant-design-proåŒºå—"><a href="#4-ant-design-proåŒºå—" class="headerlink" title="4. ant design proåŒºå—"></a>4. ant design proåŒºå—</h1><p><a href="https://pro.ant.design/docs/block-cn">https://pro.ant.design/docs/block-cn</a></p><p>åŒºå—æ˜¯ç ”å‘èµ„äº§çš„ä¸€ç§ï¼Œå®ƒæ˜¯ä¸€ç³»åˆ—å¿«é€Ÿæ­å»ºé¡µé¢çš„ä»£ç ç‰‡æ®µï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿçš„åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ–å¥½ä¸€ä¸ªé¡µé¢ï¼Œå¸®åŠ©ä½ æ›´å¿«é€Ÿçš„å¼€å‘ä»£ç ã€‚å½“å‰çš„åŒºå—éƒ½æ˜¯é¡µé¢çº§åˆ«çš„åŒºå—ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå®ƒæ˜¯ä¸€äº›é¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„å…¸å‹é¡µé¢çš„æ¨¡æ¿ï¼Œä½¿ç”¨åŒºå—å…¶å®ç›¸å½“äºä»å·²æœ‰çš„é¡¹ç›®ä¸­å¤åˆ¶ä¸€äº›é¡µé¢çš„ä»£ç åˆ°ä½ å½“å‰çš„é¡¹ç›®ä¸­ã€‚</p><ul><li>ä»¥å‰å¼€å‘ä¸€ä¸ªé¡µé¢ï¼šåˆ›å»º JS -&gt; åˆ›å»º CSS -&gt; åˆ›å»º Model -&gt; åˆ›å»º service -&gt; å†™é¡µé¢ç»„ä»¶ã€‚</li><li>ç°åœ¨å¼€å‘ä¸€ä¸ªé¡µé¢ï¼šä¸‹è½½åŒºå— -&gt; åŸºäºåŒºå—åˆå§‹åŒ–å¥½çš„é¡µé¢ç»„ä»¶ä¿®æ”¹ä»£ç ã€‚</li></ul><p>åœ¨ Pro ä¸­èµ„äº§è¢«åˆ†ä¸ºäº†ä¸¤ç§ï¼ŒåŒºå—å’Œæ¨¡æ¿ã€‚åŒºå—å¯ä»¥ç±»æ¯”ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œè€Œæ¨¡æ¿ä»£è¡¨ä¸€ä¸ªé¡µé¢ã€‚åŒºå—ç°åœ¨æ”¯æŒæ‰€æœ‰ antd ä¸­çš„ demoï¼Œå¯ä»¥æ›´åŠ å¿«é€Ÿçš„å°† demo å¯¼å…¥åˆ°é¡¹ç›®ä¸­å»ã€‚</p><h1 id="5-vue-antd-admin"><a href="#5-vue-antd-admin" class="headerlink" title="5.vue-antd-admin"></a>5.vue-antd-admin</h1><p><a href="https://github.com/iczer/vue-antd-admin">https://github.com/iczer/vue-antd-admin</a></p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ant Design Pro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Umi&amp;dvaçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2020/02/18/umi-dva/"/>
      <url>2020/02/18/umi-dva/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Umiä»‹ç»"><a href="#1-Umiä»‹ç»" class="headerlink" title="1. Umiä»‹ç»"></a>1. Umiä»‹ç»</h1><h2 id="1-1-Umiæ˜¯ä»€ä¹ˆ"><a href="#1-1-Umiæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 Umiæ˜¯ä»€ä¹ˆ"></a>1.1 Umiæ˜¯ä»€ä¹ˆ</h2><p><a href="https://umijs.org/zh-CN/docs">https://umijs.org/zh-CN/docs</a>   </p><p>ä¸€å¥—å¯æ’æ‹”çš„ä¼ä¸šçº§ react åº”ç”¨æ¡†æ¶ï¼Œç”±dvaä½œè€… sorrycc å®Œæˆï¼Œå®ƒæ—¢æ˜¯ä¸€ä¸ªæ¡†æ¶ä¹Ÿæ˜¯ä¸€ä¸ªå·¥å…·ã€‚</p><p>Umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ç„¶åé…ä»¥ç”Ÿå‘½å‘¨æœŸå®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚</p><p>ä»–åœ¨Umiä¸­å¼•å…¥äº† UI å·¥å…· antdï¼Œæ‰“åŒ…å·¥å…· roadhogï¼Œè·¯ç”± react-routerå’ŒçŠ¶æ€ç®¡ç†å™¨ dvaï¼Œåšåˆ°äº†å¯æ’æ‹”æœºåˆ¶ã€‚é€šè¿‡çº¦å®šã€è‡ªåŠ¨ç”Ÿæˆå’Œè§£æä»£ç ç­‰æ–¹å¼æ¥è¾…åŠ©å¼€å‘ï¼Œå‡å°‘å¼€å‘è€…è¦å†™çš„ä»£ç é‡ã€‚</p><blockquote><p><strong>å®ƒä¸»è¦å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</strong></p></blockquote><ul><li><strong>å¯æ‰©å±•</strong>ï¼ŒUmi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼ŒUmi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆã€‚æ­¤å¤–è¿˜æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ã€‚</li><li> <strong>å¼€ç®±å³ç”¨</strong>ï¼ŒUmi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ã€‚å¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³æ—¥å¸¸ 80% çš„å¼€å‘éœ€æ±‚ã€‚</li><li> <strong>ä¼ä¸šçº§</strong>ï¼Œç»èš‚èšå†…éƒ¨ 3000+ é¡¹ç›®ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸é¡¹ç›®çš„éªŒè¯ï¼Œå€¼å¾—ä¿¡èµ–ã€‚</li><li><strong>å¤§é‡è‡ªç ”</strong>ï¼ŒåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooks åº“ã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸é¡¹ç›®çš„å‘¨è¾¹éœ€æ±‚ã€‚</li><li> <strong>å®Œå¤‡è·¯ç”±</strong>ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿æŒåŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ç­‰ã€‚</li><li> <strong>é¢å‘æœªæ¥</strong>ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåœæ­¢å¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ã€‚æ¯”å¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ– externalã€bundler less ç­‰ç­‰ã€‚</li></ul><blockquote><p><strong>ä¸ºä»€ä¹ˆä¸æ˜¯ï¼Ÿ<a href="https://github.com/facebook/create-react-app">create-react-app</a></strong></p></blockquote><p>create-react-app æ˜¯åŸºäº webpack çš„æ‰“åŒ…å±‚æ–¹æ¡ˆï¼ŒåŒ…å« buildã€devã€lint ç­‰ï¼Œä»–åœ¨æ‰“åŒ…å±‚æŠŠä½“éªŒåšåˆ°äº†æè‡´ï¼Œä½†æ˜¯ä¸åŒ…å«è·¯ç”±ï¼Œä¸æ˜¯æ¡†æ¶ï¼Œä¹Ÿä¸æ”¯æŒé…ç½®ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¤§å®¶æƒ³åŸºäºä»–ä¿®æ”¹éƒ¨åˆ†é…ç½®ï¼Œæˆ–è€…å¸Œæœ›åœ¨æ‰“åŒ…å±‚ä¹‹å¤–ä¹ŸåšæŠ€æœ¯æ”¶æ•›æ—¶ï¼Œå°±ä¼šé‡åˆ°å›°éš¾ã€‚</p><blockquote><p><strong>ä»€ä¹ˆæ—¶å€™ä¸ç”¨ umiï¼Ÿ</strong></p></blockquote><p>å¦‚æœä½ ï¼Œ</p><ul><li>éœ€è¦æ”¯æŒ IE 8 æˆ–æ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨</li><li>éœ€è¦æ”¯æŒ React 16.8.0 ä»¥ä¸‹çš„ React</li><li>éœ€è¦è·‘åœ¨ Node 10 ä»¥ä¸‹çš„ç¯å¢ƒä¸­</li><li>æœ‰å¾ˆå¼ºçš„ webpack è‡ªå®šä¹‰éœ€æ±‚å’Œä¸»è§‚æ„æ„¿</li><li>éœ€è¦é€‰æ‹©ä¸åŒçš„è·¯ç”±æ–¹æ¡ˆ</li></ul><p>Umi å¯èƒ½ä¸é€‚åˆä½ ã€‚</p><h2 id="1-2-Umi-å¦‚ä½•å·¥ä½œ"><a href="#1-2-Umi-å¦‚ä½•å·¥ä½œ" class="headerlink" title="1.2 Umi å¦‚ä½•å·¥ä½œ"></a>1.2 Umi å¦‚ä½•å·¥ä½œ</h2><p>å†™å†™ Umi èƒŒåçš„æ€è€ƒå’Œé‡è¦æ¦‚å¿µã€‚</p><h3 id="1-2-1-æŠ€æœ¯æ”¶æ•›"><a href="#1-2-1-æŠ€æœ¯æ”¶æ•›" class="headerlink" title="1.2.1 æŠ€æœ¯æ”¶æ•›"></a>1.2.1 æŠ€æœ¯æ”¶æ•›</h3><p><img src="https://i.loli.net/2020/11/03/B7RONxakU4Zny2L.png" alt="1601014995473"></p><p>è¿™å¼ å›¾æ˜¯ç»™å†…éƒ¨æ¡†æ¶ Bigfish ç”»çš„ï¼Œå¥—åˆ° Umi ä¸ŠåŒæ ·åˆé€‚ã€‚ä»–æŠŠå¤§å®¶å¸¸ç”¨çš„æŠ€æœ¯æ ˆè¿›è¡Œæ•´ç†ï¼Œæ”¶æ•›åˆ°ä¸€èµ·ï¼Œè®©å¤§å®¶åªç”¨ Umi å°±å¯ä»¥å®Œæˆ 80% çš„æ—¥å¸¸å·¥ä½œã€‚</p><h3 id="1-2-2-æ’ä»¶å’Œæ’ä»¶é›†"><a href="#1-2-2-æ’ä»¶å’Œæ’ä»¶é›†" class="headerlink" title="1.2.2 æ’ä»¶å’Œæ’ä»¶é›†"></a>1.2.2 æ’ä»¶å’Œæ’ä»¶é›†</h3><p><img src="https://i.loli.net/2020/11/03/AsTaIDd92cBoxMw.png" alt="1601015019180"></p><p>Umi æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œé€šè¿‡è¿™å¼ å›¾åº”è¯¥å¾ˆå¥½ç†è§£åˆ°ä»–ä»¬çš„å…³ç³»ï¼Œé€šè¿‡æ’ä»¶é›†æˆ‘ä»¬æŠŠæ’ä»¶æ”¶æ•›ä¾èµ–ç„¶åæ”¯æŒä¸åŒçš„ä¸šåŠ¡ç±»å‹ã€‚</p><p>æ¯”å¦‚@umijs/preset-reactå°±æ˜¯ä¸€ä¸ªUmiçš„æ’ä»¶é›†ï¼Œé‡Œé¢æ•´åˆäº†ä¸€äº›å¸¸ç”¨åŠŸèƒ½ã€‚</p><ul><li><a href="https://umijs.org/zh-CN/plugins/plugin-access">plugin-access</a>ï¼Œæƒé™ç®¡ç†</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-analytics">plugin-analytics</a>ï¼Œç»Ÿè®¡ç®¡ç†</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-antd">plugin-antd</a>ï¼Œæ•´åˆ antd UI ç»„ä»¶</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-crossorigin">plugin-crossorigin</a>ï¼Œé€šå¸¸ç”¨äº JS å‡ºé”™ç»Ÿè®¡</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-dva">plugin-dva</a>ï¼Œæ•´åˆ dva</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-helmet">plugin-helmet</a>ï¼Œæ•´åˆ <a href="https://github.com/nfl/react-helmet">react-helmet</a>ï¼Œç®¡ç† HTML æ–‡æ¡£æ ‡ç­¾ï¼ˆå¦‚æ ‡é¢˜ã€æè¿°ç­‰ï¼‰</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-initial-state">plugin-initial-state</a>ï¼Œåˆå§‹åŒ–æ•°æ®ç®¡ç†</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-layout">plugin-layout</a>ï¼Œé…ç½®å¯ç”¨ ant-design-pro çš„å¸ƒå±€</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-locale">plugin-locale</a>ï¼Œå›½é™…åŒ–èƒ½åŠ›</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-model">plugin-model</a>ï¼ŒåŸºäº hooks çš„ç®€æ˜“æ•°æ®æµ</li><li><a href="https://umijs.org/zh-CN/plugins/plugin-request">plugin-request</a>ï¼ŒåŸºäº umi-request å’Œ umi-hooks çš„è¯·æ±‚æ–¹æ¡ˆ</li></ul><h3 id="1-2-3-é…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±"><a href="#1-2-3-é…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±" class="headerlink" title="1.2.3 é…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±"></a>1.2.3 é…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±</h3><p>Umi çš„è·¯ç”±æ—¢æ”¯æŒé…ç½®å¼ï¼Œåˆæ”¯æŒçº¦å®šå¼ã€‚é…ç½®å¼æ˜¯å¯¹äºç°å®çš„ä½å¤´ï¼Œä¹Ÿæ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·åœ¨ç”¨çš„ï¼Œå› ä¸ºä»–åŠŸèƒ½å¼ºå¤§ï¼›çº¦å®šå¼æ˜¯æˆ‘ä»¬å¸Œæœ›èµ°å»çš„æ–¹å‘ï¼Œå› ä¸ºä»–ç®€æ´ä¼˜é›…ã€‚</p><h3 id="1-2-4-umi-ä¸´æ—¶æ–‡ä»¶"><a href="#1-2-4-umi-ä¸´æ—¶æ–‡ä»¶" class="headerlink" title="1.2.4 .umi ä¸´æ—¶æ–‡ä»¶"></a>1.2.4 .umi ä¸´æ—¶æ–‡ä»¶</h3><p>.umi ä¸´æ—¶ç›®å½•æ˜¯æ•´ä¸ª Umi é¡¹ç›®çš„å‘åŠ¨æœºï¼Œä½ çš„å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰ç­‰éƒ½åœ¨è¿™é‡Œï¼Œè¿™äº›æ˜¯ç”± umi å†…éƒ¨æ’ä»¶åŠä¸‰æ–¹æ’ä»¶ç”Ÿæˆçš„ã€‚</p><p>ä½ é€šå¸¸ä¼šåœ¨ .umi ä¸‹çœ‹åˆ°ä»¥ä¸‹ç›®å½•ï¼Œ</p><pre><code>+ .umi  + core     # å†…éƒ¨æ’ä»¶ç”Ÿæˆ  + pluginA  # å¤–éƒ¨æ’ä»¶ç”Ÿæˆ  + presetB  # å¤–éƒ¨æ’ä»¶ç”Ÿæˆ  + umi.ts   # å…¥å£æ–‡ä»¶</code></pre><p>ä¸´æ—¶æ–‡ä»¶æ˜¯ Umi æ¡†æ¶ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ¡†æ¶æˆ–æ’ä»¶ä¼šæ ¹æ®ä½ çš„ä»£ç ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œè¿™äº›åŸæ¥éœ€è¦æ”¾åœ¨é¡¹ç›®é‡Œçš„è„ä¹±å·®çš„éƒ¨åˆ†éƒ½è¢«è—åœ¨äº†è¿™é‡Œã€‚</p><p>ä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒè¯•ä»£ç ï¼Œä½†ä¸è¦åœ¨ .git ä»“åº“é‡Œæäº¤ä»–ï¼Œå› ä¸ºä»–çš„ä¸´æ—¶æ€§ï¼Œæ¯æ¬¡å¯åŠ¨ umi æ—¶éƒ½ä¼šè¢«åˆ é™¤å¹¶é‡æ–°ç”Ÿæˆã€‚</p><h1 id="2-Umi3çš„ä½¿ç”¨"><a href="#2-Umi3çš„ä½¿ç”¨" class="headerlink" title="2. Umi3çš„ä½¿ç”¨"></a>2. Umi3çš„ä½¿ç”¨</h1><h2 id="2-1-å®‰è£…Umiåˆ›å»ºé¡¹ç›®"><a href="#2-1-å®‰è£…Umiåˆ›å»ºé¡¹ç›®" class="headerlink" title="2.1  å®‰è£…Umiåˆ›å»ºé¡¹ç›®"></a>2.1  å®‰è£…Umiåˆ›å»ºé¡¹ç›®</h2><pre class=" language-jsx"><code class="language-jsx">$ yarn global add umi@<span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">23</span>$ umi <span class="token operator">-</span>v<span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">23</span></code></pre><pre class=" language-jsx"><code class="language-jsx">$ mkdir myapp <span class="token operator">&amp;&amp;</span> cd myapp$ yarn create umi</code></pre><p><img src="https://i.loli.net/2020/11/03/3C7eyf5ipj2rVUZ.png" alt="1573453772780"></p><p><img src="https://i.loli.net/2020/11/03/RTlk5Cxa1t4smph.png" alt="1573453795170"></p><p><img src="https://i.loli.net/2020/11/03/vbmaTHMpRI3DtL7.png" alt="1601014079199"></p><h2 id="2-2-å‡çº§åˆ°Umi3"><a href="#2-2-å‡çº§åˆ°Umi3" class="headerlink" title="2.2 å‡çº§åˆ°Umi3"></a>2.2 å‡çº§åˆ°Umi3</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token number">1</span><span class="token punctuation">.</span> åˆ é™¤<span class="token keyword">package</span><span class="token punctuation">.</span>jsonä¸­ dva å’Œ antd çš„ä¾èµ– <span class="token punctuation">(</span>Umi3ä¸­å·²ç»åŒ…å«è¿™ä¸¤ä¸ªä¾èµ–<span class="token punctuation">)</span><span class="token number">2</span><span class="token punctuation">.</span> ä¿®æ”¹<span class="token keyword">package</span><span class="token punctuation">.</span>jsonä¸­umiçš„åŒ…çš„ç‰ˆæœ¬å·   <span class="token string">"umi"</span><span class="token punctuation">:</span> <span class="token string">"^3.0.0"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">.</span> åˆ é™¤<span class="token keyword">package</span><span class="token punctuation">.</span>jsonä¸­ umi<span class="token operator">-</span>plugin<span class="token operator">-</span>react ä¾èµ–ï¼Œæ–°å¢umijs<span class="token operator">/</span>preset<span class="token operator">-</span>react ä¾èµ–   <span class="token string">"@umijs/preset-react"</span><span class="token punctuation">:</span> <span class="token string">"^1"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">.</span> ä¿®æ”¹<span class="token keyword">package</span><span class="token punctuation">.</span>jsonä¸­çš„nodeç¯å¢ƒè¦æ±‚   <span class="token string">"node"</span><span class="token punctuation">:</span> <span class="token string">">=10.13.0"</span><span class="token number">5</span><span class="token punctuation">.</span> tsconfig<span class="token punctuation">.</span>jsonä¸­çš„pathsæ–°å¢å¦‚ä¸‹ï¼š   <span class="token string">"@@/*"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"src/.umi/*"</span><span class="token punctuation">]</span><span class="token number">6</span><span class="token punctuation">.</span> ä¿®æ”¹ <span class="token punctuation">.</span>umirc<span class="token punctuation">.</span>tsæ–‡ä»¶    <span class="token operator">/</span><span class="token operator">/</span>å¼•å…¥umiä¸­çš„é…ç½®æ–‡ä»¶çš„ç±»å‹ tsä¸­è¦ç”¨    <span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">/</span><span class="token operator">/</span> ref<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>umijs<span class="token punctuation">.</span>org<span class="token regex">/config/</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token operator">/</span><span class="token operator">/</span>è·¯ç”±é…ç½®      routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>          <span class="token operator">/</span><span class="token operator">/</span>æ³¨æ„ï¼šè¿™è¾¹æ–‡ä»¶çš„è·¯å¾„æ˜¯ç›¸å¯¹äºsrc<span class="token operator">/</span><span class="token punctuation">.</span>muiä¸­æ¥ç¡®å®šçš„          component<span class="token punctuation">:</span> <span class="token string">'../layouts/index'</span><span class="token punctuation">,</span>          routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>               path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>               component<span class="token punctuation">:</span> <span class="token string">'../pages/index'</span>             <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span>å¯ç”¨antdæ’ä»¶      <span class="token operator">/</span><span class="token operator">/</span>æ¯ä¸ªæ’ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª id å’Œä¸€ä¸ª keyï¼Œid æ˜¯è·¯å¾„çš„ç®€å†™ï¼Œkey æ˜¯è¿›ä¸€æ­¥ç®€åŒ–åç”¨äºé…ç½®çš„å”¯ä¸€å€¼ã€‚      <span class="token operator">/</span><span class="token operator">/</span>æ¯”å¦‚æ’ä»¶ <span class="token operator">/</span>node_modules<span class="token operator">/</span>@umijs<span class="token operator">/</span>plugin<span class="token operator">-</span>antd <span class="token punctuation">,</span>id ä¸º @umijs<span class="token operator">/</span>plugin<span class="token operator">-</span>antdï¼Œkey ä¸º antdã€‚      antd<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span>å¯ç”¨dvaæ’ä»¶      dva<span class="token punctuation">:</span> <span class="token punctuation">{</span>        hmr<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token operator">/</span><span class="token operator">/</span>å¯ç”¨dva modelçš„çƒ­æ›´æ–°      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span>å¯ç”¨loacleæ’ä»¶  é…ç½®ä¹‹åæ‰å¯ä»¥ä½¿ç”¨useIntl       locale<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token operator">/</span><span class="token operator">/</span>é»˜è®¤çš„è¯­è¨€ç¯å¢ƒ        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>        <span class="token operator">/</span><span class="token operator">/</span>antdå¼€å¯å›½é™…åŒ–        antd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>         <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">,</span> when it is <span class="token boolean">true</span><span class="token punctuation">,</span> will use `navigator<span class="token punctuation">.</span>language` overwrite <span class="token keyword">default</span>        baseNavigator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> æµè§ˆå™¨å…¼å®¹      targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>        ie<span class="token punctuation">:</span> <span class="token number">11</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> å¼€å¯æ–‡ä»¶hashåç¼€      hash<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> å¯ç”¨ Hash è·¯ç”±      history<span class="token punctuation">:</span> <span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'hash'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> Theme <span class="token keyword">for</span> antd<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>ant<span class="token punctuation">.</span>design<span class="token operator">/</span>docs<span class="token operator">/</span>react<span class="token operator">/</span>customize<span class="token operator">-</span>theme<span class="token operator">-</span>cn      theme<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token operator">/</span><span class="token operator">/</span> <span class="token operator">...</span>darkTheme<span class="token punctuation">,</span>        <span class="token operator">/</span><span class="token operator">/</span> ä¸»è¦é¢œè‰²<span class="token punctuation">,</span>        <span class="token string">'font-size-base'</span><span class="token punctuation">:</span> <span class="token string">'34px'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span>é…ç½®æŒ‰éœ€åŠ è½½   å³æ˜¯å¦æŠŠæ„å»ºäº§ç‰©è¿›è¡Œæ‹†åˆ†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¸‹è½½é¢å¤–çš„ JS å†æ‰§è¡Œã€‚      dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> æŒ‡å®šreact<span class="token operator">-</span>routerçš„baseï¼Œéƒ¨ç½²åˆ°æ ¹ç›®å½•æ—¶éœ€è¦é…ç½®      base<span class="token punctuation">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> æŒ‡å®šwebpackçš„publicPathï¼ŒæŒ‡å‘é™æ€èµ„æºæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„      publicPath<span class="token punctuation">:</span><span class="token string">'./'</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> DefinePlugin å…¨å±€å¸¸é‡å®šä¹‰      define<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> ä»£ç†é…ç½®      proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token operator">/</span><span class="token operator">/</span> <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token operator">/</span><span class="token operator">/</span>   target<span class="token punctuation">:</span> <span class="token string">'http://127.0.0.1:10000/'</span><span class="token punctuation">,</span>        <span class="token operator">/</span><span class="token operator">/</span>   changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token operator">/</span><span class="token operator">/</span>   pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'^/api'</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token operator">/</span><span class="token operator">/</span> åˆ«å      alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">'@'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token number">7</span><span class="token punctuation">.</span> æ³¨é‡Šæ‰ app<span class="token punctuation">.</span>tsä¸­çš„<span class="token keyword">const</span> dva ä»£ç     <span class="token operator">/</span><span class="token operator">*</span>    <span class="token keyword">export</span> <span class="token keyword">const</span> dva <span class="token operator">=</span> <span class="token punctuation">{</span>      config<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">:</span> ErrorEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>          err<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token operator">*</span><span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">.</span> ä¿®æ”¹pages<span class="token operator">/</span>index<span class="token punctuation">.</span>tsx    <span class="token comment" spellcheck="true">//useIntl å›½é™…åŒ–çš„api</span>    <span class="token keyword">import</span> <span class="token punctuation">{</span> useIntl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"https://umijs.org/guide/getting-started.html"</span><span class="token operator">></span>        <span class="token punctuation">{</span><span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'index.start'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></code></pre><h2 id="2-3-è¿è¡Œé¡¹ç›®"><a href="#2-3-è¿è¡Œé¡¹ç›®" class="headerlink" title="2.3 è¿è¡Œé¡¹ç›®"></a>2.3 è¿è¡Œé¡¹ç›®</h2><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//ç„¶åå®‰è£…ä¾èµ–</span>$ yarn<span class="token comment" spellcheck="true">//ç„¶åå¯åŠ¨åº”ç”¨</span>$ yarn start</code></pre><p>å‡ ç§’é’Ÿåï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œ</p><pre class=" language-jsx"><code class="language-jsx"> DONE  Compiled successfully <span class="token keyword">in</span> 212ms  App running at<span class="token punctuation">:</span>  <span class="token operator">-</span> Local<span class="token punctuation">:</span>   http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>  <span class="token operator">-</span> Network<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span> YourIP <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span></code></pre><p>åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€ <a href="http://localhost:8000/">http://localhost:8000</a>ï¼Œä½ ä¼šçœ‹åˆ° umi çš„æ¬¢è¿ç•Œé¢ã€‚</p><p><img src="https://i.loli.net/2020/11/03/2kvGAwIRglafLX9.png" alt="img"></p><h2 id="2-4-ç›®å½•ç»“æ„ä»‹ç»"><a href="#2-4-ç›®å½•ç»“æ„ä»‹ç»" class="headerlink" title="2.4 ç›®å½•ç»“æ„ä»‹ç»"></a>2.4 ç›®å½•ç»“æ„ä»‹ç»</h2><p><img src="https://i.loli.net/2020/11/03/3wlgZrYOmbpd9tB.png" alt="1601020141915"></p><h2 id="2-5-é…ç½®æ–‡ä»¶ä»‹ç»"><a href="#2-5-é…ç½®æ–‡ä»¶ä»‹ç»" class="headerlink" title="2.5 é…ç½®æ–‡ä»¶ä»‹ç»"></a>2.5 é…ç½®æ–‡ä»¶ä»‹ç»</h2><h3 id="2-5-1-editorconfig"><a href="#2-5-1-editorconfig" class="headerlink" title="2.5.1 .editorconfig"></a>2.5.1 .editorconfig</h3><p>è¯¥æ–‡ä»¶æ˜¯é…ç½®ç¼–è¾‘å™¨çš„ä¸€äº›è®¾ç½®ï¼Œè¿™é‡Œæˆ‘ä¿®æ”¹äº†ä¸€ä¸ªç¼©è¿›ï¼Œindent_size = 4ã€‚å› ä¸ºä¸ªäººæ¯”è¾ƒå–œæ¬¢4ä¸ªç¼©è¿›ï¼Œçœ‹ç€èˆ’æœã€‚</p><h3 id="2-5-2-env"><a href="#2-5-2-env" class="headerlink" title="2.5.2 .env"></a>2.5.2 .env</h3><p>è¯¥æ–‡ä»¶æ˜¯é¡¹ç›®ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤çš„æ˜¯BROWSER=noneï¼Œè¿™æ—¶å€™é¡¹ç›®å¯åŠ¨åï¼Œæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨æ‰“å¼€ã€‚</p><h3 id="2-5-3-eslintrc"><a href="#2-5-3-eslintrc" class="headerlink" title="2.5.3 .eslintrc"></a>2.5.3 .eslintrc</h3><p>å¤šäººå¼€å‘æ—¶å€™ï¼Œä¸€å¥—è‰¯å¥½çš„ä»£ç è§„èŒƒæ˜¯éå¸¸å¿…è¦çš„ã€‚è¿™é‡Œé…ç½®äº†ä¸€ä»½åŸºç¡€eslintæ–‡ä»¶ï¼Œä¾›å‚è€ƒã€‚</p><pre class=" language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>  <span class="token string">"env"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token string">"es6"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token string">"node"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token string">"browser"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token string">"mocha"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token string">"extends"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>    <span class="token string">"react-app"</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token string">"rules"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token string">"strict"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//"indent": ["error", 4, { "SwitchCase": 1 }],</span>    <span class="token string">"eqeqeq"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-lone-blocks"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-lonely-if"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-multi-spaces"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-multiple-empty-lines"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"error"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"max"</span><span class="token punctuation">:</span> <span class="token number">2</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"no-param-reassign"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-spaced-func"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"no-use-before-define"</span><span class="token punctuation">:</span> <span class="token string">"warn"</span><span class="token punctuation">,</span>    <span class="token string">"no-unused-vars"</span><span class="token punctuation">:</span> <span class="token string">"warn"</span><span class="token punctuation">,</span>    <span class="token string">"no-with"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"default-case"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>    <span class="token string">"key-spacing"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"error"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"beforeColon"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token string">"afterColon"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"comma-spacing"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"error"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"before"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token string">"after"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"generator-star-spacing"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"error"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"before"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token string">"after"</span><span class="token punctuation">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"semi"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"warn"</span><span class="token punctuation">,</span>      <span class="token string">"always"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"omitLastInOneLineBlock"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"no-restricted-globals"</span><span class="token punctuation">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>    <span class="token string">"array-callback-return"</span><span class="token punctuation">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>    <span class="token string">"no-console"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token string">"warn"</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token string">"allow"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token string">"info"</span><span class="token punctuation">,</span>          <span class="token string">"warn"</span><span class="token punctuation">,</span>          <span class="token string">"error"</span><span class="token punctuation">,</span>          <span class="token string">"time"</span><span class="token punctuation">,</span>          <span class="token string">"timeEnd"</span>        <span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">"react/react-in-jsx-scope"</span><span class="token punctuation">:</span> <span class="token string">"warn"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-5-3-umirc"><a href="#2-5-3-umirc" class="headerlink" title="2.5.3 .umirc"></a>2.5.3 .umirc</h3><p>.umircä¸ºUmié¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œ.umirc.js å’Œ config/config.jsäºŒé€‰ä¸€</p><h3 id="2-5-4-tsconfig-json"><a href="#2-5-4-tsconfig-json" class="headerlink" title="2.5.4 tsconfig.json"></a>2.5.4 tsconfig.json</h3><p>typescriptçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®tsç¼–è¯‘çš„ä¸€äº›ç‰¹å¾</p><p><a href="https://www.jianshu.com/p/78dcb09dac2c">https://www.jianshu.com/p/78dcb09dac2c</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//tsconfig.json å¯¹è±¡ç±»å‹çš„ç´¢å¼•ç­¾åéšå¼å…·æœ‰"any"ç±»å‹ æŠ¥é”™</span><span class="token string">"suppressImplicitAnyIndexErrors"</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token string">"compilerOptions"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/* Basic Options */</span>    <span class="token string">"target"</span><span class="token punctuation">:</span> <span class="token string">"es5"</span> <span class="token comment" spellcheck="true">/* targetç”¨äºæŒ‡å®šç¼–è¯‘ä¹‹åçš„ç‰ˆæœ¬ç›®æ ‡: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019' or 'ESNEXT'. */</span><span class="token punctuation">,</span>    <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"commonjs"</span> <span class="token comment" spellcheck="true">/* ç”¨æ¥æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å—æ ‡å‡†: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'. */</span><span class="token punctuation">,</span>    <span class="token string">"lib"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"es6"</span><span class="token punctuation">,</span> <span class="token string">"dom"</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">/* libç”¨äºæŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶ */</span><span class="token punctuation">,</span>    <span class="token string">"allowJs"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* allowJsè®¾ç½®çš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨æ¥æŒ‡å®šæ˜¯å¦å…è®¸ç¼–è¯‘jsæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯falseï¼Œå³ä¸ç¼–è¯‘jsæ–‡ä»¶ */</span>    <span class="token string">"checkJs"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* checkJsçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨æ¥æŒ‡å®šæ˜¯å¦æ£€æŸ¥å’ŒæŠ¥å‘Šjsæ–‡ä»¶ä¸­çš„é”™è¯¯ï¼Œé»˜è®¤æ˜¯false */</span>    <span class="token string">"jsx"</span><span class="token punctuation">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>                     <span class="token comment" spellcheck="true">/* æŒ‡å®šjsxä»£ç ç”¨äºçš„å¼€å‘ç¯å¢ƒ: 'preserve', 'react-native', or 'react'. */</span>    <span class="token string">"declaration"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                   <span class="token comment" spellcheck="true">/* declarationçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨æ¥æŒ‡å®šæ˜¯å¦åœ¨ç¼–è¯‘çš„æ—¶å€™ç”Ÿæˆç›¸åº”çš„".d.ts"å£°æ˜æ–‡ä»¶ã€‚å¦‚æœè®¾ä¸ºtrueï¼Œç¼–è¯‘æ¯ä¸ªtsæ–‡ä»¶ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªjsæ–‡ä»¶å’Œä¸€ä¸ªå£°æ˜æ–‡ä»¶ã€‚ä½†æ˜¯declarationå’ŒallowJsä¸èƒ½åŒæ—¶è®¾ä¸ºtrue */</span>    <span class="token string">"declarationMap"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/* å€¼ä¸ºtrueæˆ–falseï¼ŒæŒ‡å®šæ˜¯å¦ä¸ºå£°æ˜æ–‡ä»¶.d.tsç”Ÿæˆmapæ–‡ä»¶ */</span>    <span class="token string">"sourceMap"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                     <span class="token comment" spellcheck="true">/* sourceMapçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨æ¥æŒ‡å®šç¼–è¯‘æ—¶æ˜¯å¦ç”Ÿæˆ.mapæ–‡ä»¶ */</span>    <span class="token string">"outFile"</span><span class="token punctuation">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* outFileç”¨äºæŒ‡å®šå°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„å€¼ä¸ºä¸€ä¸ªæ–‡ä»¶è·¯å¾„åã€‚æ¯”å¦‚è®¾ç½®ä¸º"./dist/main.js"ï¼Œåˆ™è¾“å‡ºçš„æ–‡ä»¶ä¸ºä¸€ä¸ªmain.jsæ–‡ä»¶ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œåªæœ‰è®¾ç½®moduleçš„å€¼ä¸ºamdå’Œsystemæ¨¡å—æ—¶æ‰æ”¯æŒè¿™ä¸ªé…ç½® */</span>    <span class="token string">"outDir"</span><span class="token punctuation">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>                        <span class="token comment" spellcheck="true">/* outDirç”¨æ¥æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹ï¼Œå€¼ä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„å­—ç¬¦ä¸²ï¼Œè¾“å‡ºçš„æ–‡ä»¶éƒ½å°†æ”¾ç½®åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ */</span>    <span class="token string">"rootDir"</span><span class="token punctuation">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* ç”¨æ¥æŒ‡å®šç¼–è¯‘æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æ ¹ç›®å½•æŸ¥æ‰¾å…¥å£æ–‡ä»¶ï¼Œå¦‚æœç¼–è¯‘å™¨å‘ç°ä»¥rootDirçš„å€¼ä½œä¸ºæ ¹ç›®å½•æŸ¥æ‰¾å…¥å£æ–‡ä»¶å¹¶ä¸ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶åŠ è½½è¿›å»çš„è¯ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ä¸ä¼šåœæ­¢ç¼–è¯‘ */</span>    <span class="token string">"composite"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                     <span class="token comment" spellcheck="true">/* æ˜¯å¦ç¼–è¯‘æ„å»ºå¼•ç”¨é¡¹ç›®  */</span>    <span class="token string">"incremental"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                   <span class="token comment" spellcheck="true">/* Enable incremental compilation */</span>    <span class="token string">"tsBuildInfoFile"</span><span class="token punctuation">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>               <span class="token comment" spellcheck="true">/* Specify file to store incremental compilation information */</span>    <span class="token string">"removeComments"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/* removeCommentsçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨äºæŒ‡å®šæ˜¯å¦å°†ç¼–è¯‘åçš„æ–‡ä»¶ä¸­çš„æ³¨é‡Šåˆ æ‰ï¼Œè®¾ä¸ºtrueçš„è¯å³åˆ æ‰æ³¨é‡Šï¼Œé»˜è®¤ä¸ºfalse */</span>    <span class="token string">"noEmit"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                        <span class="token comment" spellcheck="true">/* ä¸ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ï¼Œè¿™ä¸ªä¸€èˆ¬æ¯”è¾ƒå°‘ç”¨ */</span>    <span class="token string">"importHelpers"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                 <span class="token comment" spellcheck="true">/* importHelpersçš„å€¼ä¸ºtrueæˆ–falseï¼ŒæŒ‡å®šæ˜¯å¦å¼•å…¥tslibé‡Œçš„è¾…åŠ©å·¥å…·å‡½æ•°ï¼Œé»˜è®¤ä¸ºfalse */</span>    <span class="token string">"downlevelIteration"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">/* å½“targetä¸º'ES5' or 'ES3'æ—¶ï¼Œä¸º'for-of', spread, and destructuring'ä¸­çš„è¿­ä»£å™¨æä¾›å®Œå…¨æ”¯æŒ */</span>    <span class="token string">"isolatedModules"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>               <span class="token comment" spellcheck="true">/* isolatedModulesçš„å€¼ä¸ºtrueæˆ–falseï¼ŒæŒ‡å®šæ˜¯å¦å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºå•ç‹¬çš„æ¨¡å—ï¼Œé»˜è®¤ä¸ºtrueï¼Œå®ƒä¸å¯ä»¥å’ŒdeclarationåŒæ—¶è®¾å®š */</span>    <span class="token comment" spellcheck="true">/* Strict Type-Checking Options */</span>    <span class="token string">"strict"</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">/* strictçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨äºæŒ‡å®šæ˜¯å¦å¯åŠ¨æ‰€æœ‰ç±»å‹æ£€æŸ¥ï¼Œå¦‚æœè®¾ä¸ºtrueåˆ™ä¼šåŒæ—¶å¼€å¯ä¸‹é¢è¿™å‡ ä¸ªä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼Œé»˜è®¤ä¸ºfalse */</span><span class="token punctuation">,</span>    <span class="token string">"noImplicitAny"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                 <span class="token comment" spellcheck="true">/* noImplicitAnyçš„å€¼ä¸ºtrueæˆ–falseï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸ºä¸€äº›å€¼è®¾ç½®æ˜ç¡®çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤è®¤ä¸ºè¿™ä¸ªå€¼ä¸ºanyï¼Œå¦‚æœnoImplicitAnyçš„å€¼ä¸ºtrueçš„è¯ã€‚åˆ™æ²¡æœ‰æ˜ç¡®çš„ç±»å‹ä¼šæŠ¥é”™ã€‚é»˜è®¤å€¼ä¸ºfalse */</span>    <span class="token string">"strictNullChecks"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token comment" spellcheck="true">/* strictNullChecksä¸ºtrueæ—¶ï¼Œnullå’Œundefinedå€¼ä¸èƒ½èµ‹ç»™éè¿™ä¸¤ç§ç±»å‹çš„å€¼ï¼Œåˆ«çš„ç±»å‹ä¹Ÿä¸èƒ½èµ‹ç»™ä»–ä»¬ï¼Œé™¤äº†anyç±»å‹ã€‚è¿˜æœ‰ä¸ªä¾‹å¤–å°±æ˜¯undefinedå¯ä»¥èµ‹å€¼ç»™voidç±»å‹ */</span>    <span class="token string">"strictFunctionTypes"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">/* strictFunctionTypesçš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨äºæŒ‡å®šæ˜¯å¦ä½¿ç”¨å‡½æ•°å‚æ•°åŒå‘åå˜æ£€æŸ¥ */</span>    <span class="token string">"strictBindCallApply"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">/* è®¾ä¸ºtrueåä¼šå¯¹bindã€callå’Œapplyç»‘å®šçš„æ–¹æ³•çš„å‚æ•°çš„æ£€æµ‹æ˜¯ä¸¥æ ¼æ£€æµ‹çš„ */</span>    <span class="token string">"strictPropertyInitialization"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">/* è®¾ä¸ºtrueåä¼šæ£€æŸ¥ç±»çš„éundefinedå±æ€§æ˜¯å¦å·²ç»åœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ–ï¼Œå¦‚æœè¦å¼€å¯è¿™é¡¹ï¼Œéœ€è¦åŒæ—¶å¼€å¯strictNullChecksï¼Œé»˜è®¤ä¸ºfalse */</span>   <span class="token string">"noImplicitThis"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/* å½“thisè¡¨è¾¾å¼çš„å€¼ä¸ºanyç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯ */</span>    <span class="token string">"alwaysStrict"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                  <span class="token comment" spellcheck="true">/* alwaysStrictçš„å€¼ä¸ºtrueæˆ–falseï¼ŒæŒ‡å®šå§‹ç»ˆä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘ä¹‹åçš„jsæ–‡ä»¶ä¸­åŠ å…¥"use strict"å­—ç¬¦ä¸²ï¼Œç”¨æ¥å‘Šè¯‰æµè§ˆå™¨è¯¥jsä¸ºä¸¥æ ¼æ¨¡å¼ */</span>    <span class="token comment" spellcheck="true">/* Additional Checks */</span>    <span class="token string">"noUnusedLocals"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/* ç”¨äºæ£€æŸ¥æ˜¯å¦æœ‰å®šä¹‰äº†ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨çš„å˜é‡ï¼Œå¯¹äºè¿™ä¸€ç‚¹çš„æ£€æµ‹ï¼Œä½¿ç”¨eslintå¯ä»¥åœ¨ä½ ä¹¦å†™ä»£ç çš„æ—¶å€™åšæç¤ºï¼Œä½ å¯ä»¥é…åˆä½¿ç”¨ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºfalse */</span>    <span class="token string">"noUnusedParameters"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">/* ç”¨äºæ£€æŸ¥æ˜¯å¦æœ‰åœ¨å‡½æ•°ä½“ä¸­æ²¡æœ‰ä½¿ç”¨çš„å‚æ•°ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥é…åˆeslintæ¥åšæ£€æŸ¥ï¼Œé»˜è®¤ä¸ºfalse */</span>    <span class="token string">"noImplicitReturns"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             <span class="token comment" spellcheck="true">/* ç”¨äºæ£€æŸ¥å‡½æ•°æ˜¯å¦æœ‰è¿”å›å€¼ï¼Œè®¾ä¸ºtrueåï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼åˆ™ä¼šæç¤ºï¼Œé»˜è®¤ä¸ºfalse */</span>    <span class="token string">"noFallthroughCasesInSwitch"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">/* ç”¨äºæ£€æŸ¥switchä¸­æ˜¯å¦æœ‰caseæ²¡æœ‰ä½¿ç”¨breakè·³å‡ºswitchï¼Œé»˜è®¤ä¸ºfalse */</span>    <span class="token comment" spellcheck="true">/* Module Resolution Options */</span>    <span class="token string">"moduleResolution"</span><span class="token punctuation">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">/* ç”¨äºé€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼Œæœ‰'node'å’Œ'classic'ä¸¤ç§ç±»å‹' */</span>    <span class="token string">"baseUrl"</span><span class="token punctuation">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* baseUrlç”¨äºè®¾ç½®è§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºæœ¬ç›®å½•ï¼Œç›¸å¯¹æ¨¡å—ä¸ä¼šå—baseUrlçš„å½±å“ */</span>    <span class="token string">"paths"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                           <span class="token comment" spellcheck="true">/* ç”¨äºè®¾ç½®æ¨¡å—åç§°åˆ°åŸºäºbaseUrlçš„è·¯å¾„æ˜ å°„ */</span>    <span class="token string">"rootDirs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                        <span class="token comment" spellcheck="true">/* rootDirså¯ä»¥æŒ‡å®šä¸€ä¸ªè·¯å¾„åˆ—è¡¨ï¼Œåœ¨æ„å»ºæ—¶ç¼–è¯‘å™¨ä¼šå°†è¿™ä¸ªè·¯å¾„åˆ—è¡¨ä¸­çš„è·¯å¾„çš„å†…å®¹éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ */</span>    <span class="token string">"typeRoots"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                       <span class="token comment" spellcheck="true">/* typeRootsç”¨æ¥æŒ‡å®šå£°æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è·¯å¾„åˆ—è¡¨ï¼Œå¦‚æœæŒ‡å®šäº†æ­¤é¡¹ï¼Œåˆ™åªæœ‰åœ¨è¿™é‡Œåˆ—å‡ºçš„å£°æ˜æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½ */</span>    <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                           <span class="token comment" spellcheck="true">/* typesç”¨æ¥æŒ‡å®šéœ€è¦åŒ…å«çš„æ¨¡å—ï¼Œåªæœ‰åœ¨è¿™é‡Œåˆ—å‡ºçš„æ¨¡å—çš„å£°æ˜æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½è¿›æ¥ */</span>    <span class="token string">"allowSyntheticDefaultImports"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">/* ç”¨æ¥æŒ‡å®šå…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ */</span>    <span class="token string">"esModuleInterop"</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">/* é€šè¿‡ä¸ºå¯¼å…¥å†…å®¹åˆ›å»ºå‘½åç©ºé—´ï¼Œå®ç°CommonJSå’ŒESæ¨¡å—ä¹‹é—´çš„äº’æ“ä½œæ€§ */</span><span class="token punctuation">,</span>    <span class="token string">"preserveSymlinks"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token comment" spellcheck="true">/* ä¸æŠŠç¬¦å·é“¾æ¥è§£æä¸ºå…¶çœŸå®è·¯å¾„ï¼Œå…·ä½“å¯ä»¥äº†è§£ä¸‹webpackå’Œnodejsçš„symlinkç›¸å…³çŸ¥è¯† */</span>    <span class="token comment" spellcheck="true">/* Source Map Options */</span>    <span class="token string">"sourceRoot"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                      <span class="token comment" spellcheck="true">/* sourceRootç”¨äºæŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°TypeScriptæ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶ä½ç½®ï¼Œè¿™ä¸ªå€¼ä¼šè¢«å†™è¿›.mapæ–‡ä»¶é‡Œ */</span>    <span class="token string">"mapRoot"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                         <span class="token comment" spellcheck="true">/* mapRootç”¨äºæŒ‡å®šè°ƒè¯•å™¨æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œéç”Ÿæˆæ–‡ä»¶çš„ä½ç½®ï¼ŒæŒ‡å®šmapæ–‡ä»¶çš„æ ¹è·¯å¾„ï¼Œè¯¥é€‰é¡¹ä¼šå½±å“.mapæ–‡ä»¶ä¸­çš„sourceså±æ€§ */</span>    <span class="token string">"inlineSourceMap"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>               <span class="token comment" spellcheck="true">/* æŒ‡å®šæ˜¯å¦å°†mapæ–‡ä»¶çš„å†…å®¹å’Œjsæ–‡ä»¶ç¼–è¯‘åœ¨åŒä¸€ä¸ªjsæ–‡ä»¶ä¸­ï¼Œå¦‚æœè®¾ä¸ºtrueï¼Œåˆ™mapçš„å†…å®¹ä¼šä»¥//# sourceMappingURL=ç„¶åæ‹¼æ¥base64å­—ç¬¦ä¸²çš„å½¢å¼æ’å…¥åœ¨jsæ–‡ä»¶åº•éƒ¨ */</span>    <span class="token string">"inlineSources"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                 <span class="token comment" spellcheck="true">/* ç”¨äºæŒ‡å®šæ˜¯å¦è¿›ä¸€æ­¥å°†.tsæ–‡ä»¶çš„å†…å®¹ä¹ŸåŒ…å«åˆ°è¾“å…¥æ–‡ä»¶ä¸­ */</span>    <span class="token comment" spellcheck="true">/* Experimental Options */</span>    <span class="token string">"experimentalDecorators"</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">/* ç”¨äºæŒ‡å®šæ˜¯å¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ */</span>    <span class="token string">"emitDecoratorMetadata"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">/* ç”¨äºæŒ‡å®šæ˜¯å¦ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®æ”¯æŒï¼Œå…³äºå…ƒæ•°æ®ï¼Œä¹Ÿæ˜¯ES6çš„æ–°æ ‡å‡†ï¼Œå¯ä»¥é€šè¿‡Reflectæä¾›çš„é™æ€æ–¹æ³•è·å–å…ƒæ•°æ®ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨Reflectçš„ä¸€äº›æ–¹æ³•ï¼Œéœ€è¦å¼•å…¥ES2015.Reflectè¿™ä¸ªåº“ */</span>  <span class="token punctuation">}</span>  <span class="token string">"files"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// fileså¯ä»¥é…ç½®ä¸€ä¸ªæ•°ç»„åˆ—è¡¨ï¼Œé‡Œé¢åŒ…å«æŒ‡å®šæ–‡ä»¶çš„ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™åªä¼šç¼–è¯‘åŒ…å«åœ¨filesä¸­åˆ—å‡ºçš„æ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™å–å†³äºæœ‰æ²¡æœ‰è®¾ç½®includeé€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰includeé€‰é¡¹ï¼Œåˆ™é»˜è®¤ä¼šç¼–è¯‘æ ¹ç›®å½•ä»¥åŠæ‰€æœ‰å­ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚è¿™é‡Œåˆ—å‡ºçš„è·¯å¾„å¿…é¡»æ˜¯æŒ‡å®šæ–‡ä»¶ï¼Œè€Œä¸æ˜¯æŸä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œä¸”ä¸èƒ½ä½¿ç”¨* ? **/ ç­‰é€šé…ç¬¦</span>  <span class="token string">"include"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// includeä¹Ÿå¯ä»¥æŒ‡å®šè¦ç¼–è¯‘çš„è·¯å¾„åˆ—è¡¨ï¼Œä½†æ˜¯å’Œfilesçš„åŒºåˆ«åœ¨äºï¼Œè¿™é‡Œçš„è·¯å¾„å¯ä»¥æ˜¯æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹å’Œç»å¯¹è·¯å¾„ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œæ¯”å¦‚"./src"å³è¡¨ç¤ºè¦ç¼–è¯‘srcæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä»¥åŠå­æ–‡ä»¶å¤¹çš„æ–‡ä»¶</span>  <span class="token string">"exclude"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// excludeè¡¨ç¤ºè¦æ’é™¤çš„ã€ä¸ç¼–è¯‘çš„æ–‡ä»¶ï¼Œå®ƒä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåˆ—è¡¨ï¼Œè§„åˆ™å’Œincludeä¸€æ ·ï¼Œå¯ä»¥æ˜¯æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦</span>  <span class="token string">"extends"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">// extendså¯ä»¥é€šè¿‡æŒ‡å®šä¸€ä¸ªå…¶ä»–çš„tsconfig.jsonæ–‡ä»¶è·¯å¾„ï¼Œæ¥ç»§æ‰¿è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œçš„é…ç½®ï¼Œç»§æ‰¿æ¥çš„æ–‡ä»¶çš„é…ç½®ä¼šè¦†ç›–å½“å‰æ–‡ä»¶å®šä¹‰çš„é…ç½®ã€‚TSåœ¨3.2ç‰ˆæœ¬å¼€å§‹ï¼Œæ”¯æŒç»§æ‰¿ä¸€ä¸ªæ¥è‡ªNode.jsåŒ…çš„tsconfig.jsoné…ç½®æ–‡ä»¶</span>  <span class="token string">"compileOnSave"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// compileOnSaveçš„å€¼æ˜¯trueæˆ–falseï¼Œå¦‚æœè®¾ä¸ºtrueï¼Œåœ¨æˆ‘ä»¬ç¼–è¾‘äº†é¡¹ç›®ä¸­çš„æ–‡ä»¶ä¿å­˜çš„æ—¶å€™ï¼Œç¼–è¾‘å™¨ä¼šæ ¹æ®tsconfig.jsonä¸­çš„é…ç½®é‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸ªè¦ç¼–è¾‘å™¨æ”¯æŒ</span>  <span class="token string">"references"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼ŒæŒ‡å®šè¦å¼•ç”¨çš„é¡¹ç›®</span><span class="token punctuation">}</span></code></pre><h2 id="2-6-è·¯ç”±å’Œé¡µé¢è·³è½¬"><a href="#2-6-è·¯ç”±å’Œé¡µé¢è·³è½¬" class="headerlink" title="2.6 è·¯ç”±å’Œé¡µé¢è·³è½¬"></a>2.6 è·¯ç”±å’Œé¡µé¢è·³è½¬</h2><h3 id="2-6-1-æ–°å»ºè·¯ç”±"><a href="#2-6-1-æ–°å»ºè·¯ç”±" class="headerlink" title="2.6.1 æ–°å»ºè·¯ç”±"></a>2.6.1 æ–°å»ºè·¯ç”±</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.æ•²å…¥å‘½ä»¤å¦‚ä¸‹</span>$   umi g page product<span class="token operator">/</span>index <span class="token operator">--</span>typescript <span class="token operator">--</span>less   create src<span class="token operator">/</span>pages<span class="token operator">/</span>product<span class="token operator">/</span>index<span class="token punctuation">.</span>js   create src<span class="token operator">/</span>pages<span class="token operator">/</span>product<span class="token operator">/</span>index<span class="token punctuation">.</span>lessâœ”  success<span class="token comment" spellcheck="true">//2.ä¿®æ”¹ .umirc.tsæ–‡ä»¶ä¸­è·¯ç”±é…ç½®</span>  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ³¨æ„ï¼šè·¯å¾„å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¼šä» src/pages å¼€å§‹æ‰¾èµ·ã€‚å¦‚æœæŒ‡å‘ src ç›®å½•çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ @ï¼Œä¹Ÿå¯ä»¥ç”¨ ../ã€‚æ¯”å¦‚ component: '@/layouts/basic'</span>      <span class="token comment" spellcheck="true">//æ³¨æ„ï¼šè¿™é‡Œä¸ä¼šç”Ÿæˆexact:trueçš„é…ç½®</span>      component<span class="token punctuation">:</span> <span class="token string">'../layouts/index'</span><span class="token punctuation">,</span>      routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          path<span class="token punctuation">:</span> <span class="token string">'/product/index'</span><span class="token punctuation">,</span>          component<span class="token punctuation">:</span> <span class="token string">'../pages/product/index'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>           path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>           component<span class="token punctuation">:</span> <span class="token string">'../pages/index'</span>         <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//3.åœ¨srcç›®å½•ä¸‹åˆ›å»ºtypings.d.ts æ–‡ä»¶ </span><span class="token comment" spellcheck="true">//æ¨¡å—å£°æ˜æ–‡ä»¶ï¼šä¸å†™åœ¨å¼•å…¥lessçš„æ—¶å€™tsä¼šè­¦å‘Š</span>declare module <span class="token string">'slash2'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.css'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.less'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.scss'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.sass'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.svg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.png'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.jpg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.jpeg'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.gif'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.bmp'</span><span class="token punctuation">;</span>declare module <span class="token string">'*.tiff'</span><span class="token punctuation">;</span>declare module <span class="token string">'omit.js'</span><span class="token punctuation">;</span></code></pre><h3 id="2-6-2-çº¦å®šå¼è·¯ç”±"><a href="#2-6-2-çº¦å®šå¼è·¯ç”±" class="headerlink" title="2.6.2 çº¦å®šå¼è·¯ç”±"></a>2.6.2 çº¦å®šå¼è·¯ç”±</h3><p>é™¤é…ç½®å¼è·¯ç”±å¤–ï¼ŒUmi ä¹Ÿæ”¯æŒçº¦å®šå¼è·¯ç”±ã€‚çº¦å®šå¼è·¯ç”±ä¹Ÿå«æ–‡ä»¶è·¯ç”±ï¼Œå°±æ˜¯ä¸éœ€è¦æ‰‹å†™é…ç½®ï¼Œæ–‡ä»¶ç³»ç»Ÿå³è·¯ç”±ï¼Œé€šè¿‡ç›®å½•å’Œæ–‡ä»¶åŠå…¶å‘½ååˆ†æå‡ºè·¯ç”±é…ç½®ã€‚</p><p><strong>å¦‚æœæ²¡æœ‰ routes é…ç½®ï¼ŒUmi ä¼šè¿›å…¥çº¦å®šå¼è·¯ç”±æ¨¡å¼</strong>ï¼Œç„¶ååˆ†æ <code>src/pages</code> ç›®å½•æ‹¿åˆ°è·¯ç”±é…ç½®ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p><pre><code>.  â””â”€â”€ pages    â”œâ”€â”€ index.tsx    â””â”€â”€ users.tsx</code></pre><p>ä¼šå¾—åˆ°ä»¥ä¸‹è·¯ç”±é…ç½®ï¼Œ</p><pre><code>[  { exact: true, path: '/', component: '@/pages/index' },  { exact: true, path: '/users', component: '@/pages/users' },]</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„è§„åˆ™çš„æ–‡ä»¶ä¸ä¼šè¢«æ³¨å†Œä¸ºè·¯ç”±ï¼Œ</p><ul><li>ä»¥ <code>.</code> æˆ– <code>_</code> å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•</li><li>ä»¥ <code>d.ts</code> ç»“å°¾çš„ç±»å‹å®šä¹‰æ–‡ä»¶</li><li>ä»¥ <code>test.ts</code>ã€<code>spec.ts</code>ã€<code>e2e.ts</code> ç»“å°¾çš„æµ‹è¯•æ–‡ä»¶ï¼ˆé€‚ç”¨äº <code>.js</code>ã€<code>.jsx</code> å’Œ <code>.tsx</code> æ–‡ä»¶ï¼‰</li><li><code>components</code> å’Œ <code>component</code> ç›®å½•</li><li><code>utils</code> å’Œ <code>util</code> ç›®å½•</li><li>ä¸æ˜¯ <code>.js</code>ã€<code>.jsx</code>ã€<code>.ts</code> æˆ– <code>.tsx</code> æ–‡ä»¶</li><li>æ–‡ä»¶å†…å®¹ä¸åŒ…å« JSX å…ƒç´ </li></ul><p><strong>æ‰€ä»¥å½“æˆ‘ä»¬æŠŠ.umirc.jsä¸­çš„routesé…ç½®æ³¨é‡Šæ‰çš„æ—¶å€™ï¼Œè®¿é—®è·¯å¾„<a href="http://localhost:8000/#/product">http://localhost:8000/#/product</a>èƒ½å¤Ÿæ­£å¸¸å±•ç¤ºé¡µé¢ã€‚</strong></p><h3 id="2-6-3-è·¯ç”±é…ç½®"><a href="#2-6-3-è·¯ç”±é…ç½®" class="headerlink" title="2.6.3 è·¯ç”±é…ç½®"></a>2.6.3 è·¯ç”±é…ç½®</h3><pre class=" language-javascript"><code class="language-javascript">component<span class="token punctuation">:</span> <span class="token string">'@/layouts/index'</span>         <span class="token comment" spellcheck="true">//é…ç½®é¡µé¢æ¨¡æ¿ï¼Œä¸åŒçš„è·¯ç”±å¯ä»¥é…ç½®ä¸åŒçš„layout</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/one'</span><span class="token punctuation">,</span> exact<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ä¸¥æ ¼åŒ¹é…ï¼Œlocation æ˜¯å¦å’Œ path å®Œå…¨å¯¹åº”ä¸Š</span><span class="token comment" spellcheck="true">//é…ç½®å­è·¯ç”±</span>routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/list'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'admin'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//é‡å®šå‘</span><span class="token punctuation">{</span>    path<span class="token punctuation">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>    redirect<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/**   * è·¯ç”±é…ç½®æ³¨æ„ç‚¹ï¼š   * 1.{path:"",component:"",routes:[{path:"",component:""}]}   *   ç¬¬ä¸€å±‚çš„é…ç½®ä¸€èˆ¬ç”¨æ¥é…ç½®é¡µé¢å¸ƒå±€æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç»™å®ƒåŠ exact:trueï¼Œå¦åˆ™ä¼šå¯¼è‡´routesé‡Œé¢çš„è§„åˆ™ä¸èƒ½å¤Ÿè¢«åŠ è½½   *   routesé‡Œé¢çš„è§„åˆ™ç”¨æ¥é…ç½®å…·ä½“è·¯ç”±,æˆ‘ä»¬ä¹Ÿä¸éœ€è¦ç»™å®ƒåŠ exact:trueï¼Œå› ä¸ºä¼šé»˜è®¤ç”Ÿæˆ   * 2.ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šè¿™æ ·å†™ {path:"/product",component:"@/pages/index"}ï¼Œè¿˜æ˜¯ä¼šåœ¨æ¯ä¸€ä¸ªé¡µé¢çš„ä¸Šå±‚å¥—ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ã€‚   *   å¦‚æœæˆ‘ä»¬è¿™æ ·å†™ï¼Œé‚£ä¹ˆä¼šå’Œç¬¬ä¸€ç§å†™æ³•å†²çªï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è®¿é—®localhost:8000/productçš„æ—¶å€™ä¹Ÿä¼šåŒ¹é…localhost:8000/ï¼Œä»è€Œå¯¼è‡´/productè·¯å¾„ä¸èƒ½åŒ¹é…   * 3.ä½¿ç”¨è·¯å¾„çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å‚ç…§pagesç›®å½•æ¥çš„ã€‚å¦‚æœæƒ³è¦å¼•ç”¨layoutæ–‡ä»¶çš„ä¸­çš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨@ç¬¦å·ï¼Œ@ ç¬¦å·è¡¨ç¤ºsrcç›®å½•   *   * */</span></code></pre><h3 id="2-6-4-è·¯ç”±è·³è½¬å’Œä¼ å‚"><a href="#2-6-4-è·¯ç”±è·³è½¬å’Œä¼ å‚" class="headerlink" title="2.6.4 è·¯ç”±è·³è½¬å’Œä¼ å‚"></a>2.6.4 è·¯ç”±è·³è½¬å’Œä¼ å‚</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/users"</span><span class="token operator">></span>Users Page<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> history <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·³è½¬åˆ°æŒ‡å®šè·¯ç”±</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¸¦å‚æ•°è·³è½¬åˆ°æŒ‡å®šè·¯ç”±</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/list?a=b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  pathname<span class="token punctuation">:</span> <span class="token string">'/list'</span><span class="token punctuation">,</span>  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>    a<span class="token punctuation">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·³è½¬åˆ°ä¸Šä¸€ä¸ªè·¯ç”±</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//è·¯ç”±ç»„ä»¶å¯é€šè¿‡ props è·å–åˆ°ä»¥ä¸‹å±æ€§ï¼Œ</span>matchï¼Œå½“å‰è·¯ç”±å’Œ url match åçš„å¯¹è±¡ï¼ŒåŒ…å« paramsã€pathã€url å’Œ isExact å±æ€§locationï¼Œè¡¨ç¤ºåº”ç”¨å½“å‰å‡ºäºå“ªä¸ªä½ç½®ï¼ŒåŒ…å« pathnameã€searchã€query ç­‰å±æ€§historyï¼ŒåŒ api history æ¥å£routeï¼Œå½“å‰è·¯ç”±é…ç½®ï¼ŒåŒ…å« pathã€exactã€componentã€routes ç­‰routesï¼Œå…¨éƒ¨è·¯ç”±ä¿¡æ¯</code></pre><h3 id="2-6-5-åŠ¨æ€è·¯ç”±å‚æ•°"><a href="#2-6-5-åŠ¨æ€è·¯ç”±å‚æ•°" class="headerlink" title="2.6.5 åŠ¨æ€è·¯ç”±å‚æ•°"></a>2.6.5 åŠ¨æ€è·¯ç”±å‚æ•°</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//1.æ–°å»ºproductDetail/index/[id].tsx</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./productDetail.less'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¦ä»propsä¸­è·å–location history matchç­‰å‚æ•°ï¼Œéœ€è¦å¼•å…¥RouteComponentPropsç±»å‹</span><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">RouterInfo</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> RouteComponentProps<span class="token operator">&lt;</span>RouterInfo<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span>Page productDetail<span class="token operator">/</span>index <span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//2.ä¿®æ”¹.umirc.ts</span>routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æ³¨æ„ï¼šè¿™è¾¹æ–‡ä»¶çš„è·¯å¾„æ˜¯ç›¸å¯¹äºsrc/.muiä¸­æ¥ç¡®å®šçš„</span>      component<span class="token punctuation">:</span> <span class="token string">'../layouts/index'</span><span class="token punctuation">,</span>      routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          path<span class="token punctuation">:</span> <span class="token string">'/product/index'</span><span class="token punctuation">,</span>          component<span class="token punctuation">:</span> <span class="token string">'../pages/product/index'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>           path<span class="token punctuation">:</span> <span class="token string">'/productDetail/:id'</span><span class="token punctuation">,</span>           component<span class="token punctuation">:</span> <span class="token string">'../pages/productDetail/index/[id]'</span>         <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>           path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>           component<span class="token punctuation">:</span> <span class="token string">'../pages/index'</span>         <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span></code></pre><h2 id="2-7-æ ·å¼å’Œèµ„æºæ–‡ä»¶"><a href="#2-7-æ ·å¼å’Œèµ„æºæ–‡ä»¶" class="headerlink" title="2.7 æ ·å¼å’Œèµ„æºæ–‡ä»¶"></a>2.7 æ ·å¼å’Œèµ„æºæ–‡ä»¶</h2><h3 id="2-7-1-å…¨å±€æ ·å¼"><a href="#2-7-1-å…¨å±€æ ·å¼" class="headerlink" title="2.7.1 å…¨å±€æ ·å¼"></a>2.7.1 å…¨å±€æ ·å¼</h3><p>Umi ä¸­çº¦å®š <code>src/global.css</code> ä¸ºå…¨å±€æ ·å¼ï¼Œå¦‚æœå­˜åœ¨æ­¤æ–‡ä»¶ï¼Œä¼šè¢«è‡ªåŠ¨å¼•å…¥åˆ°å…¥å£æ–‡ä»¶æœ€å‰é¢ã€‚</p><p>æ¯”å¦‚ç”¨äºè¦†ç›–æ ·å¼ï¼Œ</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.ant-select-selection</span> </span><span class="token punctuation">{</span>  <span class="token property">max-height</span><span class="token punctuation">:</span> <span class="token number">51</span>px<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="2-7-2-CSS-Modules"><a href="#2-7-2-CSS-Modules" class="headerlink" title="2.7.2 CSS Modules"></a>2.7.2 CSS Modules</h3><p>Umi ä¼šè‡ªåŠ¨è¯†åˆ« CSS Modules çš„ä½¿ç”¨ï¼Œä½ æŠŠä»–å½“åš CSS Modules ç”¨æ—¶æ‰æ˜¯ CSS Modulesã€‚</p><p>æ¯”å¦‚ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// CSS Modules</span><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./foo.css'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é CSS Modules</span><span class="token keyword">import</span> <span class="token string">'./foo.css'</span><span class="token punctuation">;</span></code></pre><h3 id="2-7-3-CSS-é¢„å¤„ç†å™¨"><a href="#2-7-3-CSS-é¢„å¤„ç†å™¨" class="headerlink" title="2.7.3 CSS é¢„å¤„ç†å™¨"></a>2.7.3 CSS é¢„å¤„ç†å™¨</h3><p>Umi å†…ç½®æ”¯æŒ lessï¼Œä¸æ”¯æŒ sass å’Œ stylusï¼Œä½†å¦‚æœæœ‰éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ chainWebpack é…ç½®æˆ–è€… Umi æ’ä»¶çš„å½¢å¼æ”¯æŒã€‚</p><h3 id="2-7-4-tsä¸­ä½¿ç”¨å›¾ç‰‡"><a href="#2-7-4-tsä¸­ä½¿ç”¨å›¾ç‰‡" class="headerlink" title="2.7.4 tsä¸­ä½¿ç”¨å›¾ç‰‡"></a>2.7.4 tsä¸­ä½¿ç”¨å›¾ç‰‡</h3><p>é€šè¿‡ require å¼•ç”¨ç›¸å¯¹è·¯å¾„çš„å›¾ç‰‡ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo.png'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>æ”¯æŒåˆ«åï¼Œæ¯”å¦‚é€šè¿‡ <code>@</code> æŒ‡å‘ src ç›®å½•ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/foo.png'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><h3 id="2-7-5-CSS-é‡Œä½¿ç”¨å›¾ç‰‡"><a href="#2-7-5-CSS-é‡Œä½¿ç”¨å›¾ç‰‡" class="headerlink" title="2.7.5 CSS é‡Œä½¿ç”¨å›¾ç‰‡"></a>2.7.5 CSS é‡Œä½¿ç”¨å›¾ç‰‡</h3><p>é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨ã€‚</p><p>æ¯”å¦‚ï¼Œ</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">.</span>logo <span class="token punctuation">{</span>  background<span class="token punctuation">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">/</span>foo<span class="token punctuation">.</span>png<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>CSS é‡Œä¹Ÿæ”¯æŒåˆ«åï¼Œä½†éœ€è¦åœ¨å‰é¢åŠ  <code>~</code> å‰ç¼€ï¼Œ</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">.</span>logo <span class="token punctuation">{</span>  background<span class="token punctuation">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token operator">~</span>@<span class="token operator">/</span>foo<span class="token punctuation">.</span>png<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ³¨æ„ï¼š</p><ol><li>è¿™æ˜¯ webpack çš„è§„åˆ™ï¼Œå¦‚æœåˆ‡åˆ°å…¶ä»–æ‰“åŒ…å·¥å…·ï¼Œå¯èƒ½ä¼šæœ‰å˜åŒ–</li><li>less ä¸­åŒæ ·é€‚ç”¨</li></ol><h3 id="2-7-6-Base64-ç¼–è¯‘"><a href="#2-7-6-Base64-ç¼–è¯‘" class="headerlink" title="2.7.6 Base64 ç¼–è¯‘"></a>2.7.6 Base64 ç¼–è¯‘</h3><p>é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•å…¥å›¾ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœå›¾ç‰‡å°äº 10Kï¼Œä¼šè¢«ç¼–è¯‘ä¸º Base64ï¼Œå¦åˆ™ä¼šè¢«æ„å»ºä¸ºç‹¬ç«‹çš„å›¾ç‰‡æ–‡ä»¶ã€‚</p><p>10K è¿™ä¸ªé˜ˆå€¼å¯ä»¥é€šè¿‡ <a href="https://umijs.org/zh-CN/config#inlinelimit">inlineLimit é…ç½®</a>ä¿®æ”¹ã€‚</p><h2 id="2-8-å›½é™…åŒ–"><a href="#2-8-å›½é™…åŒ–" class="headerlink" title="2.8 å›½é™…åŒ–"></a>2.8 å›½é™…åŒ–</h2><p>@umijs/plugin-localeæ˜¯umiä¸­çš„ä¸€ä¸ªå›½é™…åŒ–æ’ä»¶ï¼Œç”¨äºè§£å†³ i18n é—®é¢˜ã€‚</p><h3 id="2-8-1-å¼€å¯å›½é™…åŒ–"><a href="#2-8-1-å¼€å¯å›½é™…åŒ–" class="headerlink" title="2.8.1 å¼€å¯å›½é™…åŒ–"></a>2.8.1 å¼€å¯å›½é™…åŒ–</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//åœ¨.umirc.tsä¸­é…ç½®localeä¹‹åå³å¼€å¯è¯¥æ’ä»¶</span>  locale<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//é»˜è®¤çš„è¯­è¨€ç¯å¢ƒ</span>    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//antdå¼€å¯å›½é™…åŒ–</span>    antd<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment" spellcheck="true">// default true, when it is true, will use `navigator.language` overwrite default</span>    baseNavigator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><h3 id="2-8-2-çº¦å®šå¼å¤šè¯­è¨€æ”¯æŒ"><a href="#2-8-2-çº¦å®šå¼å¤šè¯­è¨€æ”¯æŒ" class="headerlink" title="2.8.2 çº¦å®šå¼å¤šè¯­è¨€æ”¯æŒ"></a>2.8.2 çº¦å®šå¼å¤šè¯­è¨€æ”¯æŒ</h3><p>æ¯”å¦‚ä»¥ä¸‹ç›®å½•ï¼Œé¡¹ç›®å°±æ‹¥æœ‰äº† <code>zh-CN</code> ä¸ <code>en-US</code> å›½é™…åŒ–è¯­è¨€åˆ‡æ¢(æ–‡ä»¶åå¿…é¡»è¦ç¬¦åˆè§„èŒƒ)ï¼š</p><pre><code>+ src  + locales    - zh-CN.ts    - en-US.ts  + pages</code></pre><h3 id="2-8-3-ä¸»è¦API"><a href="#2-8-3-ä¸»è¦API" class="headerlink" title="2.8.3 ä¸»è¦API"></a>2.8.3 ä¸»è¦API</h3><pre class=" language-typescript"><code class="language-typescript"># getAllLocales è·å–å½“å‰è·å¾—æ‰€æœ‰å›½é™…åŒ–æ–‡ä»¶çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¼šåœ¨ locales æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾ç±»ä¼¼ en<span class="token operator">-</span>US<span class="token punctuation">.</span><span class="token punctuation">(</span>js<span class="token operator">|</span>json<span class="token operator">|</span>ts<span class="token punctuation">)</span> æ–‡ä»¶ã€‚<span class="token keyword">import</span> <span class="token punctuation">{</span> getAllLocales <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getAllLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [en-US,zh-CN,...]</span># getLocale å°†è·å¾—å½“å‰é€‰æ‹©çš„è¯­è¨€ã€‚<span class="token keyword">import</span> <span class="token punctuation">{</span> getLocale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// en-US | zh-CN</span># useIntl æ˜¯æœ€å¸¸ç”¨çš„ api<span class="token punctuation">,</span>å®ƒå¯ä»¥è·å¾— formatMessage ç­‰ api æ¥è¿›è¡Œå…·ä½“çš„å€¼ç»‘å®šã€‚<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>a<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'index.start'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span># setLocale è®¾ç½®åˆ‡æ¢è¯­è¨€ï¼Œé»˜è®¤ä¼šåˆ·æ–°é¡µé¢ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ä¸º <span class="token keyword">false</span> ï¼Œæ¥å®ç°æ— åˆ·æ–°åŠ¨æ€åˆ‡æ¢ã€‚<span class="token keyword">import</span> <span class="token punctuation">{</span> setLocale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ·æ–°é¡µé¢</span><span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token string">'zh-TW'</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸åˆ·æ–°é¡µé¢</span><span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token string">'zh-TW'</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="3-fluxå’Œredux"><a href="#3-fluxå’Œredux" class="headerlink" title="3.fluxå’Œredux"></a>3.fluxå’Œredux</h1><h2 id="3-1-Flux"><a href="#3-1-Flux" class="headerlink" title="3.1 Flux"></a>3.1 Flux</h2><p>Flux æ˜¯ä¸€ç§æ¶æ„æ€æƒ³ï¼Œä¸“é—¨è§£å†³è½¯ä»¶çš„ç»“æ„é—®é¢˜ã€‚å®ƒè·Ÿ<a href="http://www.ruanyifeng.com/blog/2007/11/mvc.html">MVC æ¶æ„</a>æ˜¯åŒä¸€ç±»ä¸œè¥¿ï¼Œä½†æ˜¯æ›´åŠ <a href="http://www.infoq.com/news/2014/05/facebook-mvc-flux">ç®€å•å’Œæ¸…æ™°</a>ã€‚</p><p>é¦–å…ˆï¼ŒFluxå°†ä¸€ä¸ªåº”ç”¨åˆ†æˆå››ä¸ªéƒ¨åˆ†ã€‚</p><blockquote><ul><li><strong>View</strong>ï¼š è§†å›¾å±‚</li><li><strong>Action</strong>ï¼ˆåŠ¨ä½œï¼‰ï¼šè¡¨ç¤ºæ•°æ®ä»åº”ç”¨ç¨‹åºå‘é€åˆ°storeçš„æœ‰æ•ˆä¿¡æ¯è´Ÿè½½ã€‚å®ƒæ˜¯ store æ•°æ®çš„<strong>å”¯ä¸€</strong>æ¥æºã€‚ä¸€èˆ¬æ¥è¯´ä½ ä¼šé€šè¿‡ Dispatcheræ´¾å‘å™¨å°† action ä¼ åˆ° storeã€‚</li><li><strong>Dispatcher</strong>ï¼ˆæ´¾å‘å™¨ï¼‰ï¼šç”¨æ¥æ¥æ”¶Actionsã€æ‰§è¡Œå›è°ƒå‡½æ•°</li><li><strong>Store</strong>ï¼ˆæ•°æ®å±‚ï¼‰ï¼šç”¨æ¥å­˜æ”¾åº”ç”¨çš„çŠ¶æ€ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŠ¨ï¼Œå°±æé†’Viewsè¦æ›´æ–°é¡µé¢</li></ul></blockquote><p><strong>Flux çš„æœ€å¤§ç‰¹ç‚¹ï¼Œå°±æ˜¯æ•°æ®çš„â€å•å‘æµåŠ¨â€ã€‚</strong></p><blockquote><ol><li>ç”¨æˆ·è®¿é—® View</li><li>ç”¨æˆ·åœ¨Viewä¸­Dispatcherä¸€ä¸ªActionï¼Œè¦æ±‚ Store è¿›è¡Œç›¸åº”çš„æ›´æ–°</li><li>Store æ›´æ–°åï¼Œå‘å‡ºä¸€ä¸ªâ€changeâ€äº‹ä»¶</li><li>View æ”¶åˆ°â€changeâ€äº‹ä»¶åï¼Œæ›´æ–°é¡µé¢</li></ol></blockquote><p><img src="https://i.loli.net/2020/11/03/9EjkK1pgADicL3e.png" alt="1553222968163"></p><p><img src="https://i.loli.net/2020/11/03/mC1Oh5XYtkM3uLi.png" alt="1553223019430"></p><h2 id="3-2-Redux"><a href="#3-2-Redux" class="headerlink" title="3.2 Redux"></a>3.2 Redux</h2><p><a href="http://cn.redux.js.org/">http://cn.redux.js.org/</a></p><p>æˆ‘ä»¬æŠŠFluxçœ‹åšä¸€ä¸ªæ¡†æ¶çš„ç†å¿µçš„è¯ï¼ŒReduxæ˜¯Fluxçš„ä¸€ç§å®ç°ã€‚Reduxæ˜¯SPAå•é¡µé¢åº”ç”¨ç¨‹åºä¸­å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚</p><p>Fluxçš„åŸºæœ¬åŸåˆ™æ˜¯â€œå•å‘æ•°æ®æµâ€ï¼ŒReduxåœ¨æ­¤åŸºç¡€ä¸Šå¼ºè°ƒä¸‰ä¸ªåŸºæœ¬åŸåˆ™ï¼š</p><blockquote><p>1.å”¯ä¸€æ•°æ®æº ï¼šå”¯ä¸€æ•°æ®æºæŒ‡çš„æ˜¯åº”ç”¨çš„çŠ¶æ€æ•°æ®åº”è¯¥åªå­˜å‚¨åœ¨å”¯ä¸€çš„ä¸€ä¸ªStoreä¸Šã€‚<br>2.ä¿æŒçŠ¶æ€åªè¯» ï¼š ä¿æŒçŠ¶æ€åªè¯»ï¼Œå°±æ˜¯è¯´ä¸èƒ½å»ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œè¦ä¿®æ”¹Storeçš„çŠ¶æ€ï¼Œå¿…é¡»è¦é€šè¿‡æ´¾å‘ä¸€ä¸ªactionå¯¹è±¡å®Œæˆã€‚<br>3.æ•°æ®æ”¹å˜åªèƒ½é€šè¿‡çº¯å‡½æ•°å®Œæˆ ï¼šè¿™é‡Œæ‰€è¯´çš„çº¯å‡½æ•°å°±æ˜¯æŠŠReducerï¼ŒReduceræè¿°äº†stateçŠ¶æ€å¦‚ä½•ä¿®æ”¹ã€‚Reduxè¿™ä¸ªåå­—çš„å‰ä¸‰ä¸ªå­—æ¯Redä»£è¡¨çš„å°±æ˜¯Reducerï¼Œå…¶å®Reduxåå­—çš„å«ä¹‰å°±æ˜¯Reducer+Fluxã€‚</p></blockquote><p><img src="https://i.loli.net/2020/11/03/tbZQaYjVL4PmpC3.png"></p><h2 id="3-3-dva"><a href="#3-3-dva" class="headerlink" title="3.3 dva"></a>3.3 dva</h2><h3 id="3-3-1-dvaä»‹ç»"><a href="#3-3-1-dvaä»‹ç»" class="headerlink" title="3.3.1 dvaä»‹ç»"></a>3.3.1 dvaä»‹ç»</h3><p>dvaç”±é˜¿é‡Œæ¶æ„å¸ˆ sorrycc å¸¦é¢† team å®Œæˆçš„ä¸€å¥—å‰ç«¯æ¡†æ¶ï¼Œdva æ˜¯ä¸€ä¸ªåŸºäº <a href="https://github.com/reduxjs/redux">redux</a> å’Œ <a href="https://github.com/redux-saga/redux-saga">redux-saga</a> (å¼‚æ­¥å¤„ç†)çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº† <a href="https://github.com/ReactTraining/react-router">react-router</a> å’Œ <a href="https://github.com/github/fetch">fetch</a>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æ¶ã€‚</p><blockquote><p><strong>ç‰¹æ€§</strong></p></blockquote><ul><li><strong>æ˜“å­¦æ˜“ç”¨</strong>ï¼Œä»…æœ‰ 6 ä¸ª apiï¼Œå¯¹ redux ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œ<a href="https://umijs.org/guide/with-dva.html">é…åˆ umi ä½¿ç”¨</a>åæ›´æ˜¯é™ä½ä¸º 0 API</li><li><strong>elm æ¦‚å¿µ</strong>ï¼Œé€šè¿‡ reducers, effects å’Œ subscriptions ç»„ç»‡ modelã€‚elmæ˜¯ä¸“æ³¨webå‰ç«¯çš„çº¯å‡½æ•°å¼è¯­è¨€ã€‚</li><li><strong>æ’ä»¶æœºåˆ¶</strong>ï¼Œæ¯”å¦‚ <a href="https://github.com/dvajs/dva/tree/master/packages/dva-loading">dva-loading</a> å¯ä»¥è‡ªåŠ¨å¤„ç† loading çŠ¶æ€ï¼Œä¸ç”¨ä¸€ééåœ°å†™ showLoading å’Œ hideLoading</li><li><strong>æ”¯æŒ HMR</strong>ï¼ŒåŸºäº <a href="https://github.com/dvajs/babel-plugin-dva-hmr">babel-plugin-dva-hmr</a> å®ç° componentsã€routes å’Œ models çš„ HMR</li></ul><h3 id="3-3-2-dvaçš„æ•°æ®æµ"><a href="#3-3-2-dvaçš„æ•°æ®æµ" class="headerlink" title="3.3.2 dvaçš„æ•°æ®æµ"></a>3.3.2 dvaçš„æ•°æ®æµ</h3><p><img src="https://i.loli.net/2020/11/03/Y7vxJKX52LFrBSV.png" alt="1601034916207"></p><p>ç”¨æˆ·åœ¨ <strong>è§†å›¾å±‚</strong> ä¼šè§¦å‘(dispatch)ä¸€äº›åŠ¨ä½œ(action)ï¼Œè¿™äº›åŠ¨ä½œä¼šä¼ é€’åˆ°æˆ‘ä»¬çš„Model.js è¿™ä¸ªæ–‡ä»¶å½“ä¸­ï¼Œæ ¹æ®actionçš„åå­—ï¼Œæ‰¾åˆ°å¯¹ç”¨çš„æ–¹æ³•(effect æˆ–è€… reducer) ï¼Œç„¶åæ›´æ–°stateï¼Œè§†å›¾é‡æ–°æ¸²æŸ“ã€‚</p><h3 id="3-3-3-dvaæ ¸å¿ƒæ¦‚å¿µ"><a href="#3-3-3-dvaæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="3.3.3 dvaæ ¸å¿ƒæ¦‚å¿µ"></a>3.3.3 dvaæ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="a-model"><a href="#a-model" class="headerlink" title="a) model"></a>a) model</h4><p>å…¶ä¸­ï¼Œmodel æ˜¯ DVA ä¸­æœ€é‡è¦çš„æ¦‚å¿µï¼ŒåŸºæœ¬çš„å±æ€§å¦‚ä¸‹ï¼š</p><ul><li>namespaceï¼šmodel çš„å‘½åç©ºé—´ï¼Œåªèƒ½ç”¨å­—ç¬¦ä¸²ã€‚ä¸€ä¸ªå¤§å‹åº”ç”¨å¯èƒ½åŒ…å«å¤šä¸ª modelï¼Œé€šè¿‡namespaceåŒºåˆ†ã€‚</li><li>stateï¼šå½“å‰ model çŠ¶æ€çš„åˆå§‹å€¼ï¼Œè¡¨ç¤ºå½“å‰çŠ¶æ€ã€‚</li><li>reducersï¼šç”¨äºå¤„ç†åŒæ­¥æ“ä½œï¼Œå¯ä»¥ä¿®æ”¹ stateï¼Œç”± action è§¦å‘ã€‚</li><li>effectsï¼šç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ï¼šä¸æœåŠ¡ç«¯äº¤äº’ï¼‰å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿæ˜¯ç”± action è§¦å‘ã€‚ä½†æ˜¯ï¼Œå®ƒä¸å¯ä»¥ä¿®æ”¹ stateï¼Œè¦é€šè¿‡è§¦å‘ action è°ƒç”¨ reducer å®ç°å¯¹ state çš„é—´æ¥æ“ä½œã€‚</li></ul><h4 id="b-connect"><a href="#b-connect" class="headerlink" title="b) connect"></a>b) connect</h4><p>è¿æ¥dva modelå’Œreactç»„ä»¶ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©ç»„ä»¶è·å–modelä¸­çš„æ•°æ®å’Œé©±åŠ¨modelæ”¹å˜çš„æ–¹æ³•ã€‚</p><h4 id="c-dispatch"><a href="#c-dispatch" class="headerlink" title="c) dispatch"></a>c) dispatch</h4><p>dispatch å‡½æ•°å°±æ˜¯å’Œ dva model æ‰“äº¤é“çš„å”¯ä¸€é€”å¾„ï¼Œ dispatch å‡½æ•°æ¥å—ä¸€ä¸ª actionå¯¹è±¡ ä½œä¸ºå…¥å‚ã€‚actionå¯¹è±¡éœ€è¦æœ‰typeå­—æ®µ</p><h4 id="d-action"><a href="#d-action" class="headerlink" title="d) action"></a>d) action</h4><p>actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ reducers åŠ effects çš„è§¦å‘å™¨ï¼Œé€šè¿‡dispatchæ¥è§¦å‘ï¼Œactionå¯¹è±¡éœ€è¦æœ‰typeå­—æ®µ</p><h2 id="3-4-dvaå®æˆ˜"><a href="#3-4-dvaå®æˆ˜" class="headerlink" title="3.4 dvaå®æˆ˜"></a>3.4 dvaå®æˆ˜</h2><h3 id="3-4-1-æ”¹é€ é¡¹ç›®ç»“æ„"><a href="#3-4-1-æ”¹é€ é¡¹ç›®ç»“æ„" class="headerlink" title="3.4.1 æ”¹é€ é¡¹ç›®ç»“æ„"></a>3.4.1 æ”¹é€ é¡¹ç›®ç»“æ„</h3><p><img src="https://i.loli.net/2020/11/03/lXVsRnyqxHe4iIa.png" alt="1601195437274"></p><h3 id="3-4-2-mock"><a href="#3-4-2-mock" class="headerlink" title="3.4.2 mock"></a>3.4.2 mock</h3><h4 id="a-mockä»‹ç»"><a href="#a-mockä»‹ç»" class="headerlink" title="a) mockä»‹ç»"></a>a) mockä»‹ç»</h4><p>Mock æ˜¯é«˜æ•ˆã€æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„ api ç®¡ç†å¹³å°,æ—¨åœ¨ä¸ºå¼€å‘ã€äº§å“ã€æµ‹è¯•äººå‘˜æä¾›æ›´ä¼˜é›…çš„æ¥å£ç®¡ç†æœåŠ¡ã€‚å¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºã€å‘å¸ƒã€ç»´æŠ¤ APIã€‚ä¸»è¦ç”¨äºé¡¹ç›®çš„å¼€å‘æµ‹è¯•é˜¶æ®µã€‚</p><p><a href="https://github.com/nuysoft/Mock/wiki">https://github.com/nuysoft/Mock/wiki</a></p><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span> å®‰è£…mockjsyarn add mockjs <span class="token operator">--</span>dev#<span class="token number">2</span><span class="token punctuation">.</span> ä¿®æ”¹<span class="token punctuation">.</span>umirc<span class="token punctuation">.</span>ts  å¼€å¯mock  mock<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>#<span class="token number">3</span><span class="token punctuation">.</span> mockåŸºæœ¬ä½¿ç”¨  <span class="token comment" spellcheck="true">// åœ¨é¡¹ç›®mockæ–‡ä»¶å¤¹ä¸‹æ–°å»ºuser.ts  ä»£ç å¦‚ä¸‹</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Request<span class="token punctuation">,</span> Response <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Mock <span class="token keyword">from</span> <span class="token string">'mockjs'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//æµ‹è¯•mock   mockè¯­æ³•ä»‹ç» todos.....</span>  <span class="token string">'/api/test'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> username<span class="token punctuation">:</span> <span class="token string">'kenny'</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token string">'GET /api/hi'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">:</span> Request<span class="token punctuation">,</span> res<span class="token punctuation">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      username<span class="token punctuation">:</span> <span class="token string">'jaja'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token string">'GET /api/mock'</span><span class="token punctuation">:</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    success<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//éšæœºç”Ÿæˆä¸€æ®µä¸­æ–‡</span>    message<span class="token punctuation">:</span> <span class="token string">'@cparagraph'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// å±æ€§ list çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å«æœ‰ 1 åˆ° 5 ä¸ªå…ƒç´ </span>    <span class="token string">'list|1-5'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å±æ€§ sid æ˜¯ä¸€ä¸ªè‡ªå¢æ•°ï¼Œèµ·å§‹å€¼ä¸º 1ï¼Œæ¯æ¬¡å¢ 1</span>        <span class="token string">'sid|+1'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// å±æ€§ userId æ˜¯ä¸€ä¸ª5ä½çš„éšæœºç </span>        <span class="token string">'userId|5'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="b-mock-user-jsä½¿ç”¨mockæä¾›æ¥å£æ•°æ®"><a href="#b-mock-user-jsä½¿ç”¨mockæä¾›æ¥å£æ•°æ®" class="headerlink" title="b) mock/user.jsä½¿ç”¨mockæä¾›æ¥å£æ•°æ®"></a>b) mock/user.jsä½¿ç”¨mockæä¾›æ¥å£æ•°æ®</h4><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Request<span class="token punctuation">,</span> Response <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Mock <span class="token keyword">from</span> <span class="token string">'mockjs'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">UserType</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> number<span class="token punctuation">;</span>  name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  email<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  website<span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> users<span class="token punctuation">:</span> UserType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'zhangsan@qq.com'</span><span class="token punctuation">,</span> website<span class="token punctuation">:</span> <span class="token string">'xx.com'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'lisi@qq.com'</span><span class="token punctuation">,</span> website<span class="token punctuation">:</span> <span class="token string">'ll.com'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span>  <span class="token string">'GET /api/users'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">:</span> Request<span class="token punctuation">,</span> res<span class="token punctuation">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è·å–å‚æ•°ä¿¡æ¯</span>    <span class="token keyword">var</span> page <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page<span class="token punctuation">;</span>    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> list<span class="token punctuation">:</span> users<span class="token punctuation">,</span> total<span class="token punctuation">:</span> <span class="token number">105</span><span class="token punctuation">,</span> page<span class="token punctuation">:</span> page <span class="token punctuation">}</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// GET POST å¯çœç•¥</span>  <span class="token string">'/api/users/:id'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">:</span> Request<span class="token punctuation">,</span> res<span class="token punctuation">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> u <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> item<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span>  <span class="token string">'/api/users/delete/:id'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">:</span> Request<span class="token punctuation">,</span> res<span class="token punctuation">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> index <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    users<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      status<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>      message<span class="token punctuation">:</span> <span class="token string">'åˆ é™¤æˆåŠŸ'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ŒAPI å‚è€ƒ express@4</span>  <span class="token string">'POST /api/users/create'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">:</span> Request<span class="token punctuation">,</span> res<span class="token punctuation">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="3-4-3-è¯·æ±‚çš„å°è£…"><a href="#3-4-3-è¯·æ±‚çš„å°è£…" class="headerlink" title="3.4.3 è¯·æ±‚çš„å°è£…"></a>3.4.3 è¯·æ±‚çš„å°è£…</h3><h4 id="a-fetchå’Œumi-request"><a href="#a-fetchå’Œumi-request" class="headerlink" title="a) fetchå’Œumi-request"></a>a) fetchå’Œumi-request</h4><p><strong>fetch</strong>æ˜¯es6ä¸­æ¨å‡ºçš„ä¸€ç§å¯æ›¿ä»£ajaxè·å–/æäº¤æ•°æ®çš„æŠ€æœ¯ï¼Œæœ‰äº›é«˜çº§æµè§ˆå™¨å·²ç»å¯ä»¥ä½¿ç”¨window.fecthä½¿ç”¨äº†ã€‚ç›¸æ¯”äºä½¿ç”¨jQuery.ajaxæ›´è½»é‡ï¼Œè€Œä¸”å®ƒæ”¯æŒPromiseï¼Œæ›´åŠ ç¬¦åˆç°åœ¨çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ä½†æ˜¯ï¼Œä¸€å®šè®°ä½fetchä¸æ˜¯ajaxçš„è¿›ä¸€æ­¥å°è£…ï¼Œè€Œæ˜¯åŸç”Ÿjsï¼Œæ²¡æœ‰ä½¿ç”¨XMLHttpRequestå¯¹è±¡ã€‚</p><p><strong><a href="https://link.zhihu.com/?target=https://github.com/umijs/umi-request">umi-request</a></strong> æ˜¯åŸºäº fetch å°è£…çš„å¼€æº http è¯·æ±‚åº“ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ API è°ƒç”¨æ–¹å¼ï¼ŒåŒæ—¶ç®€åŒ–ä½¿ç”¨æ–¹å¼ï¼Œæä¾›äº†è¯·æ±‚å±‚å¸¸ç”¨çš„åŠŸèƒ½ï¼š</p><ul><li>URL å‚æ•°è‡ªåŠ¨åºåˆ—åŒ–</li><li>POST æ•°æ®æäº¤æ–¹å¼ç®€åŒ–</li><li>Response è¿”å›å¤„ç†ç®€åŒ–</li><li>è¯·æ±‚è¶…æ—¶å¤„ç†</li><li>è¯·æ±‚ç¼“å­˜æ”¯æŒ</li><li>GBK ç¼–ç å¤„ç†</li><li>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ–¹å¼</li><li>è¯·æ±‚å–æ¶ˆæ”¯æŒ</li><li>Node ç¯å¢ƒ http è¯·æ±‚</li><li>æ‹¦æˆªå™¨æœºåˆ¶</li><li>æ´‹è‘±ä¸­é—´ä»¶æœºåˆ¶</li></ul><p><strong>umi-requestå’Œfetchå’ŒaxiosåŒºåˆ«</strong></p><p><img src="https://i.loli.net/2020/11/03/8LAOuYdHnJVBwzb.png"></p><h4 id="b-app-tsè¿è¡Œæ—¶é…ç½®"><a href="#b-app-tsè¿è¡Œæ—¶é…ç½®" class="headerlink" title="b) app.tsè¿è¡Œæ—¶é…ç½®"></a>b) app.tsè¿è¡Œæ—¶é…ç½®</h4><p>è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è¿è¡Œæ—¶çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä¿®æ”¹è·¯ç”±ã€ä¿®æ”¹ render æ–¹æ³•ç­‰ã€‚</p><p>Umiçº¦å®š <code>src/app.tsx</code> ä¸ºè¿è¡Œæ—¶é…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å†åœ¨ <code>src/app.ts</code> ä¸­é…ç½®ä¸€äº›è¿è¡Œæ—¶çš„é…ç½®é¡¹æ¥å®ç°éƒ¨åˆ†è‡ªå®šä¹‰éœ€æ±‚ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//é€šçŸ¥ç»„ä»¶</span><span class="token keyword">import</span> <span class="token punctuation">{</span> notification <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//RequestConfig è¯·æ±‚çš„é…ç½®ç±»å‹</span><span class="token keyword">import</span> <span class="token punctuation">{</span> RequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ResponseError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi-request'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * è¯·æ±‚å‡ºé”™åçš„å¼‚å¸¸å¤„ç†ç¨‹åº */</span><span class="token keyword">const</span> errorHandler <span class="token operator">=</span> <span class="token punctuation">(</span>error<span class="token punctuation">:</span> ResponseError<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    description<span class="token punctuation">:</span> <span class="token string">'æ‚¨çš„ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œæ— æ³•è¿æ¥æœåŠ¡å™¨'</span><span class="token punctuation">,</span>    message<span class="token punctuation">:</span> <span class="token string">'ç½‘ç»œå¼‚å¸¸'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">throw</span> error<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¼å‡ºè¯·æ±‚å¯¹è±¡</span><span class="token keyword">export</span> <span class="token keyword">const</span> request<span class="token punctuation">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>  errorHandler<span class="token punctuation">,</span>  requestInterceptors<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯·æ±‚æ‹¦æˆªå™¨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        url<span class="token punctuation">,</span>        options<span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  responseInterceptors<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">(</span>response<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å“åº”æ‹¦æˆªå™¨'</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> response<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="c-å°è£…service"><a href="#c-å°è£…service" class="headerlink" title="c) å°è£…service"></a>c) å°è£…service</h4><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//pages/user/services/index.ts</span><span class="token keyword">import</span> <span class="token punctuation">{</span> request <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">queryUserList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> page <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/users?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="3-4-4-æ–°å»ºé¡µé¢-å‘é€è¯·æ±‚"><a href="#3-4-4-æ–°å»ºé¡µé¢-å‘é€è¯·æ±‚" class="headerlink" title="3.4.4 æ–°å»ºé¡µé¢ å‘é€è¯·æ±‚"></a>3.4.4 æ–°å»ºé¡µé¢ å‘é€è¯·æ±‚</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.åˆ›å»ºé¡µé¢</span>umi g page user<span class="token operator">/</span>index <span class="token operator">--</span>typescript <span class="token operator">--</span>less<span class="token comment" spellcheck="true">//2.é…ç½®è·¯ç”±  .umirc.ts</span>routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>        path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//æ³¨æ„ï¼šè¿™è¾¹æ–‡ä»¶çš„è·¯å¾„æ˜¯ç›¸å¯¹äºsrc/.muiä¸­æ¥ç¡®å®šçš„</span>        component<span class="token punctuation">:</span> <span class="token string">'../layouts/index'</span><span class="token punctuation">,</span>        routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>                 path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>                 component<span class="token punctuation">:</span> <span class="token string">'../pages/index'</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                 path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>                 component<span class="token punctuation">:</span> <span class="token string">'../pages/user/index'</span>             <span class="token punctuation">}</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//3.pages/user/index.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.less'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> queryUserList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./services'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//componentDidMount</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//å‘é€è¯·æ±‚è·å–æ•°æ®</span>  <span class="token keyword">const</span> getUsers <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">queryUserList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span>Page user<span class="token operator">/</span>index<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="3-4-5-ç¼–å†™dva-model"><a href="#3-4-5-ç¼–å†™dva-model" class="headerlink" title="3.4.5 ç¼–å†™dva model"></a>3.4.5 ç¼–å†™dva model</h3><p>dva é€šè¿‡ <code>model</code> çš„æ¦‚å¿µæŠŠä¸€ä¸ªé¢†åŸŸçš„æ¨¡å‹ç®¡ç†èµ·æ¥ï¼ŒåŒ…å«åŒæ­¥æ›´æ–° state çš„ reducersï¼Œå¤„ç†å¼‚æ­¥é€»è¾‘çš„ effectsï¼Œè®¢é˜…æ•°æ®æºçš„ subscriptions ã€‚</p><p>å¥½å¤„åœ¨äºå¯ä»¥ç»Ÿä¸€ç®¡ç†æ¨¡å‹æ•°æ®å’ŒæŠŠæ¨¡å‹æ•°æ®å…±äº«åˆ°ç»„ä»¶ä¸­ã€‚</p><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// user/models/index.ts</span><span class="token comment" spellcheck="true">//Effect å¼‚æ­¥æ“ä½œ     Reducer  çº¯å‡½æ•°      Subscription è®¢é˜…æ›´æ–°</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Effect<span class="token punctuation">,</span> Reducer<span class="token punctuation">,</span> Subscription<span class="token punctuation">,</span> Action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£</span><span class="token keyword">import</span> <span class="token punctuation">{</span> queryUserList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../services'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserItem</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> number<span class="token punctuation">;</span>  name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  email<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  website<span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å£°æ˜ç”¨æˆ·æ¨¡å—stateçš„æ•°æ®ç±»å‹  ?è¡¨ç¤ºå¯æœ‰å¯æ— </span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserModelState</span> <span class="token punctuation">{</span>  list<span class="token operator">?</span><span class="token punctuation">:</span> UserItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  total<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>  page<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å£°æ˜ç”¨æˆ·modelçš„æ•°æ®ç±»å‹</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserModelType</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//åç§°ç©ºé—´</span>  namespace<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//stateæ•°æ®</span>  state<span class="token punctuation">:</span> UserModelState<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//å¼‚æ­¥æ–¹æ³•</span>  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>    fetchUserList<span class="token punctuation">:</span> Effect<span class="token punctuation">;</span>    removeUserById<span class="token operator">?</span><span class="token punctuation">:</span> Effect<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//çº¯å‡½æ•°</span>  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>    save<span class="token punctuation">:</span> Reducer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UserModelState</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>    removeById<span class="token operator">?</span><span class="token punctuation">:</span> Reducer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UserModelState</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//è®¢é˜…æ›´æ–°</span>  subscriptions<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> setup<span class="token punctuation">:</span> Subscription <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å£°æ˜UserModel</span><span class="token keyword">const</span> UserModel<span class="token punctuation">:</span> UserModelType <span class="token operator">=</span> <span class="token punctuation">{</span>  namespace<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯çš„æ•°ç»„</span>    total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æ€»ç”¨æˆ·ä¸ªæ•°</span>    page<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//å½“å‰é¡µç </span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//çº¯å‡½æ•°  æ“ä½œstate</span>  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">save</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> total<span class="token punctuation">,</span> page <span class="token punctuation">}</span> <span class="token operator">=</span> payload<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// å¤åˆ¶æ•°ç»„ï¼Œå°†list, total, pageå†…å®¹æ”¾åˆ°åˆ°state</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> list<span class="token punctuation">,</span> total<span class="token punctuation">,</span> page <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œå’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸ç›´æ¥ä¿®æ”¹ stateï¼Œç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯è·å–ä»æœåŠ¡ç«¯è·å–æ•°æ®ï¼Œå¹¶ä¸”å‘èµ·ä¸€ä¸ª action äº¤ç»™ reducerã€‚å…¶ä¸­å®ƒç”¨åˆ°äº†redux-sagaï¼Œé‡Œé¢æœ‰å‡ ä¸ªå¸¸ç”¨çš„å‡½æ•°</span>  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// * è¡¨ç¤ºç”Ÿæˆå™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</span>    <span class="token comment" spellcheck="true">// å‚æ•° payload è¡¨ç¤ºæœ‰æ•ˆè´Ÿè½½çš„æ•°æ®ï¼Œåœ¨å¤–éƒ¨é€šè¿‡dispatchä¼ é€’</span>    <span class="token comment" spellcheck="true">// put:  ç”¨äºè§¦å‘action  yield put({ type: 'todos/add', payload: 'Learn Dva'});</span>    <span class="token comment" spellcheck="true">// call:ç”¨äºè°ƒç”¨å¼‚æ­¥é€»è¾‘ï¼Œæ”¯æŒPromiseï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ è¦è°ƒç”¨çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¼€å§‹æ˜¯ä½ è¦ä¼ é€’çš„å‚ã€‚const result = yield call(fetch, '/todos');</span>    <span class="token comment" spellcheck="true">// select:ç”¨äºä»stateé‡Œè·å–æ•°æ®ã€‚const todos = yield select(state => state.todos);</span>    <span class="token operator">*</span><span class="token function">fetchUserList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> page <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> total <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>queryUserList<span class="token punctuation">,</span> <span class="token punctuation">{</span> page <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'save'</span><span class="token punctuation">,</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>          list<span class="token punctuation">:</span> list<span class="token punctuation">,</span>          total<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          page<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> UserModel<span class="token punctuation">;</span></code></pre><h3 id="3-4-6-ç¼–å†™é¡µé¢"><a href="#3-4-6-ç¼–å†™é¡µé¢" class="headerlink" title="3.4.6 ç¼–å†™é¡µé¢"></a>3.4.6 ç¼–å†™é¡µé¢</h3><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å•ç‹¬å®Œæˆäº† model å’Œ é¡µé¢ï¼Œé‚£ä¹ˆä»–ä»¬å¦‚ä½•ä¸²è”èµ·æ¥å‘¢?</p><p>dva æä¾›äº† <code>connect</code> æ–¹æ³•ã€‚å¦‚æœä½ ç†Ÿæ‚‰ reduxï¼Œè¿™ä¸ª connect æ¥è‡ª react-reduxã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//pages/user/index.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ConnectProps connecté«˜é˜¶å‡½æ•°çš„å±æ€§ç±»å‹</span><span class="token comment" spellcheck="true">//Loading æ•°æ®åŠ è½½çŠ¶æ€ç±»å‹</span><span class="token comment" spellcheck="true">//connect é«˜é˜¶å‡½æ•°ï¼Œä¸»è¦ä½œç”¨å°†modelå’Œå½“å‰ç»„ä»¶è¿æ¥èµ·æ¥</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ConnectProps<span class="token punctuation">,</span> Loading<span class="token punctuation">,</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//usersè¿™ä¸ªnamespaceçš„æ•°æ®ç±»å‹</span><span class="token keyword">import</span> <span class="token punctuation">{</span> UserModelState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./models'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜å½“å‰é¡µé¢çš„å±æ€§ç±»å‹</span><span class="token keyword">interface</span> <span class="token class-name">PageProps</span> <span class="token keyword">extends</span> <span class="token class-name">ConnectProps</span> <span class="token punctuation">{</span>  user<span class="token punctuation">:</span> UserModelState<span class="token punctuation">;</span>  loading<span class="token punctuation">:</span> <span class="token keyword">boolean</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å½“å‰ç»„ä»¶å¯¹è±¡</span><span class="token comment" spellcheck="true">//å‚æ•°usersè¡¨ç¤ºæ¨¡å‹å±‚æ•°æ®</span><span class="token comment" spellcheck="true">//å‚æ•°dispatchè¡¨ç¤ºreduxæ´¾å‘å™¨</span><span class="token comment" spellcheck="true">//å‚æ•°loadingè¡¨ç¤ºæ•°æ®åŠ è½½çŠ¶æ€</span><span class="token keyword">const</span> UserPage<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>PageProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> loading <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span>total <span class="token punctuation">}</span> <span class="token operator">=</span> user<span class="token punctuation">;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//dispatchä¸€ä¸ªactionæ¥è§¦å‘å¯¹åº”çš„reducer</span>    dispatch <span class="token operator">&amp;&amp;</span>      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'user/fetchUserList'</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//payload æœ‰æ•ˆè´Ÿè½½ ï¼Œdispatchä¼ é€’å‚æ•°çš„æ—¶å€™</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>          page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello <span class="token punctuation">{</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//connect ä½œç”¨ï¼šå°†modelå’Œå½“å‰ç»„ä»¶è¿æ¥èµ·æ¥</span><span class="token comment" spellcheck="true">//å‚æ•° users è¡¨ç¤ºusersè¿™ä¸ªnamespaceä¸­çš„æ•°æ®</span><span class="token comment" spellcheck="true">//å‚æ•° loading è¡¨ç¤ºusers namespaceä¸­çš„æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> loading <span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> user<span class="token punctuation">:</span> UserModelState<span class="token punctuation">;</span> loading<span class="token punctuation">:</span> Loading <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  user<span class="token punctuation">,</span>  loading<span class="token punctuation">:</span> loading<span class="token punctuation">.</span>models<span class="token punctuation">.</span>user<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//è¡¨ç¤ºusersè¿™ä¸ªnamespaceçš„æ•°æ®æ˜¯å¦å·²ç»åŠ è½½å®Œæ¯•</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UserPage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="3-4-7-ä½¿ç”¨è®¢é˜…æ›´æ–°è®¾ç½®dvaæ•°æ®"><a href="#3-4-7-ä½¿ç”¨è®¢é˜…æ›´æ–°è®¾ç½®dvaæ•°æ®" class="headerlink" title="3.4.7 ä½¿ç”¨è®¢é˜…æ›´æ–°è®¾ç½®dvaæ•°æ®"></a>3.4.7 ä½¿ç”¨è®¢é˜…æ›´æ–°è®¾ç½®dvaæ•°æ®</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//pages/user/models/index.ts</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token comment" spellcheck="true">//è®¢é˜…æ›´æ–°</span>subscriptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> history <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç›‘å¬urlçš„å˜åŒ–ï¼Œå½“è®¿é—®è·¯å¾„æ˜¯/userçš„æ—¶å€™è§¦å‘fetchUserListè¿™ä¸ªeffects</span>        <span class="token keyword">return</span> history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pathname <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/user'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    type<span class="token punctuation">:</span> <span class="token string">'fetchUserList'</span><span class="token punctuation">,</span>                    payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>                        page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//æ³¨é‡Šæ‰pages/user/index.tsx    å‘é€è¯·æ±‚çš„ä»£ç </span></code></pre><h3 id="3-4-8-ä½¿ç”¨ant-designç¼–å†™é¡µé¢"><a href="#3-4-8-ä½¿ç”¨ant-designç¼–å†™é¡µé¢" class="headerlink" title="3.4.8 ä½¿ç”¨ant designç¼–å†™é¡µé¢"></a>3.4.8 ä½¿ç”¨ant designç¼–å†™é¡µé¢</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span>useEffect<span class="token punctuation">,</span>useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Table<span class="token punctuation">,</span> Pagination<span class="token punctuation">,</span> Popconfirm<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ConnectProps<span class="token punctuation">,</span> Loading<span class="token punctuation">,</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> UserModelState<span class="token punctuation">,</span>UserItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./models'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">PageProps</span> <span class="token keyword">extends</span> <span class="token class-name">ConnectProps</span> <span class="token punctuation">{</span>  user<span class="token punctuation">:</span> UserModelState<span class="token punctuation">;</span>  loading<span class="token punctuation">:</span> boolean<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> UserPage<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>PageProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> loading <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> total<span class="token punctuation">,</span> page <span class="token punctuation">}</span> <span class="token operator">=</span> user<span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">onChangeUserPagination</span><span class="token punctuation">(</span>page<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span>    dispatch <span class="token operator">&amp;&amp;</span>      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'user/fetchUserList'</span><span class="token punctuation">,</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>          page<span class="token punctuation">:</span> page<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//dispatchä¸€ä¸ªactionæ¥è§¦å‘å¯¹åº”çš„reducer</span>    dispatch <span class="token operator">&amp;&amp;</span>      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'user/fetchUserList'</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//payload æœ‰æ•ˆè´Ÿè½½ ï¼Œdispatchä¼ é€’å‚æ•°çš„æ—¶å€™</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>          page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> toggle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">setPopShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·å'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>      key<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'ç”µå­é‚®ä»¶'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>      key<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'ä¸ªäººç½‘ç«™'</span><span class="token punctuation">,</span>      dataIndex<span class="token punctuation">:</span> <span class="token string">'website'</span><span class="token punctuation">,</span>      key<span class="token punctuation">:</span> <span class="token string">'website'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      title<span class="token punctuation">:</span> <span class="token string">'æ“ä½œ'</span><span class="token punctuation">,</span>      key<span class="token punctuation">:</span> <span class="token string">'operation'</span><span class="token punctuation">,</span>      render<span class="token punctuation">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">:</span> UserItem<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>span<span class="token operator">></span>          <span class="token operator">&lt;</span>Button<span class="token operator">></span>ç¼–è¾‘<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>          <span class="token operator">&lt;</span>Popconfirm visible<span class="token operator">=</span><span class="token punctuation">{</span>popShow<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">"Confirm to delete?"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>Button<span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>Popconfirm<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>Table          loading<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//è¡¨æ ¼çš„åŠ è½½çŠ¶æ€</span>          columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//è¡¨æ ¼åˆ—ä¿¡æ¯</span>          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>list<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//è¡¨æ ¼æ•°æ®æº</span>          rowKey<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>record<span class="token punctuation">:</span>UserItem<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> record<span class="token punctuation">.</span>id<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//è¡¨æ ¼æ¯ä¸€è¡Œæ•°æ®çš„key</span>          pagination<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">//ä¸æ˜¾ç¤ºè¡¨æ ¼é»˜è®¤çš„åˆ†é¡µå™¨</span>        <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>Pagination          className<span class="token operator">=</span><span class="token string">"ant-table-pagination"</span>          total<span class="token operator">=</span><span class="token punctuation">{</span>total<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// æ•°æ®æ€»æ•°</span>          current<span class="token operator">=</span><span class="token punctuation">{</span>page<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// å½“å‰é¡µæ•°</span>          onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChangeUserPagination<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//æ”¹å˜é¡µç çš„ç‚¹å‡»äº‹ä»¶</span>          pageSize<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">//æ¯ä¸€é¡µçš„æ•°é‡</span>        <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> loading <span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> user<span class="token punctuation">:</span> UserModelState<span class="token punctuation">;</span> loading<span class="token punctuation">:</span> Loading <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  user<span class="token punctuation">,</span>  loading<span class="token punctuation">:</span> loading<span class="token punctuation">.</span>models<span class="token punctuation">.</span>user<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UserPage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="3-4-9-å®Œæˆåˆ é™¤åŠŸèƒ½"><a href="#3-4-9-å®Œæˆåˆ é™¤åŠŸèƒ½" class="headerlink" title="3.4.9 å®Œæˆåˆ é™¤åŠŸèƒ½"></a>3.4.9 å®Œæˆåˆ é™¤åŠŸèƒ½</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//pages/user/services/index.tsx æ–°å¢è¯·æ±‚</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deleteUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/users/delete/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//pages/user/models/index.tsx reducerå’Œeffect</span><span class="token keyword">import</span> <span class="token punctuation">{</span> queryUserList<span class="token punctuation">,</span> deleteUserById <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../services'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//reducerä¸­æ–°å¢ä¸‹é¢æ–¹æ³•</span><span class="token comment" spellcheck="true">//stateçš„listå¯èƒ½æ˜¯undefinedï¼Œé€ æˆç±»å‹ä¸åŒ¹é…ï¼Œæ‰€ä»¥è¿™é‡Œè¦ state = {list:[]} ç»™listä¸€ä¸ªé»˜è®¤å€¼</span><span class="token function">removeById</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> payload<span class="token punctuation">;</span>    <span class="token keyword">var</span> filterList <span class="token operator">=</span>        state <span class="token operator">&amp;&amp;</span>        state<span class="token punctuation">.</span>list <span class="token operator">&amp;&amp;</span>        state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> item<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">{</span> list<span class="token punctuation">:</span> filterList <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//actionä¸­æ–°å¢ä¸‹é¢æ–¹æ³•</span><span class="token comment" spellcheck="true">//æ ¹æ®idåˆ é™¤æŒ‡å®šç”¨æˆ·  å‘é€è¯·æ±‚</span><span class="token operator">*</span><span class="token function">removeUserById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>deleteUserById<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'removeById'</span><span class="token punctuation">,</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>            id<span class="token punctuation">:</span> id<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span># é¡µé¢æ–°å¢åˆ é™¤äº‹ä»¶<span class="token operator">&lt;</span>Popconfirm visible<span class="token operator">=</span><span class="token punctuation">{</span>popShow<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">"Confirm to delete?"</span> onConfirm<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token function">deleteHandler</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>       <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Popconfirm<span class="token operator">></span><span class="token comment" spellcheck="true">//æ§åˆ¶popå¼¹æ¡†æ˜¯å¦æ˜¾ç¤º</span><span class="token keyword">const</span> <span class="token punctuation">[</span>popShow<span class="token punctuation">,</span>setPopShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//è¿™è¾¹ç‚¹å‡»åˆ é™¤æŒ‰é’®åä¸€å®šè¦å°†popå…³é—­ï¼Œå¦åˆ™ä¼šæŠ¥å†…å­˜æ³„æ¼</span><span class="token keyword">const</span> deleteHandler <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>       <span class="token function">setPopShow</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span>    dispatch <span class="token operator">&amp;&amp;</span>        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">'user/removeUserById'</span><span class="token punctuation">,</span>        payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>            id<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> toggle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">setPopShow</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> Umi </tag>
            
            <tag> dva </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2020/02/12/react-ji-chu/"/>
      <url>2020/02/12/react-ji-chu/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Reactç®€ä»‹"><a href="#1-Reactç®€ä»‹" class="headerlink" title="1. Reactç®€ä»‹"></a>1. Reactç®€ä»‹</h1><h2 id="1-1-Reactä»‹ç»"><a href="#1-1-Reactä»‹ç»" class="headerlink" title="1.1 Reactä»‹ç»"></a>1.1 Reactä»‹ç»</h2><ul><li><p>React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JAVASCRIPTåº“ã€‚Reactä¸»è¦ç”¨äºæ„å»ºUIï¼Œå¾ˆå¤šäººè®¤ä¸º React æ˜¯ MVC ä¸­çš„ Vï¼ˆè§†å›¾ï¼‰ã€‚</p></li><li><p>React èµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œå› ä¸ºè¯¥å…¬å¸å¯¹å¸‚åœºä¸Šæ‰€æœ‰ JavaScript MVC æ¡†æ¶éƒ½ä¸æ»¡æ„ï¼Œå°±å†³å®šè‡ªå·±å†™ä¸€å¥—ï¼Œç”¨æ¥æ¶è®¾ Instagramï¼ˆç…§ç‰‡äº¤å‹ï¼‰ çš„ç½‘ç«™ã€‚åšå‡ºæ¥ä»¥åï¼Œå‘ç°è¿™å¥—ä¸œè¥¿å¾ˆå¥½ç”¨ï¼Œ<strong>å°±åœ¨2013å¹´5æœˆå¼€æºäº†</strong>ã€‚</p></li><li><p>React æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒã€‚ç”±äº React çš„<strong>è®¾è®¡æ€æƒ³æå…¶ç‹¬ç‰¹</strong>ï¼Œå±äºé©å‘½æ€§åˆ›æ–°ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œä»£ç é€»è¾‘å´éå¸¸ç®€å•ã€‚æ‰€ä»¥ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹å…³æ³¨å’Œä½¿ç”¨ï¼Œè®¤ä¸ºå®ƒå¯èƒ½æ˜¯å°†æ¥ Web å¼€å‘çš„ä¸»æµå·¥å…·ã€‚</p></li><li><p>æ¸…æ¥šä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li><p>libraryï¼ˆåº“ï¼‰ï¼šå°è€Œå·§çš„åº“ï¼Œåªæä¾›äº†ç‰¹å®šçš„APIï¼›ä¼˜ç‚¹å°±æ˜¯ èˆ¹å°å¥½æ‰å¤´ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä»ä¸€ä¸ªåº“åˆ‡æ¢åˆ°å¦å¤–çš„åº“ï¼›ä½†æ˜¯ä»£ç å‡ ä¹ä¸ä¼šæ”¹å˜ï¼›æ¯”å¦‚ä»jQueryåˆ‡æ¢åˆ°</p></li><li><p>Frameworkï¼ˆæ¡†æ¶ï¼‰ï¼šå¤§è€Œå…¨çš„æ˜¯æ¡†æ¶ï¼›æ¡†æ¶æä¾›äº†ä¸€æ•´å¥—çš„è§£å†³æ–¹æ¡ˆï¼›æ‰€ä»¥å¦‚æœåœ¨é¡¹ç›®ä¸­é—´ï¼Œæƒ³åˆ‡æ¢åˆ°å¦å¤–çš„æ¡†æ¶ï¼Œæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼›</p></li></ul></li></ul><h2 id="1-2-å‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶"><a href="#1-2-å‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶" class="headerlink" title="1.2 å‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶"></a>1.2 å‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶</h2><ul><li>Angular.jsï¼šå‡ºæ¥<strong>è¾ƒæ—©</strong>çš„å‰ç«¯æ¡†æ¶ï¼Œå­¦ä¹ æ›²çº¿æ¯”è¾ƒé™¡ï¼ŒNG1å­¦èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼ŒNG2 ~ NG5å¼€å§‹ï¼Œè¿›è¡Œäº†ä¸€ç³»åˆ—çš„æ”¹é©ï¼Œä¹Ÿæä¾›äº†ç»„ä»¶åŒ–å¼€å‘çš„æ¦‚å¿µï¼›ä»NG2å¼€å§‹ï¼Œä¹Ÿæ”¯æŒä½¿ç”¨TSï¼ˆTypeScriptï¼‰è¿›è¡Œç¼–ç¨‹ï¼›</li></ul><ul><li><p>Vue.jsï¼š<strong>æœ€ç«</strong>ï¼ˆå…³æ³¨çš„äººæ¯”è¾ƒå¤šï¼‰çš„ä¸€é—¨å‰ç«¯æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸­å›½äººå¼€å‘çš„ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ–‡æ¡£è¦å‹å¥½ä¸€äº›ï¼›</p></li><li><p>React.jsï¼š<strong>æœ€æµè¡Œ</strong>ï¼ˆç”¨çš„äººæ¯”è¾ƒå¤šï¼‰çš„ä¸€é—¨æ¡†æ¶ï¼Œå› ä¸ºå®ƒçš„è®¾è®¡å¾ˆä¼˜ç§€ï¼›</p></li></ul><h2 id="1-3-Reactä¸Vueçš„å¯¹æ¯”"><a href="#1-3-Reactä¸Vueçš„å¯¹æ¯”" class="headerlink" title="1.3 Reactä¸Vueçš„å¯¹æ¯”"></a>1.3 Reactä¸Vueçš„å¯¹æ¯”</h2><p><strong>1ã€ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ</strong></p><ul><li><p>Vue é€šè¿‡ getter/setter ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„ä¼˜åŒ–å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ€§èƒ½</p></li><li><p>React é»˜è®¤æ˜¯é€šè¿‡æ¯”è¾ƒå¼•ç”¨åœ°å€çš„æ–¹å¼è¿›è¡Œçš„ï¼Œå¦‚æœä¸ä¼˜åŒ–   </p><p>ï¼ˆPureComponent/shouldComponentUpdateï¼‰å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„VDOMçš„é‡æ–°æ¸²æŸ“</p></li></ul><p><strong>2ã€æ•°æ®æµçš„ä¸åŒ</strong></p><p><img src="https://i.loli.net/2020/11/09/2wyqtVuSrnXYkc4.png" alt="1574133046838.png"></p><p>å¤§å®¶éƒ½çŸ¥é“Vueä¸­é»˜è®¤æ˜¯æ”¯æŒåŒå‘ç»‘å®šçš„ã€‚åœ¨Vue1.0ä¸­æˆ‘ä»¬å¯ä»¥å®ç°ä¸¤ç§åŒå‘ç»‘å®šï¼š</p><ol><li>çˆ¶å­ç»„ä»¶ä¹‹é—´ï¼Œprops å¯ä»¥åŒå‘ç»‘å®š</li><li>ç»„ä»¶ä¸DOMä¹‹é—´å¯ä»¥é€šè¿‡ v-model åŒå‘ç»‘å®š</li></ol><p>åœ¨ Vue2.x ä¸­å»æ‰äº†ç¬¬ä¸€ç§ï¼Œä¹Ÿå°±æ˜¯çˆ¶å­ç»„ä»¶ä¹‹é—´ä¸èƒ½åŒå‘ç»‘å®šäº†ï¼ˆä½†æ˜¯æä¾›äº†ä¸€ä¸ªè¯­æ³•ç³–è‡ªåŠ¨å¸®ä½ é€šè¿‡äº‹ä»¶çš„æ–¹å¼ä¿®æ”¹ï¼‰ï¼Œå¹¶ä¸” Vue2.x å·²ç»ä¸é¼“åŠ±ç»„ä»¶å¯¹è‡ªå·±çš„ props è¿›è¡Œä»»ä½•ä¿®æ”¹äº†ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬åªæœ‰ ç»„ä»¶ &lt;â€“â€“&gt; DOM ä¹‹é—´çš„åŒå‘ç»‘å®šè¿™ä¸€ç§ã€‚</p><p>ç„¶è€Œ React ä»è¯ç”Ÿä¹‹åˆå°±ä¸æ”¯æŒåŒå‘ç»‘å®šï¼ŒReactä¸€ç›´æå€¡çš„æ˜¯å•å‘æ•°æ®æµï¼Œä»–ç§°ä¹‹ä¸º onChange/setState()æ¨¡å¼ã€‚</p><p>ä¸è¿‡ç”±äºæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šç”¨ Vuex ä»¥åŠ Redux ç­‰å•å‘æ•°æ®æµçš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ„Ÿå—ä¸åˆ°è¿™ä¸€ç‚¹çš„åŒºåˆ«äº†ã€‚</p><p><strong>3ã€æ¨¡æ¿æ¸²æŸ“æ–¹å¼çš„ä¸åŒ</strong></p><p>åœ¨è¡¨å±‚ä¸Šï¼Œ æ¨¡æ¿çš„è¯­æ³•ä¸åŒ</p><ul><li>React æ˜¯é€šè¿‡JSXæ¸²æŸ“æ¨¡æ¿</li><li>è€ŒVueæ˜¯é€šè¿‡ä¸€ç§æ‹“å±•çš„HTMLè¯­æ³•è¿›è¡Œæ¸²æŸ“</li></ul><p>ä½†å…¶å®è¿™åªæ˜¯è¡¨é¢ç°è±¡ï¼Œæ¯•ç«ŸReactå¹¶ä¸å¿…é¡»ä¾èµ–JSXã€‚åœ¨æ·±å±‚ä¸Šï¼Œæ¨¡æ¿çš„åŸç†ä¸åŒï¼Œè¿™æ‰æ˜¯ä»–ä»¬çš„æœ¬è´¨åŒºåˆ«ï¼š</p><ul><li>Reactæ˜¯åœ¨ç»„ä»¶JSä»£ç ä¸­ï¼Œé€šè¿‡åŸç”ŸJSå®ç°æ¨¡æ¿ä¸­çš„å¸¸è§è¯­æ³•ï¼Œæ¯”å¦‚æ’å€¼ï¼Œæ¡ä»¶ï¼Œå¾ªç¯ç­‰ï¼Œéƒ½æ˜¯é€šè¿‡JSè¯­æ³•å®ç°çš„</li><li>Vueæ˜¯åœ¨å’Œç»„ä»¶JSä»£ç åˆ†ç¦»çš„å•ç‹¬çš„æ¨¡æ¿ä¸­ï¼Œé€šè¿‡æŒ‡ä»¤æ¥å®ç°çš„ï¼Œæ¯”å¦‚æ¡ä»¶è¯­å¥å°±éœ€è¦ v-if æ¥å®ç°</li></ul><p><strong>4ã€Vuex å’Œ Redux çš„åŒºåˆ«</strong></p><p>ä»è¡¨é¢ä¸Šæ¥è¯´ï¼Œstore æ³¨å…¥å’Œä½¿ç”¨æ–¹å¼æœ‰ä¸€äº›åŒºåˆ«ã€‚</p><p>åœ¨ Vuex ä¸­ï¼Œ$store è¢«ç›´æ¥æ³¨å…¥åˆ°äº†ç»„ä»¶å®ä¾‹ä¸­ï¼Œå› æ­¤å¯ä»¥æ¯”è¾ƒçµæ´»çš„ä½¿ç”¨ï¼š</p><ul><li>ä½¿ç”¨ dispatch å’Œ commit æäº¤æ›´æ–°</li><li>é€šè¿‡ mapState æˆ–è€…ç›´æ¥é€šè¿‡ this.$store æ¥è¯»å–æ•°æ®</li></ul><p>åœ¨ Redux ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªç»„ä»¶éƒ½éœ€è¦æ˜¾ç¤ºçš„ç”¨ connect æŠŠéœ€è¦çš„ props å’Œ dispatch è¿æ¥èµ·æ¥ã€‚</p><p>å¦å¤– Vuex æ›´åŠ çµæ´»ä¸€äº›ï¼Œç»„ä»¶ä¸­æ—¢å¯ä»¥ dispatch action ä¹Ÿå¯ä»¥ commit reducerï¼Œè€Œ Redux ä¸­åªèƒ½è¿›è¡Œ dispatchï¼Œå¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨ reducer è¿›è¡Œä¿®æ”¹ã€‚</p><p>ä»å®ç°åŸç†ä¸Šæ¥è¯´ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯ä¸¤ç‚¹ï¼š</p><ul><li>Redux ä½¿ç”¨çš„æ˜¯ä¸å¯å˜æ•°æ®ï¼Œè€ŒVuexçš„æ•°æ®æ˜¯å¯å˜çš„ã€‚Reduxæ¯æ¬¡éƒ½æ˜¯ç”¨æ–°çš„stateæ›¿æ¢æ—§çš„stateï¼Œè€ŒVuexæ˜¯ç›´æ¥ä¿®æ”¹</li><li>Redux åœ¨æ£€æµ‹æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œæ˜¯æ¯”è¾ƒå¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼›è€ŒVuexå…¶å®å’ŒVueçš„åŸç†ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ getter/setteræ¥æ¯”è¾ƒçš„ï¼ˆå¦‚æœçœ‹Vuexæºç ä¼šçŸ¥é“ï¼Œå…¶å®ä»–å†…éƒ¨ç›´æ¥åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ç”¨æ¥è·Ÿè¸ªæ•°æ®å˜åŒ–ï¼‰</li></ul><p><strong>5ã€æ€»ç»“</strong></p><p>Reactæ›´åå‘äºæ„å»ºç¨³å®šå¤§å‹çš„åº”ç”¨ï¼Œéå¸¸çš„ç§‘ç­åŒ–ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒVueæ›´åå‘äºç®€å•è¿…é€Ÿçš„è§£å†³é—®é¢˜ï¼Œæ›´çµæ´»ï¼Œä¸é‚£ä¹ˆä¸¥æ ¼éµå¾ªæ¡æ¡æ¡†æ¡†ã€‚å› æ­¤ä¹Ÿä¼šç»™äººä¸€ç§å¤§å‹é¡¹ç›®ç”¨Reactï¼Œå°å‹é¡¹ç›®ç”¨ Vue çš„æ„Ÿè§‰ã€‚</p><h2 id="1-4-Reactä¸­å‡ ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ"><a href="#1-4-Reactä¸­å‡ ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ" class="headerlink" title="1.4 Reactä¸­å‡ ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ"></a>1.4 Reactä¸­å‡ ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ</h2><h3 id="1-4-1-è™šæ‹ŸDOMï¼ˆVirtual-Document-Object-Modelï¼‰"><a href="#1-4-1-è™šæ‹ŸDOMï¼ˆVirtual-Document-Object-Modelï¼‰" class="headerlink" title="1.4.1 è™šæ‹ŸDOMï¼ˆVirtual Document Object Modelï¼‰"></a>1.4.1 è™šæ‹ŸDOMï¼ˆVirtual Document Object Modelï¼‰</h3><ul><li><strong>DOMçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ</strong>ï¼šæµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨JSå¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ DOM å¯¹è±¡çš„APIï¼›</li><li><strong>ä»€ä¹ˆæ˜¯Reactä¸­çš„è™šæ‹ŸDOM</strong>ï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼Œæ˜¯ç¨‹åºå‘˜ç”¨JSå¯¹è±¡æ¥æ¨¡æ‹Ÿé¡µé¢ä¸Šçš„ DOM å’Œ DOMåµŒå¥—ï¼›</li><li><strong>ä¸ºä»€ä¹ˆè¦å®ç°è™šæ‹ŸDOMï¼ˆè™šæ‹ŸDOMçš„ç›®çš„ï¼‰ï¼š</strong>ä¸ºäº†å®ç°é¡µé¢ä¸­DOM å…ƒç´ çš„é«˜æ•ˆæ›´æ–°</li><li><strong>DOMå’Œè™šæ‹ŸDOMçš„åŒºåˆ«</strong>ï¼š</li></ul><p><img src="https://i.loli.net/2020/11/09/qZjtGbKpcm2eIxW.png" alt="è™šæ‹ŸDOMçš„æ¦‚å¿µ.png"></p><p><img src="https://i.loli.net/2020/11/09/Z6YObrACqSlG5if.png" alt="1552877849641.png"></p><h3 id="1-4-2-reactçš„Diffç®—æ³•-Reconciliation"><a href="#1-4-2-reactçš„Diffç®—æ³•-Reconciliation" class="headerlink" title="1.4.2 reactçš„Diffç®—æ³•(Reconciliation)"></a>1.4.2 reactçš„Diffç®—æ³•(Reconciliation)</h3><p><img src="https://i.loli.net/2020/11/09/r7gyDbEYfUIXaW9.png" alt="Diff.png"></p><p>å…¶å®ä¼ ç»Ÿdiffç®—æ³•å°±æ˜¯å¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸€å¯¹æ¯”ï¼Œå¾ªç¯éå†æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œç„¶ååˆ¤æ–­å­èŠ‚ç‚¹çš„æ›´æ–°çŠ¶æ€ã€‚é€šè¿‡å¾ªç¯é€’å½’å¯¹èŠ‚ç‚¹è¿›è¡Œä¾æ¬¡å¯¹æ¯”ï¼Œç®—æ³•æ—¶é—´å¤æ‚åº¦è¾¾åˆ° O(n^3) ï¼Œnæ˜¯æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œè¿™ä¸ªæœ‰å¤šå¯æ€•å‘¢ï¼Ÿâ€”â€”å¦‚æœè¦å±•ç¤º1000ä¸ªèŠ‚ç‚¹ï¼Œå¾—æ‰§è¡Œä¸Šäº¿æ¬¡æ¯”è¾ƒã€‚å³ä¾¿æ˜¯CPUå¿«èƒ½æ‰§è¡Œ30äº¿æ¡å‘½ä»¤ï¼Œä¹Ÿ<strong>å¾ˆéš¾åœ¨ä¸€ç§’å†…</strong>è®¡ç®—å‡ºå·®å¼‚ã€‚</p><p>React é€šè¿‡åˆ¶å®šå¤§èƒ†çš„ç­–ç•¥ï¼Œå°† O(n^3) å¤æ‚åº¦çš„é—®é¢˜è½¬æ¢æˆ O(n) å¤æ‚åº¦çš„é—®é¢˜ã€‚reactæ ¹æ®è‡ªå·±çš„ç‰¹ç‚¹ï¼Œå®ç°äº†éƒ¨åˆ†ä»£ç çš„ç®€åŒ–ã€‚</p><p><img src="https://i.loli.net/2020/11/09/47Ig31tUxOiHLGh.png" alt="1552878167661"></p><h4 id="a-tree-diff"><a href="#a-tree-diff" class="headerlink" title="a) tree diff"></a>a) tree diff</h4><blockquote><p>ï¼ˆ1ï¼‰Reacté€šè¿‡updateDepthå¯¹Virtual DOMæ ‘è¿›è¡Œå±‚çº§æ§åˆ¶ã€‚<br>ï¼ˆ2ï¼‰å¯¹æ ‘åˆ†å±‚æ¯”è¾ƒï¼Œä¸¤æ£µæ ‘åªå¯¹åŒä¸€å±‚æ¬¡èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœè¯¥èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è¯¥èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ä¼šè¢«å®Œå…¨åˆ é™¤ï¼Œä¸ä¼šå†è¿›ä¸€æ­¥æ¯”è¾ƒã€‚<br>ï¼ˆ3ï¼‰åªéœ€éå†ä¸€æ¬¡å°±èƒ½å®Œæˆæ•´æ£µDOMæ ‘çš„æ¯”è¾ƒã€‚</p></blockquote><p><img src="https://i.loli.net/2020/11/09/zZOVt1Gefn6oiAN.png" alt="1562723697592.png"></p><blockquote><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœDOMèŠ‚ç‚¹å‡ºç°äº†è·¨å±‚çº§æ“ä½œ,diffä¼šå’‹åŠå‘¢ï¼Ÿ<br>ç­”ï¼šdiffåªç®€å•è€ƒè™‘åŒå±‚çº§çš„èŠ‚ç‚¹ä½ç½®å˜æ¢ï¼Œå¦‚æœæ˜¯è·¨å±‚çº§çš„è¯ï¼Œåªæœ‰åˆ›å»ºèŠ‚ç‚¹å’Œåˆ é™¤èŠ‚ç‚¹çš„æ“ä½œã€‚</p></blockquote><p><img src="https://i.loli.net/2020/11/09/9vtH3A8sDhYj6ql.png" alt="1562723819718.png"></p><blockquote><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»¥Aä¸ºæ ¹èŠ‚ç‚¹çš„æ•´æ£µæ ‘ä¼šè¢«<strong>é‡æ–°åˆ›å»ºï¼Œè€Œä¸æ˜¯ç§»åŠ¨</strong>ï¼Œå› æ­¤ <strong>å®˜æ–¹å»ºè®®ä¸è¦è¿›è¡ŒDOMèŠ‚ç‚¹è·¨å±‚çº§æ“ä½œï¼Œå¯ä»¥é€šè¿‡CSSéšè—ã€æ˜¾ç¤ºèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯çœŸæ­£åœ°ç§»é™¤ã€æ·»åŠ DOMèŠ‚ç‚¹</strong>ã€‚</p></blockquote><h4 id="b-component-diff"><a href="#b-component-diff" class="headerlink" title="b) component diff"></a>b) component diff</h4><p>Reactåº”ç”¨æ˜¯åŸºäºç»„ä»¶æ„å»ºçš„ï¼Œå¯¹äºç»„ä»¶çš„æ¯”è¾ƒä¼˜åŒ–ä¾§é‡äºä»¥ä¸‹å‡ ç‚¹ï¼š</p><blockquote><ol><li>åŒä¸€ç±»å‹ç»„ä»¶éµä»tree diffæ¯”è¾ƒv-domæ ‘</li><li>ä¸åŒç±»å‹ç»„ä»¶ï¼Œå…ˆå°†è¯¥ç»„ä»¶å½’ç±»ä¸ºdirty componentï¼Œæ›¿æ¢ä¸‹æ•´ä¸ªç»„ä»¶ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹</li><li>åŒä¸€ç±»å‹ç»„ä»¶Virtual Domæ²¡æœ‰å˜åŒ–ï¼ŒReactå…è®¸å¼€å‘è€…ä½¿ç”¨shouldComponentUpdate()æ¥åˆ¤æ–­è¯¥ç»„ä»¶æ˜¯å¦è¿›è¡Œdiffï¼Œè¿ç”¨å¾—å½“å¯ä»¥èŠ‚çœdiffè®¡ç®—æ—¶é—´ï¼Œæå‡æ€§èƒ½</li></ol></blockquote><p><img src="https://i.loli.net/2020/11/09/mLuOh1tHqUVecZI.png" alt="1562723945651.png"></p><p>å¦‚ä¸Šå›¾ï¼Œå½“ç»„ä»¶D â†’ ç»„ä»¶Gæ—¶ï¼Œdiffåˆ¤æ–­ä¸ºä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œè™½ç„¶å®ƒä»¬çš„ç»“æ„ç›¸ä¼¼ç”šè‡³ä¸€æ ·ï¼Œdiffä»ç„¶ä¸ä¼šæ¯”è¾ƒäºŒè€…ç»“æ„ï¼Œä¼šç›´æ¥é”€æ¯DåŠå…¶å­èŠ‚ç‚¹ï¼Œç„¶åæ–°å»ºä¸€ä¸ªGç›¸å…³çš„å­treeï¼Œè¿™æ˜¾ç„¶ä¼šå½±å“æ€§èƒ½ï¼Œå®˜æ–¹è™½ç„¶è®¤å®šè¿™ç§æƒ…å†µæå°‘å‡ºç°ï¼Œä½†æ˜¯å¼€å‘ä¸­çš„è¿™ç§ç°è±¡é€ æˆçš„å½±å“æ˜¯éå¸¸å¤§çš„ã€‚</p><h4 id="c-element-diff"><a href="#c-element-diff" class="headerlink" title="c) element diff"></a>c) element diff</h4><p>å¯¹äºåŒä¸€å±‚çº§çš„elementèŠ‚ç‚¹ï¼Œdiffæä¾›äº†ä»¥ä¸‹3ç§èŠ‚ç‚¹æ“ä½œï¼š</p><blockquote><ol><li>INSERT_MARKUP æ’å…¥èŠ‚ç‚¹</li><li>MOVE_EXISING ç§»åŠ¨èŠ‚ç‚¹</li><li>REMOVE_NODE ç§»é™¤èŠ‚ç‚¹</li></ol></blockquote><p><img src="https://i.loli.net/2020/11/09/QbwmHxGfaSIkZzg.png" alt="1562724094202.png"></p><p>ä¸€èˆ¬diffåœ¨æ¯”è¾ƒé›†åˆ[A,B,C,D]å’Œ[Bï¼ŒAï¼ŒDï¼ŒC]çš„æ—¶å€™ä¼šè¿›è¡Œå…¨éƒ¨å¯¹æ¯”ï¼Œå³æŒ‰å¯¹åº”ä½ç½®é€ä¸ªæ¯”è¾ƒï¼Œå‘ç°æ¯ä¸ªä½ç½®å¯¹åº”çš„å…ƒç´ éƒ½æœ‰æ‰€æ›´æ–°ï¼Œåˆ™æŠŠæ—§é›†åˆå…¨éƒ¨ç§»é™¤ï¼Œæ›¿æ¢æˆæ–°çš„é›†åˆï¼Œå¦‚ä¸Šå›¾ï¼Œä½†æ˜¯è¿™æ ·çš„æ“ä½œåœ¨Reactä¸­æ˜¾ç„¶æ˜¯å¤æ‚ã€ä½æ•ˆã€å½±å“æ€§èƒ½çš„æ“ä½œï¼Œå› ä¸ºæ–°é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥è¿›è¡Œå¤ç”¨ï¼Œæ— éœ€åˆ é™¤é‡æ–°åˆ›å»ºï¼Œè€—è´¹æ€§èƒ½å’Œå†…å­˜ï¼Œåªéœ€è¦ç§»åŠ¨å…ƒç´ ä½ç½®å³å¯ã€‚</p><p>Reactå¯¹è¿™ä¸€ç°è±¡åšå‡ºäº†ä¸€ä¸ªé«˜æ•ˆçš„ç­–ç•¥ï¼šå…è®¸å¼€å‘è€…å¯¹åŒä¸€å±‚çº§çš„åŒç»„å­èŠ‚ç‚¹æ·»åŠ å”¯ä¸€keyå€¼è¿›è¡ŒåŒºåˆ†ã€‚æ„ä¹‰å°±æ˜¯ä»£ç ä¸Šçš„ä¸€å°æ­¥ï¼Œæ€§èƒ½ä¸Šçš„ä¸€å¤§æ­¥ï¼Œç”šè‡³æ˜¯ç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼</p><h1 id="2-Create-React-Appè„šæ‰‹æ¶"><a href="#2-Create-React-Appè„šæ‰‹æ¶" class="headerlink" title="2. Create React Appè„šæ‰‹æ¶"></a>2. Create React Appè„šæ‰‹æ¶</h1><p><a href="https://www.html.cn/create-react-app/docs/getting-started/">https://www.html.cn/create-react-app/docs/getting-started/</a></p><p><code>Create React App</code>æ˜¯FaceBookçš„Reactå›¢é˜Ÿå®˜æ–¹å‡ºçš„ä¸€ä¸ªæ„å»º<code>React</code>å•é¡µé¢åº”ç”¨çš„è„šæ‰‹æ¶å·¥å…·ã€‚å®ƒæœ¬èº«é›†æˆäº†<code>Webpack</code>ï¼Œå¹¶é…ç½®äº†ä¸€ç³»åˆ—å†…ç½®çš„<code>loader</code>å’Œé»˜è®¤çš„npmçš„è„šæœ¬ï¼Œå¯ä»¥å¾ˆè½»æ¾çš„å®ç°é›¶é…ç½®å°±å¯ä»¥å¿«é€Ÿå¼€å‘Reactçš„åº”ç”¨ã€‚</p><h2 id="2-1-åˆ›å»ºåº”ç”¨"><a href="#2-1-åˆ›å»ºåº”ç”¨" class="headerlink" title="2.1 åˆ›å»ºåº”ç”¨"></a>2.1 åˆ›å»ºåº”ç”¨</h2><pre class=" language-js"><code class="language-js"># å…¨å±€å®‰è£…npm install <span class="token operator">-</span>g create<span class="token operator">-</span>react<span class="token operator">-</span>app# æ„å»ºä¸€ä¸ªmy<span class="token operator">-</span>appçš„é¡¹ç›®npx create<span class="token operator">-</span>react<span class="token operator">-</span>app my<span class="token operator">-</span>app                     npx create<span class="token operator">-</span>react<span class="token operator">-</span>app my<span class="token operator">-</span>test<span class="token operator">-</span>app <span class="token operator">--</span>template typescript    <span class="token comment" spellcheck="true">//typescriptç‰ˆæœ¬</span>cd my<span class="token operator">-</span>app# å¯åŠ¨ç¼–è¯‘å½“å‰çš„Reacté¡¹ç›®ï¼Œå¹¶è‡ªåŠ¨æ‰“å¼€ http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3000</span><span class="token operator">/</span>yarn start# å¦‚æœä½ ä¸èƒ½ç¡®ä¿æœ€æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥å…ˆå°è¯•å¸è½½ï¼š npm uninstall <span class="token operator">-</span>g create<span class="token operator">-</span>react<span class="token operator">-</span>app<span class="token punctuation">,</span>ç„¶åå†å…¨å±€å®‰è£…# è§£å‹é»˜è®¤çš„webpacké…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­# react<span class="token operator">-</span>scripts æ˜¯ create<span class="token operator">-</span>react<span class="token operator">-</span>app çš„ä¸€ä¸ªæ ¸å¿ƒåŒ…ï¼Œä¸€äº›è„šæœ¬å’Œå·¥å…·çš„é»˜è®¤é…ç½®éƒ½é›†æˆåœ¨é‡Œé¢ï¼Œè€Œ yarn eject å‘½ä»¤æ‰§è¡Œåä¼šå°†å°è£…åœ¨ create<span class="token operator">-</span>react<span class="token operator">-</span>app ä¸­çš„é…ç½®å…¨éƒ¨åç¼–è¯‘åˆ°å½“å‰é¡¹ç›®ï¼Œè¿™æ ·ç”¨æˆ·å°±èƒ½å®Œå…¨å–å¾— webpack æ–‡ä»¶çš„æ§åˆ¶æƒã€‚æ‰€ä»¥ï¼Œeject å‘½ä»¤å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯æ›´æ”¹ webpack é…ç½®å­˜åœ¨çš„å•Šï¼yarn run ejectyarn install   <span class="token comment" spellcheck="true">//éœ€è¦å†æ¬¡è¿è¡Œinstallå‘½ä»¤å®‰è£…</span>yarn run start <span class="token comment" spellcheck="true">//ç„¶åæ‰å¯ä»¥å¯åŠ¨</span></code></pre><p>åº”ç”¨çš„ç›®å½•ç»“æ„ï¼š</p><pre class=" language-js"><code class="language-js">â”œâ”€â”€ <span class="token keyword">package</span><span class="token punctuation">.</span>jsonâ”œâ”€â”€ <span class="token keyword">public</span>                  # è¿™ä¸ªæ˜¯webpackçš„é…ç½®çš„é™æ€ç›®å½•â”‚   â”œâ”€â”€ favicon<span class="token punctuation">.</span>icoâ”‚   â”œâ”€â”€ index<span class="token punctuation">.</span>html          # é»˜è®¤æ˜¯å•é¡µé¢åº”ç”¨ï¼Œè¿™ä¸ªæ˜¯æœ€ç»ˆçš„htmlçš„åŸºç¡€æ¨¡æ¿â”‚   â””â”€â”€ manifest<span class="token punctuation">.</span>jsonâ”œâ”€â”€ srcâ”‚   â”œâ”€â”€ App<span class="token punctuation">.</span>css             # Appæ ¹ç»„ä»¶çš„cssâ”‚   â”œâ”€â”€ App<span class="token punctuation">.</span>tsx              # Appç»„ä»¶ä»£ç â”‚   â”œâ”€â”€ App<span class="token punctuation">.</span>test<span class="token punctuation">.</span>tsxâ”‚   â”œâ”€â”€ index<span class="token punctuation">.</span>css           # å¯åŠ¨æ–‡ä»¶æ ·å¼â”‚   â”œâ”€â”€ index<span class="token punctuation">.</span>tsx            # å¯åŠ¨çš„æ–‡ä»¶ï¼ˆå¼€å§‹æ‰§è¡Œçš„å…¥å£ï¼‰ï¼ï¼ï¼ï¼â”‚   â”œâ”€â”€ logo<span class="token punctuation">.</span>svgâ”‚   â””â”€â”€ serviceWorker<span class="token punctuation">.</span>jsâ””â”€â”€ yarn<span class="token punctuation">.</span>lock</code></pre><h2 id="2-2-æ·»åŠ å›¾ç‰‡ï¼Œå­—ä½“å’Œæ–‡ä»¶"><a href="#2-2-æ·»åŠ å›¾ç‰‡ï¼Œå­—ä½“å’Œæ–‡ä»¶" class="headerlink" title="2.2 æ·»åŠ å›¾ç‰‡ï¼Œå­—ä½“å’Œæ–‡ä»¶"></a>2.2 æ·»åŠ å›¾ç‰‡ï¼Œå­—ä½“å’Œæ–‡ä»¶</h2><p>ä½¿ç”¨ Webpackï¼Œæ·»åŠ å›¾ç‰‡å’Œå­—ä½“ç­‰é™æ€èµ„æºçš„å·¥ä½œæ–¹å¼ä¸ CSS ç±»ä¼¼ã€‚</p><p>ä½ å¯ä»¥ <strong>ç›´æ¥åœ¨ JavaScript æ¨¡å—ä¸­ import æ–‡ä»¶</strong>ã€‚ è¿™ä¼šå‘Šè¯‰ Webpack å°†è¯¥æ–‡ä»¶åŒ…å«åœ¨ bundle(åŒ…) ä¸­ã€‚ ä¸ CSS å¯¼å…¥ä¸åŒï¼Œå¯¼å…¥æ–‡ä»¶ä¼šä¸ºä½ æä¾›å­—ç¬¦ä¸²å€¼ã€‚ æ­¤å€¼æ˜¯ä½ å¯ä»¥åœ¨ä»£ç ä¸­å¼•ç”¨çš„æœ€ç»ˆè·¯å¾„ï¼Œä¾‹å¦‚ image çš„ <code>src</code> å±æ€§æˆ–é“¾æ¥åˆ° PDF çš„ <code>href</code> å±æ€§ã€‚</p><p>è¦å‡å°‘å¯¹æœåŠ¡å™¨çš„è¯·æ±‚æ•°ï¼Œå¯¼å…¥å°äº 10,000 å­—èŠ‚çš„å›¾ç‰‡å°†è¿”å› <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">data URI</a> è€Œä¸æ˜¯è·¯å¾„ã€‚ è¿™é€‚ç”¨äºä»¥ä¸‹æ–‡ä»¶æ‰©å±•åï¼š<code>bmp</code> ï¼Œ<code>gif</code> ï¼Œ<code>jpg</code> ï¼Œ<code>jpeg</code> å’Œ <code>png</code> ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//ä¾‹å¦‚ï¼š</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'./logo.png'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å‘Šè¯‰ Webpack è¿™ä¸ª JS æ–‡ä»¶ä½¿ç”¨äº†è¿™ä¸ªå›¾ç‰‡</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// /logo.84287d09.png</span><span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// å¯¼å…¥ç»“æœæ˜¯å›¾ç‰‡çš„ URL </span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"Logo"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Header<span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//è¿™ä¹Ÿé€‚ç”¨äº CSS ï¼š</span><span class="token punctuation">.</span>Logo <span class="token punctuation">{</span>  background<span class="token operator">-</span>image<span class="token punctuation">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">/</span>logo<span class="token punctuation">.</span>png<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//å­—ä½“å›¾æ ‡çš„ä½¿ç”¨</span><span class="token comment" spellcheck="true">//yarn add font-awesome</span><span class="token comment" spellcheck="true">//å¼•å…¥æ ·å¼</span><span class="token keyword">import</span> <span class="token string">'font-awesome/css/font-awesome.css'</span><span class="token comment" spellcheck="true">//ä½¿ç”¨æ ·å¼</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fa fa-address-book"</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span> <span class="token comment" spellcheck="true">//å…·ä½“ä½¿ç”¨å‚ç…§å®˜ç½‘ï¼šhttp://www.fontawesome.com.cn/faicons/</span></code></pre><h2 id="2-3-ä¿®æ”¹é»˜è®¤é…ç½®"><a href="#2-3-ä¿®æ”¹é»˜è®¤é…ç½®" class="headerlink" title="2.3 ä¿®æ”¹é»˜è®¤é…ç½®"></a>2.3 ä¿®æ”¹é»˜è®¤é…ç½®</h2><p>è¦ä¿®æ”¹ create-react-app è„šæ‰‹æ¶ä¸­çš„é»˜è®¤é…ç½®ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¹Ÿä¸ä¼šé€šè¿‡yarn rejectæš´éœ²é…ç½®æ–‡ä»¶ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªconfig-overrides.jsé…ç½®æ–‡ä»¶ï¼Œè¦†ç›–é»˜è®¤çš„é…ç½®</p><pre class=" language-jsx"><code class="language-jsx"><span class="token number">1</span><span class="token punctuation">.</span>    yarn add react<span class="token operator">-</span>app<span class="token operator">-</span>rewired customize<span class="token operator">-</span>cra<span class="token number">2</span><span class="token punctuation">.</span>    åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªconfig<span class="token operator">-</span>overrides<span class="token punctuation">.</span>js<span class="token number">3</span><span class="token punctuation">.</span>  ä¿®æ”¹<span class="token keyword">package</span><span class="token punctuation">.</span>json    <span class="token string">"scripts"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token operator">-</span> <span class="token string">"start"</span><span class="token punctuation">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>        <span class="token operator">+</span> <span class="token string">"start"</span><span class="token punctuation">:</span> <span class="token string">"react-app-rewired start"</span><span class="token punctuation">,</span>        <span class="token operator">-</span> <span class="token string">"build"</span><span class="token punctuation">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>        <span class="token operator">+</span> <span class="token string">"build"</span><span class="token punctuation">:</span> <span class="token string">"react-app-rewired build"</span><span class="token punctuation">,</span>        <span class="token operator">-</span> <span class="token string">"test"</span><span class="token punctuation">:</span> <span class="token string">"react-scripts test"</span><span class="token punctuation">,</span>        <span class="token operator">+</span> <span class="token string">"test"</span><span class="token punctuation">:</span> <span class="token string">"react-app-rewired test"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//  ä¿®æ”¹config-overrides.jsæ–‡ä»¶</span><span class="token comment" spellcheck="true">//  http://npm.taobao.org/package/customize-cra</span><span class="token comment" spellcheck="true">//  https://blog.csdn.net/weixin_33850890/article/details/91372527</span><span class="token comment" spellcheck="true">// é…ç½®lesså’Œ@ç¬¦å·</span><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token punctuation">{</span>    override<span class="token punctuation">,</span>    addWebpackAlias<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"customize-cra"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>    <span class="token function">addWebpackAlias</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token punctuation">[</span><span class="token string">"@"</span><span class="token punctuation">]</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-json"><code class="language-json">//åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºpaths.json<span class="token punctuation">{</span>    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>        <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"@components/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/components/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"@pages/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/pages/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token property">"@utils/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/utils/*"</span><span class="token punctuation">]</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>//ä¿®æ”¹tsconfig.json<span class="token punctuation">{</span>    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./paths.json"</span><span class="token punctuation">,</span>    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="2-4-ReactåŸºæœ¬è¯­æ³•"><a href="#2-4-ReactåŸºæœ¬è¯­æ³•" class="headerlink" title="2.4 ReactåŸºæœ¬è¯­æ³•"></a>2.4 ReactåŸºæœ¬è¯­æ³•</h2><h3 id="2-4-1-Reactçš„æ ¸å¿ƒåŒ…"><a href="#2-4-1-Reactçš„æ ¸å¿ƒåŒ…" class="headerlink" title="2.4.1 Reactçš„æ ¸å¿ƒåŒ…"></a>2.4.1 Reactçš„æ ¸å¿ƒåŒ…</h3><ul><li>reactï¼š ä¸“é—¨ç”¨äºåˆ›å»ºç»„ä»¶å’Œè™šæ‹ŸDOMçš„ï¼ŒåŒæ—¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸéƒ½åœ¨è¿™ä¸ªåŒ…ä¸­</li><li>react-domï¼š ä¸“é—¨è¿›è¡ŒDOMæ“ä½œçš„ï¼Œæœ€ä¸»è¦çš„åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯<code>ReactDOM.render()</code></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// è¿™æ˜¯ åˆ›å»ºè™šæ‹ŸDOMå…ƒç´ çš„ API    &lt;h1 title="å•Šï¼Œäº”ç¯" id="myh1">ä½ æ¯”å››ç¯å¤šä¸€ç¯&lt;/h1></span><span class="token comment" spellcheck="true">//  ç¬¬ä¸€ä¸ªå‚æ•°ï¼š å­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ï¼Œè¡¨ç¤ºè¦åˆ›å»ºçš„æ ‡ç­¾çš„åç§°</span><span class="token comment" spellcheck="true">//  ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯¹è±¡ç±»å‹çš„å‚æ•°ï¼Œ è¡¨ç¤º åˆ›å»ºçš„å…ƒç´ çš„å±æ€§èŠ‚ç‚¹</span><span class="token comment" spellcheck="true">//  ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š å­èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬ å…¶å®ƒ è™šæ‹ŸDOM è·å– æ–‡æœ¬å­èŠ‚ç‚¹ï¼‰</span><span class="token comment" spellcheck="true">//  å‚æ•°n :  å…¶å®ƒå­èŠ‚ç‚¹</span><span class="token keyword">const</span> myh1 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'å•Šï¼Œäº”ç¯'</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token string">'myh1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'ä½ æ¯”å››ç¯å¤šä¸€ç¯'</span><span class="token punctuation">)</span><span class="token keyword">const</span> mydiv <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'è¿™æ˜¯ä¸€ä¸ªdivå…ƒç´ '</span><span class="token punctuation">,</span> myh1<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 3. æ¸²æŸ“è™šæ‹ŸDOMå…ƒç´ </span><span class="token comment" spellcheck="true">// å‚æ•°1ï¼š è¡¨ç¤ºè¦æ¸²æŸ“çš„è™šæ‹ŸDOMå¯¹è±¡</span><span class="token comment" spellcheck="true">// å‚æ•°2ï¼š æŒ‡å®šå®¹å™¨,æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç›´æ¥æ”¾ å®¹å™¨å…ƒç´ çš„Idå­—ç¬¦ä¸²ï¼Œéœ€è¦æ”¾ä¸€ä¸ªå®¹å™¨çš„DOMå¯¹è±¡</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myh1<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="2-4-2-JSXè¯­æ³•"><a href="#2-4-2-JSXè¯­æ³•" class="headerlink" title="2.4.2 JSXè¯­æ³•"></a>2.4.2 JSXè¯­æ³•</h3><blockquote><p>ä»€ä¹ˆæ˜¯JSXè¯­æ³•ï¼šå°±æ˜¯ç¬¦åˆ xml è§„èŒƒçš„ JS è¯­æ³•ï¼›ï¼ˆè¯­æ³•æ ¼å¼ç›¸å¯¹æ¥è¯´ï¼Œè¦æ¯”HTMLä¸¥è°¨å¾ˆå¤šï¼‰</p></blockquote><p>JSXè¯­æ³•çš„æœ¬è´¨ï¼šå¹¶ä¸æ˜¯ç›´æ¥æŠŠ jsx æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œè€Œæ˜¯å†…éƒ¨é€šè¿‡ createElement å†æ¸²æŸ“åˆ°é¡µé¢ï¼›</p><p>åœ¨ jsx ä¸­æ··åˆå†™å…¥ js è¡¨è¾¾å¼ï¼šåœ¨ jsx è¯­æ³•ä¸­ï¼Œè¦æŠŠ JSä»£ç å†™åˆ°    <code>{ }</code> ä¸­</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1. å¯¼å…¥åŒ…</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token comment" spellcheck="true">//2. JSXä¸­ä½¿ç”¨æ•°å€¼ã€å­—ç¬¦ä¸²ã€boolã€æ•°ç»„ç­‰ä¿¡æ¯</span><span class="token keyword">let</span> a<span class="token punctuation">:</span>number <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">let</span> str<span class="token punctuation">:</span>string <span class="token operator">=</span> <span class="token string">'ä½ å¥½ï¼Œä¸­å›½'</span><span class="token keyword">let</span> boo<span class="token punctuation">:</span>boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token keyword">let</span> title<span class="token punctuation">:</span>string <span class="token operator">=</span> <span class="token string">'999'</span><span class="token keyword">const</span> h1<span class="token punctuation">:</span>JSX<span class="token punctuation">.</span>Element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>çº¢ç«ç«æææƒšæƒš<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token keyword">const</span> arr<span class="token punctuation">:</span>JSX<span class="token punctuation">.</span>Element<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token operator">&lt;</span>h2<span class="token operator">></span>è¿™æ˜¯h2<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><span class="token punctuation">,</span>  <span class="token operator">&lt;</span>h3<span class="token operator">></span>è¿™æ˜¯h3<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><span class="token punctuation">]</span><span class="token keyword">const</span> arrStr<span class="token punctuation">:</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'æ¯›åˆ©å…°'</span><span class="token punctuation">,</span> <span class="token string">'æŸ¯å—'</span><span class="token punctuation">,</span> <span class="token string">'å°äº”éƒ'</span><span class="token punctuation">,</span> <span class="token string">'ç°åŸå“€'</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå°†æ¥ç”¨æ¥å­˜æ”¾ åç§° æ ‡ç­¾ã€æ–¹æ¡ˆ1ã€‘</span><span class="token keyword">const</span> nameArr<span class="token punctuation">:</span>JSX<span class="token punctuation">.</span>Element<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">// æ³¨æ„ï¼š React ä¸­ï¼Œéœ€è¦æŠŠ key æ·»åŠ ç»™ è¢« forEach æˆ– map æˆ– for å¾ªç¯ç›´æ¥æ§åˆ¶çš„å…ƒç´ </span>arrStr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token operator">&lt;</span>h5 key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>  nameArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// æ•°ç»„çš„ map æ–¹æ³•, map ä¸­å¿…é¡»å†™ return</span><span class="token keyword">const</span> result<span class="token punctuation">:</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> arrStr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token string">'~~'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 3. è°ƒç”¨ render å‡½æ•°æ¸²æŸ“   JSX  XML æ¯” HTML ä¸¥æ ¼å¤šäº†</span><span class="token comment" spellcheck="true">// åœ¨JSXè¦ä½¿ç”¨JSï¼Œåˆ™éœ€è¦æŠŠ JS ä»£ç å†™åˆ° {} ä¸­</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token punctuation">{</span>a <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">{</span>str<span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">{</span>boo <span class="token operator">?</span> <span class="token string">'æ¡ä»¶ä¸ºçœŸ'</span> <span class="token punctuation">:</span> <span class="token string">'æ¡ä»¶ä¸ºå‡'</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token operator">&lt;</span>p title<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">></span>è¿™æ˜¯pæ ‡ç­¾<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>  <span class="token punctuation">{</span>h1<span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* {arr} */</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è¿™æ˜¯æ³¨é‡Šï¼Œä½ çœ‹ä¸è§æˆ‘</span>  <span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">{</span>nameArr<span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">{</span>arrStr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>  <span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">"ooo"</span><span class="token operator">></span><span class="token number">11111</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> #æ³¨æ„ç‚¹ï¼š<span class="token number">1</span><span class="token punctuation">.</span> åœ¨ JSX ä¸­ å†™æ³¨é‡Šï¼šæ¨èä½¿ç”¨<span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* è¿™æ˜¯æ³¨é‡Š */</span> <span class="token punctuation">}</span><span class="token number">2</span><span class="token punctuation">.</span> ä¸º JSX ä¸­çš„htmlForæ›¿æ¢labelçš„<span class="token keyword">for</span>å±æ€§<span class="token number">3</span><span class="token punctuation">.</span> åœ¨ JSX åˆ›å»ºDOMçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå¿…é¡»æœ‰å”¯ä¸€çš„æ ¹å…ƒç´ è¿›è¡ŒåŒ…è£¹ï¼›<span class="token number">4</span><span class="token punctuation">.</span> åœ¨ JSX è¯­æ³•ä¸­ï¼Œæ ‡ç­¾å¿…é¡»æˆå¯¹å‡ºç°ï¼Œå¦‚æœæ˜¯å•æ ‡ç­¾ï¼Œåˆ™å¿…é¡»è‡ªé—­å’Œï¼</code></pre><blockquote><p>å½“ ç¼–è¯‘å¼•æ“ï¼Œåœ¨ç¼–è¯‘JSXä»£ç çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†<code>&lt;</code>é‚£ä¹ˆå°±æŠŠå®ƒå½“ä½œ HTMLä»£ç å»ç¼–è¯‘ï¼Œå¦‚æœé‡åˆ°äº† <code>{}</code> å°±æŠŠ èŠ±æ‹¬å·å†…éƒ¨çš„ä»£ç å½“ä½œæ™®é€šJSä»£ç å»ç¼–è¯‘ï¼›</p></blockquote><h1 id="3-Reactä¸­åˆ›å»ºç»„ä»¶"><a href="#3-Reactä¸­åˆ›å»ºç»„ä»¶" class="headerlink" title="3. Reactä¸­åˆ›å»ºç»„ä»¶"></a>3. Reactä¸­åˆ›å»ºç»„ä»¶</h1><h2 id="3-1-ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶"><a href="#3-1-ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶" class="headerlink" title="3.1 ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶"></a>3.1 ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶</h2><h3 id="3-1-1-æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„"><a href="#3-1-1-æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„" class="headerlink" title="3.1.1 æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„"></a>3.1.1 æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//è®©è‡ªå·±çš„ç»„ä»¶ç»§æ‰¿React.Compoentï¼Œé‡å†™renderæ–¹æ³•</span><span class="token keyword">class</span> ç»„ä»¶åç§° <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>è¿™æ˜¯ <span class="token keyword">class</span> åˆ›å»ºçš„ç»„ä»¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3-1-2-ä½¿ç”¨æ¡ˆä¾‹"><a href="#3-1-2-ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="3.1.2 ä½¿ç”¨æ¡ˆä¾‹"></a>3.1.2 ä½¿ç”¨æ¡ˆä¾‹</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ–°å»ºMovie.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åªè¯» ä¸å¯ä»¥ä¿®æ”¹</span>type IProps <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span>  name<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>  gender<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> msg<span class="token punctuation">:</span> <span class="token string">'å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ class åˆ›å»ºçš„ Movieç»„ä»¶'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åªè¯» ä¸å¯ä»¥this.stateæ¥ä¿®æ”¹</span>type IState <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token keyword">typeof</span> initialState<span class="token operator">></span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿React.component   </span><span class="token comment" spellcheck="true">//&lt;IPropsï¼ŒIState>æ˜¯æ³›å‹ï¼Œçº¦å®šç»„ä»¶ä¸­çš„propså’Œstateçš„ç±»å‹</span><span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span> IState<span class="token operator">></span> <span class="token punctuation">{</span>  readonly state<span class="token punctuation">:</span> IState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* æ³¨æ„ï¼šåœ¨ class ç»„ä»¶å†…éƒ¨ï¼Œthis è¡¨ç¤º å½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ã€‚propsæ•°æ®ä¸å¯ä»¥ä¿®æ”¹ï¼Œstateæ•°æ®å¯ä»¥ä¿®æ”¹ */</span><span class="token punctuation">}</span>      è¿™æ˜¯ Movie ç»„ä»¶ <span class="token operator">--</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">--</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span> <span class="token operator">--</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>gender<span class="token punctuation">}</span>      <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Movie<span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.tsx</span><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>  age<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>  gender<span class="token punctuation">:</span> <span class="token string">'ç”·'</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 3. è°ƒç”¨ render å‡½æ•°æ¸²æŸ“</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token number">123</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* è¿™é‡Œçš„ Movie æ ‡ç­¾ï¼Œå…¶å®ï¼Œå°±æ˜¯ Movie ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ */</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* &lt;Movie name={user.name} age={user.age}>&lt;/Movie> */</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>Movie <span class="token punctuation">{</span><span class="token operator">...</span>user<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Movie<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="3-1-3-stateçš„ä¿®æ”¹"><a href="#3-1-3-stateçš„ä¿®æ”¹" class="headerlink" title="3.1.3 stateçš„ä¿®æ”¹"></a>3.1.3 stateçš„ä¿®æ”¹</h3><h4 id="a-ä¸èƒ½ç›´æ¥ä¿®æ”¹-State"><a href="#a-ä¸èƒ½ç›´æ¥ä¿®æ”¹-State" class="headerlink" title="a) ä¸èƒ½ç›´æ¥ä¿®æ”¹ State"></a>a) ä¸èƒ½ç›´æ¥ä¿®æ”¹ State</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æˆ‘ä»¬æŠŠstateè®¾ç½®ä¸ºReadonlyå°±æ˜¯ä¸ºäº†ä¸è®©ç›´æ¥ä¿®æ”¹stateï¼Œæ‰€ä»¥ä¸‹é¢å†™æ³•é”™è¯¯</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>comment <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å¯ä»¥è¿™æ ·ä¿®æ”¹State</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>comment<span class="token punctuation">:</span> <span class="token string">'Hello'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="b-Stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„"><a href="#b-Stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„" class="headerlink" title="b) Stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„"></a>b) Stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„</h4><p>å› ä¸º <code>this.props</code> å’Œ <code>this.state</code> å¯èƒ½ä¼šå¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä½ ä¸è¦ä¾èµ–ä»–ä»¬çš„å€¼æ¥æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//è°ƒç”¨setStateï¼Œç»„ä»¶çš„stateå¹¶ä¸ä¼šç«‹å³æ”¹å˜ï¼ŒsetStateåªæ˜¯æŠŠè¦ä¿®æ”¹çš„çŠ¶æ€æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼ŒReactä¼šä¼˜åŒ–çœŸæ­£çš„æ‰§è¡Œæ—¶æœºï¼Œå¹¶ä¸”Reactä¼šå‡ºäºæ€§èƒ½åŸå› ï¼Œå¯èƒ½ä¼šå°†å¤šæ¬¡setStateçš„çŠ¶æ€ä¿®æ”¹åˆå¹¶æˆä¸€æ¬¡çŠ¶æ€ä¿®æ”¹ã€‚æ‰€ä»¥ä¸è¦ä¾èµ–å½“å‰çš„Stateï¼Œè®¡ç®—ä¸‹ä¸ªStateã€‚</span><span class="token keyword">private</span> btnAdd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//Wrong</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ç»“æœstateçš„countä¸º1</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Wrong   å› ä¸ºstateå’Œpropsçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä¿è¯counterä¸­æ‰€è·å–åˆ°çš„stateå’Œpropsæ˜¯æœ€æ–°çš„</span><span class="token keyword">private</span> btnAdd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      counter<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>increment<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//Correct</span> <span class="token keyword">private</span> btnAdd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">:</span>IState<span class="token punctuation">,</span>props<span class="token punctuation">:</span>IProps<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>      count<span class="token punctuation">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">:</span>IState<span class="token punctuation">,</span>props<span class="token punctuation">:</span>IProps<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>      count<span class="token punctuation">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">:</span>IState<span class="token punctuation">,</span>props<span class="token punctuation">:</span>IProps<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>      count<span class="token punctuation">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></code></pre><blockquote><p>stateçš„æ›´æ–°æ—¢å¯èƒ½æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯å¼‚æ­¥çš„ã€‚ å‡†ç¡®åœ°è¯´ï¼Œåœ¨Reactå†…éƒ¨æœºåˆ¶èƒ½æ£€æµ‹åˆ°çš„åœ°æ–¹, setStateå°±æ˜¯å¼‚æ­¥çš„ï¼›åœ¨Reactæ£€æµ‹ä¸åˆ°çš„åœ°æ–¹ï¼Œä¾‹å¦‚setIntervalã€setTimeouté‡Œï¼ŒsetStateå°±æ˜¯åŒæ­¥æ›´æ–°çš„ã€‚</p></blockquote><h4 id="c-è·å–æ›´æ–°ä¹‹åçš„stateæ•°æ®"><a href="#c-è·å–æ›´æ–°ä¹‹åçš„stateæ•°æ®" class="headerlink" title="c) è·å–æ›´æ–°ä¹‹åçš„stateæ•°æ®"></a>c) è·å–æ›´æ–°ä¹‹åçš„stateæ•°æ®</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>    <span class="token punctuation">{</span> data<span class="token punctuation">:</span> newData <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//è¿™é‡Œæ‰“å°çš„æ˜¯æœ€æ–°çš„stateå€¼</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="d-setStateåˆå¹¶"><a href="#d-setStateåˆå¹¶" class="headerlink" title="d) setStateåˆå¹¶"></a>d) setStateåˆå¹¶</h4><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//setStateä¼šæŠŠå½“å‰çš„å€¼åˆå¹¶åˆ°åŸæ¥çš„stateä¸­</span><span class="token comment" spellcheck="true">//åªè¦è°ƒç”¨ä¸€æ¬¡setStateå°±ä¼šè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“ï¼Œä¸ç®¡è¿™ä¸ªstateåœ¨é¡µé¢æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä¹Ÿä¸ç®¡è¿™ä¸ªstateæœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–</span><span class="token comment" spellcheck="true">//ä¸ºä»€ä¹ˆsetStateä¼šè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“å‘¢ï¼Ÿ  å› ä¸ºsetStateå†…å®¹ä¼šè§¦å‘batchingUpdateæ–¹æ³•æ¥è§¦å‘ç»„ä»¶æ›´æ–°</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    name<span class="token punctuation">:</span><span class="token string">"ç‹å°è™"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 id="e-setStateçš„å®ç°è¿‡ç¨‹"><a href="#e-setStateçš„å®ç°è¿‡ç¨‹" class="headerlink" title="e) setStateçš„å®ç°è¿‡ç¨‹"></a>e) setStateçš„å®ç°è¿‡ç¨‹</h4><p><img src="https://i.loli.net/2020/11/09/mCiq6G274oUYIAr.png" alt="3941614716-5b13d6d716035_articlex.png"></p><h2 id="3-2-ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶"><a href="#3-2-ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶" class="headerlink" title="3.2 ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶"></a>3.2 ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶</h2><h3 id="3-2-1-åŸºæœ¬ä½¿ç”¨"><a href="#3-2-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.2.1 åŸºæœ¬ä½¿ç”¨"></a>3.2.1 åŸºæœ¬ä½¿ç”¨</h3><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span> æ–°å»ºHello<span class="token punctuation">.</span>tsxï¼Œå¹¶å¯¼å‡ºç»„ä»¶<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> MouseEvent<span class="token punctuation">,</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>  gender<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> Hello<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// å¦‚æœ åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ return ä¸€ä¸ª nullã€‚åˆ™è¡¨ç¤ºæ­¤ç»„ä»¶æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“</span>  <span class="token comment" spellcheck="true">// return null</span>  <span class="token comment" spellcheck="true">// åœ¨ç»„ä»¶ä¸­ï¼Œå¿…é¡» è¿”å›ä¸€ä¸ª åˆæ³•çš„ JSX è™šæ‹ŸDOMå…ƒç´ </span>  <span class="token comment" spellcheck="true">// props.name = 'zs'</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// ç»“è®ºï¼šä¸è®ºæ˜¯ Vue è¿˜æ˜¯ Reactï¼Œç»„ä»¶ä¸­çš„ props æ°¸è¿œéƒ½æ˜¯åªè¯»çš„ï¼›ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼›</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>è¿™æ˜¯ Hello ç»„ä»¶ <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>gender<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span>#<span class="token number">2</span><span class="token punctuation">.</span>å¯¼å…¥Hello<span class="token punctuation">.</span>jsx  <span class="token comment" spellcheck="true">// 1. å¯¼å…¥åŒ…</span>  <span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>  <span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>  <span class="token comment" spellcheck="true">// æ³¨æ„ï¼š è¿™é‡Œçš„ @ ç¬¦å·ï¼Œè¡¨ç¤º é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ src è¿™ä¸€å±‚ç›®å½•</span>  <span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">'@/components/Hello.jsx'</span>  <span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'å¤§é»„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>    gender<span class="token punctuation">:</span> <span class="token string">'é›„'</span>  <span class="token punctuation">}</span>  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token number">123</span>    <span class="token operator">&lt;</span>Hello <span class="token punctuation">{</span><span class="token operator">...</span>dog<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Hello<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="3-2-2-å‡½æ•°ç»„ä»¶ä¸­çš„state"><a href="#3-2-2-å‡½æ•°ç»„ä»¶ä¸­çš„state" class="headerlink" title="3.2.2 å‡½æ•°ç»„ä»¶ä¸­çš„state"></a>3.2.2 å‡½æ•°ç»„ä»¶ä¸­çš„state</h3><blockquote><p>React 16.7.0å¼€å§‹æ¨è¡ŒHookï¼Œåˆ° React 16.8.0 Hook ç¨³å®šï¼ŒHookså¼€å§‹è¢«æ¨å¹¿ä½¿ç”¨ï¼Œå®ƒè§£å†³äº†ä¼ ç»Ÿä½¿ç”¨ç”Ÿå‘½å‘¨æœŸè€Œå¯¼è‡´çš„ç›¸å…³ä»£ç é€»è¾‘åˆ†ç¦»(ä¾‹å¦‚åˆ›å»ºè®¢é˜…åŠå–æ¶ˆè®¢é˜…)ã€ä¸ç›¸å…³ä»£ç é€»è¾‘æ··åˆåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­(ä½¿ç”¨å¤šä¸ªEffect)ã€classä¸­å¤æ‚çš„thisæŒ‡å‘ã€classä¸èƒ½è¢«å¾ˆå¥½çš„å‹ç¼©ã€classå¯èƒ½å¯¼è‡´çƒ­é‡è½½ä¸ç¨³å®š</p></blockquote><blockquote><p>Hookä¸ºå¼€å‘è€…æä¾›äº†å¯ä»¥ä½¿ç”¨functionåˆ›å»ºå¾®stateï¼Œä¸”ä¸€ä¸ªstateç”±ä¸€ä¸ªå¯¹åº”çš„å‡½æ•°ç®¡ç†ï¼Œè¿˜æä¾›äº†ä¸“é—¨å¤„ç†å‰¯ä½œç”¨ã€å®ç°reduxã€æ€§èƒ½ä¼˜åŒ–ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”100%å‘åå…¼å®¹ï¼Œä¸ªäººè®¤ä¸ºHookæ˜¯reactæœªæ¥å‘å±•çš„è¶‹åŠ¿ï¼Œä½†å¹¶ä¸æ„å‘³ç€æ‘’å¼ƒclassï¼Œreactä¹Ÿæ²¡æœ‰ç§»é™¤classçš„è®¡åˆ’ã€‚</p></blockquote><p><code>useState</code> å°±æ˜¯ä¸€ä¸ª <em>Hook</em> ï¼Œé€šè¿‡åœ¨å‡½æ•°ç»„ä»¶é‡Œè°ƒç”¨å®ƒæ¥ç»™ç»„ä»¶æ·»åŠ ä¸€äº›å†…éƒ¨ stateã€‚React ä¼šåœ¨é‡å¤æ¸²æŸ“æ—¶ä¿ç•™è¿™ä¸ª stateã€‚</p><p><code>useState</code> ä¼šè¿”å›ä¸€å¯¹å€¼ï¼š<strong>å½“å‰</strong>çŠ¶æ€å’Œä¸€ä¸ªè®©ä½ æ›´æ–°å®ƒçš„å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å®ƒç±»ä¼¼ class ç»„ä»¶çš„ <code>this.setState</code>ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ state å’Œæ—§çš„ state è¿›è¡Œåˆå¹¶ã€‚</p><blockquote><ol><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œåœ¨å‡½æ•°é€€å‡ºåå˜é‡å°±ä¼šâ€æ¶ˆå¤±â€ï¼Œä½†æ˜¯ state ä¸­çš„å˜é‡ä¼šè¢« React ä¿ç•™ã€‚</p></li><li><p>å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨setCountå‡½æ•°æ—¶ï¼ŒReactä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ï¼Œå¹¶æŠŠæ›´æ–°çš„countå€¼ä¼ ç»™è¿™ä¸ªç»„ä»¶ã€‚(å…¶å®æ˜¯æ¯æ¬¡ Render éƒ½æœ‰è‡ªå·±çš„ Props ä¸ State)</p><p><a href="https://segmentfault.com/a/1190000018639033#item-2-5">https://segmentfault.com/a/1190000018639033#item-2-5</a></p></li><li><p>useState()æ¥å—ä¸€ä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸ºå®šä¹‰dataçš„å€¼ï¼Œç¬¬äºŒä¸ªä¸ºæ›´æ–°dataçš„æ–¹æ³•ï¼Œä»–ä»¬æ€»æ˜¯æˆå¯¹å‡ºç°çš„</p></li></ol></blockquote><h3 id="3-2-3-state-hookåŸºæœ¬ä½¿ç”¨"><a href="#3-2-3-state-hookåŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.2.3  state hookåŸºæœ¬ä½¿ç”¨"></a>3.2.3  state hookåŸºæœ¬ä½¿ç”¨</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Demo1<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//countä»£è¡¨stateçš„å˜é‡</span>  <span class="token comment" spellcheck="true">//setCountæ˜¯ä¸€ä¸ªfunctionï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹countå˜é‡ï¼Œéœ€è¦é€šè¿‡setCountæ¥ä¿®æ”¹</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count2<span class="token punctuation">,</span> setCount2<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count3<span class="token punctuation">,</span> setCount3<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token punctuation">{</span>count<span class="token punctuation">}</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>ç‚¹æˆ‘ä¿®æ”¹count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>    <span class="token punctuation">{</span>count2<span class="token punctuation">}</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setCount2</span><span class="token punctuation">(</span><span class="token operator">++</span>count2<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>ç‚¹æˆ‘ä¿®æ”¹count2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>    <span class="token punctuation">{</span>count3<span class="token punctuation">}</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setCount3</span><span class="token punctuation">(</span><span class="token operator">++</span>count3<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>ç‚¹æˆ‘ä¿®æ”¹count3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Demo1<span class="token punctuation">;</span></code></pre><h3 id="3-2-4-useStateä½¿ç”¨æ³¨æ„ç‚¹"><a href="#3-2-4-useStateä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="3.2.4 useStateä½¿ç”¨æ³¨æ„ç‚¹"></a>3.2.4 useStateä½¿ç”¨æ³¨æ„ç‚¹</h3><h4 id="a-useStateæ˜¯å¼‚æ­¥çš„"><a href="#a-useStateæ˜¯å¼‚æ­¥çš„" class="headerlink" title="a) useStateæ˜¯å¼‚æ­¥çš„"></a>a) <code>useState</code>æ˜¯å¼‚æ­¥çš„</h4><p>ä¿®æ”¹stateä¹‹åæ— æ³•æ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€ï¼Œè¦ç­‰åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å‘¨æœŸæ‰§è¡Œæ—¶ï¼ŒçŠ¶æ€æ‰æ˜¯æœ€æ–°çš„</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> Demo1<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>people<span class="token punctuation">,</span> setPeople<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> string<span class="token punctuation">,</span> age<span class="token punctuation">:</span> number <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> handleUpdate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setPeople</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>people<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'ç‹äº”'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>people<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼ ä¸‰</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token punctuation">{</span>people<span class="token punctuation">.</span>name<span class="token punctuation">}</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleUpdate<span class="token punctuation">}</span><span class="token operator">></span> ä¿®æ”¹name<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Demo1<span class="token punctuation">;</span></code></pre><p>ä½†æ˜¯åœ¨stateä¸å½±å“DOMçš„å‰æä¸‹ï¼Œä½ æ˜¯å¯ä»¥åŒæ­¥ä½¿ç”¨å®ƒ</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Demo1<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>people<span class="token punctuation">,</span> setPeople<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> string<span class="token punctuation">,</span> age<span class="token punctuation">:</span> number <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> handleUpdate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setPeople</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>people<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'ç‹äº”'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    people<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"ç‹äº”"</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>people<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç‹äº”</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token punctuation">{</span>people<span class="token punctuation">.</span>name<span class="token punctuation">}</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleUpdate<span class="token punctuation">}</span><span class="token operator">></span> ä¿®æ”¹name<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Demo1<span class="token punctuation">;</span></code></pre><h4 id="b-useStateä¸­çš„æ•°æ®åŠ¡å¿…æ˜¯immutableæ•°æ®"><a href="#b-useStateä¸­çš„æ•°æ®åŠ¡å¿…æ˜¯immutableæ•°æ®" class="headerlink" title="b) useStateä¸­çš„æ•°æ®åŠ¡å¿…æ˜¯immutableæ•°æ®"></a>b) <code>useState</code>ä¸­çš„æ•°æ®åŠ¡å¿…æ˜¯<code>immutable</code>æ•°æ®</h4><p>è‹¥ä¸¤æ¬¡ä¼ å…¥åŒä¸€å¯¹è±¡åˆ™ä¸ä¼šè§¦å‘ç»„ä»¶æ›´æ–°ï¼Œå¦‚ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Demo1<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>list<span class="token punctuation">,</span> setList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">></span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> idx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">String</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* sort ä¸ç”Ÿæˆå‰¯æœ¬ï¼Œç›´æ¥è¿”å›åŸæ•°ç»„ */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setList</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>sort<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* slice è¿”å›ä¸€ä¸ªæ–°çš„å‰¯æœ¬æ•°ç»„ */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setList</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>slice<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Demo1<span class="token punctuation">;</span></code></pre><p>ç‚¹å‡»sortæŒ‰é’®åå¹¶ä¸ä¼šå‡ºå‘æ›´æ–°ï¼</p><ul><li><code>useState</code>å¯¹åº”çš„ setStateå¯¹stateåœ°æ”¹å˜ç”Ÿæ•ˆï¼Œæ— è®ºDOMæ˜¯å¦ä½¿ç”¨äº†<code>state</code>ï¼Œè¯¥ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼›</li></ul><h4 id="c-useState-æ˜¯å°†æ–°å€¼ç›´æ¥è¦†ç›–æ‰æ—§å€¼ï¼Œè€Œä¸æ˜¯åˆå¹¶"><a href="#c-useState-æ˜¯å°†æ–°å€¼ç›´æ¥è¦†ç›–æ‰æ—§å€¼ï¼Œè€Œä¸æ˜¯åˆå¹¶" class="headerlink" title="c) useState æ˜¯å°†æ–°å€¼ç›´æ¥è¦†ç›–æ‰æ—§å€¼ï¼Œè€Œä¸æ˜¯åˆå¹¶"></a>c) useState æ˜¯å°†æ–°å€¼ç›´æ¥è¦†ç›–æ‰æ—§å€¼ï¼Œè€Œä¸æ˜¯åˆå¹¶</h4><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token punctuation">[</span>temp<span class="token punctuation">,</span>setTemp<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">setTemp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// temp = {a: 2}</span></code></pre><h2 id="3-3-ä¸¤ç§åˆ›å»ºç»„ä»¶æ–¹å¼çš„å¯¹æ¯”"><a href="#3-3-ä¸¤ç§åˆ›å»ºç»„ä»¶æ–¹å¼çš„å¯¹æ¯”" class="headerlink" title="3.3 ä¸¤ç§åˆ›å»ºç»„ä»¶æ–¹å¼çš„å¯¹æ¯”"></a>3.3 ä¸¤ç§åˆ›å»ºç»„ä»¶æ–¹å¼çš„å¯¹æ¯”</h2><ol><li>ç”¨<strong>æ„é€ å‡½æ•°</strong>åˆ›å»ºå‡ºæ¥çš„ç»„ä»¶ï¼šå«åšâ€œæ— çŠ¶æ€ç»„ä»¶â€ï¼Œåªæœ‰propsï¼Œæ²¡æœ‰è‡ªå·±çš„ç§æœ‰æ•°æ®å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°</li><li>ç”¨<strong>classå…³é”®å­—</strong>åˆ›å»ºå‡ºæ¥çš„ç»„ä»¶ï¼šå«åšâ€œæœ‰çŠ¶æ€ç»„ä»¶â€ï¼Œæœ‰ç§æœ‰æ•°æ®å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°</li><li>æ— çŠ¶æ€ç»„ä»¶çš„æœ¬è´¨åªæ˜¯ä¸€ä¸ªrenderå‡½æ•°ï¼Œå…¶æ²¡æœ‰å®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œæ•…è€Œä¹Ÿæ— æ³•è®¿é—®ç»„ä»¶å¯¹è±¡</li></ol><blockquote><p>æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ä¹‹é—´çš„<strong>æœ¬è´¨åŒºåˆ«</strong>å°±æ˜¯ï¼šæœ‰æ— stateå±æ€§ï¼æ— çŠ¶æ€ç»„ä»¶ç”±äºæ²¡æœ‰ç§æœ‰æ•°æ®å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¿è¡Œæ•ˆç‡ä¼šæ¯”æœ‰çŠ¶æ€ç»„ä»¶é«˜ä¸€äº›ã€‚</p><p>åœ¨react hooksä¸­ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡useStateè¿™ä¸ªhookç»™å‡½æ•°ç»„ä»¶æ·»åŠ çŠ¶æ€</p></blockquote><h2 id="3-4-æ¡ä»¶æ¸²æŸ“"><a href="#3-4-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.4 æ¡ä»¶æ¸²æŸ“"></a>3.4 æ¡ä»¶æ¸²æŸ“</h2><h3 id="3-4-1-é€šè¿‡ifæ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“"><a href="#3-4-1-é€šè¿‡ifæ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.4.1 é€šè¿‡ifæ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“"></a>3.4.1 é€šè¿‡ifæ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“</h3><p><a href="https://blog.csdn.net/crystalqy/article/details/79066347">https://blog.csdn.net/crystalqy/article/details/79066347</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Gretting.jsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  isLoggedIn<span class="token operator">?</span><span class="token punctuation">:</span>boolean<span class="token punctuation">}</span><span class="token keyword">const</span> Gretting<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> props<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>å·²ç™»å½•<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>æœªç™»å½•<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Gretting<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>Gretting isLoggedIn<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Gretting<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="3-4-2-é€šè¿‡ä¸‰å…ƒè¿ç®—ç¬¦æ¡ä»¶æ¸²æŸ“"><a href="#3-4-2-é€šè¿‡ä¸‰å…ƒè¿ç®—ç¬¦æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.4.2 é€šè¿‡ä¸‰å…ƒè¿ç®—ç¬¦æ¡ä»¶æ¸²æŸ“"></a>3.4.2 é€šè¿‡ä¸‰å…ƒè¿ç®—ç¬¦æ¡ä»¶æ¸²æŸ“</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  isLoggedIn<span class="token operator">?</span><span class="token punctuation">:</span>boolean<span class="token punctuation">}</span><span class="token keyword">const</span> Gretting<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> props<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">return</span> isLoggedIn<span class="token operator">?</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>å·²ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>æœªç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Gretting<span class="token punctuation">;</span></code></pre><h3 id="3-4-3-é˜»æ­¢ç»„ä»¶æ¸²æŸ“"><a href="#3-4-3-é˜»æ­¢ç»„ä»¶æ¸²æŸ“" class="headerlink" title="3.4.3 é˜»æ­¢ç»„ä»¶æ¸²æŸ“"></a>3.4.3 é˜»æ­¢ç»„ä»¶æ¸²æŸ“</h3><p>åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›èƒ½éšè—ç»„ä»¶ï¼Œå³ä½¿å®ƒå·²ç»è¢«å…¶ä»–ç»„ä»¶æ¸²æŸ“ã€‚è‹¥è¦å®Œæˆæ­¤æ“ä½œï¼Œä½ å¯ä»¥è®© <code>render</code> æ–¹æ³•ç›´æ¥è¿”å› <code>null</code>ï¼Œè€Œä¸è¿›è¡Œä»»ä½•æ¸²æŸ“ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  isLoggedIn<span class="token operator">?</span><span class="token punctuation">:</span>boolean<span class="token punctuation">}</span><span class="token keyword">const</span> Gretting<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> props<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>å·²ç™»å½•<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Gretting<span class="token punctuation">;</span></code></pre><h3 id="3-4-4-é€šè¿‡-amp-amp-è¿›è¡Œæ¡ä»¶æ¸²æŸ“"><a href="#3-4-4-é€šè¿‡-amp-amp-è¿›è¡Œæ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.4.4 é€šè¿‡&amp;&amp;è¿›è¡Œæ¡ä»¶æ¸²æŸ“"></a>3.4.4 é€šè¿‡&amp;&amp;è¿›è¡Œæ¡ä»¶æ¸²æŸ“</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Mailbox.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  unreadMessages<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//è§£æ„èµ‹å€¼  å¦‚æœæ²¡æœ‰ç»™unreadMessagesæŒ‡å®šå€¼çš„æ—¶å€™ï¼Œé»˜è®¤ç”¨[]</span><span class="token keyword">const</span> Mailbox<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>unreadMessages<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token punctuation">{</span>unreadMessages<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>        <span class="token operator">&lt;</span>h2<span class="token operator">></span>          You have <span class="token punctuation">{</span>unreadMessages<span class="token punctuation">.</span>length<span class="token punctuation">}</span> unread messages<span class="token punctuation">.</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>      <span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Mailbox<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span><span class="token keyword">const</span> messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'React'</span><span class="token punctuation">,</span> <span class="token string">'Re: React'</span><span class="token punctuation">,</span> <span class="token string">'Re:Re: React'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>Mailbox unreadMessages<span class="token operator">=</span><span class="token punctuation">{</span>messages<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Mailbox<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="3-5-åˆ—è¡¨æ¸²æŸ“"><a href="#3-5-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="3.5 åˆ—è¡¨æ¸²æŸ“"></a>3.5 åˆ—è¡¨æ¸²æŸ“</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//NumberList.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  numbers<span class="token operator">?</span><span class="token punctuation">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//key å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œæ¯”å¦‚è¢«æ·»åŠ æˆ–åˆ é™¤ã€‚å› æ­¤ä½ åº”å½“ç»™æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ªç¡®å®šçš„æ ‡è¯†ã€‚</span><span class="token comment" spellcheck="true">//ä¸€ä¸ªå…ƒç´ çš„ key æœ€å¥½æ˜¯è¿™ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­æ‹¥æœ‰çš„ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­—ç¬¦ä¸²ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥è‡ªæ•°æ® id æ¥ä½œä¸ºå…ƒç´ çš„ keyã€‚keyåœ¨å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´å¿…é¡»å”¯ä¸€</span><span class="token comment" spellcheck="true">//å½“å…ƒç´ æ²¡æœ‰ç¡®å®š id çš„æ—¶å€™ï¼Œä¸‡ä¸å¾—å·²ä½ å¯ä»¥ä½¿ç”¨å…ƒç´ ç´¢å¼• index ä½œä¸º keyï¼š</span><span class="token keyword">const</span> NumberList<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>numbers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> listItems <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>    <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token punctuation">{</span>number<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> NumberList<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>NumberList numbers<span class="token operator">=</span><span class="token punctuation">{</span>numbers<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>NumberList<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="3-6-Fragmentçš„ä½¿ç”¨"><a href="#3-6-Fragmentçš„ä½¿ç”¨" class="headerlink" title="3.6 Fragmentçš„ä½¿ç”¨"></a>3.6 Fragmentçš„ä½¿ç”¨</h2><p>æœ‰æ—¶ï¼Œè¯­ä¹‰åŒ–çš„ HTML ä¼šè¢«ç ´åã€‚æ¯”å¦‚å½“åœ¨ JSX ä¸­ä½¿ç”¨ <code>&lt;div&gt;</code> å…ƒç´ æ¥å®ç° React ä»£ç åŠŸèƒ½çš„æ—¶å€™ï¼Œåˆæˆ–æ˜¯åœ¨ä½¿ç”¨åˆ—è¡¨ï¼ˆ<code>&lt;ol&gt;</code>ï¼Œ <code>&lt;ul&gt;</code> å’Œ <code>&lt;dl&gt;</code>ï¼‰å’Œ HTML <code>&lt;table&gt;</code> æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <a href="https://react.docschina.org/docs/fragments.html">React Fragments</a> æ¥ç»„åˆå„ä¸ªç»„ä»¶ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//ListItem.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token comment" spellcheck="true">//è¿™è¾¹æŠŠ?å»æ‰ï¼Œè¡¨ç¤ºçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å½“å‰ç»„ä»¶çš„æ—¶å€™itemå¿…ä¼ </span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  item<span class="token punctuation">:</span> <span class="token punctuation">{</span> term<span class="token punctuation">:</span> string<span class="token punctuation">,</span> description<span class="token punctuation">:</span> string <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> ListItem<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> item <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>      <span class="token operator">&lt;</span>dt<span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>term<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>dt<span class="token operator">></span>      <span class="token operator">&lt;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>dd<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> ListItem<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span><span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    term<span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>    description<span class="token punctuation">:</span> <span class="token string">"æè¿°1"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    term<span class="token punctuation">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>    description<span class="token punctuation">:</span> <span class="token string">"æè¿°2"</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>dl<span class="token operator">></span>    <span class="token punctuation">{</span>      items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>ListItem item<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>term<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>dl<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="3-7-Reactç»„åˆ"><a href="#3-7-Reactç»„åˆ" class="headerlink" title="3.7 Reactç»„åˆ"></a>3.7 Reactç»„åˆ</h2><p>reactç»„åˆç±»ä¼¼äºVueä¸­çš„slot(æ’æ§½)ï¼Œå­ç»„ä»¶çš„å†…å®¹ç”±çˆ¶ç»„ä»¶æ¥æŒ‡å®š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//FancyBorder.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  color<span class="token operator">?</span><span class="token punctuation">:</span>string<span class="token punctuation">}</span><span class="token keyword">const</span> FancyBorder<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span>props<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/*å­ç»„ä»¶ï¼šå å‘*/</span><span class="token punctuation">}</span>      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> FancyBorder<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>FancyBorder color<span class="token operator">=</span><span class="token string">"blue"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>å­©å„¿ä»¬<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>FancyBorder<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä¸€ä¸ªç»„ä»¶ä¸­é¢„ç•™å‡ºå‡ ä¸ªâ€œæ´â€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨ childrenï¼Œè€Œæ˜¯è‡ªè¡Œçº¦å®šï¼šå°†æ‰€éœ€å†…å®¹ä¼ å…¥ propsï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ propã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//SplitPane.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> MouseEvent<span class="token punctuation">,</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  left<span class="token operator">?</span><span class="token punctuation">:</span>JSX<span class="token punctuation">.</span>Element<span class="token punctuation">,</span>  right<span class="token operator">?</span><span class="token punctuation">:</span>JSX<span class="token punctuation">.</span>Element<span class="token punctuation">}</span><span class="token keyword">const</span> SplitPane<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"SplitPane"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"SplitPane-left"</span><span class="token operator">></span>        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>left<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"SplitPane-right"</span><span class="token operator">></span>        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>right<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> SplitPane<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>SplitPane    left<span class="token operator">=</span><span class="token punctuation">{</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>å·¦è¾¹<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">}</span>    right<span class="token operator">=</span><span class="token punctuation">{</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>å³è¾¹<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h1 id="4-è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹"><a href="#4-è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹" class="headerlink" title="4. è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹"></a>4. è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹</h1><h2 id="4-1-å¯ç”¨sass"><a href="#4-1-å¯ç”¨sass" class="headerlink" title="4.1 å¯ç”¨sass"></a>4.1 å¯ç”¨sass</h2><p><a href="mailto:react-scripts@2.0.0">react-scripts@2.0.0</a> ä»¥ä¸Šç‰ˆæœ¬æ‰é€‚ç”¨ã€‚</p><p>react-scriptsä¸»è¦è®¾è®¡åŸç†æ˜¯å°†é…ç½®å¥½çš„å¦‚ <code>Webpackï¼ŒBabelï¼ŒESLint</code> ï¼Œåˆå¹¶åˆ° <code>react-scripts</code> è¿™npmåŒ…ä¸­ï¼Œç”¨æˆ·å°±å¯ä»¥å¼€ç®±å³ç”¨ã€‚å¾ˆå¤šå¼€å‘è€…éƒ½åœ¨è¿™åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ å¼€å‘ã€‚æ³¨æ„ <code>react-scripts</code> å°±æ˜¯create-react-appè„šæ‰‹æ¶çš„æ ¸å¿ƒé…ç½®ä»£ç ã€‚</p><h3 id="4-1-1-å®‰è£…ä¾èµ–"><a href="#4-1-1-å®‰è£…ä¾èµ–" class="headerlink" title="4.1.1 å®‰è£…ä¾èµ–"></a>4.1.1 å®‰è£…ä¾èµ–</h3><p>è¦ä½¿ç”¨Sasså¿…é¡»é¦–å…ˆå®‰è£…   <code>node-sass</code></p><pre class=" language-sc"><code class="language-sc">$ npm install node-sass --save$ # or$ yarn add node-sass//é…ç½®node-sassçš„äºŒè¿›åˆ¶åŒ…npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/</code></pre><p>å®‰è£…å®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­å¼•å…¥scssæ–‡ä»¶äº†ã€‚</p><h3 id="4-1-2-åœ¨sassæ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–sassæ–‡ä»¶"><a href="#4-1-2-åœ¨sassæ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–sassæ–‡ä»¶" class="headerlink" title="4.1.2 åœ¨sassæ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–sassæ–‡ä»¶"></a>4.1.2 åœ¨sassæ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–sassæ–‡ä»¶</h3><pre class=" language-js"><code class="language-js">@<span class="token keyword">import</span> <span class="token string">'styles/colors.scss'</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//è¿™è¾¹è·¯å¾„ä»¥å½“å‰æ–‡ä»¶è·¯å¾„ä¸ºå‚ç…§</span></code></pre><h2 id="4-2-æ¡ˆä¾‹å®Œæˆ"><a href="#4-2-æ¡ˆä¾‹å®Œæˆ" class="headerlink" title="4.2 æ¡ˆä¾‹å®Œæˆ"></a>4.2 æ¡ˆä¾‹å®Œæˆ</h2><p>æ€è·¯ï¼šçˆ¶ç»„ä»¶ä¸­å¥—äº†è‹¥å¹²ä¸ªè¯„è®ºItemå­ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸¤ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼šCmtListå’ŒCmtItem</p><h3 id="4-2-1-CmtList-tsx"><a href="#4-2-1-CmtList-tsx" class="headerlink" title="4.2.1 CmtList.tsx"></a>4.2.1 CmtList.tsx</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> CmtItem <span class="token keyword">from</span> <span class="token string">"./CmtItem"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"./CmtList.scss"</span><span class="token punctuation">;</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> CmtList<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>commentList<span class="token punctuation">,</span> SetCommentList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ²™å‘'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'æå››'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ¿å‡³'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'ç‹äº”'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œå‡‰å¸­'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'èµµå…­'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œç –å¤´'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'ç”°ä¸ƒ'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ¥¼ä¸‹å±±ç‚®'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* æ ·å¼çš„ç¬¬ä¸€ç§å†™æ³•ï¼šç›´æ¥ç”¨è¡Œå†…æ ·å¼ */</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* &lt;h1 style={{ color: 'red', fontSize: '35px', zIndex: 3, fontWeight: 200, textAlign: 'center' }}>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶&lt;/h1> */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token punctuation">{</span>commentList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>CmtItem <span class="token punctuation">{</span><span class="token operator">...</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>CmtItem<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> CmtList<span class="token punctuation">;</span></code></pre><h3 id="4-2-2-CmtList-scss"><a href="#4-2-2-CmtList-scss" class="headerlink" title="4.2.2 CmtList.scss"></a>4.2.2 CmtList.scss</h3><pre class=" language-css"><code class="language-css"><span class="token selector">h1</span><span class="token punctuation">{</span>  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token number">35</span>px<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="4-2-3-CmtItem-tsx"><a href="#4-2-3-CmtItem-tsx" class="headerlink" title="4.2.3 CmtItem.tsx"></a>4.2.3 CmtItem.tsx</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token string">'./CmtItem.scss'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  user<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">,</span>  content<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token keyword">const</span> CmtItem<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯„è®ºäººï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯„è®ºå†…å®¹ï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> CmtItem<span class="token punctuation">;</span></code></pre><h3 id="4-2-4-CmtItem-scss"><a href="#4-2-4-CmtItem-scss" class="headerlink" title="4.2.4 CmtItem.scss"></a>4.2.4 CmtItem.scss</h3><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.item</span></span><span class="token punctuation">{</span>  <span class="token selector">border: 1px dashed <span class="token id">#ccc</span>;  margin: 10px;  padding: 10px;  box-shadow: 0 0 10px <span class="token id">#ccc</span>;  <span class="token class">.user</span></span><span class="token punctuation">{</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token selector"><span class="token class">.content</span></span><span class="token punctuation">{</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">12</span>px<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="4-2-5-é—®é¢˜"><a href="#4-2-5-é—®é¢˜" class="headerlink" title="4.2.5 é—®é¢˜"></a>4.2.5 é—®é¢˜</h3><p>å½“æˆ‘ä»¬åœ¨CmtList.cssä¸­æŒ‡å®šäº†h1æ ‡ç­¾çš„æ ·å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°  <code>import "./CmtList.scss";'</code> ä¹‹åï¼ŒCmtListå’ŒCmtItemä¸­çš„h1æ ‡ç­¾éƒ½å˜æˆäº†å€¾æ–œï¼Œè¯´æ˜CmtListä¸­çš„æ ·å¼å…¨å±€ç”Ÿæ•ˆäº†ã€‚åŸå› åœ¨äºwebpackè¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ä¼šå°†æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ‰€ä»¥æ‰“åŒ…åçš„æ ·å¼ä¼šå…¨å±€ç”Ÿæ•ˆã€‚</p><h2 id="4-3-ä½¿ç”¨CSSæ¨¡å—åŒ–"><a href="#4-3-ä½¿ç”¨CSSæ¨¡å—åŒ–" class="headerlink" title="4.3 ä½¿ç”¨CSSæ¨¡å—åŒ–"></a>4.3 ä½¿ç”¨CSSæ¨¡å—åŒ–</h2><p>åœ¨craè„šæ‰‹æ¶ä¸­ï¼Œå¦‚æœæŸä¸ªæ ·å¼æ–‡ä»¶è¦å¼€å¯æ¨¡å—åŒ–ï¼Œåªéœ€è¦æŠŠæ ·å¼æ–‡ä»¶å‘½åä¸ºxx.module.css/xx.module.scsså°±å¯ä»¥äº†</p><h3 id="4-3-1-CmtList-module-scss"><a href="#4-3-1-CmtList-module-scss" class="headerlink" title="4.3.1 CmtList.module.scss"></a>4.3.1 CmtList.module.scss</h3><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* css æ¨¡å—åŒ–åªé’ˆå¯¹ç±»é€‰æ‹©å™¨ å’Œ Idé€‰æ‹©å™¨ç”Ÿæ•ˆï¼Œ ä¸ä¼šå¯¹æ ‡ç­¾é€‰æ‹©å™¨æ¨¡å—åŒ– */</span><span class="token selector">h1</span><span class="token punctuation">{</span>  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token number">35</span>px<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* æ³¨æ„ï¼š è¢« :local() åŒ…è£¹èµ·æ¥çš„ç±»åä¼šè¢«æ¨¡å—åŒ–ï¼› é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„ç±»å’Œidé€‰æ‹©å™¨éƒ½ä¼šè¢«æ¨¡å—åŒ–äº†ï¼› */</span><span class="token selector"><span class="token class">.title</span></span><span class="token punctuation">{</span>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">800</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* æ³¨æ„ï¼šè¢« :global() åŒ…è£¹èµ·æ¥çš„ç±»åï¼Œä¸ä¼šè¢«æ¨¡å—åŒ–ï¼Œè€Œæ˜¯ä¼šå…¨å±€ç”Ÿæ•ˆï¼› */</span> <span class="token selector"><span class="token pseudo-class">:global(.test)</span></span><span class="token punctuation">{</span>  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="4-3-2-CmtList-tsx"><a href="#4-3-2-CmtList-tsx" class="headerlink" title="4.3.2 CmtList.tsx"></a>4.3.2 CmtList.tsx</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> cssObj <span class="token keyword">from</span>  <span class="token string">'./CmtList.module.scss'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cssObj<span class="token punctuation">)</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>cssObj<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre><h3 id="4-3-3-æ€»ç»“"><a href="#4-3-3-æ€»ç»“" class="headerlink" title="4.3.3 æ€»ç»“"></a>4.3.3 æ€»ç»“</h3><ol><li>ä½¿ç”¨ <code>:local()</code> å’Œ <code>:global()</code><ul><li><code>:local()</code>åŒ…è£¹çš„ç±»åï¼Œæ˜¯è¢«æ¨¡å—åŒ–çš„ç±»åï¼Œåªèƒ½é€šè¿‡<code>className={cssObj.ç±»å}</code>æ¥ä½¿ç”¨ã€‚<code>:local</code>å¯ä»¥çœç•¥</li><li><code>:global()</code>åŒ…è£¹çš„ç±»åï¼Œæ˜¯å…¨å±€ç”Ÿæ•ˆçš„ï¼Œä¸ä¼šè¢« <code>css-modules</code> æ§åˆ¶ï¼Œå®šä¹‰çš„ç±»åæ˜¯ä»€ä¹ˆï¼Œå°±æ˜¯ä½¿ç”¨å®šä¹‰çš„ç±»å<code>className="ç±»å"</code></li></ul></li><li>æ³¨æ„ï¼šåªæœ‰<code>.title</code>è¿™æ ·çš„ç±»æ ·å¼æˆ–è€…idé€‰æ‹©å™¨ï¼Œæ‰ä¼šè¢«æ¨¡å—åŒ–æ§åˆ¶ï¼Œç±»ä¼¼äº<code>body</code>è¿™æ ·çš„æ ‡ç­¾é€‰æ‹©å™¨ï¼Œä¸ä¼šè¢«æ¨¡å—åŒ–æ§åˆ¶ï¼›</li></ol><h1 id="5-React-äº‹ä»¶å¤„ç†"><a href="#5-React-äº‹ä»¶å¤„ç†" class="headerlink" title="5. React äº‹ä»¶å¤„ç†"></a>5. React äº‹ä»¶å¤„ç†</h1><p><a href="https://reactjs.org/docs/events.html">https://reactjs.org/docs/events.html</a></p><h2 id="5-1-å‡½æ•°ç»„ä»¶çš„äº‹ä»¶ç»‘å®š"><a href="#5-1-å‡½æ•°ç»„ä»¶çš„äº‹ä»¶ç»‘å®š" class="headerlink" title="5.1 å‡½æ•°ç»„ä»¶çš„äº‹ä»¶ç»‘å®š"></a>5.1 å‡½æ•°ç»„ä»¶çš„äº‹ä»¶ç»‘å®š</h2><ol><li><p>äº‹ä»¶çš„åç§°éƒ½æ˜¯Reactçš„æä¾›çš„ï¼Œå› æ­¤åç§°çš„é¦–å­—æ¯å¿…é¡»å¤§å†™<code>onClick</code>ã€<code>onMouseOver</code></p></li><li><p>ä¸ºäº‹ä»¶æä¾›çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»æ˜¯å¦‚ä¸‹æ ¼å¼ </p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token keyword">function</span> <span class="token punctuation">}</span><span class="token operator">></span>æŒ‰é’®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre></li><li><p>äº‹ä»¶ç»‘å®šæ–¹å¼ï¼š</p><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token keyword">const</span> App<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"showæ–¹æ³•"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> show2 <span class="token operator">=</span> <span class="token punctuation">(</span>msg<span class="token punctuation">:</span>string<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"show2æ–¹æ³•"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>show<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>æŒ‰é’®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token string">"å‚æ•°"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>æŒ‰é’®<span class="token number">2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre></li></ol><h2 id="5-2-ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼"><a href="#5-2-ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼" class="headerlink" title="5.2 ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼"></a>5.2 ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼</h2><ol><li><p>åœ¨Vueä¸­æä¾›äº†<code>v-model</code>æŒ‡ä»¤ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç° <code>æ•°æ®çš„åŒå‘ç»‘å®š</code>ï¼›</p></li><li><p>ä½†æ˜¯åœ¨Reactä¸­åªæ˜¯<code>å•å‘æ•°æ®æµ</code>ï¼Œä¹Ÿå°±æ˜¯åªèƒ½æŠŠstateä¸Šçš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ï¼Œæ— æ³•æŠŠé¡µé¢ä¸­æ•°æ®çš„å˜åŒ–è‡ªåŠ¨åŒæ­¥å› state ï¼› å¦‚æœéœ€è¦æŠŠé¡µé¢ä¸Šæ•°æ®çš„å˜åŒ–ä¿å­˜åˆ° stateï¼Œåˆ™éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç›‘å¬<code>onChange</code>äº‹ä»¶ï¼Œæ‹¿åˆ°æœ€æ–°çš„æ•°æ®ï¼Œæ‰‹åŠ¨è°ƒç”¨<code>this.setState({  })</code> æ›´æ”¹å›å»ã€‚ è¿™ç§æ–¹å¼å«å—æ§ç»„ä»¶</p></li></ol><h3 id="5-2-1-è¡¨å•å—æ§ç»„ä»¶"><a href="#5-2-1-è¡¨å•å—æ§ç»„ä»¶" class="headerlink" title="5.2.1 è¡¨å•å—æ§ç»„ä»¶"></a>5.2.1 è¡¨å•å—æ§ç»„ä»¶</h3><p>åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ ï¼ˆå¦‚<code>&lt;input&gt;</code>ã€ <code>&lt;textarea&gt;</code> å’Œ <code>&lt;select&gt;</code>ï¼‰ä¹‹ç±»çš„è¡¨å•å…ƒç´ é€šå¸¸è‡ªå·±ç»´æŠ¤ stateï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€ï¼ˆmutable stateï¼‰é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨ <a href="https://zh-hans.reactjs.org/docs/react-component.html#setstate"><code>setState()</code></a>æ¥æ›´æ–°ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> App<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"é»˜è®¤æ•°æ®"</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> inputChange <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>inputChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre><h3 id="5-2-2-è¡¨å•éå—æ§ç»„ä»¶"><a href="#5-2-2-è¡¨å•éå—æ§ç»„ä»¶" class="headerlink" title="5.2.2 è¡¨å•éå—æ§ç»„ä»¶"></a>5.2.2 è¡¨å•éå—æ§ç»„ä»¶</h3><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ <a href="https://zh-hans.reactjs.org/docs/forms.html#controlled-components">å—æ§ç»„ä»¶</a> æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨ä¸€ä¸ªå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œè¿™æ—¶è¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> App<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//å¼•ç”¨é¡µé¢å…ƒç´ </span>  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inputRef<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"ç‚¹æˆ‘"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre><p>å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚</p><h3 id="5-2-3-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"><a href="#5-2-3-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶" class="headerlink" title="5.2.3 å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"></a>5.2.3 å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</h3><p>â€œå—æ§â€å’Œâ€œä¸å—æ§åˆ¶â€çš„æœ¯è¯­é€šå¸¸æŒ‡çš„æ˜¯è¡¨å•è¾“å…¥ï¼Œä½†ä»–ä»¬è¿˜å¯ä»¥æè¿°ä»»ä½•ç»„ä»¶æ•°æ®çš„ä½ç½®ã€‚ä½œä¸ºpropsä¼ é€’è¿›ç»„ä»¶çš„æ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯<strong>å—æ§çš„</strong>ï¼ˆå› ä¸ºçˆ¶ç»„ä»¶æ§åˆ¶æ•°æ®ï¼‰ã€‚åªå­˜åœ¨äºå†…éƒ¨çŠ¶æ€çš„æ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯<strong>ä¸å—æ§åˆ¶çš„</strong>ï¼ˆå› ä¸ºçˆ¶ç±»ä¸èƒ½ç›´æ¥æ›´æ”¹å®ƒï¼‰ã€‚</p><h2 id="5-3-Reactçˆ¶å­ç»„ä»¶çš„é€šä¿¡"><a href="#5-3-Reactçˆ¶å­ç»„ä»¶çš„é€šä¿¡" class="headerlink" title="5.3 Reactçˆ¶å­ç»„ä»¶çš„é€šä¿¡"></a>5.3 Reactçˆ¶å­ç»„ä»¶çš„é€šä¿¡</h2><h3 id="5-3-1-çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶"><a href="#5-3-1-çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶" class="headerlink" title="5.3.1 çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶"></a>5.3.1 çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//çˆ¶ç»„ä»¶</span><span class="token operator">&lt;</span>CMTItem key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>CMTItem<span class="token operator">></span><span class="token comment" spellcheck="true">//å­ç»„ä»¶é€šè¿‡propså¯ä»¥è·å–åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®</span></code></pre><h3 id="5-3-2-å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶"><a href="#5-3-2-å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶" class="headerlink" title="5.3.2 å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶"></a>5.3.2 å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//çˆ¶ç»„ä»¶</span> <span class="token operator">&lt;</span>CMTBox reload<span class="token operator">=</span><span class="token punctuation">{</span>loadCmts<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>CMTBox<span class="token operator">></span><span class="token comment" spellcheck="true">//å­ç»„ä»¶é€šè¿‡props.reload() æ¥è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œè°ƒç”¨çš„æ—¶å€™å¯ä»¥ä¼ é€’å‚æ•°</span></code></pre><h3 id="5-3-3-è¯„è®ºåˆ—è¡¨å‘è¡¨è¯„è®º"><a href="#5-3-3-è¯„è®ºåˆ—è¡¨å‘è¡¨è¯„è®º" class="headerlink" title="5.3.3 è¯„è®ºåˆ—è¡¨å‘è¡¨è¯„è®º"></a>5.3.3 è¯„è®ºåˆ—è¡¨å‘è¡¨è¯„è®º</h3><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span>CmtList<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> CmtItem <span class="token keyword">from</span> <span class="token string">"./CmtItem"</span><span class="token punctuation">;</span><span class="token keyword">import</span> CmtBox <span class="token keyword">from</span> <span class="token string">"./CmtBox"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// import "./CmtList.scss";</span><span class="token keyword">import</span> cssObj <span class="token keyword">from</span> <span class="token string">'./CmtList.module.scss'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cssObj<span class="token punctuation">)</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> CmtList<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>commentList<span class="token punctuation">,</span> SetCommentList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ²™å‘'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'æå››'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ¿å‡³'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'ç‹äº”'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œå‡‰å¸­'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'èµµå…­'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œç –å¤´'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token string">'ç”°ä¸ƒ'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'å“ˆå“ˆï¼Œæ¥¼ä¸‹å±±ç‚®'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> reload <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">:</span><span class="token punctuation">{</span>id<span class="token punctuation">:</span>number<span class="token punctuation">,</span>user<span class="token punctuation">:</span>string<span class="token punctuation">,</span>content<span class="token punctuation">:</span>string<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">SetCommentList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>commentList<span class="token punctuation">,</span> obj<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* æ ·å¼çš„ç¬¬ä¸€ç§å†™æ³•ï¼šç›´æ¥ç”¨è¡Œå†…æ ·å¼ */</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* &lt;h1 style={{ color: 'red', fontSize: '35px', zIndex: 3, fontWeight: 200, textAlign: 'center' }}>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶&lt;/h1> */</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token punctuation">{</span>commentList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>CmtItem <span class="token punctuation">{</span><span class="token operator">...</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>CmtItem<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>CmtBox reload<span class="token operator">=</span><span class="token punctuation">{</span>reload<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>CmtBox<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> CmtList<span class="token punctuation">;</span>#<span class="token number">2</span><span class="token punctuation">.</span>CmtItem<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token string">'./CmtItem.scss'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">CmtItem</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"user"</span><span class="token operator">></span>è¯„è®ºäººï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>è¯„è®ºå†…å®¹ï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>#<span class="token number">3</span><span class="token punctuation">.</span>CmtBox<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token string">'./CmtItem.scss'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span>  reload<span class="token operator">?</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> Object<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> CmtBox<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>content<span class="token punctuation">,</span> setContent<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//æ“ä½œçš„æ˜¯å“ªä¸ªæ–‡æœ¬æ¡†å°±å»ä¿®æ”¹å“ªä¸ªæ–‡æœ¬æ¡†çš„æ•°æ®</span>  <span class="token keyword">const</span> changeHandler <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> tag <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>id<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">==</span> <span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">setUser</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token function">setContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>value<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> postComment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">&amp;&amp;</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>      props<span class="token punctuation">.</span>reload <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        user<span class="token punctuation">,</span>        content<span class="token punctuation">,</span>        id<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">"user"</span><span class="token operator">></span>ç”¨æˆ·å<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>    <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"user"</span> type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeHandler<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span>    <span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>å†…å®¹<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>    <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"content"</span> type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeHandler<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"å‘è¡¨è¯„è®º"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">postComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> CmtBox<span class="token punctuation">;</span></code></pre><h2 id="5-4-Ref-Hook"><a href="#5-4-Ref-Hook" class="headerlink" title="5.4 Ref Hook"></a>5.4 Ref Hook</h2><blockquote><p>â€œrefâ€å¯¹è±¡æ˜¯ä¸€ä¸ªé€šç”¨å®¹å™¨ï¼Œå…¶currentå±æ€§æ˜¯å¯å˜çš„ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚</p></blockquote><h3 id="5-4-1-ä¿å­˜dom"><a href="#5-4-1-ä¿å­˜dom" class="headerlink" title="5.4.1 ä¿å­˜dom"></a>5.4.1 ä¿å­˜dom</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">,</span> RefObject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Test<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>Props<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> t<span class="token punctuation">:</span>RefObject<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span> <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ç›¸å½“äºcomponentDidMount ã€componentDidUpdate</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// div</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>t<span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">...</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Test<span class="token punctuation">;</span></code></pre><h3 id="5-4-2-forwardRef"><a href="#5-4-2-forwardRef" class="headerlink" title="5.4.2 forwardRef"></a>5.4.2 forwardRef</h3><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// father</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./Son'</span><span class="token punctuation">;</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Father<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> refContainer <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTMLInputElement</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> changeInput <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      refContainer<span class="token punctuation">.</span>current<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>refContainer<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">'å•Šï¼Œæˆ‘è¢«æ”¹äº†!'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>changeInput<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>changeInput<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>refContainer<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Son</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Father<span class="token punctuation">;</span></code></pre><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// Son</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">const</span> Son <span class="token operator">=</span> React<span class="token punctuation">.</span>forwardRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTMLInputElement</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> Son<span class="token punctuation">;</span></code></pre><h3 id="5-4-3-useImperativeHandle"><a href="#5-4-3-useImperativeHandle" class="headerlink" title="5.4.3 useImperativeHandle"></a>5.4.3 useImperativeHandle</h3><blockquote><p><code>useImperativeHandle</code> å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ <code>ref</code> æ—¶ç»™çˆ¶ç»„ä»¶æš´éœ²çš„æŒ‡å®šçš„å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚<code>useImperativeHandle</code> åº”å½“ä¸ <code>forwardRef</code> ä¸€èµ·ä½¿ç”¨</p></blockquote><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//father</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> RefObject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./Son'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> InputRefProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./type"</span><span class="token punctuation">;</span>type Props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Father<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Props</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> refContainer <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputRefProps</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> changeInput <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    refContainer<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> refContainer<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> talk <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    refContainer<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> refContainer<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>changeInput<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>changeInput<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>talk<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>talk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>refContainer<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Son</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Father<span class="token punctuation">;</span></code></pre><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">// Son</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span>useRef<span class="token punctuation">,</span>useImperativeHandle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> InputRefProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./type"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Son <span class="token operator">=</span> React<span class="token punctuation">.</span>forwardRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputRefProps</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//æ–°å»ºä¸€ä¸ªref  å°†æ­¤refç»‘å®šåœ¨æœ¬ç»„å»ºå†…çš„inputä¸Š</span>  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTMLInputElement</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//å°† ä½¿å¾—æœ¬ç»„ä»¶inputè·å–ç„¦ç‚¹çš„æ–¹æ³•èµ‹ç»™çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„refä¸Š </span>  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>      focus<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        inputRef<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      talk<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello, world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> Son<span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//type.d.ts</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">InputRefProps</span> <span class="token punctuation">{</span>  <span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token function">talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="5-4-4-ä¿å­˜äº‹ä»¶-å˜é‡"><a href="#5-4-4-ä¿å­˜äº‹ä»¶-å˜é‡" class="headerlink" title="5.4.4 ä¿å­˜äº‹ä»¶/å˜é‡"></a>5.4.4 ä¿å­˜äº‹ä»¶/å˜é‡</h3><p>åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå› ä¸ºæ¯æ¬¡re-renderå°±æ„å‘³ç€å‡½æ•°é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œå› æ­¤åœ¨å‡½æ•°å†…éƒ¨ä¿æŒå˜é‡å¼•ç”¨æ˜¯ä¸€ä»¶æˆ‘ä»¬éœ€è¦æ€è€ƒçš„äº‹æƒ…(å¦‚æœæ™®é€šå˜é‡ï¼Œæ¯æ¬¡re-renderéƒ½ä¼šè¢«é‡æ–°åˆå§‹åŒ–)ã€‚</p><p>åœ¨å‰é¢å­¦ä¹ useStateæ—¶æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨useStateå®šä¹‰å˜é‡ï¼Œå¯ä»¥åšåˆ°è¿™æ ·çš„äº‹æƒ…ã€‚åŒæ ·çš„ï¼Œåˆ©ç”¨refçš„.currentä¹Ÿå¯ä»¥ã€‚</p><p>ä¸€ä¸ªå¾ˆå¸¸è§çš„åº”ç”¨åœºæ™¯å°±æ˜¯å¯¹äºå®šæ—¶å™¨çš„æ¸…é™¤ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿setIntervalçš„æ‰§è¡Œç»“æœtimerçš„å¼•ç”¨ï¼Œæ‰èƒ½å‡†ç¡®çš„æ¸…é™¤å¯¹åº”çš„å®šæ—¶å™¨ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">const</span> Timer<span class="token punctuation">:</span>FC<span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> timerRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>NodeJS<span class="token punctuation">.</span>Timeout<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      timerRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'do something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// ç»„ä»¶å¸è½½æ—¶ï¼Œæ¸…é™¤å®šæ—¶å™¨</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          timerRef<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h3 id="5-4-5-useStateå’ŒuseRefçš„åŒºåˆ«"><a href="#5-4-5-useStateå’ŒuseRefçš„åŒºåˆ«" class="headerlink" title="5.4.5 useStateå’ŒuseRefçš„åŒºåˆ«"></a>5.4.5 useStateå’ŒuseRefçš„åŒºåˆ«</h3><ul><li>æ¯æ¬¡ Render çš„å†…å®¹éƒ½ä¼šå½¢æˆä¸€ä¸ªå¿«ç…§å¹¶ä¿ç•™ä¸‹æ¥ï¼Œå› æ­¤å½“çŠ¶æ€å˜æ›´è€Œ re-render æ—¶ï¼Œå°±å½¢æˆäº† N ä¸ª Render çŠ¶æ€ï¼Œè€Œæ¯ä¸ª Render çŠ¶æ€éƒ½æ‹¥æœ‰è‡ªå·±å›ºå®šä¸å˜çš„ Props ä¸ Stateã€‚(æ¯æ¬¡Renderéƒ½æœ‰è‡ªå·±çš„Propsã€Stateã€äº‹ä»¶å¤„ç†ã€effectï¼Œè¿™å°±æ˜¯<strong>Capture Value</strong> ç‰¹æ€§)</li><li>åˆ©ç”¨ <code>useRef</code> å°±å¯ä»¥ç»•è¿‡ Capture Value çš„ç‰¹æ€§ã€‚<strong>å¯ä»¥è®¤ä¸º ref åœ¨æ‰€æœ‰ Render è¿‡ç¨‹ä¸­ä¿æŒç€å”¯ä¸€å¼•ç”¨ï¼Œå› æ­¤æ‰€æœ‰å¯¹ ref çš„èµ‹å€¼æˆ–å–å€¼ï¼Œæ‹¿åˆ°çš„éƒ½åªæœ‰ä¸€ä¸ªæœ€ç»ˆçŠ¶æ€</strong></li><li>ä¹Ÿå¯ä»¥ç®€æ´çš„è®¤ä¸ºï¼Œ<code>ref</code> æ˜¯ Mutable çš„ï¼Œè€Œ <code>state</code> æ˜¯ Immutable çš„ã€‚</li></ul><h1 id="6-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#6-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6. ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>6. ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="6-1-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä»‹ç»"><a href="#6-1-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä»‹ç»" class="headerlink" title="6.1 ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä»‹ç»"></a>6.1 ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä»‹ç»</h2><ul><li><p>ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼šæ¯ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œä»åˆ›å»ºã€è¿è¡Œã€åˆ°é”€æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå‡ºå‘ä¸€äº›åˆ—äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±å«åšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼›</p></li><li><p>Reactç»„ä»¶ç”Ÿå‘½å‘¨æœŸ(React 16.4+)åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p><ul><li><strong>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</strong>ï¼š</li></ul><blockquote><p>static å¼€å¤´çš„     åªä¼šæ‰§è¡Œä¸€æ¬¡</p><p>constructor    æ„é€ å™¨     åªä¼šæ‰§è¡Œä¸€æ¬¡</p><p>getDerivedStateFromProps: æ¯æ¬¡re-renderingä¹‹å‰è¢«è°ƒç”¨ï¼Œä½œç”¨ï¼šå°†ä¼ é€’çš„propsæ˜ å°„åˆ°stateé‡Œé¢       ä¼šæ‰§è¡Œå¤šæ¬¡</p><p>render           æ„å»ºè™šæ‹Ÿdomï¼Œä½†æ˜¯æ­¤æ—¶è™šæ‹Ÿdomè¿˜æ²¡æœ‰æ¸²æŸ“åˆ°é¡µé¢        ä¼šæ‰§è¡Œå¤šæ¬¡</p><p>componentDidMount:ç»„å»ºçš„è™šæ‹Ÿdomå·²ç»æŒ‚è½½åˆ°é¡µé¢                      åªä¼šæ‰§è¡Œä¸€æ¬¡</p></blockquote><ul><li><strong>ç»„ä»¶è¿è¡Œé˜¶æ®µ</strong>ï¼šæ ¹æ® props å±æ€§ æˆ– state çŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ0åˆ°å¤šæ¬¡</li></ul><blockquote><p>getDerivedStateFromProps:æ¯æ¬¡re-renderingä¹‹å‰è¢«è°ƒç”¨</p><p>shouldComponentUpdate:ç»„ä»¶æ˜¯å¦éœ€è¦è¢«æ›´æ–°ï¼Œè¿”å›å€¼æ˜¯trueæˆ–è€…falseã€‚æ­¤æ—¶å¯ä»¥è·å–æœ€æ–°çš„propså’Œstateæ•°æ®</p><p>render: é‡æ–°æ›´æ–°æ¸²æŸ“ç»„ä»¶çš„è™šæ‹Ÿdom</p><p>getSnapshotBeforeUpdateï¼šåœ¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“æäº¤åˆ° DOM èŠ‚ç‚¹ä¹‹å‰è°ƒç”¨ã€‚å®ƒçš„å«ä¹‰æ˜¯åœ¨Reactæ›´æ–°Domå…ƒç´ ä¹‹å‰ï¼Œè·å–ä¸€ä¸ªå¿«ç…§ï¼Œå®ƒè¿”å›çš„ç»“æœå°†ä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚ä¸€èˆ¬çš„ç”¨æ³•å°±æ˜¯è·å–æ›´æ–°å‰çš„DOMã€‚</p><p>componentDidUpdate: ç»„ä»¶å®Œæˆäº†æ›´æ–°ï¼Œæ­¤æ—¶é¡µé¢å·²ç»æ˜¯æœ€æ–°çš„äº†</p></blockquote><ul><li><strong>ç»„ä»¶å¸è½½é˜¶æ®µ</strong>ï¼šåªæ‰§è¡Œä¸€æ¬¡</li></ul><blockquote><p>componentWillUnmount: å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜å¯ä»¥è¢«ä½¿ç”¨</p><p><img src="https://i.loli.net/2020/11/09/3fkUDhZFjJo9isp.png" alt="1574654437154.png"></p></blockquote></li></ul><p>Reactç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•°æ€»ç»“æˆè¡¨æ ¼å¦‚ä¸‹ï¼š<br><img src="https://i.loli.net/2020/11/09/Ikbxi25TNhDMEYf.png" alt="1574666830021.png"></p><h2 id="6-2-ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯¦è§£"><a href="#6-2-ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯¦è§£" class="headerlink" title="6.2 ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯¦è§£"></a>6.2 ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯¦è§£</h2><blockquote><p>åœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰ï¼Œä¼šå…ˆåˆå§‹åŒ–é»˜è®¤çš„propså±æ€§ï¼Œè¿™æ˜¯å…¨å±€è°ƒç”¨ä¸€æ¬¡ï¼Œä¸¥æ ¼åœ°æ¥è¯´ï¼Œè¿™ä¸æ˜¯ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚</p></blockquote><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span>Counter<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>type IProps <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span>  initCount<span class="token punctuation">:</span> number<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> msg<span class="token punctuation">:</span> <span class="token string">'å¼ ä¸‰'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>type IState <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token keyword">typeof</span> initialState<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span> IState<span class="token operator">></span> <span class="token punctuation">{</span>  readonly state<span class="token punctuation">:</span> IState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//-------------------------------ç»„ä»¶åˆ›å»ºé˜¶æ®µ----------------------------------------</span>  <span class="token comment" spellcheck="true">//1.åœ¨ç»„ä»¶çš„åˆ›å»ºé˜¶æ®µï¼šç¬¬ä¸€ä¸ªæ‰§è¡Œçš„æ˜¯staticå¼€å¤´çš„å±æ€§</span>  <span class="token comment" spellcheck="true">//è®¾å®špropsçš„é»˜è®¤å€¼ï¼šå½“çˆ¶ç»„ä»¶æ²¡æœ‰ç»™å­ç»„ä»¶ä¼ é€’propsçš„æ—¶å€™å°±ä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼</span>  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>    initCount<span class="token punctuation">:</span> <span class="token number">100</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//2.åœ¨ç»„ä»¶åˆ›å»ºé˜¶æ®µï¼Œç¬¬äºŒä¸ªæ‰§è¡Œçš„æ˜¯æ„é€ å‡½æ•° (åˆ›å»ºä¸€ä¸ªç»„ä»¶å¯¹è±¡æ‰§è¡Œä¸€æ¬¡)</span>  <span class="token comment" spellcheck="true">//æ„é€ å‡½æ•°çš„ä½œç”¨ï¼šä¸»è¦å°±æ˜¯ç”¨æ¥åˆ›å»ºç»„ä»¶å¯¹è±¡</span>  <span class="token comment" spellcheck="true">//æˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜å½“å‰ç»„ä»¶çš„state</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">:</span> IProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//æ„é€ å‡½æ•°ä¸­åªå¯ä»¥ç»™stateèµ‹äºˆåˆå§‹å€¼</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      msg<span class="token punctuation">:</span> <span class="token string">"æå››"</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//æ„é€ å‡½æ•°ä¸­èƒ½å¤Ÿé€šè¿‡setState()æ¥ä¿®æ”¹stateçš„å€¼</span>    <span class="token comment" spellcheck="true">// this.setState({</span>    <span class="token comment" spellcheck="true">//     msg:"æå››"</span>    <span class="token comment" spellcheck="true">// })</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//3.åœ¨ç»„ä»¶çš„åˆ›å»ºé˜¶æ®µï¼Œç¬¬ä¸‰ä¸ªæ‰§è¡Œçš„æ˜¯getDerivedStateFromProps</span>  <span class="token comment" spellcheck="true">//è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼šå°±æ˜¯å°†propsæ˜ å°„åˆ°stateä¸­</span>  <span class="token comment" spellcheck="true">//åœ¨æ¯ä¸€æ¬¡re-renderçš„æ—¶å€™æ‰§è¡Œ</span>  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">:</span> IProps<span class="token punctuation">,</span> prevState<span class="token punctuation">:</span> IState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"getDerivedStateFromProps"</span><span class="token punctuation">,</span> nextProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//4.åœ¨ç»„ä»¶çš„åˆ›å»ºé˜¶æ®µï¼Œç¬¬å››ä¸ªæ‰§è¡Œçš„æ˜¯render()æ–¹æ³•ã€‚(åœ¨ä¸€ä¸ªç»„ä»¶çš„å„ç§ç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸­ï¼Œè‡³å°‘æ‰§è¡Œä¸€æ¬¡)</span>  <span class="token comment" spellcheck="true">//render()æ–¹æ³•çš„ä¸»è¦ä½œç”¨ï¼šåœ¨å†…å­˜ä¸­æ„å»ºè™šæ‹Ÿdom(æ­¤æ—¶è™šæ‹Ÿdomè¿˜æ²¡æœ‰è¢«æŒ‚è½½åˆ°é¡µé¢)</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åœ¨render()å‡½æ•°ä¸­ä¸èƒ½é€šè¿‡setState()æ¥ä¿®æ”¹stateçŠ¶æ€ï¼Œå› ä¸ºè¿™æ ·ä¼šé™·å…¥æ­»å¾ªç¯</span>        <span class="token comment" spellcheck="true">// å…¶å®render()å‡½æ•°åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æœ¬èº«å°±æ˜¯ç»™ä»–ä»€ä¹ˆæ•°æ®ï¼Œä»–å°±æ˜¾ç¤ºä»€ä¹ˆæ•°æ®</span>        <span class="token comment" spellcheck="true">// this.setState({</span>        <span class="token comment" spellcheck="true">//     msg:"ç‹äº”"</span>        <span class="token comment" spellcheck="true">// })</span>      <span class="token punctuation">}</span>      <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>initCount<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>      <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//5.åœ¨ç»„ä»¶çš„åˆ›å»ºé˜¶æ®µï¼Œç¬¬äº”ä¸ªæ‰§è¡Œçš„æ˜¯componentDidMountã€‚(åˆ›å»ºä¸€ä¸ªç»„ä»¶å¯¹è±¡æ‰§è¡Œä¸€æ¬¡)</span>  <span class="token comment" spellcheck="true">//componentDidMountæ‰§è¡Œçš„æ—¶å€™å°±è¡¨ç¤ºå†…å­˜ä¸­çš„è™šæ‹Ÿdomå·²ç»æŒ‚è½½åˆ°é¡µé¢äº†ï¼Œæ­¤æ—¶é¡µé¢æ˜¯æœ€æ–°çš„</span>  <span class="token comment" spellcheck="true">//åªæœ‰componentDidMount()é’©å­å‡½æ•°æ‰å¯ä»¥é€šè¿‡setState()æ¥ä¿®æ”¹state</span>  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//componentDidMount()æ–¹æ³•å…è®¸æˆ‘ä»¬é€šè¿‡setState()æ¥ä¿®æ”¹çŠ¶æ€</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      msg<span class="token punctuation">:</span> <span class="token string">"èµµå…­"</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"componentDidMountæ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//-------------------------------ç»„ä»·çš„è¿è¡Œé˜¶æ®µ-------------------------------</span>  <span class="token comment" spellcheck="true">//å½“å‰ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ä¹‹åï¼Œä¼šè¿›å…¥ç»„ä»¶çš„è¿è¡Œé˜¶æ®µ</span>  <span class="token comment" spellcheck="true">//1.åœ¨ç»„ä»¶è¿è¡Œé˜¶æ®µï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°æ˜¯getDerivedStateFromProps</span>  <span class="token comment" spellcheck="true">// static getDerivedStateFromProps(nextProps: IProps, prevState: IState) {</span>  <span class="token comment" spellcheck="true">//   console.log("getDerivedStateFromProps", nextProps, prevState)</span>  <span class="token comment" spellcheck="true">//   return null;</span>  <span class="token comment" spellcheck="true">// }</span>  <span class="token comment" spellcheck="true">//2.åœ¨ç»„ä»¶çš„è¿è¡Œé˜¶æ®µï¼Œç¬¬äºŒä¸ªæ‰§è¡Œçš„å‡½æ•°æ˜¯shouldComponentUpdateã€‚(åœ¨ç»„ä»¶çš„å„ç§ç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸­ï¼Œæ‰§è¡Œ>=0æ¬¡)</span>  <span class="token comment" spellcheck="true">//ä½œç”¨ï¼šè®©ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶æ˜¯å¦è¦æ›´æ–°ç»„ä»¶</span>  <span class="token comment" spellcheck="true">//å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›falseï¼Œå°±ä¸ä¼šæ›´æ–°ç»„ä»¶(åç»­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±ä¸ä¼šæ‰§è¡Œäº†)ï¼›å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›trueï¼Œå°±ä¼šæ›´æ–°ç»„ä»¶(åç»­çš„ç”Ÿå‘½å‘¨æœŸä¼šæ‰§è¡Œ)</span>  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">:</span> IProps<span class="token punctuation">,</span> nextState<span class="token punctuation">:</span> IState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// shouldComponentUpdate() æ–¹æ³•ä¸­ä¹Ÿä¸èƒ½é€šè¿‡setState()æ¥æ›´æ”¹stateï¼Œæ­¤æ—¶ä»ç„¶ä¼šè¿›å…¥æ­»å¾ªç¯</span>    <span class="token comment" spellcheck="true">// this.setState({</span>    <span class="token comment" spellcheck="true">//     msg:"ç‹äº”"</span>    <span class="token comment" spellcheck="true">// })</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"shouldComponentUpdate"</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//3.åœ¨ç»„ä»¶çš„è¿è¡Œé˜¶æ®µï¼Œç¬¬ä¸‰ä¸ªæ‰§è¡Œçš„å‡½æ•°æ˜¯render()å‡½æ•°</span>  <span class="token comment" spellcheck="true">//render()å‡½æ•°çš„ä½œç”¨ï¼šåœ¨å†…å­˜ä¸­æ„å»ºè™šæ‹Ÿdom(æ­¤æ—¶è™šæ‹Ÿdomè¿˜æ²¡æœ‰è¢«æŒ‚è½½åˆ°é¡µé¢)</span>  <span class="token comment" spellcheck="true">//4.åœ¨ç»„ä»¶çš„è¿è¡Œé˜¶æ®µï¼Œç¬¬å››ä¸ªæ‰§è¡Œçš„å‡½æ•°æ˜¯getSnapshotBeforeUpdateã€‚(åœ¨ç»„ä»¶çš„å„ç§ç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸­ï¼Œæ‰§è¡Œ>=0æ¬¡)</span>  <span class="token comment" spellcheck="true">//ä¸»è¦ä½œç”¨ï¼šè·å–æ›´æ–°é¡µé¢ä¹‹å‰çš„domä¿¡æ¯</span>  <span class="token comment" spellcheck="true">//è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¼šä½œä¸ºcomponentDidUpdate()æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°å…¥å‚  https://react.docschina.org/docs/react-component.html</span>  <span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// getSnapshotBeforeUpdate() æ–¹æ³•ä¸­ä¹Ÿä¸èƒ½é€šè¿‡setState()æ¥æ›´æ”¹stateï¼Œæ­¤æ—¶ä»ç„¶ä¼šè¿›å…¥æ­»å¾ªç¯</span>    <span class="token comment" spellcheck="true">// this.setState({</span>    <span class="token comment" spellcheck="true">//     msg:"ç‹äº”"</span>    <span class="token comment" spellcheck="true">// })</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"getSnapshotBeforeUpdate"</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span> aa<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//5.åœ¨ç»„ä»¶çš„è¿è¡Œé˜¶æ®µï¼Œç¬¬äº”ä¸ªæ‰§è¡Œçš„å‡½æ•°æ˜¯componentDidUpdateã€‚(åœ¨ç»„ä»¶çš„å„ç§ç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸­ï¼Œæ‰§è¡Œ>=0æ¬¡)</span>  <span class="token comment" spellcheck="true">//ä¸»è¦ä½œç”¨ï¼šè™šæ‹Ÿdomå·²ç»æŒ‚è½½åˆ°é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢æ˜¯æœ€æ–°çš„</span>  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">:</span> IProps<span class="token punctuation">,</span> prevState<span class="token punctuation">:</span> IState<span class="token punctuation">,</span> snapshot<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// componentDidUpdate() æ–¹æ³•ä¸­ä¹Ÿä¸èƒ½é€šè¿‡setState()æ¥æ›´æ”¹stateï¼Œæ­¤æ—¶ä»ç„¶ä¼šè¿›å…¥æ­»å¾ªç¯</span>    <span class="token comment" spellcheck="true">// this.setState({</span>    <span class="token comment" spellcheck="true">//     msg: "ç‹äº”"</span>    <span class="token comment" spellcheck="true">// })</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"componentDidUpdate"</span><span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//----------------------------ç»„ä»¶çš„å¸è½½é˜¶æ®µ-----------------------------</span>  <span class="token comment" spellcheck="true">//å¯ä»¥åœ¨componentWillUnmount()æ–¹æ³•ä¸­è¿›è¡Œä¸€äº›èµ„æºçš„é‡Šæ”¾å·¥ä½œã€‚æ¯”å¦‚å…³é—­å®šæ—¶å™¨ã€ç§»é™¤äº‹ä»¶ç›‘å¬ã€‚(å¸è½½ä¸€ä¸ªç»„ä»¶æ‰§è¡Œä¸€æ¬¡)</span>  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"componentWillUnmount"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Counter<span class="token punctuation">;</span>#App<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">'./components4/Counter'</span><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>type IState <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token keyword">typeof</span> initialState<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  readonly state<span class="token punctuation">:</span> IState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">:</span> IState<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        count<span class="token punctuation">:</span> prev<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>      è¿™æ˜¯Appç»„ä»¶      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* &lt;Counter initCount={this.state.count}>&lt;/Counter> */</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>Counter<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Counter<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>æ”¹å˜count<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre><h2 id="6-3-ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å’Œä¼˜åŒ–"><a href="#6-3-ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å’Œä¼˜åŒ–" class="headerlink" title="6.3 ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å’Œä¼˜åŒ–"></a>6.3 ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å’Œä¼˜åŒ–</h2><h3 id="6-3-1-ç±»ç»„ä»¶çš„re-renderçš„æ—¶æœº"><a href="#6-3-1-ç±»ç»„ä»¶çš„re-renderçš„æ—¶æœº" class="headerlink" title="6.3.1 ç±»ç»„ä»¶çš„re-renderçš„æ—¶æœº"></a>6.3.1 ç±»ç»„ä»¶çš„re-renderçš„æ—¶æœº</h3><pre><code>ä»€ä¹ˆæ—¶å€™è§¦å‘ç±»ç»„ä»¶çš„re-renderä¸€ï¼šå½“ç±»ç»„ä»¶ç»§æ‰¿React.Componentçš„æ—¶å€™1.å½“å‰ç»„ä»¶ä¸­è°ƒç”¨äº†setStateä¼šè§¦å‘ç»„ä»¶çš„re-renderï¼Œä¸ç®¡å½“å‰ç»„ä»¶çš„stateæœ‰æ²¡æœ‰å‘ç”Ÿè¿‡å˜åŒ–(åŸç†æ˜¯setStateå†…éƒ¨ä¼šè§¦å‘batchingUpdate)2.å½“çˆ¶ç»„ä»¶re-renderçš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶ä¹Ÿä¼šre-renderï¼Œä¸ç®¡çˆ¶ç»„ä»¶æœ‰æ²¡æœ‰ç»™å­ç»„ä»¶ä¼ é€’è¿‡ä»»ä½•æ•°æ®3.åªè¦ç»„ä»¶re-renderçš„æ—¶å€™ï¼Œæœ‰å…³äºç»„ä»¶è¿è¡Œé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸçš„é’©å­éƒ½ä¼šè¢«è§¦å‘(getDerivedStateFromProps\shouldComponentUpdate\render\getSnapshotBeforeUpdate\componentDidMount\componentDidUpdate)ã€‚äºŒï¼šå½“ç±»ç»„ä»¶ç»§æ‰¿React.PureComponentçš„æ—¶å€™1.å½“å‰ç»„ä»¶è°ƒç”¨äº†setStateä¹‹åï¼Œåªè¦stateæ•°æ®çš„å†…å­˜åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘ç»„ä»¶çš„re-render(ä¸ç®¡stateæ•°æ®åœ¨é¡µé¢æœ‰æ²¡æœ‰ä½¿ç”¨)2.å½“çˆ¶ç»„ä»¶re-renderçš„æ—¶å€™ï¼Œå­ç»„ä»¶ä¸ä¸€å®šå†re-renderï¼Œè€Œæ˜¯è¦çœ‹çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’äº†propså†…å­˜åœ°å€æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–(ä¸ç®¡åœ¨å­ç»„ä»¶ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡çˆ¶ç»„ä»¶ä¼ é€’çš„props)3.åªè¦ç»„ä»¶re-renderçš„æ—¶å€™ï¼Œæœ‰å…³äºç»„ä»¶è¿è¡Œé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸçš„é’©å­éƒ½ä¼šè¢«è§¦å‘</code></pre><p>å½“ç»„ä»¶ç»§æ‰¿React.Componentçš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¿®æ”¹äº†ä¸å­ç»„ä»¶æ— å…³çš„stateï¼Œè€Œå­ç»„ä»¶æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œå‘ç°å­ç»„ä»¶ä¹Ÿä¼šre-renderï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å€ŸåŠ©shouldComponentUpdateé’©å­å‡½æ•°æ¥åšä¼˜åŒ–ã€‚</p><p>æˆ‘ä»¬é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><blockquote><ol><li>ä½¿ç”¨immutableè¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ä¸ç›¸ç­‰çš„æ—¶å€™è°ƒç”¨setStateï¼›</li><li>åœ¨shouldComponentUpdateä¸­åˆ¤æ–­å‰åçš„propså’Œstateï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–ï¼Œåˆ™è¿”å›falseæ¥é˜»æ­¢æ›´æ–°ã€‚</li><li>åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿PureComponentï¼Œåˆ¤æ–­é¡µé¢æ˜¯å¦è¦æ›´æ–°çš„æ—¶å€™è¿›è¡Œæµ…æ¯”è¾ƒ</li></ol></blockquote><h3 id="6-3-2-shouldComponentUpdateä¼˜åŒ–"><a href="#6-3-2-shouldComponentUpdateä¼˜åŒ–" class="headerlink" title="6.3.2 shouldComponentUpdateä¼˜åŒ–"></a>6.3.2 shouldComponentUpdateä¼˜åŒ–</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//ä½œç”¨ï¼šè®©ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶æ˜¯å¦è¦æ›´æ–°ç»„ä»¶</span><span class="token comment" spellcheck="true">//å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›falseï¼Œå°±ä¸ä¼šæ›´æ–°ç»„ä»¶(åç»­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±ä¸ä¼šæ‰§è¡Œäº†)ï¼›å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›trueï¼Œå°±ä¼šæ›´æ–°ç»„ä»¶(åç»­çš„ç”Ÿå‘½å‘¨æœŸä¼šæ‰§è¡Œ)</span><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">:</span> IProps<span class="token punctuation">,</span> nextState<span class="token punctuation">:</span> IState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å½“ä¸‹æ¬¡ä¼ é€’è¿‡æ¥çš„initCountä¸ºå¶æ•°çš„æ—¶å€™ï¼Œä¸æ›´æ–°é¡µé¢ã€‚ä¸ºå¥‡æ•°çš„æ—¶å€™æ›´æ–°é¡µé¢</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>initCount<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="6-3-3-PureComponentä¼˜åŒ–"><a href="#6-3-3-PureComponentä¼˜åŒ–" class="headerlink" title="6.3.3 PureComponentä¼˜åŒ–"></a>6.3.3 PureComponentä¼˜åŒ–</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//ListOfWords.tsx</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>type IProps <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span>  words<span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»§æ‰¿React.Componentçš„æ—¶å€™ï¼Œè§†å›¾æ›´æ–°é€šè¿‡shouldComponentUpdateå®Œæˆ</span><span class="token comment" spellcheck="true">// class ListOfWords extends React.Component&lt;IProps> {</span><span class="token comment" spellcheck="true">// ç»§æ‰¿React.PureComponentçš„æ—¶å€™ï¼Œè§†å›¾æ›´æ–°é€šè¿‡æ•°æ®æºçš„å†…å­˜åœ°å€åˆ¤æ–­å®Œæˆ</span><span class="token keyword">class</span> <span class="token class-name">ListOfWords</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token operator">&lt;</span>IProps<span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// shouldComponentUpdate(nextProps: IProps) {</span>  <span class="token comment" spellcheck="true">//   console.log(nextProps.words,"0000000000000000000000")</span>  <span class="token comment" spellcheck="true">//   return true;</span>  <span class="token comment" spellcheck="true">// }</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"render"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>words<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> ListOfWords<span class="token comment" spellcheck="true">//App.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> ListOfWords <span class="token keyword">from</span> <span class="token string">'./components4/ListOfWords'</span><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> words<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'marklar'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>type IState <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token keyword">typeof</span> initialState<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  readonly state<span class="token punctuation">:</span> IState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å½“ListOfWordsç»„ä»¶ç»§æ‰¿React.PureComponentçš„æ—¶å€™ï¼Œä¸‹é¢çš„ä»£ç ä¸ä¼šè§¦å‘è§†å›¾çš„åˆ·æ–°ï¼Œå› ä¸ºå½“å‰çš„wordsè™½ç„¶ä¿®æ”¹äº†ï¼Œä½†æ€»æ˜¯å¼•ç”¨åŒä¸€å—å†…å­˜</span>    <span class="token comment" spellcheck="true">// this.setState((prev:IState)=>{</span>    <span class="token comment" spellcheck="true">//   prev.words.push("marklar")</span>    <span class="token comment" spellcheck="true">//   return {</span>    <span class="token comment" spellcheck="true">//     words:prev.words</span>    <span class="token comment" spellcheck="true">//   }</span>    <span class="token comment" spellcheck="true">// })</span>    <span class="token comment" spellcheck="true">//ä¸‹é¢ä»£ç ä¼šè§¦å‘ListOfWordsè§†å›¾æ›´æ–°ï¼Œå› ä¸ºæ¯æ¬¡ç‚¹å‡»æŒ‰é’®éƒ½ç»™wordsèµ‹å€¼ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ­¤æ—¶æ–°æ•°ç»„å’ŒåŸæ¥æ•°ç»„çš„å†…å­˜åœ°å€è‚¯å®šä¸ä¸€è‡´ï¼Œä»è€Œç»„ä»¶æ‰å¯èƒ½æ›´æ–°</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">:</span>IState<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      prev<span class="token punctuation">.</span>words<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"marklar"</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        words<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token operator">...</span>prev<span class="token punctuation">.</span>words<span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>      è¿™æ˜¯Appç»„ä»¶      <span class="token operator">&lt;</span>ListOfWords words<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>words<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>ListOfWords<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>æ·»åŠ words<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*1.ç»§æ‰¿Componentæ—¶ï¼Œæ•°æ®æºå‘ç”Ÿå˜åŒ–ä¹‹åï¼Œä¼šé€šè¿‡shouldComponentUpdateçš„è¿”å›å€¼æ¥åˆ¤æ–­é¡µé¢æ˜¯å¦éœ€è¦åˆ·æ–°2.ç»§æ‰¿PureComponentæ—¶ï¼Œæ•°æ®æºå‘ç”Ÿå˜åŒ–ä¹‹åï¼Œé»˜è®¤è¿›è¡Œçš„æ˜¯æµ…æ¯”è¾ƒ(åªä¼šæ¯”è¾ƒæ•°æ®çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€è‡´)ï¼Œä¸èƒ½å†é‡å†™shouldComponentUpdate*/</span></code></pre><h2 id="6-4-getDerivedStateFromPropså­˜åœ¨çš„é—®é¢˜"><a href="#6-4-getDerivedStateFromPropså­˜åœ¨çš„é—®é¢˜" class="headerlink" title="6.4 getDerivedStateFromPropså­˜åœ¨çš„é—®é¢˜"></a>6.4 getDerivedStateFromPropså­˜åœ¨çš„é—®é¢˜</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//getDerivedStateFromProps å‡½æ•°ä¼šåœ¨æ¯æ¬¡re-renderingä¹‹å‰è¢«è°ƒç”¨</span><span class="token comment" spellcheck="true">//ä¸ºä»€ä¹ˆè¦ç”¨getDerivedStateFromPropsï¼Ÿç­”æ¡ˆï¼šç»„ä»¶æ¥æ”¶çš„propsæ•°æ®æ˜¯åªè¯»çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å°†ä¼ é€’çš„propsæ˜ å°„åˆ°stateé‡Œé¢ï¼Œå®ç°ä¿®æ”¹(ä¼šæœ‰è¯¸å¤šé—®é¢˜)</span><span class="token comment" spellcheck="true">//æ³¨æ„ç‚¹ï¼šè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ–¹æ³•ä¸­æ²¡æœ‰thisï¼Œæ•…è€Œä¸å¯ä»¥ç›´æ¥é€šè¿‡this.setState()æ¥æ”¹å˜çŠ¶æ€ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡returnæ¥æ”¹å˜çŠ¶æ€</span><span class="token comment" spellcheck="true">//å‚æ•°ï¼š</span><span class="token comment" spellcheck="true">//1.nextPropså¤–éƒ¨ä¼ é€’è¿‡æ¥çš„propså±æ€§</span><span class="token comment" spellcheck="true">//2.prevStateä¹‹å‰çš„stateçŠ¶æ€</span><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"getDerivedStateFromProps"</span><span class="token punctuation">,</span> nextProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//è·å–åˆ°çˆ¶ç»„ä»¶ä¸­ä¼ é€’è¿‡æ¥çš„initcountå€¼</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> initcount <span class="token punctuation">}</span> <span class="token operator">=</span> nextProps<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å½“çˆ¶ç»„ä»¶ä¸­ä¼ é€’è¿‡æ¥çš„initcountå‘ç”Ÿæ”¹å˜äº†</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>initcount <span class="token operator">!=</span> prevState<span class="token punctuation">.</span>prevCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//åœ¨æ–¹æ³•ä¸­è¿”å›{count:initcount} æ›¿æ¢æ‰å½“å‰stateä¸­çš„ countå€¼</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>            count<span class="token punctuation">:</span> initcount<span class="token punctuation">,</span>            prevCount<span class="token punctuation">:</span>initcount        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//å¦‚æœpropsä¼ å…¥çš„å†…å®¹ä¸éœ€è¦å½±å“åˆ°ä½ çš„stateï¼Œé‚£ä¹ˆå°±éœ€è¦è¿”å›ä¸€ä¸ªnull</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é—®é¢˜ï¼š</span><span class="token number">1</span><span class="token punctuation">.</span>å½“å‰ç»„ä»¶çš„çŠ¶æ€ç”±å¤šä¸ªæºæ§åˆ¶ï¼Œçˆ¶ç»„ä»¶ä¸­æ§åˆ¶åˆ—è¡¨æ•°æ®ï¼Œå­ç»„ä»¶ä¸­åˆæ§åˆ¶äº†typeè¿™ä¸ªstateã€‚å› æ­¤çˆ¶ç»„ä»¶stateæ”¹æ‰ä¹‹åï¼Œä¼šè§¦å‘å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼›æœ¬èº«ç»„ä»¶stateæ”¹æ‰ä¹‹åï¼Œä¼šè§¦å‘å½“å‰ç»„ä»¶é‡æ–°æ¸²æŸ“<span class="token number">2</span><span class="token punctuation">.</span>å¦‚æœä½ çš„ç»„ä»¶å†…éƒ¨æ—¢éœ€è¦ä¿®æ”¹è‡ªå·±çš„typeï¼Œåˆéœ€è¦æ¥æ”¶ä»å¤–éƒ¨ä¿®æ”¹çš„typeã€‚é€»è¾‘éå¸¸æ··ä¹±ï¼getDerivedStateFromPropsä¸­ä½ æ ¹æœ¬ä¸çŸ¥é“è¯¥åšä»€ä¹ˆã€‚<span class="token keyword">if</span> <span class="token punctuation">(</span>initcount <span class="token operator">!=</span> prevState<span class="token punctuation">.</span>prevCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åœ¨æ–¹æ³•ä¸­è¿”å›{count:initcount} æ›¿æ¢æ‰å½“å‰stateä¸­çš„ countå€¼</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>        count<span class="token punctuation">:</span> initcount<span class="token punctuation">,</span>        prevCount<span class="token punctuation">:</span>initcount    <span class="token punctuation">}</span><span class="token punctuation">}</span>å¦‚æœå½»åº•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ<span class="token function">ç­”æ¡ˆï¼šå¥½å¥½ç»„ç»‡ä½ çš„ç»„ä»¶ï¼Œåœ¨éå¿…é¡»çš„æ—¶å€™ï¼Œæ‘’å¼ƒè¿™ç§å†™æ³•</span><span class="token punctuation">(</span>æ´¾ç”Ÿå±æ€§<span class="token punctuation">)</span>ã€‚typeè¦ä¹ˆç”±propsé©±åŠ¨ï¼Œè¦ä¹ˆå®Œå…¨ç”±stateé©±åŠ¨ã€‚ä»è¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ›´æ–°æ¥çœ‹ï¼Œreactæ›´å¸Œæœ›å°†å—æ§çš„propså’Œstateè¿›è¡Œåˆ†ç¦»ï¼Œå°±å¦‚åŒReduxä½œè€…Dan Abramovåœ¨reduxæ–‡æ¡£å½“ä¸­å†™çš„ä¸€æ ·Presentational and Container Componentsï¼Œå°†æ‰€æœ‰çš„ç»„ä»¶åˆ†ç¦»ç§°ä¸ºå±•ç¤ºå‹ç»„ä»¶å’Œå®¹å™¨å‹ç»„ä»¶ï¼Œä¸€ä¸ªåªè´Ÿè´£æ¥æ”¶propsæ¥æ”¹å˜è‡ªå·±çš„æ ·å¼ï¼Œä¸€ä¸ªè´Ÿè´£ä¿æŒå…¶æ•´ä¸ªæ¨¡å—çš„stateã€‚è¿™æ ·å¯ä»¥è®©ä»£ç æ›´åŠ æ¸…æ™°ã€‚ä½†æ˜¯åœ¨å®é™…çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å¾ˆéš¾åšåˆ°è¿™ä¸€ç‚¹ï¼Œè€Œä¸”è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´å®¹å™¨å‹ç»„ä»¶å˜å¾—éå¸¸åºå¤§ä»¥è‡´éš¾ä»¥ç®¡ç†ï¼Œå¦‚ä½•è¿›è¡Œå–èˆè¿˜æ˜¯éœ€è¦æ ¹æ®å®é™…åœºæ™¯å†³å®šçš„</code></pre><h2 id="6-5-Reactè€ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ"><a href="#6-5-Reactè€ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.5 Reactè€ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ"></a>6.5 Reactè€ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="https://i.loli.net/2020/11/09/Sm2VnMoJpdkhTYC.png" alt="3284159097-5bbb08d17db33_articlex-1584956954768.png"></p><h1 id="7-å‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#7-å‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="7.å‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>7.å‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="7-1-useEffectä»‹ç»"><a href="#7-1-useEffectä»‹ç»" class="headerlink" title="7.1 useEffectä»‹ç»"></a>7.1 useEffectä»‹ç»</h2><p><code>useEffect</code> å°±æ˜¯ä¸€ä¸ª Effect Hookï¼Œç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚</p><p>åœ¨è°ƒç”¨è¿™ä¸ªhookæ—¶ï¼Œå°±æ˜¯å‘Šè¯‰Reactåœ¨å®Œæˆå¯¹DOMçš„æ›´æ”¹åè¿è¡Œè¿™ä¸ªhookï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥è®¿é—®åˆ°stateå’Œpropsã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">-</span> çº¯å‡½æ•°ï¼šå¦‚æœå‡½æ•°çš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›ç›¸åŒçš„ç»“æœã€‚å®ƒä¸ä¾èµ–äºç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œå¿…é¡»åªä¾èµ–äºå…¶è¾“å…¥å‚æ•°ã€‚    <span class="token keyword">function</span> <span class="token function">priceAfterTax</span><span class="token punctuation">(</span>productPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">return</span> <span class="token punctuation">(</span>productPrice <span class="token operator">*</span> <span class="token number">0.20</span><span class="token punctuation">)</span> <span class="token operator">+</span> productPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token operator">-</span> å‰¯ä½œç”¨ï¼šä¸€ä¸ªå¯ä»¥è¢«è§‚å¯Ÿçš„å‰¯ä½œç”¨æ˜¯åœ¨å‡½æ•°å†…éƒ¨ä¸å…¶å¤–éƒ¨çš„ä»»æ„äº¤äº’ã€‚è¿™å¯èƒ½æ˜¯åœ¨å‡½æ•°å†…ä¿®æ”¹å¤–éƒ¨çš„å˜é‡ï¼Œæˆ–è€…åœ¨å‡½æ•°é‡Œè°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ç­‰ã€‚    <span class="token keyword">var</span> tax <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">calculateTax</span><span class="token punctuation">(</span>productPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>        tax <span class="token operator">=</span> tax<span class="token operator">/</span><span class="token number">100</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>productPrice <span class="token operator">*</span> tax<span class="token punctuation">)</span> <span class="token operator">+</span> productPrice<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="7-2-useEffectç”¨æ³•"><a href="#7-2-useEffectç”¨æ³•" class="headerlink" title="7.2 useEffectç”¨æ³•"></a>7.2 useEffectç”¨æ³•</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1  componentDidMountæ‰§è¡Œä¸€æ¬¡ï¼Œä¾èµ–é¡¹æ¯æ¬¡æ”¹å˜æ—¶æ‰§è¡Œä¸€æ¬¡</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å‰¯ä½œç”¨åŠ¨ä½œ</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>ä¾èµ–é¡¹<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//2  ç›¸å½“äºcomponentDidMount</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å‰¯ä½œç”¨åŠ¨ä½œ</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//3  ç›¸å½“äºcomponentDidMount ã€componentDidUpdate</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å‰¯ä½œç”¨åŠ¨ä½œ</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="7-3-useEffectä½¿ç”¨"><a href="#7-3-useEffectä½¿ç”¨" class="headerlink" title="7.3 useEffectä½¿ç”¨"></a>7.3 useEffectä½¿ç”¨</h2><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>type IProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">const</span> Demo2<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IProps</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//countä»£è¡¨stateçš„å˜é‡</span>  <span class="token comment" spellcheck="true">//setCountæ˜¯ä¸€ä¸ªfunctionï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹countå˜é‡ï¼Œéœ€è¦é€šè¿‡setCountæ¥ä¿®æ”¹</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count2<span class="token punctuation">,</span> setCount2<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//useEffectå‡½æ•°å¯ä»¥æ¥æ¨¡æ‹Ÿclassç»„ä»¶çš„ä¸­æŒ‡å®šç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•° componentDidMountï¼ŒcomponentDidUpdateï¼ŒcomponentWillUnmount</span>  <span class="token comment" spellcheck="true">//ç›¸å½“äºcomponentDidMount ã€componentDidUpdate</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"xxxxxxxxxxx"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//ç›¸å½“äºcomponentDidMount</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"yyyyyyyyy"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//ç›¸å½“äºcomponentDidMount å’Œ å½“count2çš„å€¼è¢«æ”¹å˜ä¹‹åæ‰§è¡Œå½“å‰çš„useEffect</span>  <span class="token comment" spellcheck="true">//å…¶ä»–å€¼æ”¹å˜ä¸ä¼šæ‰§è¡Œè¿™ä¸ªuseEffect</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"zzzzzzzzzzzzz"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count2<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    countçš„å€¼æ˜¯ï¼š<span class="token punctuation">{</span>count<span class="token punctuation">}</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>ç‚¹æˆ‘ä¿®æ”¹count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>    count2çš„å€¼æ˜¯<span class="token punctuation">:</span><span class="token punctuation">{</span>count2<span class="token punctuation">}</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token function">setCount2</span><span class="token punctuation">(</span><span class="token operator">++</span>count2<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>ç‚¹æˆ‘ä¿®æ”¹count2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Demo2<span class="token punctuation">;</span></code></pre><h2 id="7-4-æ¸…é™¤å‰¯ä½œç”¨"><a href="#7-4-æ¸…é™¤å‰¯ä½œç”¨" class="headerlink" title="7.4 æ¸…é™¤å‰¯ä½œç”¨"></a>7.4 æ¸…é™¤å‰¯ä½œç”¨</h2><h3 id="a-æ— éœ€æ¸…ç†çš„å‰¯ä½œç”¨"><a href="#a-æ— éœ€æ¸…ç†çš„å‰¯ä½œç”¨" class="headerlink" title="a) æ— éœ€æ¸…ç†çš„å‰¯ä½œç”¨"></a>a) æ— éœ€æ¸…ç†çš„å‰¯ä½œç”¨</h3><blockquote><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³<strong>åœ¨ React æ›´æ–° DOM ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚</strong>æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ DOMï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p></blockquote><p>éœ€æ±‚ï¼šç›‘å¬urlçš„å˜åŒ–æ¥å‘é€ç½‘ç»œè¯·æ±‚ï¼Œä¿å­˜è¿”å›ç»“æœ</p><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> ajax <span class="token keyword">from</span> <span class="token string">'@utils/ajax'</span>type IProps <span class="token operator">=</span> <span class="token punctuation">{</span>  location<span class="token punctuation">:</span>string<span class="token punctuation">}</span><span class="token keyword">const</span> Example<span class="token punctuation">:</span> FC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IProps</span><span class="token punctuation">></span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">.</span>location<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> getData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token function">setData</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Example<span class="token punctuation">;</span></code></pre><p>å½“locationå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseEffectä¸­å‡½æ•°å°±ä¼šè‡ªåŠ¨æ‰§è¡Œ</p><h3 id="b-éœ€è¦æ¸…ç†çš„å‰¯ä½œç”¨"><a href="#b-éœ€è¦æ¸…ç†çš„å‰¯ä½œç”¨" class="headerlink" title="b) éœ€è¦æ¸…ç†çš„å‰¯ä½œç”¨"></a>b) éœ€è¦æ¸…ç†çš„å‰¯ä½œç”¨</h3><blockquote><p>ä¹‹å‰æˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚<strong>å®šæ—¶å™¨</strong>ã€<strong>è®¢é˜…å¤–éƒ¨æ•°æ®æº</strong>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼</p></blockquote><p>åœ¨useEffectä¸­å¯é€‰çš„è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ï¼Œè¯¥æ¸…é™¤å‡½æ•°ä¼šåœ¨ç»„ä»¶<strong>å¸è½½</strong>æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œä»¥è¾¾åˆ°æ¸…é™¤effectçš„ç›®çš„ï¼›</p><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//useEffectå‡½æ•°ä¸­returnçš„functionä¼šåœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ‰§è¡Œ</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å‰¯ä½œç”¨åŠ¨ä½œ</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æ¸…é™¤effect</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>ä½¿ç”¨ç¤ºä¾‹</p><pre class=" language-jsx"><code class="language-jsx"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"useEffectåœ¨ç»„ä»¶æŒ‚è½½å’Œæ›´æ–°çš„æ—¶å€™æ‰§è¡Œ"</span><span class="token punctuation">)</span>        <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å®šæ—¶å™¨æ‰“å°"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¦‚æœuseEffectçš„functionä¸­è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œ</span>        <span class="token comment" spellcheck="true">//å°±ç›¸å½“äºcomponentWillUnMount</span>        <span class="token comment" spellcheck="true">//ç°åœ¨æ¯ä¸€æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ¸…é™¤å‡½æ•°ï¼ŒæŠŠä¸Šä¸€æ¬¡ç»„ä»¶è£…åœ¨æ‰§è¡Œçš„å®šæ—¶å™¨æ¸…é™¤æ‰(è¿™è¾¹ç”±äºé—­åŒ…çš„åŸå› ï¼Œä¹‹å‰çš„å®šæ—¶å™¨ä»¥åŠä¸€äº›å˜é‡éƒ½ä¼šè¢«é‡Šæ”¾)</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ¸…é™¤å®šæ—¶å™¨"</span><span class="token punctuation">)</span>              timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="c-useEffectè¿”å›æ¸…é™¤å‡½æ•°çš„æ‰§è¡Œæ—¶æœº"><a href="#c-useEffectè¿”å›æ¸…é™¤å‡½æ•°çš„æ‰§è¡Œæ—¶æœº" class="headerlink" title="c) useEffectè¿”å›æ¸…é™¤å‡½æ•°çš„æ‰§è¡Œæ—¶æœº"></a>c) useEffectè¿”å›æ¸…é™¤å‡½æ•°çš„æ‰§è¡Œæ—¶æœº</h3><p>è¿™é‡Œæ˜¯ç»„ä»¶<strong>å¸è½½</strong>æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œå½“å‰çŠ¶æ€ä¸‹çš„å‡½æ•°ç»„ä»¶renderå®Œä¹‹åä¼šç«‹å³æ‰§è¡Œä¸Šä¸€ä¸ªå‡½æ•°çŠ¶æ€ä¸­<code>useEffect</code>è¿”å›çš„æ¸…é™¤å‡½æ•°ï¼Œè€Œè¿™ä¸ªæ¸…é™¤å‡½æ•°ä¸­æ‰€å¸¦çš„å‚æ•°ä¹Ÿæ˜¯å¤„äºä¸Šä¸€ä¸ªçŠ¶æ€ä¸­ï¼ˆé—­åŒ…çš„ç‰¹æ€§ï¼‰ã€‚</p><p><a href="https://segmentfault.com/a/1190000018639033">https://segmentfault.com/a/1190000018639033</a></p><blockquote><p>å‡è®¾åœ¨ç»„ä»¶çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¤–éƒ¨ä¼ å…¥çš„propså‚æ•°idï¼Œæ”¹å˜äº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡ä¼ å…¥<code>id: 1</code>ï¼Œ ç¬¬äºŒæ¬¡ä¼ å…¥<code>id: 2</code></p><p>é‚£ä¹ˆæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>ä¼ å…¥<code>props.id = 1</code></li><li>ç»„ä»¶æ¸²æŸ“</li><li>DOMæ¸²æŸ“å®Œæˆï¼ŒuseEffecté€»è¾‘æ‰§è¡Œï¼Œè¿”å›æ¸…é™¤å‰¯ä½œç”¨å‡½æ•°<code>clearï¼Œ</code>å‘½åä¸º<code>clear1</code></li><li>ä¼ å…¥<code>props.id = 2</code></li><li>ç»„ä»¶æ¸²æŸ“</li><li>ç»„ä»¶æ¸²æŸ“å®Œæˆï¼Œclear1æ‰§è¡Œ</li><li>useEffecté€»è¾‘æ‰§è¡Œï¼Œè¿”å›å¦ä¸€ä¸ªclearå‡½æ•°ï¼Œå‘½åä¸º<code>clear2</code></li><li>ç»„ä»¶å¸è½½ï¼Œclear2æ‰§è¡Œ</li></ol><p>æ‰§è¡Œè¿‡ç¨‹æœ‰ç‚¹ç»•ï¼Œå› ä¸ºä¸ä½ å°è±¡ä¸­çš„æ‰§è¡Œè¿‡ç¨‹ä¼¼ä¹ä¸ä¸€æ ·ã€‚å…¶å®å…³é”®çš„åœ°æ–¹å°±åœ¨äºclearå‡½æ•°çš„æ‰§è¡Œï¼Œå®ƒçš„ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>æ¯æ¬¡useEffectæ‰§è¡Œï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„clearå‡½æ•°</li><li>clearå‡½æ•°ä¼šåœ¨ä¸‹ä¸€æ¬¡useEffecté€»è¾‘ä¹‹å‰æ‰§è¡Œï¼ˆDOMæ¸²æŸ“å®Œæˆä¹‹åï¼‰</li><li>ç»„ä»¶å¸è½½ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡</li></ul></blockquote><h2 id="7-5-useLayoutEffect"><a href="#7-5-useLayoutEffect" class="headerlink" title="7.5 useLayoutEffect"></a>7.5 useLayoutEffect</h2><pre class=" language-jsx"><code class="language-jsx"><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> ä¾èµ–é¡¹ <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å…¶å‡½æ•°ç­¾åä¸ <code>useEffect</code> ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹å<strong>åŒæ­¥è°ƒç”¨</strong> effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚</p><p>è¿™ä¸ªæ˜¯ç”¨åœ¨å¤„ç†DOMçš„æ—¶å€™ï¼Œå½“ä½ çš„useEffecté‡Œé¢çš„æ“ä½œéœ€è¦å¤„ç†DOMã€‚å¹¶ä¸”ä¼šæ”¹å˜é¡µé¢çš„æ ·å¼ï¼Œå°±éœ€è¦ç”¨è¿™ä¸ªï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°å‡ºç°é—ªå±é—®é¢˜</p><p><a href="https://cllxx.cn/2019/07/21/react-xin-te-xing-hooks-zhi-useeffect-he-uselayouteffect-wu/">https://cllxx.cn/2019/07/21/react-xin-te-xing-hooks-zhi-useeffect-he-uselayouteffect-wu/</a></p><blockquote><p>useEffectå’ŒuseLayoutEffectçš„å¼‚åŒï¼š</p><ul><li>useLayoutEffectæ˜¯åœ¨è™šæ‹ŸDOMæ„å»ºå®Œæˆåç«‹å³æ‰§è¡Œï¼ŒuseEffectæ˜¯åœ¨çœŸå®DOMæ„å»ºå®Œæˆåç«‹å³æ‰§è¡Œ</li></ul><ul><li>useLayoutEffectæ˜¯åŒæ­¥æ‰§è¡Œï¼ŒuseEffectæ˜¯å¼‚æ­¥æ‰§è¡Œ</li></ul></blockquote><h2 id="7-6-useEffectä½¿ç”¨æ³¨æ„ç‚¹"><a href="#7-6-useEffectä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="7.6 useEffectä½¿ç”¨æ³¨æ„ç‚¹"></a>7.6 useEffectä½¿ç”¨æ³¨æ„ç‚¹</h2><p>useEffectçš„å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªcleanupçš„æ¸…é™¤å‡½æ•°æˆ–è€…undefinedã€‚è€Œå½“æˆ‘ä»¬ä½¿ç”¨awaitã€asyncçš„æ—¶å€™ï¼Œä¼šé»˜è®¤è¿”å›ä¸€ä¸ªPromiseï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨useEffectå‡½æ•°ä¸­ä½¿ç”¨async</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//é”™è¯¯</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>     <span class="token keyword">await</span> <span class="token function">fetchSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ­£ç¡®</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">await</span> <span class="token function">fetchSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="8-å…¶ä»–å¸¸ç”¨hook"><a href="#8-å…¶ä»–å¸¸ç”¨hook" class="headerlink" title="8.å…¶ä»–å¸¸ç”¨hook"></a>8.å…¶ä»–å¸¸ç”¨hook</h1><h2 id="8-1-å‡½æ•°ç»„ä»¶re-renderçš„æ—¶æœº"><a href="#8-1-å‡½æ•°ç»„ä»¶re-renderçš„æ—¶æœº" class="headerlink" title="8.1 å‡½æ•°ç»„ä»¶re-renderçš„æ—¶æœº"></a>8.1 å‡½æ•°ç»„ä»¶re-renderçš„æ—¶æœº</h2><blockquote><ol><li>ç»„ä»¶é‡æ–°è¢«åˆ›å»º</li><li>å½“å‰ç»„ä»¶stateçš„å†…å­˜åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œæ— è®ºdomä¸­æ˜¯å¦ä½¿ç”¨äº†state</li><li>çˆ¶ç»„ä»¶æ›´æ–°ï¼Œå­ç»„ä»¶ä¹Ÿä¼šè‡ªåŠ¨çš„æ›´æ–°</li><li>ç»„ä»¶æ›´æ–°æ—¶ï¼Œä¼šå¸è½½æ‰€æœ‰functionï¼Œå¹¶é‡æ–°åˆ›å»ºfunction (æ‰§è¡Œå‡½æ•°ç»„ä»¶çš„æ‰€æœ‰é€»è¾‘)</li></ol></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œåªè¦çˆ¶ç»„ä»¶æˆ–è€…å½“å‰ç»„ä»¶çš„stateå†…å­˜åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘å½“å‰ç»„ä»¶ä»¥åŠå½“å‰ç»„ä»¶çš„å­ç»„ä»¶re-renderï¼Œæ— è®ºå½“å‰ç»„ä»¶æ˜¯å¦ä½¿ç”¨åˆ°çˆ¶ç»„ä»¶ä¸­çš„stateã€‚</p><p>è€Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œreactä¸å†åŒºåˆ†mountå’Œupdateä¸¤ä¸ªçŠ¶æ€ï¼Œè¿™æ„å‘³ç€å‡½æ•°ç»„ä»¶çš„æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œå…¶å†…éƒ¨çš„æ‰€æœ‰é€»è¾‘ï¼Œé‚£ä¹ˆä¼šå¸¦æ¥è¾ƒå¤§çš„æ€§èƒ½æŸè€—ã€‚å› æ­¤useMemo å’ŒuseCallbackå°±æ˜¯è§£å†³æ€§èƒ½é—®é¢˜çš„æ€æ‰‹é”ã€‚</p><h2 id="8-2-memo-useMemo-useCallback"><a href="#8-2-memo-useMemo-useCallback" class="headerlink" title="8.2 memo\useMemo\useCallback"></a>8.2 memo\useMemo\useCallback</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Child.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Child<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Child<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span>useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span>FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>æ•°é‡ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘åŠ <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>Child<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>Parent<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Parent<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//æ¡ˆä¾‹å­˜åœ¨çš„é—®é¢˜ï¼šæ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡æ—¶é—´ï¼Œè¯´æ˜çˆ¶ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œå­ç»„ä»¶ä¹Ÿé‡æ–°æ¸²æŸ“äº†</span></code></pre><h3 id="8-2-1-ä½¿ç”¨memoé«˜é˜¶å‡½æ•°"><a href="#8-2-1-ä½¿ç”¨memoé«˜é˜¶å‡½æ•°" class="headerlink" title="8.2.1 ä½¿ç”¨memoé«˜é˜¶å‡½æ•°"></a>8.2.1 ä½¿ç”¨memoé«˜é˜¶å‡½æ•°</h3><p><code>React.memo()</code>æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒä¸ <a href="https://reactjs.org/docs/react-api.html#reactpurecomponent"><code>React.PureComponent</code></a>ç±»ä¼¼ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶è€Œéä¸€ä¸ªç±»ã€‚</p><p>React.memo()å¯æ¥å—2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºçº¯å‡½æ•°çš„ç»„ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨äºå¯¹æ¯”propsæ§åˆ¶æ˜¯å¦åˆ·æ–°ï¼Œä¸<a href="https://reactjs.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate()</code></a>åŠŸèƒ½ç±»ä¼¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Child.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span>memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Child<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span>count<span class="token operator">?</span><span class="token punctuation">:</span>number<span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span>next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">.</span>count<span class="token punctuation">,</span>next<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> prev<span class="token punctuation">.</span>count<span class="token operator">==</span>next<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è¿™è¾¹åªè¦çˆ¶äº²ä¼ é€’ç»™å­©å­çš„propså‘ç”Ÿäº†å˜åŒ–å°±åº”è¯¥åˆ·æ–°å­ç»„ä»¶(å¦‚æœçˆ¶äº²æ²¡æœ‰ç»™å­ç»„ä»¶ä¼ é€’propsæˆ–è€…çˆ¶äº²ç»™å­ç»„ä»¶ä¼ é€’çš„propsæ²¡æœ‰æ”¹å˜ï¼Œåˆ™å­ç»„ä»¶ä¸åº”è¯¥åˆ·æ–°)</span><span class="token keyword">export</span> <span class="token keyword">default</span> Child<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span>useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span>FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>æ•°é‡ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘åŠ <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>Child count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span></code></pre><h3 id="8-2-2-useMemo"><a href="#8-2-2-useMemo" class="headerlink" title="8.2.2 useMemo"></a>8.2.2 useMemo</h3><h4 id="a-æ²¡æœ‰ä½¿ç”¨useMemoå­˜åœ¨çš„é—®é¢˜"><a href="#a-æ²¡æœ‰ä½¿ç”¨useMemoå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="a) æ²¡æœ‰ä½¿ç”¨useMemoå­˜åœ¨çš„é—®é¢˜"></a>a) æ²¡æœ‰ä½¿ç”¨useMemoå­˜åœ¨çš„é—®é¢˜</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">"zhangsan"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>æ•°é‡ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>button        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">></span>        ç‚¹æˆ‘åŠ <span class="token number">1</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>Child obj<span class="token operator">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Child.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Child<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span> obj<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token operator">?</span><span class="token punctuation">:</span> string <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>prev<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> prev<span class="token punctuation">.</span>obj <span class="token operator">==</span> next<span class="token punctuation">.</span>obj<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Child<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ¡ˆä¾‹å­˜åœ¨çš„é—®é¢˜ï¼šæ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡æ—¶é—´ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’çš„éƒ½æ˜¯ç›¸åŒçš„objå¯¹è±¡ï¼Œä¸ºä»€ä¹ˆå­ç»„ä»¶è¿˜æ˜¯ä¼šåˆ·æ–°å‘¢?</span><span class="token comment" spellcheck="true">//åŸå› æ˜¯æ¯ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šé‡æ–°åˆ·æ–°çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ä¸­çš„objä¼šé‡æ–°è¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æ–°å®ä¾‹åŒ–çš„objå’Œä¸Šä¸€æ¬¡å®ä¾‹åŒ–çš„objä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></code></pre><h4 id="b-useMemo-hook"><a href="#b-useMemo-hook" class="headerlink" title="b) useMemo hook"></a>b) useMemo hook</h4><p>useMemoå¯ä»¥ç”¨æ¥ç¼“å­˜ä¸€äº›å˜é‡ï¼Œå¹¶æŒ‡å®šå“ªäº›æ¡ä»¶å˜åŒ–åé‡æ–°è®¡ç®—ç¼“å­˜çš„å˜é‡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>useMemoç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª factory å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›ç»“æœä¼šé€šè¿‡useMemoç¼“å­˜ä¸‹æ¥</p><p>â€‹                  ç¬¬äºŒä¸ªå‚æ•°æ˜¯factoryå‡½æ•°çš„ä¾èµ–(deps)ï¼Œå½“ä¾èµ–(deps)æ”¹å˜æ—¶æ‰é‡æ–°æ‰§è¡Œ factory å‡½æ•°ï¼ŒmemoizedValue æ‰ä¼šè¢«é‡æ–°è®¡ç®—</p></blockquote><p>ä¹Ÿå°±æ˜¯åœ¨ä¾èµ–æœªæ”¹å˜æ—¶ï¼ˆæˆ–ç©ºæ•°ç»„æ— ä¾èµ–æ—¶ï¼‰ï¼ŒmemoizedValue æ€»æ˜¯è¿”å›é€šè¿‡useMemoç¼“å­˜çš„å€¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span>useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨useMemoç¼“å­˜å˜é‡å€¼  ä¾èµ–é¡¹æ²¡æœ‰æŒ‡å®š</span>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      name<span class="token punctuation">:</span> <span class="token string">"zhangsan"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>æ•°é‡ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>button        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">></span>        ç‚¹æˆ‘åŠ <span class="token number">1</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>Child obj<span class="token operator">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span></code></pre><h3 id="8-2-3-useCallback"><a href="#8-2-3-useCallback" class="headerlink" title="8.2.3 useCallback"></a>8.2.3 useCallback</h3><h4 id="a-æ²¡æœ‰ä½¿ç”¨useCallbackçš„é—®é¢˜"><a href="#a-æ²¡æœ‰ä½¿ç”¨useCallbackçš„é—®é¢˜" class="headerlink" title="a) æ²¡æœ‰ä½¿ç”¨useCallbackçš„é—®é¢˜"></a>a) æ²¡æœ‰ä½¿ç”¨useCallbackçš„é—®é¢˜</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span>useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span>setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> changeHandler <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">:</span>React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">setText</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>textæ–‡æœ¬ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>Child onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeHandler<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Child.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Child<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span>  onChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>event<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token punctuation">{</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onChange<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Child<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹æ–‡æœ¬æ¡†çš„å€¼ï¼Œä¼šè§¦å‘å­ç»„ä»¶çš„onChangeï¼Œä»è€Œè§¦å‘çˆ¶ç»„ä»¶çš„changeHandleræ–¹æ³•ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­çš„changeHandleræ–¹æ³•ä¸­ä¿®æ”¹äº†textæ–‡æœ¬ï¼Œæ‰€ä»¥é¡µé¢ä¸Šçš„textå€¼å‘ç”Ÿäº†æ”¹å˜ã€‚ </span><span class="token comment" spellcheck="true">//ä½†æ˜¯é™¤äº†æˆ‘ä»¬å‘ç°é¡µé¢ä¸Štextæ–‡æœ¬æ”¹å˜ä¹‹å¤–ï¼Œå­ç»„ä»¶ä¸­çš„æ—¶é—´ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ (è¯´æ˜æ¯ä¸€æ¬¡å­ç»„ä»¶è¾“å…¥å†…å®¹çš„æ—¶å€™éƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“)</span><span class="token comment" spellcheck="true">//åŸå› æ˜¯æ¯ä¸€æ¬¡å­ç»„ä»¶è¾“å…¥å†…å®¹ï¼Œçˆ¶ç»„ä»¶çš„textæ–‡æœ¬å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆçˆ¶ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“ï¼Œä»è€Œé€ æˆçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„changeHandleræ–¹æ³•(props)å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œé€ æˆå­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</span></code></pre><h4 id="b-useCallback-hook"><a href="#b-useCallback-hook" class="headerlink" title="b) useCallback   hook"></a>b) useCallback   hook</h4><p>useMemoç¼“å­˜çš„æ˜¯å€¼</p><p>useCallbackç¼“å­˜çš„æ˜¯å‡½æ•°ã€‚æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦ç¼“å­˜çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–é¡¹ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Parent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useState<span class="token punctuation">,</span>useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">"./Child"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span>setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°</span>  <span class="token keyword">const</span> changeHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span>React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">setText</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>textæ–‡æœ¬ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>Child onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeHandler<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span></code></pre><h3 id="8-2-4-useMemoå’ŒuseCallbackçš„åŒºåˆ«å’Œè”ç³»"><a href="#8-2-4-useMemoå’ŒuseCallbackçš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="8.2.4 useMemoå’ŒuseCallbackçš„åŒºåˆ«å’Œè”ç³»"></a>8.2.4 useMemoå’ŒuseCallbackçš„åŒºåˆ«å’Œè”ç³»</h3><p>å®é™…ä¸Š<code>useCallback</code>æ˜¯åŸºäº<code>useMemo</code>å®ç°çš„</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> callback<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ol><li><code>useMemo</code>æ˜¯è¿”å›<code>callback</code>æ‰§è¡Œåçš„ç»“æœ</li><li><code>useCallback</code> æ˜¯ç›´æ¥è¿”å›è¢«<code>useMemo</code>ä¿®é¥°çš„<code>callback</code>å‡½æ•°</li></ol><h2 id="8-3-useReducerå’ŒuseContext"><a href="#8-3-useReducerå’ŒuseContext" class="headerlink" title="8.3 useReducerå’ŒuseContext"></a>8.3 useReducerå’ŒuseContext</h2><h3 id="8-3-1-useContext"><a href="#8-3-1-useContext" class="headerlink" title="8.3.1 useContext"></a>8.3.1 useContext</h3><blockquote><p>è·¨çº§ç»„ä»¶é€šä¿¡ï¼Œå®ç°åŒä¸€å­æ ‘ä¸‹æ‰€æœ‰èŠ‚ç‚¹å¯ç»Ÿä¸€å…±äº«å­æ ‘æ ¹èŠ‚ç‚¹çš„æ•°æ®</p></blockquote><p>useContextæ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> å†³å®šã€‚</p><p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext</code> provider çš„ context <code>value</code> å€¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åŸºæœ¬ç”¨æ³•ï¼š</p><pre class=" language-jsx"><code class="language-jsx">#<span class="token number">1</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> MyContext <span class="token keyword">from</span> <span class="token string">'./context.js'</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyContext.Provider</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Parent</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Parent</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyContext.Provider</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>#<span class="token number">2</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>js<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">let</span> context <span class="token operator">=</span> createContext<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> string <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> MyContext<span class="token punctuation">;</span>#<span class="token number">3</span><span class="token punctuation">.</span>Parent<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span>useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyContext <span class="token keyword">from</span> <span class="token string">'../context.js'</span><span class="token keyword">const</span> Parent<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//åœ¨å­ç»„ä»¶ä¸­è·å–æ ¹ç»„ä»¶æš´éœ²çš„æ•°æ®</span>  <span class="token keyword">const</span> contextValue <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contextValue<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>textæ–‡æœ¬ä¸º<span class="token punctuation">:</span><span class="token punctuation">{</span>contextValue<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent<span class="token punctuation">;</span></code></pre><h3 id="8-3-2-useReducer"><a href="#8-3-2-useReducer" class="headerlink" title="8.3.2 useReducer"></a>8.3.2 useReducer</h3><h4 id="a-reduxä»‹ç»"><a href="#a-reduxä»‹ç»" class="headerlink" title="a) reduxä»‹ç»"></a>a) reduxä»‹ç»</h4><p>Reduxæ˜¯SPAå•é¡µé¢åº”ç”¨ç¨‹åºä¸­å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚</p><p><img src="https://i.loli.net/2020/11/09/Z6bCnEoLaGxBYIK.png" alt="1602462149160.png"></p><pre><code>- storeï¼šå…±äº«çš„stateæ•°æ®ã€‚- reducersï¼šçº¯å‡½æ•°ï¼Œç”¨äºä¿®æ”¹stateï¼Œç”±actionè§¦å‘ã€‚- actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ reducersçš„è§¦å‘å™¨ï¼Œé€šè¿‡dispatchæ¥è§¦å‘ï¼Œactionå¯¹è±¡éœ€è¦æœ‰typeå­—æ®µ- dispatchï¼šæ´¾å‘å™¨ï¼Œ dispatchå‡½æ•°æ¥å—ä¸€ä¸ªactionå¯¹è±¡ä½œä¸ºå…¥å‚ã€‚actionå¯¹è±¡éœ€è¦æœ‰typeå­—æ®µ</code></pre><h4 id="b-useReducer"><a href="#b-useReducer" class="headerlink" title="b) useReducer"></a>b) useReducer</h4><p>useReduceræ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¸­å®ç°ç±»ä¼¼ Redux åŠŸèƒ½çš„ä¸€ä¸ªHookã€‚ä»–æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªrecuder(çº¯å‡½æ•°)ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯stateçš„åˆå§‹å€¼ã€‚</p><p>ä»–è¿”å›ä¸€ä¸ªçŠ¶æ€ stateå’Œ dispathï¼Œstateæ˜¯è¿”å›çŠ¶æ€ä¸­çš„å€¼ï¼Œè€Œ dispatch æ˜¯ä¸€ä¸ªå¯ä»¥å‘å¸ƒäº‹ä»¶æ¥æ›´æ–° state çš„ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// reducer çº¯å‡½æ•°ï¼Œç”¨äºä¿®æ”¹state</span><span class="token comment" spellcheck="true">// initialArg åˆå§‹åŒ–çš„stateçŠ¶æ€</span><span class="token comment" spellcheck="true">// init ä¸€ä¸ªå‡½æ•°ç”¨äºæƒ°æ€§è®¡ç®—stateåˆå§‹å€¼</span><span class="token comment" spellcheck="true">// state è·å–stateæ•°æ®</span><span class="token comment" spellcheck="true">// dispatch æ´¾å‘å™¨ï¼Œç”¨äºæ¥æ”¶ä¸€ä¸ªactionæ¥è§¦å‘reducerï¼Œä»è€Œä¿®æ”¹state</span><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="8-3-3-useReducerå’ŒuseContext-äº†è§£"><a href="#8-3-3-useReducerå’ŒuseContext-äº†è§£" class="headerlink" title="8.3.3 useReducerå’ŒuseContext(äº†è§£)"></a>8.3.3 useReducerå’ŒuseContext(äº†è§£)</h3><p>åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼ŒuseReducerå’ŒuseContextç»“åˆä½¿ç”¨çš„æ—¶å€™å¯ä»¥æä¾›ç±»ä¼¼Vuexé‚£æ ·çš„å…¨å±€çŠ¶æ€ç®¡ç†</p><p>useContextè´Ÿè´£å‘å­å­™ç»„ä»¶æš´éœ²æ•°æ®</p><p>useReduceræä¾›å…¨å±€çš„stateã€reducersã€dispatchç­‰ (useReducerå¿…é¡»è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™è¾¹å¾—æŠŠä»£ç æ”¾åˆ°App.tsxä¸­)</p><pre class=" language-javascript"><code class="language-javascript">#<span class="token number">1</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tsxReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>#<span class="token number">2</span><span class="token punctuation">.</span>App<span class="token punctuation">.</span>tsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Parent4 <span class="token keyword">from</span> <span class="token string">"./components4/Parent4"</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyContext4<span class="token punctuation">,</span> <span class="token punctuation">{</span> ActionType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./components4/MyContext4"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå¯ä»¥å°†actionçš„å˜åŒ–è½¬æ¢ä¸ºstateçš„å˜åŒ–</span><span class="token comment" spellcheck="true">//æ‰€ä»¥reducerçº¯å‡½æ•°éœ€è¦æ¥æ”¶ä¸€ä¸ªaction</span><span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action<span class="token punctuation">:</span> ActionType<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//æ ¹æ®actionçš„typeæ¥ä¿®æ”¹state</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">case</span> <span class="token string">"ADD"</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">"SUB"</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">"ADDN"</span><span class="token punctuation">:</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>step<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> num <span class="token operator">=</span> action<span class="token punctuation">.</span>step<span class="token punctuation">.</span>num<span class="token punctuation">;</span>        <span class="token keyword">return</span> state <span class="token operator">+</span> num<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> state<span class="token punctuation">;</span>      <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//useContextçš„ä½œç”¨æ˜¯ç»™å­å­™ç»„ä»¶æä¾›æ•°æ®</span><span class="token comment" spellcheck="true">//useReducerçš„ä½œç”¨æä¾›å…¨å±€çš„çŠ¶æ€ç®¡ç†</span><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>MyContext4<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token operator">&lt;</span>Parent4<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Parent4<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext4<span class="token punctuation">.</span>Provider<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>#<span class="token number">3</span><span class="token punctuation">.</span>Parent<span class="token punctuation">.</span>tsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Child4 <span class="token keyword">from</span> <span class="token string">"./Child4"</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyContext4 <span class="token keyword">from</span> <span class="token string">"./MyContext4"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Parent4<span class="token punctuation">:</span> FC <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> clickHandler1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//é€šè¿‡æ´¾å‘å™¨æ¥æ¥æ”¶ä¸€ä¸ªactionï¼Œä»è€Œè§¦å‘reducerçš„æ‰§è¡Œï¼Œä¼šæ ¹æ®å¯¹åº”çš„actionæ‰§è¡Œå¯¹åº”çš„æ•°æ®ä¿®æ”¹é€»è¾‘</span>    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      type<span class="token punctuation">:</span> <span class="token string">"ADD"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> clickHandler2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      type<span class="token punctuation">:</span> <span class="token string">"SUB"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> clickHandler3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      type<span class="token punctuation">:</span> <span class="token string">"ADDN"</span><span class="token punctuation">,</span>      step<span class="token punctuation">:</span> <span class="token punctuation">{</span>        num<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h3<span class="token operator">></span>Parentç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>      <span class="token operator">&lt;</span>p<span class="token operator">></span>å½“å‰count <span class="token punctuation">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandler1<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandler2<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘<span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandler3<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘<span class="token operator">+</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span>Child4<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Child4<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Parent4<span class="token punctuation">;</span>#<span class="token number">4</span><span class="token punctuation">.</span>Child<span class="token punctuation">.</span>tsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyContext4 <span class="token keyword">from</span> <span class="token string">"./MyContext4"</span><span class="token punctuation">;</span><span class="token keyword">const</span> Child4<span class="token punctuation">:</span> FC <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> clickHandler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      type<span class="token punctuation">:</span><span class="token string">"ADD"</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h3<span class="token operator">></span>Childå­ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>      <span class="token operator">&lt;</span>p<span class="token operator">></span>å½“å‰æ•°é‡<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘ä¿®æ”¹æ•°é‡<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> Child4<span class="token punctuation">;</span>#<span class="token number">5</span><span class="token punctuation">.</span>MyContext<span class="token punctuation">.</span>tsx<span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šåœ¨useContextä¸­ä½¿ç”¨åˆ°</span><span class="token keyword">import</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> Dispatch<span class="token punctuation">,</span> ReducerAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜Actionçš„æ³›å‹</span><span class="token keyword">export</span> type ActionType <span class="token operator">=</span> <span class="token punctuation">{</span>  type<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  step<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    num<span class="token punctuation">:</span> number<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å£°æ˜Contextçš„æ³›å‹</span>type ContextType <span class="token operator">=</span> <span class="token punctuation">[</span>  number<span class="token punctuation">,</span>  Dispatch<span class="token operator">&lt;</span>ActionType<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªcontextä¸Šä¸‹æ–‡ï¼Œå¹¶å¯¼å‡º</span><span class="token keyword">let</span> context <span class="token operator">=</span> createContext<span class="token operator">&lt;</span>ContextType<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> context<span class="token punctuation">;</span></code></pre><p>useReducerå’ŒuseContextçš„å‡ºç°å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£reduxï¼Œreduxæ˜¯ç‹¬ç«‹äºä»»ä½•ç¬¬ä¸‰æ–¹åº“ï¼Œreduxæœ‰ä¼˜ç§€çš„ä¸­é—´ä»¶(å¼‚æ­¥æ•°æ®æµã€debug)ã€‚å½“çŠ¶æ€æ¯”è¾ƒç®€å•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useReducerå’ŒuseContextæ¥å®ç°ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ï¼Œä½†æ˜¯å½“çŠ¶æ€å˜å¾—ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨reduxã€‚</p><h2 id="8-4-Hookçš„è§„åˆ™"><a href="#8-4-Hookçš„è§„åˆ™" class="headerlink" title="8.4 Hookçš„è§„åˆ™"></a>8.4 Hookçš„è§„åˆ™</h2><h3 id="8-4-1-åªåœ¨ç»„ä»¶é¡¶å±‚ä¸­ä½¿ç”¨Hook"><a href="#8-4-1-åªåœ¨ç»„ä»¶é¡¶å±‚ä¸­ä½¿ç”¨Hook" class="headerlink" title="8.4.1 åªåœ¨ç»„ä»¶é¡¶å±‚ä¸­ä½¿ç”¨Hook"></a>8.4.1 åªåœ¨ç»„ä»¶é¡¶å±‚ä¸­ä½¿ç”¨Hook</h3><blockquote><p><strong>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œ</strong> ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ <code>useState</code> å’Œ <code>useEffect</code> è°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®ã€‚</p></blockquote><pre class=" language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Yes</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// const [count, setCount] = useState(0); //No</span>    <span class="token punctuation">}</span>       <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// const [count, setCount] = useState(0); //No</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></code></pre><h3 id="8-4-2-åªåœ¨React-å‡½æ•°ä¸­è°ƒç”¨Hook"><a href="#8-4-2-åªåœ¨React-å‡½æ•°ä¸­è°ƒç”¨Hook" class="headerlink" title="8.4.2 åªåœ¨React å‡½æ•°ä¸­è°ƒç”¨Hook"></a>8.4.2 åªåœ¨React å‡½æ•°ä¸­è°ƒç”¨Hook</h3><blockquote><p><strong>ä¸è¦åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ Hookã€‚</strong>ä½ å¯ä»¥ï¼š</p><ul><li>åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hook</li><li>åœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å…¶ä»– Hook</li><li>åœ¨classç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨Hook</li></ul><p>éµå¾ªæ­¤è§„åˆ™ï¼Œç¡®ä¿ç»„ä»¶çš„çŠ¶æ€é€»è¾‘åœ¨ä»£ç ä¸­æ¸…æ™°å¯è§ã€‚</p></blockquote><h2 id="8-5-Hookå‚ç…§æ–‡ç« ï¼š"><a href="#8-5-Hookå‚ç…§æ–‡ç« ï¼š" class="headerlink" title="8.5 Hookå‚ç…§æ–‡ç« ï¼š"></a>8.5 Hookå‚ç…§æ–‡ç« ï¼š</h2><ol><li><a href="https://react-1251415695.cos-website.ap-chengdu.myqcloud.com/docs/getting-started.html">Reactå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://blog.csdn.net/sinat_17775997/article/details/94453167">useMemoä¸useCallbackä½¿ç”¨æŒ‡å—</a></li><li><a href="https://blog.csdn.net/gtLBTNq9mr3/article/details/93984397">useReducerdeä½¿ç”¨å’ŒåŸç†</a></li><li><a href="https://segmentfault.com/a/1190000021133222">äº”ä¸ªå¤§å‹é¡¹ç›®å®è·µæ€»ç»“ï¼Œè§£å¯†React Hooksæœ€ä½³å®è·µ</a></li><li><a href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/">useEffectå®Œæ•´æŒ‡å—</a></li><li><a href="https://zhuanlan.zhihu.com/p/88135310">ä¸€æ–‡å½»åº•ææ‡‚ react hooks çš„åŸç†å’Œå®ç°</a></li><li><a href="https://www.jianshu.com/p/b9ac8fa849f1">React Hooksçš„åŸç†</a></li></ol><h1 id="9-React-router"><a href="#9-React-router" class="headerlink" title="9. React-router"></a>9. React-router</h1><h2 id="9-1-å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°æ–¹æ¡ˆ"><a href="#9-1-å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°æ–¹æ¡ˆ" class="headerlink" title="9.1 å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°æ–¹æ¡ˆ"></a>9.1 å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°æ–¹æ¡ˆ</h2><ol><li><p>hash : hashåŸæœ¬çš„ä½œç”¨æ˜¯ä¸ºä¸€ä¸ªå¾ˆé•¿çš„æ–‡æ¡£é¡µæ·»åŠ é”šç‚¹ä¿¡æ¯ï¼Œå®ƒè‡ªå¸¦ä¸æ”¹å˜urlåˆ·æ–°é¡µé¢çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶è¢«ç”¨å•é¡µé¢åº”ç”¨ç¨‹åºä¸­äº†ã€‚</p></li><li><p>history : åº”è¯¥è¯´historyæ˜¯ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼Œæµè§ˆå™¨çš„å‰è¿›åé€€ç”¨çš„å°±æ˜¯è¿™ä¸ªï¼Œå®ƒæ˜¯windowå¯¹è±¡ä¸‹çš„ï¼Œä»¥å‰çš„historyæä¾›çš„æ–¹æ³•åªèƒ½åšé¡µé¢ä¹‹é—´çš„å‰è¿›åé€€ï¼Œå¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>number<span class="token operator">|</span>URL<span class="token punctuation">)</span> å¯åŠ è½½å†å²åˆ—è¡¨ä¸­çš„æŸä¸ªå…·ä½“çš„é¡µé¢history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span> å¯åŠ è½½å†å²åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ª URLhistory<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> å¯åŠ è½½å†å²åˆ—è¡¨ä¸­çš„å‰ä¸€ä¸ª URL</code></pre><p>ä¸ºäº†åœ¨ä¸åˆ·æ–°æµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºæ–°çš„æµè§ˆè®°å½•å¹¶æ’å…¥æµè§ˆè®°å½•é˜Ÿåˆ—ä¸­ï¼Œhtml5æ–°å¢äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p><pre><code>1. history.pushState(state, title, url)   æ·»åŠ ä¸€æ¡å†å²è®°å½•ï¼Œ stateç”¨äºä¼ é€’å‚æ•°ï¼Œå¯ä»¥ä¸ºç©ºã€‚titleæ˜¯è®¾ç½®å†å²è®°å½•çš„æ ‡é¢˜ï¼Œå¯ä»¥ä¸ºç©ºã€‚urlæ˜¯å†å²è®°å½•çš„URLï¼Œä¸å¯ä»¥ä¸ºç©ºã€‚2.history.replaceState(state, title, url)å°†historyå †æ ˆä¸­å½“å‰çš„è®°å½•æ›¿æ¢æˆè¿™é‡Œçš„urlï¼Œå‚æ•°åŒä¸Šã€‚è¿™ä¸ªç‰¹æ€§åæ¥ç”¨åˆ°äº†å•é¡µé¢åº”ç”¨ä¸­æ¯”å¦‚ï¼švue-routerï¼Œreact-router-domé‡Œé¢ã€‚</code></pre></li></ol><h2 id="9-2-Reacä¸­çš„è·¯ç”±"><a href="#9-2-Reacä¸­çš„è·¯ç”±" class="headerlink" title="9.2 Reacä¸­çš„è·¯ç”±"></a>9.2 Reacä¸­çš„è·¯ç”±</h2><p><code>&lt;Router&gt;</code>æ˜¯Reactä¸­å®ç°è·¯ç”±æœ€å¤–å±‚çš„å®¹å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸å†éœ€è¦ç›´æ¥ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ä½¿ç”¨åœ¨å®ƒåŸºç¡€ä¹‹ä¸Šå°è£…çš„å‡ ä¸ªé€‚ç”¨äºä¸åŒç¯å¢ƒçš„ç»„ä»¶ï¼Œreact-router-domçš„Routeræœ‰å››ç§ï¼š</p><table><thead><tr><th>Router</th><th>é€‚ç”¨æƒ…å†µ</th></tr></thead><tbody><tr><td><a href="https://link.jianshu.com/?t=https://reacttraining.com/react-router/web/api/BrowserRouter">BrowserRouter</a></td><td>react-router-domæ‰©å±•ï¼Œåˆ©ç”¨HTML5 æ–°å¢çš„history API (pushState, replaceState)ï¼Œæ˜¯webåº”ç”¨æœ€å¸¸ç”¨çš„è·¯ç”±ç»„ä»¶</td></tr><tr><td><a href="https://link.jianshu.com/?t=https://reacttraining.com/react-router/web/api/HashRouter">HashRouter</a></td><td>react-router-domæ‰©å±•ï¼Œåˆ©ç”¨window.location.hashï¼Œé€‚ç”¨äºä½ç‰ˆæœ¬æµè§ˆå™¨æˆ–è€…ä¸€äº›ç‰¹æ®Šæƒ…å¢ƒ</td></tr><tr><td><a href="https://link.jianshu.com/?t=https://reacttraining.com/react-router/web/api/MemoryRouter">MemoryRouter</a></td><td>ç»§æ‰¿è‡ªreact-router ï¼Œç”¨æˆ·åœ¨åœ°å€æ çœ‹ä¸åˆ°ä»»ä½•è·¯å¾„å˜åŒ–ï¼Œä¸€èˆ¬ç”¨åœ¨æµ‹è¯•æˆ–è€…éæµè§ˆå™¨ç¯å¢ƒå¼€å‘ä¸­</td></tr><tr><td><a href="https://link.jianshu.com/?t=https://reacttraining.com/react-router/web/api/StaticRouter">StaticRouter</a></td><td>ç»§æ‰¿è‡ªreact-routerï¼ŒæŸäº›é¡µé¢ä»æ¸²æŸ“å‡ºæ¥ä»¥åæ²¡æœ‰å¤šçš„äº¤äº’ï¼Œæ‰€ä»¥æ²¡æœ‰çŠ¶æ€çš„å˜åŒ–éœ€è¦å­˜å‚¨ï¼Œå°±å¯ä»¥ä½¿ç”¨é™æ€è·¯ç”±ï¼Œé™æ€è·¯ç”±é€‚ç”¨äºæœåŠ¡å™¨ç«¯</td></tr></tbody></table><p>ä¸€èˆ¬æˆ‘ä»¬å¾ˆå°‘ä¼šç”¨åˆ°MemoryRouterå’ŒStaticRouterï¼Œåœ¨webåº”ç”¨ä¸­æ›´å¤šçš„æ˜¯ç”¨   <code>react-router-dom</code>æ‰©å±•å‡ºæ¥çš„BrowserRouterå’ŒHashRouterï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯æˆ‘å‰é¢æåˆ°çš„å‰ç«¯è·¯ç”±çš„ä¸¤ç§è§£å†³åŠæ³•çš„å„è‡ªå®ç°ã€‚</p><h2 id="9-3-HashRouterçš„åŸºæœ¬ä½¿ç”¨"><a href="#9-3-HashRouterçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="9.3 HashRouterçš„åŸºæœ¬ä½¿ç”¨"></a>9.3 HashRouterçš„åŸºæœ¬ä½¿ç”¨</h2><pre class=" language-javascript"><code class="language-javascript">yarn add react<span class="token operator">-</span>router react<span class="token operator">-</span>router<span class="token operator">-</span>dom @types<span class="token operator">/</span>react<span class="token operator">-</span>router<span class="token operator">-</span>dom#<span class="token number">1</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>js <span class="token comment" spellcheck="true">// 1. å¯¼å…¥åŒ…</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.jsx'</span><span class="token comment" spellcheck="true">// ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>#<span class="token number">2</span><span class="token punctuation">.</span>App<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// HashRouter è¡¨ç¤ºä¸€ä¸ªè·¯ç”±çš„è·Ÿå®¹å™¨ï¼Œæ‰€æœ‰çš„è·¯ç”±ç›¸å…³çš„ä¸œè¥¿ï¼Œéƒ½è¦åŒ…è£¹åœ¨ HashRouter é‡Œé¢</span><span class="token comment" spellcheck="true">// Route è¡¨ç¤ºä¸€ä¸ªè·¯ç”±è§„åˆ™ï¼Œ åœ¨ Route ä¸Šæœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼špath   component</span><span class="token comment" spellcheck="true">// Link è¡¨ç¤ºä¸€ä¸ªè·¯ç”±çš„é“¾æ¥ ï¼Œå°±å¥½æ¯” vue ä¸­çš„ &lt;router-link to="">&lt;/router-link></span><span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./components6/Home'</span><span class="token keyword">import</span> Movie <span class="token keyword">from</span> <span class="token string">'./components6/Movie'</span><span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'./components6/About'</span><span class="token keyword">const</span> App<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// å½“ ä½¿ç”¨ HashRouter æŠŠ App æ ¹ç»„ä»¶çš„å…ƒç´ åŒ…è£¹èµ·æ¥ä¹‹åï¼Œç½‘ç«™å°±å·²ç»å¯ç”¨è·¯ç”±äº†</span>  <span class="token comment" spellcheck="true">// åœ¨ä¸€ä¸ªç½‘ç«™ä¸­ï¼Œåªéœ€è¦ä½¿ç”¨ å”¯ä¸€çš„ä¸€æ¬¡ &lt;HashRouter>&lt;/HashRouter> å°±è¡Œäº†</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>HashRouter<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>è¿™æ˜¯ç½‘ç«™çš„APPæ ¹ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/home"</span><span class="token operator">></span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/movie/top250/10"</span><span class="token operator">></span>ç”µå½±<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>å…³äº<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>      <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Route åˆ›å»ºçš„æ ‡ç­¾ï¼Œå°±æ˜¯è·¯ç”±è§„åˆ™ï¼Œå…¶ä¸­ path è¡¨ç¤ºè¦åŒ¹é…çš„è·¯ç”±ï¼Œcomponent è¡¨ç¤ºè¦å±•ç¤ºçš„ç»„ä»¶ */</span><span class="token punctuation">}</span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* åœ¨ vue ä¸­æœ‰ä¸ª router-view çš„è·¯ç”±æ ‡ç­¾ä¸“é—¨ç”¨æ¥æ”¾ç½®åŒ¹é…åˆ°çš„è·¯ç”±ç»„ä»¶çš„ï¼Œä½†æ˜¯åœ¨ react-router ä¸­å¹¶æ²¡æœ‰ç±»ä¼¼äºè¿™æ ·çš„æ ‡ç­¾ï¼Œè€Œæ˜¯ç›´æ¥æŠŠ Route æ ‡ç­¾å½“ä½œçš„å‘ï¼ˆå ä½ç¬¦ï¼‰ */</span><span class="token punctuation">}</span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Route å…·æœ‰ä¸¤ç§èº«ä»½ï¼š1. å®ƒæ˜¯ä¸€ä¸ªè·¯ç”±åŒ¹é…è§„åˆ™ï¼› 2. å®ƒæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºå°†æ¥åŒ¹é…åˆ°çš„ç»„ä»¶éƒ½æ”¾åˆ°è¿™ä¸ªä½ç½®ï¼Œ å¦‚æœæƒ³è®©è·¯ç”±è§„åˆ™è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œå¯ä»¥ä¸º Routeæ·»åŠ  exact å±æ€§ï¼Œè¡¨ç¤ºå¯ç”¨ç²¾ç¡®åŒ¹é…æ¨¡å¼ */</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè·¯ç”±ä¸­çš„è§„åˆ™æ˜¯æ¨¡ç³ŠåŒ¹é…çš„ï¼Œå¦‚æœè·¯ç”±å¯ä»¥éƒ¨åˆ†åŒ¹é…æˆåŠŸï¼Œå°±ä¼šå±•ç¤ºè¿™ä¸ªè·¯ç”±å¯¹åº”çš„ç»„ä»¶ */</span><span class="token punctuation">}</span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* å¦‚æœè¦åŒ¹é…å‚æ•°ï¼Œå¯ä»¥åœ¨åŒ¹é…è§„åˆ™ä¸­ä½¿ç”¨ : ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªä½ç½®åŒ¹é…åˆ°çš„æ˜¯å‚æ•° */</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/movie/:type/:id"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Movie<span class="token punctuation">}</span> exact<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>HashRouter<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>#<span class="token number">3</span><span class="token punctuation">.</span>components<span class="token operator">/</span>Home<span class="token punctuation">.</span>jsx    <span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">const</span> Home<span class="token punctuation">:</span>FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>ä¸»é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Home<span class="token punctuation">;</span>#<span class="token number">4</span><span class="token punctuation">.</span> components<span class="token operator">/</span>Movie<span class="token punctuation">.</span>jsx <span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>type ParamsProps <span class="token operator">=</span> <span class="token punctuation">{</span>  type<span class="token operator">?</span><span class="token punctuation">:</span> string <span class="token operator">|</span> undefined<span class="token punctuation">,</span>  id<span class="token operator">?</span><span class="token punctuation">:</span> string <span class="token operator">|</span> undefined<span class="token punctuation">}</span>type IProps <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">}</span><span class="token keyword">const</span> Movie<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>IProps <span class="token operator">&amp;</span> RouteComponentProps<span class="token operator">&lt;</span>ParamsProps<span class="token operator">></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>ç”µå½±<span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>type<span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Movie<span class="token punctuation">;</span>#<span class="token number">5</span><span class="token punctuation">.</span> components<span class="token operator">/</span>About<span class="token punctuation">.</span>jsx<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">const</span> About<span class="token punctuation">:</span>FC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>å…³äºæˆ‘ä»¬<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> About<span class="token punctuation">;</span></code></pre><h2 id="9-4-åŒ¹é…è§„åˆ™"><a href="#9-4-åŒ¹é…è§„åˆ™" class="headerlink" title="9.4 åŒ¹é…è§„åˆ™"></a>9.4 åŒ¹é…è§„åˆ™</h2><p><strong>é»˜è®¤ï¼š</strong></p><table><thead><tr><th>è·¯å¾„</th><th>location.pathname</th><th>æ˜¯å¦åŒ¹é…</th></tr></thead><tbody><tr><td>/one</td><td>/one</td><td>æ˜¯</td></tr><tr><td>/one</td><td>/one/</td><td>æ˜¯</td></tr><tr><td>/one</td><td>/one/111</td><td>æ˜¯</td></tr><tr><td>/one</td><td>/one/aaa/bbb</td><td>æ˜¯</td></tr></tbody></table><p><strong>exacté…ç½®ï¼š</strong>exactå±æ€§ä¸ºtrueæ—¶è·¯å¾„ä¸­çš„hashå€¼å¿…é¡»å’Œpathå®Œå…¨ä¸€è‡´æ‰æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œå¦‚æœä¸ºfalseåˆ™â€™/â€˜ä¹Ÿå¯ä»¥åŒ¹é…â€™/xxxâ€™</p><table><thead><tr><th>è·¯å¾„</th><th>location.pathname</th><th>exact</th><th>æ˜¯å¦åŒ¹é…</th></tr></thead><tbody><tr><td>/one</td><td>/one/two</td><td>true</td><td>å¦</td></tr><tr><td>/one</td><td>/one/two</td><td>false</td><td>æ˜¯</td></tr></tbody></table><p><strong>stricté…ç½®ï¼š</strong>strictå±æ€§ä¸»è¦å°±æ˜¯åŒ¹é…åæ–œæ ï¼Œè§„å®šæ˜¯å¦åŒ¹é…æœ«å°¾åŒ…å«åæ–œæ çš„è·¯å¾„ï¼Œå¦‚æœstrictä¸ºtrueï¼Œåˆ™å¦‚æœpathä¸­ä¸åŒ…å«åæ–œæ ç»“å°¾ï¼Œåˆ™ä»–ä¹Ÿä¸èƒ½åŒ¹é…åŒ…å«åæ–œæ ç»“å°¾çš„è·¯å¾„</p><table><thead><tr><th>è·¯å¾„</th><th>location.pathname</th><th>strict</th><th>æ˜¯å¦åŒ¹é…</th></tr></thead><tbody><tr><td>/one/</td><td>/one</td><td>true</td><td>å¦</td></tr><tr><td>/one/</td><td>/one/</td><td>true</td><td>æ˜¯</td></tr><tr><td>/one/</td><td>/one/two</td><td>true</td><td>æ˜¯</td></tr></tbody></table><h2 id="9-5-Switchå’ŒRedirect"><a href="#9-5-Switchå’ŒRedirect" class="headerlink" title="9.5 Switchå’ŒRedirect"></a>9.5 Switchå’ŒRedirect</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>HashRouter<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>è¿™æ˜¯ç½‘ç«™çš„APPæ ¹ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/home"</span><span class="token operator">></span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/movie/top250/10"</span><span class="token operator">></span>ç”µå½±<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>å…³äº<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>      <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/*&lt;/Switch>       Switchè¡¨ç¤ºè·¯ç”±äº’æ–¥ï¼Œå¦‚æœæ²¡æœ‰Switchï¼Œä¼šæ ¹æ®è·¯ç”±æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ç»„ä»¶æ˜¾ç¤º       æ¯”å¦‚http://localhost:3000/#/user  ä¼šæ‰¾åˆ°/ã€/useræ‰€åŒ¹é…çš„è·¯ç”±(ä¸‹é¢homeæ²¡æœ‰æ‰¾åˆ°æ˜¯å› ä¸ºç²¾ç¡®åŒ¹é…äº†)    */</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>Switch<span class="token operator">></span>        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/*        path:/ è¡¨ç¤ºè®¿é—®æ ¹è·¯å¾„çš„æƒ…å†µä¸‹é»˜è®¤è½½å…¥homeç»„ä»¶        exactç²¾ç¡®åŒ¹é…ï¼Œä¸ºäº†ç»™å…¶ä»–ç»„ä»¶ä¸€ä¸ªæœºä¼šè·å–åˆ°urlæ”¹å˜        strict åœ¨ç¡®å®šè·¯å¾„æ˜¯å¦ä¸å½“å‰URLåŒ¹é…æ—¶ï¼Œå°†è€ƒè™‘è·¯å¾„åçš„æ–œçº¿ï¼›       */</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/movie/:type/:id"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Movie<span class="token punctuation">}</span> exact<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span>        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/*æ²¡æœ‰åŒ¹é…åˆ°è·¯å¾„çš„æ—¶å€™é‡å®šå‘åˆ°æ ¹è·¯å¾„*/</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">"/"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>HashRouter<span class="token operator">></span><span class="token punctuation">)</span></code></pre><h2 id="9-6-Reactä¸­çš„ç¼–ç¨‹å¼å¯¼èˆªå’Œè·¯ç”±ä¼ å‚"><a href="#9-6-Reactä¸­çš„ç¼–ç¨‹å¼å¯¼èˆªå’Œè·¯ç”±ä¼ å‚" class="headerlink" title="9.6 Reactä¸­çš„ç¼–ç¨‹å¼å¯¼èˆªå’Œè·¯ç”±ä¼ å‚"></a>9.6 Reactä¸­çš„ç¼–ç¨‹å¼å¯¼èˆªå’Œè·¯ç”±ä¼ å‚</h2><h3 id="9-6-1-withRouterçš„ä½¿ç”¨"><a href="#9-6-1-withRouterçš„ä½¿ç”¨" class="headerlink" title="9.6.1 withRouterçš„ä½¿ç”¨"></a>9.6.1 withRouterçš„ä½¿ç”¨</h3><p>withRouterå¯ä»¥åŒ…è£…ä»»ä½•è‡ªå®šä¹‰ç»„ä»¶ï¼Œå°†react-router çš„ history,location,match ä¸‰ä¸ªå¯¹è±¡ä¼ å…¥ã€‚ </p><pre class=" language-javascript"><code class="language-javascript"> <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/Home"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><blockquote><p> 1.åªæœ‰åŒ…è£¹åœ¨Routeç»„ä»¶é‡Œçš„æ‰èƒ½ä½¿ç”¨<code>props.location</code>ï¼Œ<br> 2.å‡å¦‚æœ‰ä¸ªéœ€æ±‚ï¼Œæ˜¯é¢åŒ…å±‘æˆ–è€…å¯¼èˆªç»„ä»¶é‡Œéœ€è¦æ‹¿åˆ°<code>props.location</code>ï¼ˆå¯¼èˆªç»„ä»¶æˆ–è€…é¢åŒ…å±‘ä¸€èˆ¬ä¸ä¼šåŒ…è£¹åœ¨<code>Route</code>é‡Œï¼‰ï¼Œé‚£ä¹ˆç›´æ¥è¿™ä¹ˆå†™æ˜¾ç„¶å°±ä¸è¡Œäº†ã€‚è¿™ä¸ªæ—¶å€™<code>withRouter</code>ä¿®é¥°ä¸€ä¸‹ï¼Œå°±å¯ä»¥è¿™ä¹ˆå†™äº†ã€‚</p></blockquote><h3 id="9-6-2-ä½¿ç”¨withRouterè·³è½¬é¡µé¢"><a href="#9-6-2-ä½¿ç”¨withRouterè·³è½¬é¡µé¢" class="headerlink" title="9.6.2 ä½¿ç”¨withRouterè·³è½¬é¡µé¢"></a>9.6.2 ä½¿ç”¨withRouterè·³è½¬é¡µé¢</h3><blockquote><p>åªæœ‰åœ¨ <route> åŒ…è£¹çš„ç»„ä»¶ä¸­æ‰èƒ½åœ¨ this.props å±æ€§ä¸­æ‰¾åˆ° history å¯¹è±¡ã€‚ä½†æœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬å°±æ˜¯å¸Œæœ›åœ¨ä¸€ä¸ªæ²¡è¢« <route> åŒ…è£¹çš„ç»„ä»¶ä¸­ç”¨åˆ° history å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç”¨</route></route></p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Header.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> FC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps<span class="token punctuation">,</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token keyword">const</span> Header<span class="token punctuation">:</span> FC<span class="token operator">&lt;</span>RouteComponentProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> goAbout <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pathname<span class="token punctuation">:</span> <span class="token string">"/about"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    ç½‘é¡µå¤´    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>goAbout<span class="token punctuation">}</span><span class="token operator">></span>ç‚¹æˆ‘è·³è½¬Abouté¡µé¢<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Header<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="9-6-3-è·¯ç”±ä¼ å‚"><a href="#9-6-3-è·¯ç”±ä¼ å‚" class="headerlink" title="9.6.3 è·¯ç”±ä¼ å‚"></a>9.6.3 è·¯ç”±ä¼ å‚</h3><p>TS è·¯ç”±æ¥å£ï¼šRouteComponentProps</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">RouterInfo</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> RouteComponentProps<span class="token operator">&lt;</span>RouterInfo<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span>Page productDetail<span class="token operator">/</span>index <span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="a-paramsæ–¹å¼ä¼ å‚"><a href="#a-paramsæ–¹å¼ä¼ å‚" class="headerlink" title="a) paramsæ–¹å¼ä¼ å‚"></a>a) paramsæ–¹å¼ä¼ å‚</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/path/:name'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Path<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/path/2"</span><span class="token operator">></span>xxx<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token punctuation">:</span><span class="token string">"/path/"</span> <span class="token operator">+</span> name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>è¯»å–å‚æ•°ç”¨<span class="token punctuation">:</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>name</code></pre><p>ä¼˜åŠ¿ ï¼š åˆ·æ–°åœ°å€æ ï¼Œå‚æ•°ä¾ç„¶å­˜åœ¨<br>ç¼ºç‚¹  :   åªèƒ½ä¼ å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å¦‚æœä¼ çš„å€¼å¤ªå¤šçš„è¯ï¼Œurlä¼šå˜å¾—é•¿è€Œä¸‘é™‹ã€‚</p><h4 id="b-searchæ–¹å¼ä¼ å‚"><a href="#b-searchæ–¹å¼ä¼ å‚" class="headerlink" title="b) searchæ–¹å¼ä¼ å‚"></a>b) searchæ–¹å¼ä¼ å‚</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/web/departManange '</span> component<span class="token operator">=</span><span class="token punctuation">{</span>DepartManange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>link to<span class="token operator">=</span><span class="token string">"web/departManange?tenantId=12121212"</span><span class="token operator">></span>xxx<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token punctuation">:</span><span class="token string">"/web/departManange"</span><span class="token punctuation">,</span>search<span class="token punctuation">:</span> <span class="token string">'tenantId=12121212'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>è¯»å–å‚æ•°ç”¨<span class="token punctuation">:</span> props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token comment" spellcheck="true">//searchå‚æ•°çš„è§£æ</span>yarn add url <span class="token operator">-</span>S<span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">'url'</span><span class="token keyword">const</span> httpUrl <span class="token operator">=</span> props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>httpUrl<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>query<span class="token punctuation">.</span>tenantId<span class="token punctuation">;</span></code></pre><p>ä¼˜åŠ¿ ï¼š åˆ·æ–°åœ°å€æ ï¼Œå‚æ•°ä¾ç„¶å­˜åœ¨</p><p>ç¼ºç‚¹  :   åªèƒ½ä¼ å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å¦‚æœä¼ çš„å€¼å¤ªå¤šçš„è¯ï¼Œurlä¼šå˜å¾—é•¿è€Œä¸‘é™‹ã€‚</p><h4 id="c-stateæ–¹å¼ä¼ å‚"><a href="#c-stateæ–¹å¼ä¼ å‚" class="headerlink" title="c) stateæ–¹å¼ä¼ å‚"></a>c) stateæ–¹å¼ä¼ å‚</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/sort '</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Sort<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> pathname <span class="token punctuation">:</span> <span class="token string">'/sort'</span> <span class="token punctuation">,</span> state <span class="token punctuation">:</span> <span class="token punctuation">{</span> name <span class="token punctuation">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span> props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token punctuation">:</span><span class="token string">"/sort "</span><span class="token punctuation">,</span>state <span class="token punctuation">:</span> <span class="token punctuation">{</span> name <span class="token punctuation">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>è¯»å–å‚æ•°ç”¨<span class="token punctuation">:</span> props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name </code></pre><p>ä¼˜åŠ¿ï¼šä¼ å‚ä¼˜é›…ï¼Œä¼ é€’å‚æ•°å¯ä¼ å¯¹è±¡ï¼Œstateä¼ çš„å‚æ•°æ˜¯åŠ å¯†çš„<br>ç¼ºç‚¹ï¼šåˆ·æ–°åœ°å€æ ï¼Œå‚æ•°ä¸¢å¤±</p><h2 id="9-7-ç»„ä»¶æ‡’åŠ è½½å’ŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"><a href="#9-7-ç»„ä»¶æ‡’åŠ è½½å’ŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²" class="headerlink" title="9.7 ç»„ä»¶æ‡’åŠ è½½å’ŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"></a>9.7 ç»„ä»¶æ‡’åŠ è½½å’ŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²</h2><p><code>React.lazy</code> å‡½æ•°èƒ½è®©ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥ï¼ˆçš„ç»„ä»¶ï¼‰ã€‚</p><p><code>React.lazy</code> æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦åŠ¨æ€è°ƒç”¨ <code>import()</code>ã€‚å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª <code>defalut</code> export çš„ React ç»„ä»¶ã€‚</p><p>ç„¶ååº”åœ¨ <code>Suspense</code> ç»„ä»¶ä¸­æ¸²æŸ“ lazy ç»„ä»¶(Suspense å°±æ˜¯å®ç°æ‰€è°“çš„å»¶è¿ŸåŠ è½½æ•ˆæœ)ï¼Œå¦‚æ­¤ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨ç­‰å¾…åŠ è½½ lazy ç»„ä»¶æ—¶åšä¼˜é›…é™çº§ï¼ˆå¦‚ loading æŒ‡ç¤ºå™¨ç­‰ï¼‰ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense<span class="token punctuation">,</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./routes/Home'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./routes/About'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Router<span class="token operator">></span>    <span class="token comment" spellcheck="true">//fallback å±æ€§æ¥å—ä»»ä½•åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ä½ æƒ³å±•ç¤ºçš„ React å…ƒç´ </span>    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token operator">&lt;</span>Switch<span class="token operator">></span>        <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="10-é«˜é˜¶ç»„ä»¶"><a href="#10-é«˜é˜¶ç»„ä»¶" class="headerlink" title="10.é«˜é˜¶ç»„ä»¶"></a>10.é«˜é˜¶ç»„ä»¶</h1><h2 id="10-1-é«˜é˜¶å‡½æ•°"><a href="#10-1-é«˜é˜¶å‡½æ•°" class="headerlink" title="10.1 é«˜é˜¶å‡½æ•°"></a>10.1 é«˜é˜¶å‡½æ•°</h2><p><strong>é«˜é˜¶å‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°æˆ–å°†å‡½æ•°ä½œä¸ºè¾“å‡ºè¿”å›</strong></p><ul><li><p>ä¸¾ä¸ªæ —å­:</p><ul><li><p>æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°</p><pre><code>function a(x) {  x();}function b() {  alert('hello');}a(b);</code></pre></li><li><p>å°†å‡½æ•°ä½œä¸ºè¾“å‡ºè¿”å›</p><pre><code>function a() {  function b() {    alert('hello');  }  return b;}a()();</code></pre></li></ul></li><li><p>ä»¥ä¸Šå‡½æ•°aå°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°, ç”¨æ³•éå¸¸ç®€å•, é‚£ä¹ˆå®é™…å¼€å‘ä¸­åˆæœ‰å“ªäº›æ˜¯é«˜é˜¶å‡½æ•°å‘¢ï¼Ÿ</p><ul><li>Array çš„ map ã€reduce ã€filter ç­‰æ–¹æ³•</li><li>Object çš„ keys ã€values ç­‰æ–¹æ³•</li></ul></li></ul><h2 id="10-2-é«˜é˜¶ç»„ä»¶"><a href="#10-2-é«˜é˜¶ç»„ä»¶" class="headerlink" title="10.2 é«˜é˜¶ç»„ä»¶"></a>10.2 é«˜é˜¶ç»„ä»¶</h2><ul><li>æ¦‚å¿µï¼š<strong>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶</strong></li></ul><blockquote><p>é«˜é˜¶ç»„ä»¶å¯ä»¥çœ‹åšæ˜¯è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)åœ¨Reactçš„å®ç°ã€‚å³å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œå±äºåŒ…è£…æ¨¡å¼(Wrapper Pattern)çš„ä¸€ç§ã€‚æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯é‡ç”¨ç»„ä»¶é€»è¾‘</p></blockquote><h3 id="10-2-1-é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-å±æ€§ä»£ç†"><a href="#10-2-1-é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-å±æ€§ä»£ç†" class="headerlink" title="10.2.1 é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-å±æ€§ä»£ç†"></a>10.2.1 é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-å±æ€§ä»£ç†</h3><p>å±æ€§ä»£ç†(Props Proxy)ï¼š<code>HOC</code>æ˜¯åŒ…è£¹åœ¨æ™®é€šç»„ä»¶å¤–é¢çš„ä¸€å±‚é«˜é˜¶å‡½æ•°ï¼Œä»»ä½•è¦ä¼ å…¥æ™®é€šç»„ä»¶å†…çš„<code>props</code> æˆ–è€… <code>state</code> é¦–å…ˆéƒ½è¦ç»è¿‡ <code>HOC</code>ã€‚</p><p><code>props</code>å’Œ <code>state</code>ç­‰å±æ€§åŸæœ¬æ˜¯è¦æµå‘ ç›®æ ‡ç»„ä»¶çš„è…°åŒ…çš„ï¼Œä½†æ˜¯å´è¢« é›è¿‡æ‹”æ¯›çš„<code>HOC</code>æ‹¦è·¯æ‰“åŠ«ï¼Œé‚£ä¹ˆæœ€ç»ˆè¿™äº› <code>props</code>å’Œ <code>states</code>æ•°æ®åˆ°åº•è¿˜èƒ½ä¸èƒ½å†åˆ°è¾¾ ç›®æ ‡ç»„ä»¶ï¼Œæˆ–è€…å“ªäº›èƒ½åˆ°è¾¾ä»¥åŠåˆ°è¾¾å¤šå°‘å°±å…¨ç”± <code>HOC</code>è¯´äº†ç®—äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>HOC</code>æ‹¥æœ‰äº†æå‰å¯¹è¿™äº›å±æ€§è¿›è¡Œä¿®æ”¹çš„èƒ½åŠ›ã€‚</p><p>å±æ€§ä»£ç†çš„ä½œç”¨ï¼š</p><ul><li>æ›´æ”¹prop</li><li>é€šè¿‡refsè·å–ç»„ä»¶å®ä¾‹(ç±»ç»„ä»¶)</li><li>æŠ½è±¡state</li><li>æŠŠWrappedComponentä¸å…¶ä»–elementsåŒ…è£…åœ¨ä¸€èµ·</li></ul><h4 id="a-å±æ€§ä»£ç†-ç”¨å…¶ä»–å…ƒç´ åŒ…è£…ç»„ä»¶"><a href="#a-å±æ€§ä»£ç†-ç”¨å…¶ä»–å…ƒç´ åŒ…è£…ç»„ä»¶" class="headerlink" title="a) å±æ€§ä»£ç†-ç”¨å…¶ä»–å…ƒç´ åŒ…è£…ç»„ä»¶"></a>a) å±æ€§ä»£ç†-ç”¨å…¶ä»–å…ƒç´ åŒ…è£…ç»„ä»¶</h4><p>ä¸ºäº†å°è£…æ ·å¼ã€å¸ƒå±€æˆ–åˆ«çš„ç›®çš„ï¼Œå¯ä»¥ç”¨å…¶å®ƒç»„ä»¶å’Œå…ƒç´ åŒ…è£¹ WrappedComponentã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//è¢«åŒ…è£¹ç»„ä»¶</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> HocComponent <span class="token keyword">from</span> <span class="token string">'../HOC/HocComponent'</span><span class="token keyword">const</span> MyComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>è¢«åŒ…è£¹ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">HocComponent</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é«˜é˜¶ç»„ä»¶</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HocComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> NewComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">"red"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>      <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> NewComponent<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="b-å±æ€§ä»£ç†-æ›´æ”¹props"><a href="#b-å±æ€§ä»£ç†-æ›´æ”¹props" class="headerlink" title="b) å±æ€§ä»£ç†-æ›´æ”¹props"></a>b) å±æ€§ä»£ç†-æ›´æ”¹props</h4><p>åœ¨é«˜é˜¶ç»„ä»¶ä¸­æ·»åŠ æ–°çš„ propsï¼Œå¯ä»¥åœ¨ WrappedComponent ä¸­é€šè¿‡ this.props.nameè®¿é—®åˆ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//MyComponent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> HocComponent <span class="token keyword">from</span> <span class="token string">'../HOC/HocComponent'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> PrametersType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../HOC/Type'</span><span class="token keyword">const</span> MyComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>PrametersType<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>Hello React <span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">HocComponent</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//HocComponent.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> PrametersType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Type'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HocComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>PrametersType<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> NewComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>PrametersType<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>WrappedComponent<span class="token operator">></span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> NewComponent<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//Type.tsx</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">export</span> type PrametersType <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token operator">?</span><span class="token punctuation">:</span>string<span class="token punctuation">}</span></code></pre><h4 id="c-å±æ€§ä»£ç†-æŠ½å–å…¬å…±state"><a href="#c-å±æ€§ä»£ç†-æŠ½å–å…¬å…±state" class="headerlink" title="c) å±æ€§ä»£ç†-æŠ½å–å…¬å…±state"></a>c) å±æ€§ä»£ç†-æŠ½å–å…¬å…±state</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//MyInput.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">const</span> MyInput<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> MyInput<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//MyTextArea.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">const</span> MyTextArea<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLTextAreaElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> MyTextArea<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.tsx</span><span class="token keyword">import</span> MyInput <span class="token keyword">from</span> <span class="token string">'./components7/MyInput'</span><span class="token keyword">import</span> MyTextArea <span class="token keyword">from</span> <span class="token string">'./components7/MyTextArea'</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>MyInput<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>MyInput<span class="token operator">></span>  <span class="token operator">&lt;</span>MyTextArea<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>MyTextArea<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//è¿™è¾¹ä»£ç å­˜åœ¨çš„é—®é¢˜ï¼šMyInputå’ŒMyTextAreaç»„ä»¶éƒ½æœ‰è‡ªå·±çš„stateå’Œchangeæ–¹æ³•ï¼Œä»£ç é‡ç”¨æ€§å¤ªå¤§</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//MyInput.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token punctuation">{</span>TextPrametersType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../HOC/Type'</span><span class="token keyword">import</span> HocTextComponent <span class="token keyword">from</span> <span class="token string">'../HOC/HocTextComponent'</span><span class="token keyword">const</span> MyInput<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>TextPrametersType<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>change<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">HocTextComponent</span><span class="token punctuation">(</span>MyInput<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//MyTextArea.tsx</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token punctuation">{</span>TextPrametersType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../HOC/Type'</span><span class="token keyword">import</span> HocTextComponent <span class="token keyword">from</span> <span class="token string">'../HOC/HocTextComponent'</span><span class="token keyword">const</span> MyTextArea<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>TextPrametersType<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>change<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> MyTextArea<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//HocTextComponent.tsx      </span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> SFC<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> TextPrametersType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Type'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HocTextComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">:</span> SFC<span class="token operator">&lt;</span>TextPrametersType<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> NewComponent<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC<span class="token operator">&lt;</span>TextPrametersType<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">|</span>HTMLTextAreaElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>      value<span class="token punctuation">:</span> value<span class="token punctuation">,</span>      change<span class="token punctuation">:</span> handleChange    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>newProps<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>WrappedComponent<span class="token operator">></span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> NewComponent<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//Type.tsx</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">export</span> type TextPrametersType <span class="token operator">=</span> <span class="token punctuation">{</span>  value<span class="token operator">?</span><span class="token punctuation">:</span>string<span class="token punctuation">,</span>  change<span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">}</span></code></pre><h3 id="10-2-2-é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-åå‘ç»§æ‰¿"><a href="#10-2-2-é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-åå‘ç»§æ‰¿" class="headerlink" title="10.2.2 é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-åå‘ç»§æ‰¿"></a>10.2.2 é«˜é˜¶ç»„ä»¶çš„å®ç°æ–¹å¼-åå‘ç»§æ‰¿</h3><p>åå‘ç»§æ‰¿( Inheritance Inversion )ï¼šè¿”å›çš„ HOC ç±»ï¼ˆEnhancerï¼‰ç»§æ‰¿äº† WrappedComponentã€‚ä¹‹æ‰€ä»¥è¢«ç§°ä¸º Inheritance Inversion æ˜¯å› ä¸º WrappedComponent è¢« Enhancer ç»§æ‰¿äº†ï¼Œè€Œä¸æ˜¯ WrappedComponent ç»§æ‰¿äº† Enhancerã€‚åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå®ƒä»¬çš„å…³ç³»çœ‹ä¸Šå»è¢«åè½¬ï¼ˆinverseï¼‰äº†ã€‚</p><p>é€šè¿‡ç»§æ‰¿WrappedComponentï¼Œé™¤äº†ä¸€äº›é™æ€æ–¹æ³•ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸï¼Œstateï¼Œå„ç§functionï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">iiHOC</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Enhancer</span> <span class="token keyword">extends</span> <span class="token class-name">WrappedComponent</span> <span class="token punctuation">{</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åå‘ç»§æ‰¿çš„ä½œç”¨ï¼š</p><ul><li>æ¸²æŸ“åŠ«æŒ</li><li>æ“ä½œstate</li></ul><h4 id="a-åå‘ç»§æ‰¿-æ¸²æŸ“åŠ«æŒ"><a href="#a-åå‘ç»§æ‰¿-æ¸²æŸ“åŠ«æŒ" class="headerlink" title="a) åå‘ç»§æ‰¿-æ¸²æŸ“åŠ«æŒ"></a>a) åå‘ç»§æ‰¿-æ¸²æŸ“åŠ«æŒ</h4><p>ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæ¸²æŸ“åŠ«æŒæ˜¯å› ä¸º HOC æ§åˆ¶ç€ WrappedComponent çš„æ¸²æŸ“è¾“å‡ºï¼Œå¯ä»¥ç”¨å®ƒåšå„ç§å„æ ·çš„äº‹ã€‚é€šè¿‡æ¸²æŸ“åŠ«æŒå¯ä»¥ï¼š</p><ul><li>åœ¨ç”± renderè¾“å‡ºçš„ä»»ä½• React å…ƒç´ ä¸­è¯»å–ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ props</li><li>è¯»å–å’Œä¿®æ”¹ç”± render è¾“å‡ºçš„ React å…ƒç´ æ ‘</li><li>æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ æ ‘</li><li>æŠŠæ ·å¼åŒ…è£¹è¿›å…ƒç´ æ ‘ï¼ˆå°±åƒåœ¨ Props Proxy ä¸­çš„é‚£æ ·ï¼‰</li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'./logo.svg'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>p name<span class="token operator">=</span><span class="token string">"pp"</span><span class="token operator">></span>è¢«åŒ…è£¹ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">iiHOC</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ComponentClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Enhancer</span> <span class="token keyword">extends</span> <span class="token class-name">WrappedComponent</span> <span class="token punctuation">{</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//super.render() è°ƒç”¨çˆ¶ç±»çš„æ¸²æŸ“æ–¹æ³•  è·å–åˆ°çˆ¶ç±»çš„æ¸²æŸ“ç»“æœ</span>      <span class="token keyword">const</span> elementsTree <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//åœ¨çˆ¶äº²çš„æ¸²æŸ“ç»“æœä¸Šæ–°å¢ä¸€ä¸ªå±æ€§</span>      <span class="token keyword">let</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span> style<span class="token punctuation">:</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">"red"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//elementsTree as ReactElement ç±»å‹æ¨å¯¼</span>      <span class="token keyword">const</span> props <span class="token operator">=</span> elementsTree <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>elementsTree <span class="token keyword">as</span> ReactElement<span class="token punctuation">)</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>      <span class="token keyword">const</span> p <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> newProps<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> newElement <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>        elementsTree <span class="token keyword">as</span> ReactElement<span class="token punctuation">,</span>        p<span class="token punctuation">,</span>        props<span class="token punctuation">.</span>children      <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//è¿”å›æ–°çš„é¡µé¢</span>      <span class="token keyword">return</span> newElement<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> NewComponent <span class="token operator">=</span> <span class="token function">iiHOC</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>NewComponent<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>NewComponent<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre><h4 id="b-åå‘ç»§æ‰¿-ä¿®æ”¹state"><a href="#b-åå‘ç»§æ‰¿-ä¿®æ”¹state" class="headerlink" title="b) åå‘ç»§æ‰¿-ä¿®æ”¹state"></a>b) åå‘ç»§æ‰¿-ä¿®æ”¹state</h4><p>HOC å¯ä»¥è¯»å–ã€ç¼–è¾‘å’Œåˆ é™¤ WrappedComponent å®ä¾‹çš„ stateï¼Œå¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥ç»™å®ƒæ·»åŠ æ›´å¤šçš„ stateã€‚ä½†æ˜¯è¿™ä¼šæä¹± WrappedComponent çš„ stateï¼Œå¯èƒ½ä¼šå¯¼è‡´ç ´åæŸäº›ä¸œè¥¿ï¼Œé€šå¸¸ä¸å»ºè®®ä½¿ç”¨é«˜é˜¶ç»„ä»¶ä¿®æ”¹æ·»åŠ stateã€‚</p><p>ä¸‹é¢é€šè¿‡è®¿é—® WrappedComponent çš„ props å’Œ state æ¥åšæµ‹è¯•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">IIHOCDEBUGGER</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ComponentClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">II</span> <span class="token keyword">extends</span> <span class="token class-name">WrappedComponent</span> <span class="token punctuation">{</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>div<span class="token operator">></span>          <span class="token operator">&lt;</span>h2<span class="token operator">></span>HOC Debugger Component<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>          <span class="token operator">&lt;</span>p<span class="token operator">></span>Props<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span> <span class="token operator">&lt;</span>pre<span class="token operator">></span><span class="token punctuation">{</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>          <span class="token operator">&lt;</span>p<span class="token operator">></span>State<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token operator">&lt;</span>pre<span class="token operator">></span><span class="token punctuation">{</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>          <span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="11-å®‰è£…-React-Developer-Tools-è°ƒè¯•å·¥å…·"><a href="#11-å®‰è£…-React-Developer-Tools-è°ƒè¯•å·¥å…·" class="headerlink" title="11.å®‰è£… React Developer Tools è°ƒè¯•å·¥å…·"></a>11.å®‰è£… React Developer Tools è°ƒè¯•å·¥å…·</h1><p><a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=zh-CN">React Developer Tools - Chrome æ‰©å±•ä¸‹è½½å®‰è£…åœ°å€</a></p><h1 id="12-ç›¸å…³æ–‡ç« "><a href="#12-ç›¸å…³æ–‡ç« " class="headerlink" title="12. ç›¸å…³æ–‡ç« "></a>12. ç›¸å…³æ–‡ç« </h1><ul><li><a href="https://mp.weixin.qq.com/s/gV-w_rRfdBVAqsOpBGZaVw">2018 å¹´ï¼ŒReact å°†ç‹¬å å‰ç«¯æ¡†æ¶é³Œå¤´ï¼Ÿ</a></li><li><a href="https://mp.weixin.qq.com/s/0wXWqKIigaKzMSfy4vJMVw">å‰ç«¯æ¡†æ¶ä¸‰å·¨å¤´å¹´åº¦èµ°åŠ¿å¯¹æ¯”ï¼šVue å¢é•¿ç‡æœ€é«˜</a></li></ul><ul><li><a href="http://www.cnblogs.com/tim100/p/6050514.html">Reactæ•°æ®æµå’Œç»„ä»¶é—´çš„æ²Ÿé€šæ€»ç»“</a></li><li><a href="https://segmentfault.com/q/1010000005876655/a-1020000005876751">å•å‘æ•°æ®æµå’ŒåŒå‘ç»‘å®šå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</a></li><li><a href="https://www.zhihu.com/question/29504639?sort=created">æ€ä¹ˆæ›´å¥½çš„ç†è§£è™šæ‹ŸDOM?</a></li><li><a href="http://www.css88.com/react/index.html">Reactä¸­æ–‡æ–‡æ¡£ - ç‰ˆæœ¬è¾ƒä½</a></li><li><a href="http://blog.csdn.net/yczz/article/details/49886061">React æºç å‰–æç³»åˆ— ï¼ ä¸å¯æ€è®®çš„ react diff</a></li><li><a href="http://www.infoq.com/cn/articles/react-dom-diff?from=timeline&amp;isappinstalled=0">æ·±å…¥æµ…å‡ºReactï¼ˆå››ï¼‰ï¼šè™šæ‹ŸDOM Diffç®—æ³•è§£æ</a></li><li><a href="http://www.cocoachina.com/webapp/20150721/12692.html">ä¸€çœ‹å°±æ‡‚çš„ReactJså…¥é—¨æ•™ç¨‹ï¼ˆç²¾åç‰ˆï¼‰</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/06/css_modules.html">CSS Modules ç”¨æ³•æ•™ç¨‹</a></li><li><a href="http://blog.csdn.net/itzhongzi/article/details/66045880">å°†MarkDownè½¬æ¢ä¸ºHTMLé¡µé¢</a></li><li><a href="https://jingyan.baidu.com/article/0320e2c1c9cf0e1b87507b26.html">win7å‘½ä»¤è¡Œ ç«¯å£å ç”¨ æŸ¥è¯¢è¿›ç¨‹å· æ€è¿›ç¨‹</a></li><li><a href="https://facebook.github.io/react/docs/typechecking-with-proptypes.html">ç±»å‹æ ¡éªŒ</a></li></ul><ul><li><a href="https://reactjs.org/docs/animation.html#high-level-api-reactcsstransitiongroup">Animation Add-Ons</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScriptçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2020/01/30/typescript/"/>
      <url>2020/01/30/typescript/</url>
      
        <content type="html"><![CDATA[<h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><h2 id="1-1-TSç®€ä»‹"><a href="#1-1-TSç®€ä»‹" class="headerlink" title="1.1 TSç®€ä»‹"></a>1.1 TSç®€ä»‹</h2><p>TypeScript æ˜¯ JavaScript çš„å¼ºç±»å‹ç‰ˆæœ¬ã€‚ç„¶ååœ¨ç¼–è¯‘æœŸå»æ‰ç±»å‹å’Œç‰¹æœ‰è¯­æ³•ï¼Œç”Ÿæˆçº¯ç²¹çš„ JavaScript ä»£ç ã€‚ç”±äºæœ€ç»ˆåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»ç„¶æ˜¯ JavaScriptï¼Œæ‰€ä»¥ TypeScript å¹¶ä¸ä¾èµ–äºæµè§ˆå™¨çš„æ”¯æŒï¼Œä¹Ÿå¹¶ä¸ä¼šå¸¦æ¥å…¼å®¹æ€§é—®é¢˜ã€‚</p><p>TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œè¿™æ„å‘³ç€ä»–æ”¯æŒæ‰€æœ‰çš„ JavaScript è¯­æ³•ã€‚å¹¶åœ¨æ­¤ä¹‹ä¸Šå¯¹ JavaScript æ·»åŠ äº†ä¸€äº›æ‰©å±•ï¼Œå¦‚ class / interface / module ç­‰ã€‚è¿™æ ·ä¼šå¤§å¤§æå‡ä»£ç çš„å¯é˜…è¯»æ€§ã€‚</p><p>å’Œ JavaScript å¼±ç±»å‹ä¸åŒï¼ŒTypeScript è¿™ç§å¼ºç±»å‹è¯­è¨€æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºé™æ€ç±»å‹æ£€æŸ¥ï¼Œå¯ä»¥åœ¨ä»£ç å¼€å‘é˜¶æ®µå°±é¢„çŸ¥ä¸€äº›ä½çº§é”™è¯¯çš„å‘ç”Ÿã€‚</p><ul><li>ä¸€ç§ç±»ä¼¼äº JavaScript çš„è¯­è¨€ï¼Œåœ¨ JavaScript çš„åŸºç¡€ä¹‹ä¸Šå¢åŠ äº†ç±»å‹ï¼ŒåŒæ—¶å¢å¼ºäº† JavaScript éƒ¨åˆ†è¯­æ³•åŠŸèƒ½</li><li>éµå¾ª EcmaScript 6 æ ‡å‡†è§„èŒƒ</li><li>ç”±å¾®è½¯å¼€å‘</li><li>Angular 2 æ¡†æ¶é‡‡ç”¨ TypeScript ç¼–å†™</li><li>èƒŒåæœ‰å¾®è½¯å’Œè°·æ­Œä¸¤å¤§å…¬å¸çš„æ”¯æŒ</li><li>TypeScript å¯ä»¥ç¼–è¯‘æˆ JavaScript ä»è€Œåœ¨æ”¯æŒ JavaScript çš„ç¯å¢ƒä¸­è¿è¡Œ</li><li>TypeScript å’Œ JavaScript çš„å…³ç³»å°±å¥½æ¯” less å’Œ css çš„å…³ç³»</li></ul><p>TypeScript ä¸­æ–‡ç½‘     <a href="https://www.tslang.cn/">https://www.tslang.cn/</a></p><p>åœ¨çº¿ç¼–è¯‘ç¯å¢ƒ              <a href="https://www.typescriptlang.org/play/index.html">https://www.typescriptlang.org/play/index.html</a></p><h2 id="1-2-TSç¯å¢ƒæ­å»º"><a href="#1-2-TSç¯å¢ƒæ­å»º" class="headerlink" title="1.2 TSç¯å¢ƒæ­å»º"></a>1.2 TSç¯å¢ƒæ­å»º</h2><ol><li>æ‰“å¼€å‘½ä»¤è¡Œï¼Œé”®å…¥<code>npm i -g typescript</code> å…¨å±€å®‰è£…TS</li><li>ç»§ç»­åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸‹é”®å…¥ <code>tsc -init</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œ<br>ä½ ä¼šå‘ç°æ ¹ç›®å½•ä¸‹å¤šäº† tsconfig.json çš„æ–‡ä»¶ï¼Œè®°å½•äº†ç¼–è¯‘æˆJSçš„é€‰é¡¹</li><li>åˆ›å»ºtsæ–‡ä»¶</li><li>æ‰“å¼€VSCodeè¿›å…¥è¯¥ç›®å½•ï¼ŒæŒ‰ä¸‹ Ctrl+shift+B å¿«æ·é”®ä¼šè¿›è¡Œç¼–è¯‘ï¼Œåˆæ¬¡ç¼–è¯‘ä¼šé€‰æ‹©ç¼–è¯‘æ¨¡å¼</li><li>è¾“å…¥nodeå‘½ä»¤è¿è¡Œjsä»£ç </li></ol><h2 id="1-3-å˜é‡å£°æ˜"><a href="#1-3-å˜é‡å£°æ˜" class="headerlink" title="1.3 å˜é‡å£°æ˜"></a>1.3 å˜é‡å£°æ˜</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">var</span><span class="token operator">-</span> ä½œç”¨åŸŸ <span class="token punctuation">:</span> å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸ<span class="token operator">-</span> é‡å¤å£°æ˜<span class="token operator">-</span> å˜é‡æå‡<span class="token keyword">let</span><span class="token operator">-</span> å—çº§ä½œç”¨åŸŸ<span class="token operator">-</span> åœ¨åŒä¸€ä¸ªå—ä¸­ä¸èƒ½é‡å¤å£°æ˜<span class="token keyword">const</span><span class="token operator">-</span> å£°æ˜åŒæ—¶å¿…é¡»èµ‹å€¼<span class="token operator">-</span> ä¸€æ—¦å£°æ˜ä¸å¯æ”¹å˜ï¼ˆå¯¹è±¡å¯ä»¥ä¿®æ”¹ï¼‰<span class="token operator">-</span> å—çº§ä½œç”¨åŸŸ</code></pre><h2 id="1-4-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#1-4-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="1.4 åŸºæœ¬æ•°æ®ç±»å‹"></a>1.4 åŸºæœ¬æ•°æ®ç±»å‹</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å­—ç¬¦ä¸²</span><span class="token keyword">var</span> uname<span class="token punctuation">:</span><span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">"zhangsan"</span><span class="token punctuation">;</span><span class="token keyword">let</span> nickname<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">;</span><span class="token keyword">let</span> isDone<span class="token punctuation">:</span> <span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span><span class="token keyword">let</span> age<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">;</span><span class="token keyword">let</span> sentence<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`Hello, my nickname is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> nickname <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.I'll be </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> age <span class="token operator">+</span> <span class="token number">1</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old next month.`</span></span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//æ•°ç»„</span><span class="token comment" spellcheck="true">//TypeScriptåƒJavaScriptä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚ æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰æ•°ç»„ã€‚ ç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š[]ï¼Œè¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼š</span><span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨æ•°ç»„æ³›å‹ï¼ŒArray&lt;å…ƒç´ ç±»å‹>ï¼š</span><span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//tsçš„æ•°ç»„åªèƒ½å­˜æ”¾å•ä¸€æ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œå…ƒç»„åˆ™å¯ä»¥å¾ˆå¥½çš„è§£å†³æ­¤é—®é¢˜ã€‚</span><span class="token comment" spellcheck="true">//å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸ºstringå’Œnumberç±»å‹çš„å…ƒç»„ã€‚</span><span class="token comment" spellcheck="true">// Declare a tuple type</span><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">,</span> number<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Initialize it</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// Initialize it incorrectly</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//objectç±»å‹</span><span class="token operator">-</span> å…è®¸èµ‹ä»»æ„å€¼<span class="token operator">-</span> ä½†æ˜¯ä¸èƒ½è°ƒç”¨ä»»æ„æ–¹æ³•ï¼Œå³ä¾¿å®ƒçœŸçš„æœ‰<span class="token keyword">let</span> foo<span class="token punctuation">:</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>  age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//çŸ¥é“å³å¯ï¼Œç”¨çš„å¾ˆå°‘ï¼Œæ²¡æœ‰ç±»å‹æ ¡éªŒå’Œè¯­æ³•æç¤º</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Any</span><span class="token comment" spellcheck="true">//æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚ è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ anyç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡ï¼š</span><span class="token keyword">let</span> notSure<span class="token punctuation">:</span> any <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>notSure <span class="token operator">=</span> <span class="token string">"maybe a string instead"</span><span class="token punctuation">;</span>notSure <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay, definitely a boolean</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Void ç±»å‹</span><span class="token comment" spellcheck="true">//voidç±»å‹åƒæ˜¯ä¸anyç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidï¼š</span><span class="token keyword">function</span> <span class="token function">warnUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"This is my warning message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªvoidç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆundefinedï¼š</span><span class="token keyword">let</span> unusable<span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> undefined<span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//Null å’Œ Undefined</span><span class="token comment" spellcheck="true">// Not much else we can assign to these variables!</span><span class="token keyword">let</span> u<span class="token punctuation">:</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span><span class="token keyword">let</span> n<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//never    </span>never æ˜¯å…¶å®ƒç±»å‹ï¼ˆåŒ…æ‹¬ <span class="token keyword">null</span> å’Œ undefinedï¼‰çš„å­ç±»å‹ï¼Œä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼ã€‚<span class="token keyword">let</span> x<span class="token punctuation">:</span> never<span class="token punctuation">;</span><span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿è¡Œé”™è¯¯ï¼Œæ•°å­—ç±»å‹ä¸èƒ½è½¬ä¸º never ç±»å‹</span>x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿è¡Œæ­£ç¡®ï¼Œnever ç±»å‹å¯ä»¥èµ‹å€¼ç»™ neverç±»å‹</span>x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'exception'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿è¡Œæ­£ç¡®ï¼Œnever ç±»å‹å¯ä»¥èµ‹å€¼ç»™ æ•°å­—ç±»å‹</span>y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'exception'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿”å›å€¼ä¸º never çš„å‡½æ•°å¯ä»¥æ˜¯æŠ›å‡ºå¼‚å¸¸çš„æƒ…å†µ</span><span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> never <span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è¿”å›å€¼ä¸º never çš„å‡½æ•°å¯ä»¥æ˜¯æ— æ³•è¢«æ‰§è¡Œåˆ°çš„ç»ˆæ­¢ç‚¹çš„æƒ…å†µ</span><span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> never <span class="token punctuation">{</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ç±»å‹æ¨æ–­</span><span class="token comment" spellcheck="true">// æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯”TypeScriptæ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚ é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚</span><span class="token comment" spellcheck="true">// é€šè¿‡ç±»å‹æ–­è¨€è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆâ€ã€‚ ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ TypeScriptä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚</span><span class="token comment" spellcheck="true">// ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š</span><span class="token keyword">let</span> someValue<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span><span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span>someValue<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¦ä¸€ä¸ªä¸ºasè¯­æ³•ï¼š</span><span class="token keyword">let</span> someValue<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token string">"this is a string"</span><span class="token punctuation">;</span><span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>someValue as <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸¤ç§å½¢å¼æ˜¯ç­‰ä»·çš„ã€‚ è‡³äºä½¿ç”¨å“ªä¸ªå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å‡­ä¸ªäººå–œå¥½ï¼›ç„¶è€Œï¼Œå½“ä½ åœ¨TypeScripté‡Œä½¿ç”¨JSXæ—¶ï¼Œåªæœ‰ asè¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//æšä¸¾ç±»å‹</span><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> c<span class="token punctuation">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Blue<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è¾“å‡º 2</span></code></pre><h2 id="1-5-è§£æ„èµ‹å€¼"><a href="#1-5-è§£æ„èµ‹å€¼" class="headerlink" title="1.5 è§£æ„èµ‹å€¼"></a>1.5 è§£æ„èµ‹å€¼</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//æ•°ç»„è§£æ„</span><span class="token keyword">let</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span> <span class="token operator">=</span> input<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// outputs 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// outputs 2</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ä¸Šé¢çš„å†™æ³•ç­‰ä»·äºï¼š</span>first <span class="token operator">=</span> input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>second <span class="token operator">=</span> input<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//åˆ©ç”¨è§£æ„èµ‹å€¼äº¤æ¢å˜é‡ï¼š</span><span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>second<span class="token punctuation">,</span> first<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å‡½æ•°å‚æ•°è§£æ„ï¼š</span><span class="token comment" spellcheck="true">//å‡½æ•°å‚æ•°è§£æ„ï¼š</span><span class="token keyword">function</span> <span class="token function">ff</span><span class="token punctuation">(</span><span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">number</span><span class="token punctuation">,</span> <span class="token keyword">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">ff</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//è§£æ„å‰©ä½™å‚æ•°ï¼š</span><span class="token keyword">let</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// [2, 3, 4]</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ä¹Ÿå¯ä»¥å¿½ç•¥å…¶å®ƒå‚æ•°ï¼š</span><span class="token keyword">let</span> <span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// outputs 1</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//æˆ–è€…è·³è¿‡è§£æ„ï¼š</span><span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> second<span class="token punctuation">,</span> <span class="token punctuation">,</span> fourth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å¯¹è±¡è§£æ„</span><span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>    a<span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>    b<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>    c<span class="token punctuation">:</span> <span class="token string">"bar"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//let { a, b } = o;</span><span class="token comment" spellcheck="true">//let {a, b}: {a: string, b: number} = o;</span><span class="token comment" spellcheck="true">//ä½ å¯ä»¥åœ¨å¯¹è±¡é‡Œä½¿ç”¨ ... è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š</span><span class="token keyword">let</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> <span class="token operator">...</span>passthrough <span class="token punctuation">}</span> <span class="token operator">=</span> o<span class="token punctuation">;</span><span class="token keyword">let</span> total <span class="token operator">=</span> passthrough<span class="token punctuation">.</span>b <span class="token operator">+</span> passthrough<span class="token punctuation">.</span>c<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å±æ€§è§£æ„é‡å‘½å</span><span class="token comment" spellcheck="true">//ä½ ä¹Ÿå¯ä»¥ç»™å±æ€§ä»¥ä¸åŒçš„åå­—ï¼š</span><span class="token keyword">let</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> newName1<span class="token punctuation">,</span> b<span class="token punctuation">:</span> newName2 <span class="token punctuation">}</span> <span class="token operator">=</span> o<span class="token punctuation">;</span></code></pre><h2 id="1-6-å±•å¼€æ“ä½œç¬¦-â€¦"><a href="#1-6-å±•å¼€æ“ä½œç¬¦-â€¦" class="headerlink" title="1.6 å±•å¼€æ“ä½œç¬¦ (â€¦)"></a>1.6 å±•å¼€æ“ä½œç¬¦ (â€¦)</h2><ul><li>å±•å¼€æ•°ç»„</li><li>å±•å¼€å¯¹è±¡</li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token keyword">let</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj1<span class="token punctuation">,</span> <span class="token operator">...</span>obj2 <span class="token punctuation">}</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">,</span>obj3<span class="token punctuation">)</span></code></pre><h2 id="1-7-å‡½æ•°"><a href="#1-7-å‡½æ•°" class="headerlink" title="1.7 å‡½æ•°"></a>1.7 å‡½æ•°</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å‡½æ•°å‚æ•°</span><span class="token comment" spellcheck="true">//å‚æ•°åŠè¿”å›å€¼ç±»å‹</span><span class="token comment" spellcheck="true">//function å‡½æ•°åå­—(å‚æ•°1,å‚æ•°2,å‚æ•°3):å‡½æ•°è¿”å›å€¼{å‡½æ•°ä½“}</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å¯é€‰å‚æ•°</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//é»˜è®¤å‚æ•°</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å‰©ä½™å‚æ•°</span><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> ret<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span>    args<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        ret <span class="token operator">+</span><span class="token operator">=</span> item    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> ret<span class="token punctuation">}</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ç®­å¤´å‡½æ•°</span><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> y</code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å‡½æ•°é‡è½½ï¼šé‡è½½æ˜¯æ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒï¼Œè¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚</span><span class="token comment" spellcheck="true">//æ¯ä¸ªé‡è½½çš„æ–¹æ³•ï¼ˆæˆ–è€…æ„é€ å‡½æ•°ï¼‰éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å‚æ•°ç±»å‹åˆ—è¡¨ã€‚</span><span class="token comment" spellcheck="true">//å‚æ•°ç±»å‹ä¸åŒï¼š</span><span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‚æ•°æ•°é‡ä¸åŒï¼š</span><span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span>n1<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‚æ•°ç±»å‹é¡ºåºä¸åŒï¼š</span><span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span>n1<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>s1<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token keyword">function</span> <span class="token function">disp</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span>n<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span></code></pre><h2 id="1-8-è”åˆç±»å‹"><a href="#1-8-è”åˆç±»å‹" class="headerlink" title="1.8 è”åˆç±»å‹"></a>1.8 è”åˆç±»å‹</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//è”åˆç±»å‹ï¼ˆUnion Typesï¼‰å¯ä»¥é€šè¿‡ç®¡é“(|)å°†å˜é‡è®¾ç½®å¤šç§ç±»å‹ï¼Œèµ‹å€¼æ—¶å¯ä»¥æ ¹æ®è®¾ç½®çš„ç±»å‹æ¥èµ‹å€¼ã€‚</span><span class="token keyword">var</span> val<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token operator">|</span><span class="token keyword">number</span> val <span class="token operator">=</span> <span class="token number">12</span> val <span class="token operator">=</span> <span class="token string">"Runoob"</span> <span class="token keyword">var</span> arr<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">var</span> i<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">;</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Runoob"</span><span class="token punctuation">,</span><span class="token string">"Google"</span><span class="token punctuation">,</span><span class="token string">"Taobao"</span><span class="token punctuation">]</span> </code></pre><h2 id="1-9-ç±»"><a href="#1-9-ç±»" class="headerlink" title="1.9 ç±»"></a>1.9 ç±»</h2><h3 id="1-9-1-ç±»çš„åŸºæœ¬ä½¿ç”¨"><a href="#1-9-1-ç±»çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="1.9.1 ç±»çš„åŸºæœ¬ä½¿ç”¨"></a>1.9.1 ç±»çš„åŸºæœ¬ä½¿ç”¨</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//åŸºæœ¬ç¤ºä¾‹</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    age<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ„é€ å‡½æ•°</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> zs<span class="token punctuation">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="1-8-2-superå…³é”®å­—çš„ä½¿ç”¨"><a href="#1-8-2-superå…³é”®å­—çš„ä½¿ç”¨" class="headerlink" title="1.8.2 superå…³é”®å­—çš„ä½¿ç”¨"></a>1.8.2 superå…³é”®å­—çš„ä½¿ç”¨</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ç»§æ‰¿</span><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Animal moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof! Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿™ä¸ªä¾‹å­å±•ç¤ºäº†æœ€åŸºæœ¬çš„ç»§æ‰¿ï¼šç±»ä»åŸºç±»ä¸­ç»§æ‰¿äº†å±æ€§å’Œæ–¹æ³•ã€‚ è¿™é‡Œï¼Œ Dogæ˜¯ä¸€ä¸ª æ´¾ç”Ÿç±»ï¼Œå®ƒæ´¾ç”Ÿè‡ª Animal åŸºç±»ï¼Œé€šè¿‡ extendså…³é”®å­—ã€‚ æ´¾ç”Ÿç±»é€šå¸¸è¢«ç§°ä½œ å­ç±»ï¼ŒåŸºç±»é€šå¸¸è¢«ç§°ä½œ è¶…ç±»ã€‚</span><span class="token comment" spellcheck="true">//å› ä¸º Dogç»§æ‰¿äº† Animalçš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Dogçš„å®ä¾‹ï¼Œå®ƒèƒ½å¤Ÿ bark()å’Œ move()ã€‚</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼š</span><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Snake</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Slithering..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Horse</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters <span class="token operator">=</span> <span class="token number">45</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Galloping..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> sam <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Snake</span><span class="token punctuation">(</span><span class="token string">"Sammy the Python"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> tom<span class="token punctuation">:</span> Animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Horse</span><span class="token punctuation">(</span><span class="token string">"Tommy the Palomino"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sam<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tom<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸å‰ä¸€ä¸ªä¾‹å­çš„ä¸åŒç‚¹æ˜¯ï¼Œæ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒ å¿…é¡»è°ƒç”¨ super()ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® thisçš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬ ä¸€å®šè¦è°ƒç”¨ super()ã€‚ è¿™ä¸ªæ˜¯TypeScriptå¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚</span><span class="token comment" spellcheck="true">//è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•åœ¨å­ç±»é‡Œå¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ Snakeç±»å’Œ Horseç±»éƒ½åˆ›å»ºäº† moveæ–¹æ³•ï¼Œå®ƒä»¬é‡å†™äº†ä»Animalç»§æ‰¿æ¥çš„ moveæ–¹æ³•ï¼Œä½¿å¾— moveæ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼Œå³ä½¿ tomè¢«å£°æ˜ä¸ºAnimalç±»å‹ï¼Œä½†å› ä¸ºå®ƒçš„å€¼æ˜¯ Horseï¼Œè°ƒç”¨ tom.move(34)æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ Horseé‡Œé‡å†™çš„æ–¹æ³•ï¼š</span>Slithering<span class="token operator">...</span>Sammy the Python moved 5m<span class="token punctuation">.</span>Galloping<span class="token operator">...</span>Tommy the Palomino moved 34m<span class="token punctuation">.</span></code></pre><h3 id="1-9-3-æˆå‘˜ä¿®é¥°ç¬¦"><a href="#1-9-3-æˆå‘˜ä¿®é¥°ç¬¦" class="headerlink" title="1.9.3 æˆå‘˜ä¿®é¥°ç¬¦"></a>1.9.3 æˆå‘˜ä¿®é¥°ç¬¦</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//public å…¬å…±çš„</span><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//private ç§æœ‰çš„</span><span class="token operator">-</span> ä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨è®¿é—®ä½¿ç”¨<span class="token operator">-</span> ç§æœ‰æˆå‘˜ä¸ä¼šè¢«ç»§æ‰¿<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> age<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> type<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">'human'</span>  <span class="token keyword">public</span> <span class="token keyword">constructor</span> <span class="token punctuation">(</span>name<span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//protected å—ä¿æŠ¤çš„</span><span class="token operator">-</span> å’Œ <span class="token keyword">private</span> ç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥è¢«ç»§æ‰¿<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">protected</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>department <span class="token operator">=</span> department<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">getElevatorPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and I work in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>department<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> howard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"Howard"</span><span class="token punctuation">,</span> <span class="token string">"Sales"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>howard<span class="token punctuation">.</span><span class="token function">getElevatorPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>howard<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é”™è¯¯</span><span class="token comment" spellcheck="true">//æ³¨æ„ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨ Personç±»å¤–ä½¿ç”¨ nameï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ Employeeç±»çš„å®ä¾‹æ–¹æ³•è®¿é—®ï¼Œå› ä¸ºEmployeeæ˜¯ç”± Personæ´¾ç”Ÿè€Œæ¥çš„ã€‚</span></code></pre><h3 id="1-9-4-getterå’Œsetter"><a href="#1-9-4-getterå’Œsetter" class="headerlink" title="1.9.4 getterå’Œsetter"></a>1.9.4 getterå’Œsetter</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> _name<span class="token punctuation">:</span>string<span class="token punctuation">;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> string<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span>string<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token function">talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Hi, my name is "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="1-9-5-é™æ€æˆå‘˜"><a href="#1-9-5-é™æ€æˆå‘˜" class="headerlink" title="1.9.5 é™æ€æˆå‘˜"></a>1.9.5 é™æ€æˆå‘˜</h3><ul><li>ä¸éœ€è¦å®ä¾‹åŒ–è®¿é—®çš„æˆå‘˜ç§°ä¹‹ä¸ºé™æ€æˆå‘˜ï¼Œå³åªèƒ½è¢«ç±»è®¿é—®çš„æˆå‘˜</li><li><code>static</code> å…³é”®å­—</li></ul><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//é™æ€å˜é‡</span>    <span class="token keyword">static</span> country <span class="token operator">=</span> <span class="token string">"ä¸­å›½"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//äº¬å¡”æ–¹æ³•</span>    <span class="token keyword">static</span> <span class="token function">sayhello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>country<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//é™æ€å˜é‡ï¼Œç›´æ¥é€šè¿‡ç±»å‹æ¥è®¿é—®</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//é”™è¯¯</span></code></pre><h2 id="1-10-æ¥å£"><a href="#1-10-æ¥å£" class="headerlink" title="1.10 æ¥å£"></a>1.10 æ¥å£</h2><p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæ¥å£æ˜¯ä¸€ç§è§„èŒƒçš„å®šä¹‰ï¼Œå®ƒå®šä¹‰äº†è¡Œä¸ºå’ŒåŠ¨ä½œè§„èŒƒï¼Œèµ·åˆ°ä¸€ç§é™åˆ¶å’Œè§„èŒƒçš„ä½œç”¨ã€‚<br>æ¥å£ä¸å…³å¿ƒçŠ¶æ€æ•°æ®ï¼Œä¹Ÿä¸å…³å¿ƒæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œå®ƒåªè§„å®šäº†ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œè€Œå®ç°æ¥å£çš„ç±»å¿…é¡»æä¾›å…·ä½“çš„ä¿¡æ¯ã€‚</p><h3 id="1-10-1-æ¥å£å¯¹ç±»çš„è§„èŒƒ"><a href="#1-10-1-æ¥å£å¯¹ç±»çš„è§„èŒƒ" class="headerlink" title="1.10.1 æ¥å£å¯¹ç±»çš„è§„èŒƒ"></a>1.10.1 æ¥å£å¯¹ç±»çš„è§„èŒƒ</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å®šä¹‰ä¸€ä¸ªäººçš„æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    age<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>    <span class="token function">say</span><span class="token punctuation">(</span>word<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//è®©è€å¸ˆç±»å®ç°Humanæ¥å£ï¼Œè€å¸ˆç±»å®ç°æ¥å£çš„æ—¶å€™å¿…é¡»æä¾›æ¥å£çš„å…·ä½“ä¿¡æ¯</span><span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">implements</span> <span class="token class-name">Human</span><span class="token punctuation">{</span>    name <span class="token operator">=</span> <span class="token string">"è€å¸ˆ"</span><span class="token punctuation">;</span>    age <span class="token operator">=</span> <span class="token number">38</span><span class="token punctuation">;</span>    <span class="token function">say</span><span class="token punctuation">(</span>word<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è€å¸ˆè¯´"</span><span class="token operator">+</span>word<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//è®©å­¦ç”Ÿç±»å®ç°Humanæ¥å£ï¼Œå­¦ç”Ÿç±»å®ç°æ¥å£çš„æ—¶å€™å¿…é¡»æä¾›æ¥å£çš„å…·ä½“ä¿¡æ¯</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Human</span><span class="token punctuation">{</span>    name <span class="token operator">=</span> <span class="token string">"å­¦ç”Ÿ"</span><span class="token punctuation">;</span>    age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>    <span class="token function">say</span><span class="token punctuation">(</span>word<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å­¦ç”Ÿè¯´"</span><span class="token operator">+</span>word<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="1-10-2-æ¥å£å¯¹å¯¹è±¡çš„è§„èŒƒ"><a href="#1-10-2-æ¥å£å¯¹å¯¹è±¡çš„è§„èŒƒ" class="headerlink" title="1.10.2 æ¥å£å¯¹å¯¹è±¡çš„è§„èŒƒ"></a>1.10.2 æ¥å£å¯¹å¯¹è±¡çš„è§„èŒƒ</h3><p>TypeScript ä¸­çš„æ¥å£é™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹å¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰è¿›è¡Œæè¿°</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>    head<span class="token punctuation">:</span> string<span class="token punctuation">;</span>    arm<span class="token punctuation">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>    age<span class="token punctuation">:</span> number<span class="token punctuation">;</span>    shape<span class="token punctuation">:</span> Shape<span class="token punctuation">;</span>    <span class="token function">say</span><span class="token punctuation">(</span>word<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> jack<span class="token punctuation">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    shape<span class="token punctuation">:</span> <span class="token punctuation">{</span>        head<span class="token punctuation">:</span> <span class="token string">'head'</span><span class="token punctuation">,</span>        arm<span class="token punctuation">:</span> <span class="token string">'arm'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">say</span><span class="token punctuation">(</span>word<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>jack<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span></code></pre><h3 id="1-10-3-æ¥å£å¯é€‰å±æ€§"><a href="#1-10-3-æ¥å£å¯é€‰å±æ€§" class="headerlink" title="1.10.3 æ¥å£å¯é€‰å±æ€§"></a>1.10.3 æ¥å£å¯é€‰å±æ€§</h3><p>æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ã€‚ æœ‰äº›æ˜¯åªåœ¨æŸäº›æ¡ä»¶ä¸‹å­˜åœ¨ï¼Œæˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ã€‚ å¯é€‰å±æ€§åœ¨åº”ç”¨â€œoption bagsâ€æ¨¡å¼æ—¶å¾ˆå¸¸ç”¨ï¼Œå³ç»™å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸­åªæœ‰éƒ¨åˆ†å±æ€§èµ‹å€¼äº†ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    gender<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span>    age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">}</span><span class="token keyword">let</span> jack<span class="token punctuation">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>    gender<span class="token punctuation">:</span> <span class="token string">'Male'</span>    <span class="token comment" spellcheck="true">// å¯ä»¥ä¸èµ‹å€¼ age å±æ€§ï¼Œå› ä¸ºæ˜¯å¯é€‰çš„</span><span class="token punctuation">}</span></code></pre><h3 id="1-10-4-æ¥å£åªè¯»å±æ€§"><a href="#1-10-4-æ¥å£åªè¯»å±æ€§" class="headerlink" title="1.10.4 æ¥å£åªè¯»å±æ€§"></a>1.10.4 æ¥å£åªè¯»å±æ€§</h3><p>ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨ <code>readonly</code>æ¥æŒ‡å®šåªè¯»å±æ€§:</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    readonly name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">}</span><span class="token keyword">let</span> jack<span class="token punctuation">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'Jack'</span><span class="token punctuation">}</span>jack<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Ivan'</span> <span class="token comment" spellcheck="true">// æŠ¥é”™: name æ˜¯åªè¯»çš„</span></code></pre><p><code>readonly</code> vs <code>const</code></p><ul><li>å¸¸é‡ä½¿ç”¨ const</li><li>å¯¹è±¡å±æ€§ä½¿ç”¨ readonly</li></ul><h3 id="1-10-5-å‡½æ•°æ¥å£"><a href="#1-10-5-å‡½æ•°æ¥å£" class="headerlink" title="1.10.5 å‡½æ•°æ¥å£"></a>1.10.5 å‡½æ•°æ¥å£</h3><p>å› ä¸ºå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ¥å£æ¥å¯¹å‡½æ•°åšâ€œè§„å®šâ€ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">interface</span> <span class="token class-name">Fn</span> <span class="token punctuation">{</span>    <span class="token punctuation">(</span>a<span class="token punctuation">:</span> number<span class="token punctuation">,</span> b<span class="token punctuation">:</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> add<span class="token punctuation">:</span> Fn <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> number<span class="token punctuation">,</span> b<span class="token punctuation">:</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="1-10-6-æ¥å£ç»§æ‰¿"><a href="#1-10-6-æ¥å£ç»§æ‰¿" class="headerlink" title="1.10.6 æ¥å£ç»§æ‰¿"></a>1.10.6 æ¥å£ç»§æ‰¿</h3><p>å°±åƒ ES6 çš„ class ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥åšç»§æ‰¿æ“ä½œï¼Œæ•ˆæœå°±æ˜¯ä¼šç»§æ‰¿çˆ¶æ¥å£çš„â€œè§„å®šâ€ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Human</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>    age<span class="token punctuation">:</span> number<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> jack<span class="token punctuation">:</span> Human <span class="token operator">=</span> <span class="token punctuation">{</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>    <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'move'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="1-11-å‘½åç©ºé—´"><a href="#1-11-å‘½åç©ºé—´" class="headerlink" title="1.11 å‘½åç©ºé—´"></a>1.11 å‘½åç©ºé—´</h2><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å‘½åç©ºé—´å°±æ˜¯å†…éƒ¨æ¨¡å—ï¼Œç›®çš„å°±æ˜¯è§£å†³é‡åé—®é¢˜ã€‚</span><span class="token comment" spellcheck="true">//a.ts  å£°æ˜å‘½åç©ºé—´</span><span class="token comment" spellcheck="true">//TypeScript çš„å‘½åç©ºé—´åªå¯¹å¤–æš´éœ²éœ€è¦åœ¨å¤–éƒ¨è®¿é—®çš„å¯¹è±¡ï¼Œå‘½åç©ºé—´å†…çš„å¯¹è±¡é€šè¿‡ export å…³é”®å­—å¯¹å¤–æš´éœ²</span>namespace Utils <span class="token punctuation">{</span>  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>      name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>      age<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//my.ts  ä½¿ç”¨å‘½åç©ºé—´</span><span class="token comment" spellcheck="true">// reference å¼•ç”¨å‘½åç©ºé—´(å¯ä»¥åŠ ä¹Ÿå¯ä»¥ä¸åŠ )</span><span class="token comment" spellcheck="true">/// &lt;reference path="a.ts" /></span><span class="token keyword">const</span> me<span class="token punctuation">:</span> Utils<span class="token punctuation">.</span>IPerson <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">'funlee'</span><span class="token punctuation">,</span>  age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// {name: 'funlee', age: 18}</span></code></pre><h2 id="1-12-æ¨¡å—"><a href="#1-12-æ¨¡å—" class="headerlink" title="1.12 æ¨¡å—"></a>1.12 æ¨¡å—</h2><p>æ¨¡å—æ˜¯åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œå¹¶ä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼Œè¿™æ„å‘³ç€å®šä¹‰åœ¨æ¨¡å—é‡Œé¢çš„å˜é‡ã€å‡½æ•°å’Œç±»ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éæ˜ç¡®åœ°ä½¿ç”¨ export å¯¼å‡ºå®ƒä»¬ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ import å¯¼å…¥å…¶ä»–æ¨¡å—å¯¼å‡ºçš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰ã€‚</p><p>ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡åœ¨æ–‡ä»¶çº§åˆ«ä¸Šä½¿ç”¨ import å’Œ export å»ºç«‹çš„(å…¶å®å°±æ˜¯ES6çš„æ¨¡å—åŒ–è¯­æ³•)</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å¯¼å‡ºæ¨¡å—</span><span class="token keyword">export</span> <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">"ä½ å¥½"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> title <span class="token operator">=</span> <span class="token string">"æ ‡é¢˜"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> title<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¼•å…¥æ¨¡å—</span><span class="token keyword">import</span> title<span class="token punctuation">,</span><span class="token punctuation">{</span>num<span class="token punctuation">,</span>str<span class="token punctuation">,</span>say<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./a'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>str<span class="token punctuation">,</span>say<span class="token punctuation">)</span></code></pre><h2 id="1-13-å£°æ˜æ–‡ä»¶"><a href="#1-13-å£°æ˜æ–‡ä»¶" class="headerlink" title="1.13 å£°æ˜æ–‡ä»¶"></a>1.13 å£°æ˜æ–‡ä»¶</h2><blockquote><p>d.tsä¸ºå£°æ˜æ–‡ä»¶  ä¸»è¦ç”¨ä½œç±»å‹çš„å£°æ˜</p></blockquote><ul><li>åœ¨d.tsä½¿ç”¨äº†declareï¼Œè¡¨ç¤ºå…¨å±€å£°æ˜ç±»å‹ï¼Œéœ€è¦ç»“åˆtsconfig.jsonä¸€èµ·ä½¿ç”¨æ‰èƒ½<br>æœ‰æ•ˆæœã€‚ (ä½¿ç”¨æ–¹å¼ï¼šç±»ä¼¼äºå‘½åç©ºé—´)</li><li>æˆ–è€…ä½¿ç”¨exportçš„æ–¹å¼ï¼Œåœ¨æ™®é€štsä¸­å°†d.tså¯¼å…¥(ä½¿ç”¨æ–¹å¼ï¼šç±»ä¼¼äºæ¨¡å—)</li></ul><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//data.d.ts    æ³¨æ„ï¼šåªæœ‰å£°æ˜æ²¡æœ‰å®ç°</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªç±»å‹</span><span class="token keyword">declare</span> type StringFunc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªå‘½åç©ºé—´</span><span class="token keyword">declare</span> namespace API <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//å¯¼å‡ºCurrentUseræ¥å£ç±»å‹</span>  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CurrentUser</span> <span class="token punctuation">{</span>    avatar<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    name<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>    title<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="1-14-å°ç»ƒä¹ "><a href="#1-14-å°ç»ƒä¹ " class="headerlink" title="1.14 å°ç»ƒä¹ "></a>1.14 å°ç»ƒä¹ </h2><p>å†™å‡ºä¸‹åˆ—tsä»£ç çš„å«ä¹‰ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">//å¯¼å‡ºä¸€ä¸ªå‡½æ•° å‡½æ•°åå­—æ˜¯defineConfigï¼Œå‡½æ•°å‚æ•°æ˜¯configï¼Œå‚æ•°ç±»å‹æ˜¯IConfigFromPluginsæˆ–è€…IConfigï¼Œè¿”å›å€¼æ˜¯IConfigFromPluginsæˆ–è€…IConfig</span><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> IConfigFromPlugins <span class="token operator">|</span> IConfig<span class="token punctuation">)</span><span class="token punctuation">:</span> IConfigFromPlugins <span class="token operator">|</span> IConfig<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªç±»å‹å«OverlayFuncï¼Œè¯¥ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼æ˜¯ReactNode</span><span class="token keyword">declare</span> type OverlayFunc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¼å‡ºä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å«SiderThemeï¼Œä»–çš„å€¼æ˜¯lightæˆ–è€…dark</span><span class="token keyword">export</span> type SiderTheme <span class="token operator">=</span> <span class="token string">'light'</span> <span class="token operator">|</span> <span class="token string">'dark'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œåå­—å«columnsï¼Œä»–çš„ç±»å‹æ˜¯ProColumnsçš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯TableListItem</span><span class="token keyword">const</span> columns<span class="token punctuation">:</span> ProColumns<span class="token operator">&lt;</span>TableListItem<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œåå­—å«LoginMessageï¼Œä»–çš„ç±»å‹æ˜¯React.FCï¼ŒReact.FCä¸­æ¥æ”¶{content: string}ç±»å‹çš„æ•°æ®ã€‚LoginMessageçš„å€¼æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¯¥å‡½æ•°é€šè¿‡è§£æ„èµ‹å€¼æˆ–è€…contentä½œä¸ºå‡½æ•°çš„å…¥å‚ï¼Œå‡½æ•°æ²¡æœ‰è¿”å›å€¼</span><span class="token keyword">const</span> LoginMessage<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC<span class="token operator">&lt;</span><span class="token punctuation">{</span>  content<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//typeçš„ | å’Œ &amp;</span>type Env1 <span class="token operator">=</span> <span class="token string">'prod'</span> <span class="token operator">|</span> <span class="token string">'test'</span> <span class="token operator">|</span> <span class="token string">'dev'</span><span class="token punctuation">;</span>type Env2 <span class="token operator">=</span> <span class="token string">'prod'</span> <span class="token operator">|</span> <span class="token string">'boe'</span> <span class="token operator">|</span> <span class="token string">'ppe'</span><span class="token punctuation">;</span>type EnvUnion <span class="token operator">=</span> Env1 <span class="token operator">|</span> Env2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'prod' | 'test' | 'dev' | 'boe' | 'ppe'  å–å¹¶é›†</span>type EnvInter <span class="token operator">=</span> Env1 <span class="token operator">&amp;</span> Env2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'prod'   å–äº¤é›†</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªç±»å‹å«Partialï¼Œä¸»è¦ä½œç”¨å°±æ˜¯å°†Tä¸­çš„æ¯ä¸€ä¸ªé”®å¯é€‰</span>type Partial<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token punctuation">[</span>P <span class="token keyword">in</span> keyof T<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span> T<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªç±»å‹å«Pick ä¸»è¦ä½œç”¨é€‰æ‹©Tä¸­çš„ç¬¦åˆæ¡ä»¶çš„å±æ€§</span><span class="token comment" spellcheck="true">//https://blog.csdn.net/weixin_34376986/article/details/93167453</span>type Pick<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token class-name">keyof</span> T<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token punctuation">[</span>P <span class="token keyword">in</span> K<span class="token punctuation">]</span><span class="token punctuation">:</span> T<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ¤æ–­Tæ˜¯ä¸æ˜¯ç»§æ‰¿Uï¼Œå¦‚æœæ˜¯åˆ™å–neverç±»å‹ï¼Œå¦åˆ™å–Tç±»å‹æœ¬èº«</span>type Exclude<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token operator">=</span> T <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> never <span class="token punctuation">:</span> T<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ¤æ–­Tæ˜¯ä¸æ˜¯ç»§æ‰¿Uï¼Œå¦‚æœæ˜¯åˆ™å–Tç±»å‹ï¼Œå¦åˆ™å–neverç±»å‹</span>type Extract<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token operator">=</span> T <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> T <span class="token punctuation">:</span> never<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Omit ä¸»è¦ä½œç”¨ é€‰æ‹©Tä¸­é™¤äº†Kä¹‹å¤–çš„å…¶ä»–å±æ€§          </span>type Omit<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token keyword">any</span><span class="token operator">></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span>keyof T<span class="token punctuation">,</span> K<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªå¸¸é‡REACT_APP_ENVï¼Œä»–çš„å€¼æ˜¯test  dev  pre æˆ–è€…falseä¸­çš„ä»»æ„ä¸€ä¸ª</span><span class="token keyword">declare</span> <span class="token keyword">const</span> REACT_APP_ENV<span class="token punctuation">:</span> <span class="token string">'test'</span> <span class="token operator">|</span> <span class="token string">'dev'</span> <span class="token operator">|</span> <span class="token string">'pre'</span> <span class="token operator">|</span> <span class="token keyword">false</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uni-appçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2019/11/23/uniapp-ji-chu-zhi-shi/"/>
      <url>2019/11/23/uniapp-ji-chu-zhi-shi/</url>
      
        <content type="html"><![CDATA[<p>#1.uni-appçš„åŸºæœ¬ä½¿ç”¨</p><p>è¯¾ç¨‹ä»‹ç»ï¼š</p><p>åŸºç¡€éƒ¨åˆ†ï¼š</p><ul><li>ç¯å¢ƒæ­å»º</li><li>é¡µé¢å¤–è§‚é…ç½®</li><li>æ•°æ®ç»‘å®š</li><li>uni-appçš„ç”Ÿå‘½å‘¨æœŸ</li><li>ç»„ä»¶çš„ä½¿ç”¨</li><li>uni-appä¸­æ ·å¼å­¦ä¹ </li><li>åœ¨uni-appä¸­ä½¿ç”¨å­—ä½“å›¾æ ‡å’Œå¼€å¯scss</li><li>æ¡ä»¶æ³¨é‡Šè·¨ç«¯å…¼å®¹</li><li>uniä¸­çš„äº‹ä»¶</li><li>å¯¼èˆªè·³è½¬</li><li>ç»„ä»¶åˆ›å»ºå’Œé€šè®¯ï¼ŒåŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li><li>uni-appä¸­ä½¿ç”¨uni-uiåº“</li></ul><p>é¡¹ç›®ï¼šæå®¢å•†åŸé¡¹ç›®</p><h2 id="1-1-uni-appä»‹ç»-å®˜æ–¹ç½‘é¡µ"><a href="#1-1-uni-appä»‹ç»-å®˜æ–¹ç½‘é¡µ" class="headerlink" title="1.1 uni-appä»‹ç» å®˜æ–¹ç½‘é¡µ"></a>1.1 uni-appä»‹ç» <a href="https://uniapp.dcloud.io/resource">å®˜æ–¹ç½‘é¡µ</a></h2><p><code>uni-app</code> æ˜¯ä¸€ä¸ªä½¿ç”¨ <a href="https://vuejs.org/">Vue.js</a> å¼€å‘æ‰€æœ‰å‰ç«¯åº”ç”¨çš„æ¡†æ¶ï¼Œå¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒåˆ°iOSã€Androidã€H5ã€ä»¥åŠå„ç§å°ç¨‹åºï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ç™¾åº¦/å¤´æ¡/QQ/é’‰é’‰ï¼‰ç­‰å¤šä¸ªå¹³å°ã€‚</p><p>å³ä½¿ä¸è·¨ç«¯ï¼Œ<code>uni-app</code>åŒæ—¶ä¹Ÿæ˜¯æ›´å¥½çš„å°ç¨‹åºå¼€å‘æ¡†æ¶ã€‚</p><p>å…·æœ‰vueå’Œå¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ç»éªŒï¼Œå¯å¿«é€Ÿä¸Šæ‰‹uni-app</p><p>ä¸ºä»€ä¹ˆè¦å»å­¦ä¹ uni-appï¼Ÿ</p><p>ç›¸å¯¹å¼€å‘è€…æ¥è¯´ï¼Œå‡å°‘äº†å­¦ä¹ æˆæœ¬ï¼Œå› ä¸ºåªå­¦ä¼šuni-appä¹‹åï¼Œå³å¯å¼€å‘å‡ºiOSã€Androidã€H5ã€ä»¥åŠå„ç§å°ç¨‹åºçš„åº”ç”¨ï¼Œä¸éœ€è¦å†å»å­¦ä¹ å¼€å‘å…¶ä»–åº”ç”¨çš„æ¡†æ¶ï¼Œç›¸å¯¹å…¬å¸è€Œè¨€ï¼Œä¹Ÿå¤§å¤§å‡å°‘äº†å¼€å‘æˆæœ¬ã€‚</p><h2 id="1-2-ç¯å¢ƒæ­å»º"><a href="#1-2-ç¯å¢ƒæ­å»º" class="headerlink" title="1.2 ç¯å¢ƒæ­å»º"></a>1.2 ç¯å¢ƒæ­å»º</h2><p>å®‰è£…ç¼–è¾‘å™¨HbuilderX  <a href="https://www.dcloud.io/hbuilderx.html">ä¸‹è½½åœ°å€</a></p><p>HBuilderXæ˜¯é€šç”¨çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œä½†ä¸º<code>uni-app</code>åšäº†ç‰¹åˆ«å¼ºåŒ–ã€‚</p><p>ä¸‹è½½Appå¼€å‘ç‰ˆï¼Œå¯å¼€ç®±å³ç”¨</p><p>å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…· <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">ä¸‹è½½åœ°å€</a></p><h2 id="1-3-åˆ©ç”¨HbuilderXåˆå§‹åŒ–é¡¹ç›®-js"><a href="#1-3-åˆ©ç”¨HbuilderXåˆå§‹åŒ–é¡¹ç›®-js" class="headerlink" title="1.3 åˆ©ç”¨HbuilderXåˆå§‹åŒ–é¡¹ç›®(js)"></a>1.3 åˆ©ç”¨HbuilderXåˆå§‹åŒ–é¡¹ç›®(js)</h2><ul><li><p>ç‚¹å‡»HbuilderXèœå•æ æ–‡ä»¶&gt;é¡¹ç›®&gt;æ–°å»º</p></li><li><p>é€‰æ‹©uni-app,å¡«å†™é¡¹ç›®åç§°ï¼Œé¡¹ç›®åˆ›å»ºçš„ç›®å½•</p><p><img src="https://i.loli.net/2020/11/09/LmBqE7uJa2KoGQl.png"></p></li></ul><h2 id="1-4-ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºtsé¡¹ç›®"><a href="#1-4-ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºtsé¡¹ç›®" class="headerlink" title="1.4 ä½¿ç”¨vue/cliè„šæ‰‹æ¶åˆ›å»ºtsé¡¹ç›®"></a>1.4 ä½¿ç”¨vue/cliè„šæ‰‹æ¶åˆ›å»ºtsé¡¹ç›®</h2><pre class=" language-javascript"><code class="language-javascript">vue create <span class="token operator">-</span>p dcloudio<span class="token operator">/</span>uni<span class="token operator">-</span>preset<span class="token operator">-</span>vue my<span class="token operator">-</span>ts</code></pre><p><img src="https://i.loli.net/2020/11/09/4Kvbp9yzcCJ6gnj.png" alt="1602848342568.png"></p><h2 id="1-5-è¿è¡Œé¡¹ç›®"><a href="#1-5-è¿è¡Œé¡¹ç›®" class="headerlink" title="1.5 è¿è¡Œé¡¹ç›®"></a>1.5 è¿è¡Œé¡¹ç›®</h2><p>åœ¨èœå•æ ä¸­ç‚¹å‡»è¿è¡Œï¼Œè¿è¡Œåˆ°æµè§ˆå™¨ï¼Œé€‰æ‹©æµè§ˆå™¨å³å¯è¿è¡Œ</p><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œè¿è¡Œï¼šè¿›å…¥hello-uniappé¡¹ç›®ï¼Œç‚¹å‡»å·¥å…·æ çš„è¿è¡Œ -&gt; è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ -&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå³å¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œé¢ä½“éªŒuni-app</p><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œè¿è¡Œï¼šè¿›å…¥hello-uniappé¡¹ç›®ï¼Œç‚¹å‡»å·¥å…·æ çš„è¿è¡Œ -&gt; è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ -&gt; é€‰æ‹©è°ƒå¼çš„æ‰‹æœº</p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œéœ€è¦å…ˆé…ç½®å°ç¨‹åºideçš„ç›¸å…³è·¯å¾„ï¼Œæ‰èƒ½è¿è¡ŒæˆåŠŸ</li><li>å¾®ä¿¡å¼€å‘è€…å·¥å…·åœ¨è®¾ç½®ä¸­å®‰å…¨è®¾ç½®ï¼ŒæœåŠ¡ç«¯å£å¼€å¯</li></ul><h2 id="1-6-ä»‹ç»é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ä½œç”¨"><a href="#1-6-ä»‹ç»é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ä½œç”¨" class="headerlink" title="1.6 ä»‹ç»é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ä½œç”¨"></a>1.6 ä»‹ç»é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ä½œç”¨</h2><p><code>pages.json</code> æ–‡ä»¶ç”¨æ¥å¯¹ uni-app è¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£æ ·å¼ã€åŸç”Ÿçš„å¯¼èˆªæ ã€åº•éƒ¨çš„åŸç”Ÿtabbar ç­‰</p><p><code>manifest.json</code> æ–‡ä»¶æ˜¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šåº”ç”¨çš„åç§°ã€å›¾æ ‡ã€æƒé™ç­‰ã€‚</p><p><code>App.vue</code>æ˜¯æˆ‘ä»¬çš„è·Ÿç»„ä»¶ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ˜¯åœ¨<code>App.vue</code>ä¸‹è¿›è¡Œåˆ‡æ¢çš„ï¼Œæ˜¯é¡µé¢å…¥å£æ–‡ä»¶ï¼Œå¯ä»¥è°ƒç”¨åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p><p><code>main.js</code>æ˜¯æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯åˆå§‹åŒ–<code>vue</code>å®ä¾‹å¹¶ä½¿ç”¨éœ€è¦çš„æ’ä»¶ã€‚</p><p><code>uni.scss</code>æ–‡ä»¶çš„ç”¨é€”æ˜¯ä¸ºäº†æ–¹ä¾¿æ•´ä½“æ§åˆ¶åº”ç”¨çš„é£æ ¼ã€‚æ¯”å¦‚æŒ‰é’®é¢œè‰²ã€è¾¹æ¡†é£æ ¼ï¼Œ<code>uni.scss</code>æ–‡ä»¶é‡Œé¢„ç½®äº†ä¸€æ‰¹scsså˜é‡é¢„ç½®ã€‚</p><p><code>unpackage</code> å°±æ˜¯æ‰“åŒ…ç›®å½•ï¼Œåœ¨è¿™é‡Œæœ‰å„ä¸ªå¹³å°çš„æ‰“åŒ…æ–‡ä»¶</p><p><code>pages</code> æ‰€æœ‰çš„é¡µé¢å­˜æ”¾ç›®å½•</p><p><code>static</code> é™æ€èµ„æºç›®å½•ï¼Œä¾‹å¦‚å›¾ç‰‡ç­‰</p><p><code>components</code> ç»„ä»¶å­˜æ”¾ç›®å½•</p><p>ä¸ºäº†å®ç°å¤šç«¯å…¼å®¹ï¼Œç»¼åˆè€ƒè™‘ç¼–è¯‘é€Ÿåº¦ã€è¿è¡Œæ€§èƒ½ç­‰å› ç´ ï¼Œ<code>uni-app</code> çº¦å®šäº†å¦‚ä¸‹å¼€å‘è§„èŒƒï¼š</p><ul><li>é¡µé¢æ–‡ä»¶éµå¾ª <a href="https://vue-loader.vuejs.org/zh/spec.html">Vue å•æ–‡ä»¶ç»„ä»¶ (SFC) è§„èŒƒ</a></li><li>ç»„ä»¶æ ‡ç­¾é è¿‘å°ç¨‹åºè§„èŒƒï¼Œè¯¦è§<a href="https://uniapp.dcloud.io/component/README">uni-app ç»„ä»¶è§„èŒƒ</a></li><li>æ¥å£èƒ½åŠ›ï¼ˆJS APIï¼‰é è¿‘å¾®ä¿¡å°ç¨‹åºè§„èŒƒï¼Œä½†éœ€å°†å‰ç¼€ <code>wx</code> æ›¿æ¢ä¸º <code>uni</code>ï¼Œè¯¦è§<a href="https://uniapp.dcloud.io/api/README">uni-appæ¥å£è§„èŒƒ</a></li><li>æ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†åŒ <code>Vue.js</code> è§„èŒƒï¼ŒåŒæ—¶è¡¥å……äº†AppåŠé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ</li><li>ä¸ºå…¼å®¹å¤šç«¯è¿è¡Œï¼Œå»ºè®®ä½¿ç”¨flexå¸ƒå±€è¿›è¡Œå¼€å‘</li></ul><h1 id="2-vue-tsè¯­æ³•"><a href="#2-vue-tsè¯­æ³•" class="headerlink" title="2.vue tsè¯­æ³•"></a>2.vue tsè¯­æ³•</h1><h2 id="2-1-åŸºæœ¬ä½¿ç”¨"><a href="#2-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.1 åŸºæœ¬ä½¿ç”¨"></a>2.1 åŸºæœ¬ä½¿ç”¨</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>image <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo"</span> src<span class="token operator">=</span><span class="token string">"/static/logo.png"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>å±æ€§ç»‘å®š<span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text-area"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span>view<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>            <span class="token operator">&lt;</span>image v<span class="token operator">-</span>bind<span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"img"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>v<span class="token operator">-</span><span class="token keyword">if</span>å’Œv<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,i) in arr"</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"i"</span><span class="token operator">></span>åå­—ï¼š<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">-</span>å¹´é¾„ï¼š<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"flag"</span><span class="token operator">></span>æ˜¾ç¤ºæˆ‘<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç‚¹å‡»äº‹ä»¶<span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"tapHandle(1,$event)"</span><span class="token operator">></span>ç‚¹æˆ‘ä¼ å‚<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>self<span class="token operator">=</span><span class="token string">"printTitle"</span><span class="token operator">></span>ç‚¹æˆ‘ä¸ä¼ å‚<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">"title = 'ggg'"</span><span class="token operator">></span>ç‚¹æˆ‘ä¿®æ”¹title<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue<span class="token punctuation">,</span>        Watch    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//1.å“åº”å¼å±æ€§ï¼Œå¯¹æ ‡ä¹‹å‰çš„dataå‡½æ•°è¿”å›çš„å¯¹è±¡</span>        <span class="token keyword">private</span> title<span class="token punctuation">:</span> String <span class="token operator">=</span> <span class="token string">'myTitle'</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> num<span class="token punctuation">:</span> Number <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> img<span class="token punctuation">:</span> String <span class="token operator">=</span> <span class="token string">'http://destiny001.gitee.io/image/monkey_02.jpg'</span>        <span class="token keyword">private</span> arr<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">'åˆ˜èƒ½'</span><span class="token punctuation">,</span>                age<span class="token punctuation">:</span> <span class="token number">29</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">'èµµå››'</span><span class="token punctuation">,</span>                age<span class="token punctuation">:</span> <span class="token number">39</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">'å®‹å°å®'</span><span class="token punctuation">,</span>                age<span class="token punctuation">:</span> <span class="token number">49</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                name<span class="token punctuation">:</span> <span class="token string">'å°æ²ˆé˜³'</span><span class="token punctuation">,</span>                age<span class="token punctuation">:</span> <span class="token number">59</span>            <span class="token punctuation">}</span>        <span class="token punctuation">]</span>        <span class="token keyword">private</span> flag<span class="token punctuation">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.è®¡ç®—å±æ€§</span>        <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Number <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//3.ç”Ÿå‘½å‘¨æœŸ</span>        <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">printTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">let</span> a<span class="token punctuation">:</span> string <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onLoad~~~~~~~~~~~~~~~~"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onShow~~~~~~~~~~~"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"mounted~~~~~~~~~~~~~~"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//4.å±æ€§ç›‘å¬ æ­¤å¤„æ˜¯ç›‘å¬titleçš„å˜åŒ–</span>        @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>        <span class="token function">titleChange</span><span class="token punctuation">(</span>newVal<span class="token punctuation">:</span> Number<span class="token punctuation">,</span> oldVal<span class="token punctuation">:</span> Number<span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//5.methodsï¼Œå¯¹æ ‡ä¹‹å‰methodsä¸­å†™çš„æ–¹æ³•</span>        <span class="token function">printTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hahahhhaha'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">tapHandle</span><span class="token punctuation">(</span>num<span class="token punctuation">:</span> number<span class="token punctuation">,</span> event<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> event<span class="token punctuation">.</span>type<span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span>    <span class="token punctuation">.</span>content <span class="token punctuation">{</span>        display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>        flex<span class="token operator">-</span>direction<span class="token punctuation">:</span> column<span class="token punctuation">;</span>        align<span class="token operator">-</span>items<span class="token punctuation">:</span> center<span class="token punctuation">;</span>        justify<span class="token operator">-</span>content<span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>logo <span class="token punctuation">{</span>        height<span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>        width<span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>        margin<span class="token operator">-</span>top<span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>        margin<span class="token operator">-</span>left<span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        margin<span class="token operator">-</span>right<span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        margin<span class="token operator">-</span>bottom<span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>text<span class="token operator">-</span>area <span class="token punctuation">{</span>        display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>        justify<span class="token operator">-</span>content<span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>title <span class="token punctuation">{</span>        font<span class="token operator">-</span>size<span class="token punctuation">:</span> 36rpx<span class="token punctuation">;</span>        color<span class="token punctuation">:</span> #8f8f94<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.vue-class-componentï¼šå¼ºåŒ– Vue ç»„ä»¶ï¼Œä½¿ç”¨ TypeScript/è£…é¥°å™¨ å¢å¼º Vue ç»„ä»¶</span><span class="token comment" spellcheck="true">//2.vue-property-decorator æ˜¯åœ¨ vue-class-component ä¸Šå¢å¼ºäº†æ›´å¤šçš„ç»“åˆ Vue ç‰¹æ€§çš„è£…é¥°å™¨ï¼Œæ–°å¢äº†è¿™ 7 ä¸ªè£…é¥°å™¨ï¼š</span>@Emit  @Inject    @Model@Prop@Provide@Watch@Component <span class="token punctuation">(</span>ä» vue<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>component ç»§æ‰¿<span class="token punctuation">)</span></code></pre><h2 id="2-2-uni-appä¸­ç»„ä»¶çš„åˆ›å»º"><a href="#2-2-uni-appä¸­ç»„ä»¶çš„åˆ›å»º" class="headerlink" title="2.2 uni-appä¸­ç»„ä»¶çš„åˆ›å»º"></a>2.2 uni-appä¸­ç»„ä»¶çš„åˆ›å»º</h2><p><a href="https://juejin.im/post/6844903741456384014">https://juejin.im/post/6844903741456384014</a></p><p><a href="https://blog.csdn.net/sllailcp/article/details/102542796/">https://blog.csdn.net/sllailcp/article/details/102542796/</a></p><p><a href="https://www.jianshu.com/p/d8ed3aa76e9b">https://www.jianshu.com/p/d8ed3aa76e9b</a></p><p>åœ¨uni-appä¸­ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªåç¼€åä¸ºvueçš„æ–‡ä»¶ï¼Œå³åˆ›å»ºä¸€ä¸ªç»„ä»¶æˆåŠŸï¼Œå…¶ä»–ç»„ä»¶å¯ä»¥å°†è¯¥ç»„ä»¶é€šè¿‡impotçš„æ–¹å¼å¯¼å…¥ï¼Œåœ¨é€šè¿‡componentsè¿›è¡Œæ³¨å†Œå³å¯</p><ul><li><p>åˆ›å»ºheadç»„ä»¶ï¼Œåœ¨componentä¸­åˆ›å»ºhead.vueæ–‡ä»¶</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        è¿™æ˜¯å¤´éƒ¨ç»„ä»¶    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span>Vue<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Head</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre></li><li><p>åœ¨å…¶ä»–ç»„ä»¶ä¸­å¯¼å…¥è¯¥ç»„ä»¶å¹¶æ³¨å†Œ</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>Head<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>        <span class="token operator">&lt;</span>text<span class="token operator">></span>            <span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token operator">|</span><span class="token function">msgFormat</span><span class="token punctuation">(</span><span class="token string">'ç–¯ç‹‚+1'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>        <span class="token operator">&lt;</span>text v<span class="token operator">-</span>fontsize<span class="token operator">=</span><span class="token string">"15"</span><span class="token operator">></span>æµ‹è¯•æ–‡å­—<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    <span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">'@/components/head.vue'</span>    <span class="token comment" spellcheck="true">//@Component è£…é¥°å™¨å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥åœ¨å¯¹è±¡ä¸­å£°æ˜ components ï¼Œfiltersï¼Œdirectivesç­‰æœªæä¾›è£…é¥°å™¨çš„é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥å£°æ˜computedï¼Œwatchç­‰</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        components<span class="token punctuation">:</span> <span class="token punctuation">{</span>            Head        <span class="token punctuation">}</span><span class="token punctuation">,</span>        filters<span class="token punctuation">:</span> <span class="token punctuation">{</span>            msgFormat<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> string<span class="token punctuation">,</span> arg<span class="token punctuation">:</span> string<span class="token punctuation">,</span> arg2<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> msg<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/å°‘å¹´/g</span><span class="token punctuation">,</span> arg <span class="token operator">+</span> arg2<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//åªåœ¨æµè§ˆå™¨ä¸­æœ‰æ•ˆ</span>        directives<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span> <span class="token punctuation">{</span>                 <span class="token comment" spellcheck="true">// æ³¨æ„ï¼šè¿™ä¸ª function ç­‰åŒäºæŠŠä»£ç å†™åˆ°äº† bind å’Œ update ä¸­å»</span>                el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> msg<span class="token punctuation">:</span> String <span class="token operator">=</span> <span class="token string">'æ›¾ç»ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªå•çº¯çš„å°‘å¹´ï¼Œå•çº¯çš„æˆ‘ï¼Œå‚»å‚»çš„é—®ï¼Œè°æ˜¯ä¸–ç•Œä¸Šæœ€å•çº¯çš„ç”·äºº'</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre></li><li><p>ä½¿ç”¨ç»„ä»¶</p><pre><code>&lt;Head&gt;&lt;/Head&gt;</code></pre></li></ul><h2 id="2-3-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#2-3-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="2.3 ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>2.3 ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h2><table><thead><tr><th>beforeCreate</th><th>åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åè¢«è°ƒç”¨ã€‚<a href="https://cn.vuejs.org/v2/api/#beforeCreate">è¯¦è§</a></th><th></th><th></th></tr></thead><tbody><tr><td>created</td><td>åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚<a href="https://cn.vuejs.org/v2/api/#created">è¯¦è§</a></td><td></td><td></td></tr><tr><td>beforeMount</td><td>åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ã€‚<a href="https://cn.vuejs.org/v2/api/#beforeMount">è¯¦è§</a></td><td></td><td></td></tr><tr><td>mounted</td><td>æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨ã€‚<a href="https://cn.vuejs.org/v2/api/#mounted">è¯¦è§</a> æ³¨æ„ï¼šæ­¤å¤„å¹¶ä¸èƒ½ç¡®å®šå­ç»„ä»¶è¢«å…¨éƒ¨æŒ‚è½½ï¼Œå¦‚æœéœ€è¦å­ç»„ä»¶å®Œå…¨æŒ‚è½½ä¹‹ååœ¨æ‰§è¡Œæ“ä½œå¯ä»¥ä½¿ç”¨<code>$nextTick</code><a href="https://cn.vuejs.org/v2/api/#Vue-nextTick">Vueå®˜æ–¹æ–‡æ¡£</a></td><td></td><td></td></tr><tr><td>beforeUpdate</td><td>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ã€‚<a href="https://cn.vuejs.org/v2/api/#beforeUpdate">è¯¦è§</a></td><td>ä»…H5å¹³å°æ”¯æŒ</td><td></td></tr><tr><td>updated</td><td>ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚<a href="https://cn.vuejs.org/v2/api/#updated">è¯¦è§</a></td><td>ä»…H5å¹³å°æ”¯æŒ</td><td></td></tr><tr><td>beforeDestroy</td><td>å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚<a href="https://cn.vuejs.org/v2/api/#beforeDestroy">è¯¦è§</a></td><td></td><td></td></tr><tr><td>destroyed</td><td>Vue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚<a href="https://cn.vuejs.org/v2/api/#destroyed">è¯¦è§</a></td><td></td><td></td></tr></tbody></table><h2 id="2-4-ç»„ä»¶çš„é€šè®¯"><a href="#2-4-ç»„ä»¶çš„é€šè®¯" class="headerlink" title="2.4 ç»„ä»¶çš„é€šè®¯"></a>2.4 ç»„ä»¶çš„é€šè®¯</h2><h3 id="2-4-1-çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼"><a href="#2-4-1-çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="2.4.1 çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼"></a>2.4.1 çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼</h3><p>head.vueé€šè¿‡@propsæ¥æ¥å—å¤–ç•Œä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨çš„å€¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        è¿™æ˜¯å¤´éƒ¨ç»„ä»¶    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue<span class="token punctuation">,</span>        Prop    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Head</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/*        @Prop(options: (PropOptions | Constructor[] | Constructor) = {})        @Propè£…é¥°å™¨æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æœ‰ä¸‰ç§å†™æ³•ï¼š        Constructorï¼Œä¾‹å¦‚Stringï¼ŒNumberï¼ŒBooleanç­‰ï¼ŒæŒ‡å®š prop çš„ç±»å‹ï¼›        Constructor[]ï¼ŒæŒ‡å®š prop çš„å¯é€‰ç±»å‹ï¼›        PropOptionsï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼štypeï¼Œdefaultï¼Œrequiredï¼Œvalidatorã€‚        */</span>        <span class="token comment" spellcheck="true">//!è¡¨ç¤ºénull éundefined</span>        @<span class="token function">Prop</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span> readonly name<span class="token operator">!</span><span class="token punctuation">:</span> string <span class="token operator">|</span> undefined<span class="token punctuation">;</span>        @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>            type<span class="token punctuation">:</span> Number        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">private</span> age<span class="token operator">!</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>        @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">[</span>String<span class="token punctuation">,</span> Boolean<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">private</span> sex<span class="token operator">!</span><span class="token punctuation">:</span> string <span class="token operator">|</span> boolean<span class="token punctuation">;</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><p>å…¶ä»–ç»„ä»¶åœ¨ä½¿ç”¨headç»„ä»¶çš„æ—¶å€™ä¼ é€’å€¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>Head <span class="token punctuation">:</span>name<span class="token operator">=</span><span class="token string">"name"</span> <span class="token punctuation">:</span>age<span class="token operator">=</span><span class="token string">"age"</span> <span class="token punctuation">:</span>sex<span class="token operator">=</span><span class="token string">"sex"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    <span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">'@/components/head.vue'</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        components<span class="token punctuation">:</span><span class="token punctuation">{</span>            Head        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> name <span class="token operator">=</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> age <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> sex <span class="token operator">=</span> <span class="token string">'nan'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h3 id="2-4-2-å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼"><a href="#2-4-2-å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼" class="headerlink" title="2.4.2 å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼"></a>2.4.2 å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼</h3><p>é€šè¿‡@emitè§¦å‘äº‹ä»¶è¿›è¡Œä¼ é€’å‚æ•°</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//çˆ¶ç»„ä»¶</span><span class="token operator">&lt;</span>Head <span class="token punctuation">:</span>name<span class="token operator">=</span><span class="token string">"name"</span> <span class="token punctuation">:</span>age<span class="token operator">=</span><span class="token string">"age"</span> <span class="token punctuation">:</span>sex<span class="token operator">=</span><span class="token string">"sex"</span> @del<span class="token operator">=</span><span class="token string">"delFromChild"</span> @add<span class="token operator">=</span><span class="token string">"addFromChild"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span><span class="token function">addFromChild</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// this.emitData = data;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">"çˆ¶ç»„ä»¶ returnPersons"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">delFromChild</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span> MouseEvent<span class="token punctuation">,</span>data<span class="token punctuation">:</span>any<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// console.log(this.emitData);</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">"çˆ¶ç»„ä»¶ delemit"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//å­ç»„ä»¶</span><span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"del($event,{id:1})"</span><span class="token operator">></span>ç‚¹å‡»è§¦å‘del emit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add({name:'å¼ ä¸‰'})"</span><span class="token operator">></span>ç‚¹å‡»è§¦å‘add emit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span class="token comment" spellcheck="true">/*        @Emit è£…é¥°å™¨æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯$Emitçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå……å½“äº‹ä»¶åã€‚å¦‚æœæ²¡æœ‰æä¾›è¿™ä¸ªå‚æ•°ï¼Œ$Emitä¼šå°†å›è°ƒå‡½æ•°åçš„camelCaseè½¬ä¸ºkebab-caseï¼Œå¹¶å°†å…¶ä½œä¸ºäº‹ä»¶åï¼›        @Emitä¼šå°†å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œ$emitä¼šåœ¨Promiseå¯¹è±¡è¢«æ ‡è®°ä¸ºresolvedä¹‹åè§¦å‘ï¼›        @Emitçš„å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œä¼šæ”¾åœ¨å…¶è¿”å›å€¼ä¹‹åï¼Œä¸€èµ·è¢«$emitå½“åšå‚æ•°ä½¿ç”¨ã€‚*/</span><span class="token comment" spellcheck="true">//å½“å‰ç»„ä»¶çš„delç‚¹å‡»äº‹ä»¶ä¼šè§¦å‘delClickæ‰§è¡Œï¼ŒdelClickä¼šè§¦å‘çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„delæ‰§è¡Œï¼Œå°±ç›¸å½“äºä¹‹å‰çš„this.$emit()</span>@<span class="token function">Emit</span><span class="token punctuation">(</span><span class="token string">'del'</span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token function">delClick</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span> MouseEvent<span class="token punctuation">,</span> data<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">del</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span> MouseEvent<span class="token punctuation">,</span> data<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">delClick</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¦‚æœæ­¤å¤„ä¸è®¾ç½®åˆ«åå­—,åˆ™é»˜è®¤ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å‘½å,è¯¥å‡½æ•°æ—¢ä»£è¡¨å½“å‰ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶ï¼Œåˆä»£è¡¨è§¦å‘çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„addäº‹ä»¶</span>@<span class="token function">Emit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> string    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// æ­¤å¤„ä¸return,åˆ™ä¼šé»˜è®¤ä½¿ç”¨æ‹¬å·é‡Œçš„å‚æ•°p;</span>    <span class="token keyword">return</span> p<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="2-4-3-å…„å¼Ÿç»„ä»¶é€šè®¯"><a href="#2-4-3-å…„å¼Ÿç»„ä»¶é€šè®¯" class="headerlink" title="2.4.3 å…„å¼Ÿç»„ä»¶é€šè®¯"></a>2.4.3 å…„å¼Ÿç»„ä»¶é€šè®¯</h3><pre><code>uni.$emit(eventName,OBJECT)  è§¦å‘å…¨å±€çš„è‡ªå®šäº‹ä»¶ã€‚uni.$on(eventName,callback)  ç›‘å¬å…¨å±€çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚äº‹ä»¶å¯ä»¥ç”± uni.$emit è§¦å‘ï¼Œå›è°ƒå‡½æ•°ä¼šæ¥æ”¶æ‰€æœ‰ä¼ å…¥äº‹ä»¶è§¦å‘å‡½æ•°çš„é¢å¤–å‚æ•°ã€‚uni.$off([eventName, callback])  ç§»é™¤å…¨å±€è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨</code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.head.vue</span><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>text<span class="token operator">></span>è¿™æ˜¯å¤´éƒ¨<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"send"</span><span class="token operator">></span>ç‚¹å‡»å‘headå‘é€æ•°æ®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Head</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"eventType1"</span><span class="token punctuation">,</span><span class="token string">"ä½ å¥½ï¼Œhead"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span class="token comment" spellcheck="true">//2.foot.vue</span><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>text<span class="token operator">></span>è¿™æ˜¯å°¾å·´<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue<span class="token punctuation">,</span>        Prop<span class="token punctuation">,</span>        Emit    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Head</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"eventType1"</span><span class="token punctuation">,</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span>any<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ”¶åˆ°æ¥è‡ªfootçš„æ•°æ®"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span class="token comment" spellcheck="true">//index.vue</span><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>Head<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>        <span class="token operator">&lt;</span>Foot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Foot<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    <span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">'@/components/head.vue'</span>    <span class="token keyword">import</span> Foot <span class="token keyword">from</span> <span class="token string">'@/components/foot.vue'</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        components<span class="token punctuation">:</span> <span class="token punctuation">{</span>            Head<span class="token punctuation">,</span>            Foot        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h1 id="3-å…¨å±€é…ç½®å’Œé¡µé¢é…ç½®"><a href="#3-å…¨å±€é…ç½®å’Œé¡µé¢é…ç½®" class="headerlink" title="3 å…¨å±€é…ç½®å’Œé¡µé¢é…ç½®"></a>3 å…¨å±€é…ç½®å’Œé¡µé¢é…ç½®</h1><h2 id="3-1-é€šè¿‡globalStyleè¿›è¡Œå…¨å±€é…ç½®"><a href="#3-1-é€šè¿‡globalStyleè¿›è¡Œå…¨å±€é…ç½®" class="headerlink" title="3.1 é€šè¿‡globalStyleè¿›è¡Œå…¨å±€é…ç½®"></a>3.1 é€šè¿‡globalStyleè¿›è¡Œå…¨å±€é…ç½®</h2><p>ç”¨äºè®¾ç½®åº”ç”¨çš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ç­‰ã€‚<a href="https://uniapp.dcloud.io/collocation/pages?id=globalstyle">è¯¦ç»†æ–‡æ¡£</a></p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>navigationBarBackgroundColor</td><td>HexColor</td><td>#F7F7F7</td><td>å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼ˆåŒçŠ¶æ€æ èƒŒæ™¯è‰²ï¼‰</td></tr><tr><td>navigationBarTextStyle</td><td>String</td><td>white</td><td>å¯¼èˆªæ æ ‡é¢˜é¢œè‰²åŠçŠ¶æ€æ å‰æ™¯é¢œè‰²ï¼Œä»…æ”¯æŒ black/white</td></tr><tr><td>navigationBarTitleText</td><td>String</td><td></td><td>å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹</td></tr><tr><td>backgroundColor</td><td>HexColor</td><td>#ffffff</td><td>çª—å£çš„èƒŒæ™¯è‰²</td></tr><tr><td>backgroundTextStyle</td><td>String</td><td>dark</td><td>ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ dark / light</td></tr><tr><td>enablePullDownRefresh</td><td>Boolean</td><td>false</td><td>æ˜¯å¦å¼€å¯ä¸‹æ‹‰åˆ·æ–°ï¼Œè¯¦è§<a href="https://uniapp.dcloud.io/use?id=%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">é¡µé¢ç”Ÿå‘½å‘¨æœŸ</a>ã€‚</td></tr><tr><td>onReachBottomDistance</td><td>Number</td><td>50</td><td>é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»ï¼Œå•ä½åªæ”¯æŒpxï¼Œè¯¦è§<a href="https://uniapp.dcloud.io/use?id=%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">é¡µé¢ç”Ÿå‘½å‘¨æœŸ</a></td></tr></tbody></table><h2 id="3-2-åˆ›å»ºæ–°çš„messageé¡µé¢"><a href="#3-2-åˆ›å»ºæ–°çš„messageé¡µé¢" class="headerlink" title="3.2 åˆ›å»ºæ–°çš„messageé¡µé¢"></a>3.2 åˆ›å»ºæ–°çš„messageé¡µé¢</h2><p>å³é”®pagesæ–°å»ºmessageç›®å½•ï¼Œåœ¨messageç›®å½•ä¸‹å³é”®æ–°å»º.vueæ–‡ä»¶,å¹¶é€‰æ‹©åŸºæœ¬æ¨¡æ¿</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>        è¿™æ˜¯ä¿¡æ¯é¡µé¢    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h2 id="3-3-é€šè¿‡pagesæ¥é…ç½®é¡µé¢"><a href="#3-3-é€šè¿‡pagesæ¥é…ç½®é¡µé¢" class="headerlink" title="3.3 é€šè¿‡pagesæ¥é…ç½®é¡µé¢"></a>3.3 é€šè¿‡pagesæ¥é…ç½®é¡µé¢</h2><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>path</td><td>String</td><td></td><td>é…ç½®é¡µé¢è·¯å¾„</td></tr><tr><td>style</td><td>Object</td><td></td><td>é…ç½®é¡µé¢çª—å£è¡¨ç°ï¼Œé…ç½®é¡¹å‚è€ƒ <a href="https://uniapp.dcloud.io/collocation/pages?id=style">pageStyle</a></td></tr></tbody></table><p>pagesæ•°ç»„æ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µ</p><pre class=" language-html"><code class="language-html">"pages": [         {            "path":"pages/message/message"        },        {            "path": "pages/index/index",            "style": {                "navigationBarTitleText": "uni-app"            }        }    ]</code></pre><p>é€šè¿‡styleä¿®æ”¹é¡µé¢çš„æ ‡é¢˜å’Œå¯¼èˆªæ èƒŒæ™¯è‰²ï¼Œå¹¶ä¸”è®¾ç½®h5ä¸‹æ‹‰åˆ·æ–°çš„ç‰¹æœ‰æ ·å¼</p><pre class=" language-js"><code class="language-js"><span class="token string">"pages"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment" spellcheck="true">//pagesæ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µï¼Œå‚è€ƒï¼šhttps://uniapp.dcloud.io/collocation/pages</span>        <span class="token punctuation">{</span>            <span class="token string">"path"</span><span class="token punctuation">:</span><span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>            <span class="token string">"style"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>                <span class="token string">"navigationBarBackgroundColor"</span><span class="token punctuation">:</span> <span class="token string">"#007AFF"</span><span class="token punctuation">,</span>                <span class="token string">"navigationBarTextStyle"</span><span class="token punctuation">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span>                <span class="token string">"enablePullDownRefresh"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token string">"disableScroll"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token string">"h5"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>                    <span class="token string">"pullToRefresh"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>                        <span class="token string">"color"</span><span class="token punctuation">:</span> <span class="token string">"#007AFF"</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">]</span></code></pre><h2 id="3-4-é…ç½®tabbar"><a href="#3-4-é…ç½®tabbar" class="headerlink" title="3.4 é…ç½®tabbar"></a>3.4 é…ç½®tabbar</h2><p>å¦‚æœåº”ç”¨æ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µã€‚</p><p><strong>Tips</strong></p><ul><li>å½“è®¾ç½® position ä¸º top æ—¶ï¼Œå°†ä¸ä¼šæ˜¾ç¤º icon</li><li>tabBar ä¸­çš„ list æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½é…ç½®æœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tabï¼Œtab æŒ‰æ•°ç»„çš„é¡ºåºæ’åºã€‚</li></ul><p><strong>å±æ€§è¯´æ˜ï¼š</strong></p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>é»˜è®¤å€¼</th><th>æè¿°</th><th>å¹³å°å·®å¼‚è¯´æ˜</th></tr></thead><tbody><tr><td>color</td><td>HexColor</td><td>æ˜¯</td><td></td><td>tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰²</td><td></td></tr><tr><td>selectedColor</td><td>HexColor</td><td>æ˜¯</td><td></td><td>tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰²</td><td></td></tr><tr><td>backgroundColor</td><td>HexColor</td><td>æ˜¯</td><td></td><td>tab çš„èƒŒæ™¯è‰²</td><td></td></tr><tr><td>borderStyle</td><td>String</td><td>å¦</td><td>black</td><td>tabbar ä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œä»…æ”¯æŒ black/white</td><td>App 2.3.4+ æ”¯æŒå…¶ä»–é¢œè‰²å€¼</td></tr><tr><td>list</td><td>Array</td><td>æ˜¯</td><td></td><td>tab çš„åˆ—è¡¨ï¼Œè¯¦è§ list å±æ€§è¯´æ˜ï¼Œæœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tab</td><td></td></tr><tr><td>position</td><td>String</td><td>å¦</td><td>bottom</td><td>å¯é€‰å€¼ bottomã€top</td><td>top å€¼ä»…å¾®ä¿¡å°ç¨‹åºæ”¯æŒ</td></tr></tbody></table><p>å…¶ä¸­ list æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å€¼å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>pagePath</td><td>String</td><td>æ˜¯</td><td>é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰</td></tr><tr><td>text</td><td>String</td><td>æ˜¯</td><td>tab ä¸ŠæŒ‰é’®æ–‡å­—ï¼Œåœ¨ 5+APP å’Œ H5 å¹³å°ä¸ºéå¿…å¡«ã€‚ä¾‹å¦‚ä¸­é—´å¯æ”¾ä¸€ä¸ªæ²¡æœ‰æ–‡å­—çš„+å·å›¾æ ‡</td></tr><tr><td>iconPath</td><td>String</td><td>å¦</td><td>å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œå½“ postion ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ï¼Œä¸æ”¯æŒå­—ä½“å›¾æ ‡</td></tr><tr><td>selectedIconPath</td><td>String</td><td>å¦</td><td>é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81px ï¼Œå½“ postion ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆ</td></tr></tbody></table><p>æ¡ˆä¾‹ä»£ç ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token string">"tabBar"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">"list"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>                <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"é¦–é¡µ"</span><span class="token punctuation">,</span>                <span class="token string">"pagePath"</span><span class="token punctuation">:</span><span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>                <span class="token string">"iconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/home.png"</span><span class="token punctuation">,</span>                <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/home-active.png"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"ä¿¡æ¯"</span><span class="token punctuation">,</span>                <span class="token string">"pagePath"</span><span class="token punctuation">:</span><span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>                <span class="token string">"iconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/message.png"</span><span class="token punctuation">,</span>                <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/message-active.png"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>                <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"æˆ‘ä»¬"</span><span class="token punctuation">,</span>                <span class="token string">"pagePath"</span><span class="token punctuation">:</span><span class="token string">"pages/contact/contact"</span><span class="token punctuation">,</span>                <span class="token string">"iconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/contact.png"</span><span class="token punctuation">,</span>                <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span><span class="token string">"static/tabs/contact-active.png"</span>            <span class="token punctuation">}</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span></code></pre><h2 id="3-5-conditionå¯åŠ¨æ¨¡å¼é…ç½®"><a href="#3-5-conditionå¯åŠ¨æ¨¡å¼é…ç½®" class="headerlink" title="3.5 conditionå¯åŠ¨æ¨¡å¼é…ç½®"></a>3.5 conditionå¯åŠ¨æ¨¡å¼é…ç½®</h2><p>å¯åŠ¨æ¨¡å¼é…ç½®ï¼Œä»…å¼€å‘æœŸé—´ç”Ÿæ•ˆï¼Œç”¨äºæ¨¡æ‹Ÿç›´è¾¾é¡µé¢çš„åœºæ™¯ï¼Œå¦‚ï¼šå°ç¨‹åºè½¬å‘åï¼Œç”¨æˆ·ç‚¹å‡»æ‰€æ‰“å¼€çš„é¡µé¢ã€‚</p><p>è®°å¾—è¦åœ¨å¾®ä¿¡å¼€å‘å·¥å…·é‡Œé€‰ä¸­ä½ è¦è°ƒè¯•çš„æ¨¡å¼</p><p><strong>å±æ€§è¯´æ˜ï¼š</strong></p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…å¡«</th><th>æè¿°</th></tr></thead><tbody><tr><td>current</td><td>Number</td><td>æ˜¯</td><td>å½“å‰æ¿€æ´»çš„æ¨¡å¼ï¼ŒlistèŠ‚ç‚¹çš„ç´¢å¼•å€¼</td></tr><tr><td>list</td><td>Array</td><td>æ˜¯</td><td>å¯åŠ¨æ¨¡å¼åˆ—è¡¨</td></tr></tbody></table><p><strong>listè¯´æ˜ï¼š</strong></p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…å¡«</th><th>æè¿°</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>æ˜¯</td><td>å¯åŠ¨æ¨¡å¼åç§°</td></tr><tr><td>path</td><td>String</td><td>æ˜¯</td><td>å¯åŠ¨é¡µé¢è·¯å¾„</td></tr><tr><td>query</td><td>String</td><td>å¦</td><td>å¯åŠ¨å‚æ•°ï¼Œå¯åœ¨é¡µé¢çš„ <a href="https://uniapp.dcloud.io/use?id=%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">onLoad</a> å‡½æ•°é‡Œè·å¾—</td></tr></tbody></table><h1 id="4-uniåŸºç¡€ç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨"><a href="#4-uniåŸºç¡€ç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="4 uniåŸºç¡€ç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨"></a>4 uniåŸºç¡€ç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨</h1><p>uni-appæä¾›äº†ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶ç»™å¼€å‘è€…ï¼Œå¼€å‘è€…å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œç»„åˆå„ç§ç»„ä»¶æ‹¼æ¥ç§°è‡ªå·±çš„åº”ç”¨</p><p>uni-appä¸­çš„ç»„ä»¶ï¼Œå°±åƒ <code>HTML</code> ä¸­çš„ <code>div</code> ã€<code>p</code>ã€<code>span</code> ç­‰æ ‡ç­¾çš„ä½œç”¨ä¸€æ ·ï¼Œç”¨äºæ­å»ºé¡µé¢çš„åŸºç¡€ç»“æ„</p><h2 id="4-1-textæ–‡æœ¬ç»„ä»¶çš„ç”¨æ³•"><a href="#4-1-textæ–‡æœ¬ç»„ä»¶çš„ç”¨æ³•" class="headerlink" title="4.1 textæ–‡æœ¬ç»„ä»¶çš„ç”¨æ³•"></a>4.1 textæ–‡æœ¬ç»„ä»¶çš„ç”¨æ³•</h2><h4 id="001-text-ç»„ä»¶çš„å±æ€§"><a href="#001-text-ç»„ä»¶çš„å±æ€§" class="headerlink" title="001 - text ç»„ä»¶çš„å±æ€§"></a>001 - text ç»„ä»¶çš„å±æ€§</h4><table><thead><tr><th align="center">å±æ€§</th><th align="center">ç±»å‹</th><th align="center">é»˜è®¤å€¼</th><th align="center">å¿…å¡«</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">selectable</td><td align="center">boolean</td><td align="center">false</td><td align="center">å¦</td><td align="center">æ–‡æœ¬æ˜¯å¦å¯é€‰</td></tr><tr><td align="center">space</td><td align="center">string</td><td align="center">.</td><td align="center">å¦</td><td align="center">æ˜¾ç¤ºè¿ç»­ç©ºæ ¼ï¼Œå¯é€‰å‚æ•°ï¼š<code>ensp</code>ã€<code>emsp</code>ã€<code>nbsp</code></td></tr><tr><td align="center">decode</td><td align="center">boolean</td><td align="center">false</td><td align="center">å¦</td><td align="center">æ˜¯å¦è§£ç </td></tr></tbody></table><ul><li><code>text</code> ç»„ä»¶ç›¸å½“äºè¡Œå†…æ ‡ç­¾ã€åœ¨åŒä¸€è¡Œæ˜¾ç¤º</li><li>é™¤äº†æ–‡æœ¬èŠ‚ç‚¹ä»¥å¤–çš„å…¶ä»–èŠ‚ç‚¹éƒ½æ— æ³•é•¿æŒ‰é€‰ä¸­</li></ul><h4 id="002-ä»£ç æ¡ˆä¾‹"><a href="#002-ä»£ç æ¡ˆä¾‹" class="headerlink" title="002 - ä»£ç æ¡ˆä¾‹"></a>002 - ä»£ç æ¡ˆä¾‹</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- é•¿æŒ‰æ–‡æœ¬æ˜¯å¦å¯é€‰ --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">selectable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>æ¥äº†è€å¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- æ˜¾ç¤ºè¿ç»­ç©ºæ ¼çš„æ–¹å¼ --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">space</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ensp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>æ¥äº†  è€å¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">space</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>emsp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>æ¥äº†  è€å¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">space</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>nbsp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>æ¥äº†  è€å¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>skyblue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- æ˜¯å¦è§£ç  --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">decode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token entity" title="&nbsp;">&amp;nbsp;</span> <span class="token entity" title="&lt;">&amp;lt;</span> <span class="token entity" title="&gt;">&amp;gt;</span> <span class="token entity" title="&amp;">&amp;amp;</span> <span class="token entity" title="&apos;">&amp;apos;</span> <span class="token entity" title="&ensp;">&amp;ensp;</span> <span class="token entity" title="&emsp;">&amp;emsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><h2 id="4-2-viewè§†å›¾å®¹å™¨ç»„ä»¶çš„ç”¨æ³•"><a href="#4-2-viewè§†å›¾å®¹å™¨ç»„ä»¶çš„ç”¨æ³•" class="headerlink" title="4.2 viewè§†å›¾å®¹å™¨ç»„ä»¶çš„ç”¨æ³•"></a>4.2 viewè§†å›¾å®¹å™¨ç»„ä»¶çš„ç”¨æ³•</h2><blockquote><p>View è§†å›¾å®¹å™¨ï¼Œ ç±»ä¼¼äº HTML ä¸­çš„ div</p></blockquote><h4 id="001-ç»„ä»¶çš„å±æ€§"><a href="#001-ç»„ä»¶çš„å±æ€§" class="headerlink" title="001 - ç»„ä»¶çš„å±æ€§"></a>001 - ç»„ä»¶çš„å±æ€§</h4><p><img src="https://i.loli.net/2020/11/09/7Atvbg1BofdWGaQ.png"></p><h4 id="002-ä»£ç æ¡ˆä¾‹-1"><a href="#002-ä»£ç æ¡ˆä¾‹-1" class="headerlink" title="002 - ä»£ç æ¡ˆä¾‹"></a>002 - ä»£ç æ¡ˆä¾‹</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box2<span class="token punctuation">"</span></span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box2_active<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>box1<span class="token punctuation">'</span></span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>active<span class="token punctuation">'</span></span> <span class="token attr-name">hover-stop-propagation</span> <span class="token attr-name">:hover-start-time</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2000<span class="token punctuation">"</span></span> <span class="token attr-name">:hover-stay-time</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>2000<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><h2 id="4-3-buttonæŒ‰é’®ç»„ä»¶çš„ç”¨æ³•"><a href="#4-3-buttonæŒ‰é’®ç»„ä»¶çš„ç”¨æ³•" class="headerlink" title="4.3 buttonæŒ‰é’®ç»„ä»¶çš„ç”¨æ³•"></a>4.3 buttonæŒ‰é’®ç»„ä»¶çš„ç”¨æ³•</h2><h4 id="001-ç»„ä»¶çš„å±æ€§-1"><a href="#001-ç»„ä»¶çš„å±æ€§-1" class="headerlink" title="001 - ç»„ä»¶çš„å±æ€§"></a>001 - ç»„ä»¶çš„å±æ€§</h4><table><thead><tr><th align="center">å±æ€§å</th><th align="center">ç±»å‹</th><th align="center">é»˜è®¤å€¼</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">size</td><td align="center">String</td><td align="center">default</td><td align="center">æŒ‰é’®çš„å¤§å°</td></tr><tr><td align="center">type</td><td align="center">String</td><td align="center">default</td><td align="center">æŒ‰é’®çš„æ ·å¼ç±»å‹</td></tr><tr><td align="center">plain</td><td align="center">Boolean</td><td align="center">false</td><td align="center">æŒ‰é’®æ˜¯å¦é•‚ç©ºï¼ŒèƒŒæ™¯è‰²é€æ˜</td></tr><tr><td align="center">disabled</td><td align="center">Boolean</td><td align="center">false</td><td align="center">æ˜¯å¦æŒ‰é’®</td></tr><tr><td align="center">loading</td><td align="center">Boolean</td><td align="center">false</td><td align="center">åç§°æ˜¯å¦å¸¦ loading tå›¾æ ‡</td></tr></tbody></table><ul><li><code>button</code> ç»„ä»¶é»˜è®¤ç‹¬å ä¸€è¡Œï¼Œè®¾ç½® <code>size</code> ä¸º <code>mini</code> æ—¶å¯ä»¥åœ¨ä¸€è¡Œæ˜¾ç¤ºå¤šä¸ª</li></ul><h4 id="002-æ¡ˆä¾‹ä»£ç "><a href="#002-æ¡ˆä¾‹ä»£ç " class="headerlink" title="002 - æ¡ˆä¾‹ä»£ç "></a>002 - æ¡ˆä¾‹ä»£ç </h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>mini<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>primary<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>å‰ç«¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>mini<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>default<span class="token punctuation">'</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>å‰ç«¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>mini<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>warn<span class="token punctuation">'</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>å‰ç«¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><h3 id="1-7-4-imageç»„ä»¶çš„ä½¿ç”¨"><a href="#1-7-4-imageç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="1.7.4 imageç»„ä»¶çš„ä½¿ç”¨"></a>1.7.4 imageç»„ä»¶çš„ä½¿ç”¨</h3><p><a href="https://uniapp.dcloud.io/component/image?id=image">image</a>å›¾ç‰‡ã€‚</p><table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>å¹³å°å·®å¼‚è¯´æ˜</th></tr></thead><tbody><tr><td>src</td><td>String</td><td></td><td>å›¾ç‰‡èµ„æºåœ°å€</td><td></td></tr><tr><td>mode</td><td>String</td><td>â€˜scaleToFillâ€™</td><td>å›¾ç‰‡è£å‰ªã€ç¼©æ”¾çš„æ¨¡å¼</td><td></td></tr></tbody></table><p><strong>Tips</strong></p><ul><li><code>&lt;image&gt;</code> ç»„ä»¶é»˜è®¤å®½åº¦ 300pxã€é«˜åº¦ 225pxï¼›</li><li><code>src</code> ä»…æ”¯æŒç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„ï¼Œæ”¯æŒ base64 ç ï¼›</li><li>é¡µé¢ç»“æ„å¤æ‚ï¼Œcssæ ·å¼å¤ªå¤šçš„æƒ…å†µï¼Œä½¿ç”¨ image å¯èƒ½å¯¼è‡´æ ·å¼ç”Ÿæ•ˆè¾ƒæ…¢ï¼Œå‡ºç° â€œé—ªä¸€ä¸‹â€ çš„æƒ…å†µï¼Œæ­¤æ—¶è®¾ç½® <code>image{will-change: transform}</code> ,å¯ä¼˜åŒ–æ­¤é—®é¢˜ã€‚</li></ul><h1 id="5-uni-appä¸­çš„æ ·å¼"><a href="#5-uni-appä¸­çš„æ ·å¼" class="headerlink" title="5 uni-appä¸­çš„æ ·å¼"></a>5 uni-appä¸­çš„æ ·å¼</h1><ul><li><p>rpx å³å“åº”å¼pxï¼Œä¸€ç§æ ¹æ®å±å¹•å®½åº¦è‡ªé€‚åº”çš„åŠ¨æ€å•ä½ã€‚ä»¥750å®½çš„å±å¹•ä¸ºåŸºå‡†ï¼Œ750rpxæ°å¥½ä¸ºå±å¹•å®½åº¦ã€‚å±å¹•å˜å®½ï¼Œrpx å®é™…æ˜¾ç¤ºæ•ˆæœä¼šç­‰æ¯”æ”¾å¤§ã€‚</p></li><li><p>ä½¿ç”¨<code>@import</code>è¯­å¥å¯ä»¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ï¼Œ<code>@import</code>åè·Ÿéœ€è¦å¯¼å…¥çš„å¤–è”æ ·å¼è¡¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨<code>;</code>è¡¨ç¤ºè¯­å¥ç»“æŸ</p></li><li><p>æ”¯æŒåŸºæœ¬å¸¸ç”¨çš„é€‰æ‹©å™¨classã€idã€elementç­‰</p></li><li><p>åœ¨ <code>uni-app</code> ä¸­ä¸èƒ½ä½¿ç”¨ <code>*</code> é€‰æ‹©å™¨ã€‚</p></li><li><p><code>page</code> ç›¸å½“äº <code>body</code> èŠ‚ç‚¹</p></li><li><p>å®šä¹‰åœ¨ App.vue ä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ¯ä¸€ä¸ªé¡µé¢ã€‚åœ¨ pages ç›®å½•ä¸‹ çš„ vue æ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ï¼ˆscopedï¼‰ä¸ºå±€éƒ¨æ ·å¼ï¼Œåªä½œç”¨åœ¨å¯¹åº”çš„é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– App.vue ä¸­ç›¸åŒçš„é€‰æ‹©å™¨ã€‚</p></li><li><p><code>uni-app</code> æ”¯æŒä½¿ç”¨å­—ä½“å›¾æ ‡ï¼Œä½¿ç”¨æ–¹å¼ä¸æ™®é€š <code>web</code> é¡¹ç›®ç›¸åŒï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p>å­—ä½“æ–‡ä»¶å°äº 40kbï¼Œ<code>uni-app</code> ä¼šè‡ªåŠ¨å°†å…¶è½¬åŒ–ä¸º base64 æ ¼å¼ï¼›</p></li><li><p>å­—ä½“æ–‡ä»¶å¤§äºç­‰äº 40kbï¼Œ éœ€å¼€å‘è€…è‡ªå·±è½¬æ¢ï¼Œå¦åˆ™ä½¿ç”¨å°†ä¸ç”Ÿæ•ˆï¼›</p></li><li><p>å­—ä½“æ–‡ä»¶çš„å¼•ç”¨è·¯å¾„æ¨èä½¿ç”¨ä»¥ ~@ å¼€å¤´çš„ç»å¯¹è·¯å¾„ã€‚</p></li><li><p><a href="https://www.jianshu.com/p/f423b4e937af">https://www.jianshu.com/p/f423b4e937af</a></p><pre><code> @font-face {     font-family: test1-icon;     src: url('~@/static/iconfont.ttf'); }</code></pre></li></ul></li><li><p>å¦‚ä½•ä½¿ç”¨scssæˆ–è€…less</p><pre><code>//1.å®‰è£…æ’ä»¶npm install less less-loader --save//2.vueæ–‡ä»¶ä¸­ä½¿ç”¨ &lt;style lang="less"&gt;</code></pre></li></ul><h1 id="6-uniçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#6-uniçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6 uniçš„ç”Ÿå‘½å‘¨æœŸ"></a>6 uniçš„ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="6-1-åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#6-1-åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.1 åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ"></a>6.1 åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼šä¸€ä¸ªå¯¹è±¡ä»åˆ›å»ºã€è¿è¡Œã€é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹è¢«æˆä¸ºç”Ÿå‘½å‘¨æœŸã€‚</p><p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šåœ¨ç”Ÿå‘½å‘¨æœŸä¸­æ¯ä¸ªé˜¶æ®µä¼šä¼´éšç€æ¯ä¸€ä¸ªå‡½æ•°çš„è§¦å‘ï¼Œè¿™äº›å‡½æ•°è¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><p><code>uni-app</code> æ”¯æŒå¦‚ä¸‹åº”ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>onLaunch</td><td>å½“<code>uni-app</code> åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰</td></tr><tr><td>onShow</td><td>å½“ <code>uni-app</code> å¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤º</td></tr><tr><td>onHide</td><td>å½“ <code>uni-app</code> ä»å‰å°è¿›å…¥åå°</td></tr><tr><td>onError</td><td>å½“ <code>uni-app</code> æŠ¥é”™æ—¶è§¦å‘</td></tr></tbody></table><h2 id="6-2-é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#6-2-é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.2 é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ"></a>6.2 é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><code>uni-app</code> æ”¯æŒå¦‚ä¸‹é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th><th>å¹³å°å·®å¼‚è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>onLoad</td><td>ç›‘å¬é¡µé¢åŠ è½½ï¼Œå…¶å‚æ•°ä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»å‹ä¸ºObjectï¼ˆç”¨äºé¡µé¢ä¼ å‚ï¼‰ï¼Œå‚è€ƒ<a href="https://uniapp.dcloud.io/api/router?id=navigateto">ç¤ºä¾‹</a></td><td></td><td></td></tr><tr><td>onShow</td><td>ç›‘å¬é¡µé¢æ˜¾ç¤ºã€‚é¡µé¢æ¯æ¬¡å‡ºç°åœ¨å±å¹•ä¸Šéƒ½è§¦å‘ï¼ŒåŒ…æ‹¬ä»ä¸‹çº§é¡µé¢ç‚¹è¿”å›éœ²å‡ºå½“å‰é¡µé¢</td><td></td><td></td></tr><tr><td>onReady</td><td>ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆã€‚</td><td></td><td></td></tr><tr><td>onHide</td><td>ç›‘å¬é¡µé¢éšè—</td><td></td><td></td></tr><tr><td>onUnload</td><td>ç›‘å¬é¡µé¢å¸è½½</td><td></td><td></td></tr></tbody></table><h1 id="7-uniç›¸å…³API"><a href="#7-uniç›¸å…³API" class="headerlink" title="7 uniç›¸å…³API"></a>7 uniç›¸å…³API</h1><h2 id="7-1-ä¸‹æ‹‰åˆ·æ–°"><a href="#7-1-ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="7.1 ä¸‹æ‹‰åˆ·æ–°"></a>7.1 ä¸‹æ‹‰åˆ·æ–°</h2><h3 id="7-1-1-å¼€å¯ä¸‹æ‹‰åˆ·æ–°"><a href="#7-1-1-å¼€å¯ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="7.1.1 å¼€å¯ä¸‹æ‹‰åˆ·æ–°"></a>7.1.1 å¼€å¯ä¸‹æ‹‰åˆ·æ–°</h3><p>åœ¨uni-appä¸­æœ‰ä¸¤ç§æ–¹å¼å¼€å¯ä¸‹æ‹‰åˆ·æ–°</p><ul><li>éœ€è¦åœ¨ <code>pages.json</code> é‡Œï¼Œæ‰¾åˆ°çš„å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ï¼Œå¹¶åœ¨ <code>style</code> é€‰é¡¹ä¸­å¼€å¯ <code>enablePullDownRefresh</code></li><li>é€šè¿‡è°ƒç”¨uni.startPullDownRefreshæ–¹æ³•æ¥å¼€å¯ä¸‹æ‹‰åˆ·æ–°</li></ul><h4 id="a-é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯"><a href="#a-é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯" class="headerlink" title="a) é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯"></a>a) é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯</h4><p>é€šè¿‡pages.jsonæ–‡ä»¶ä¸­æ‰¾åˆ°å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ï¼Œå¹¶åœ¨ <code>style</code> é€‰é¡¹ä¸­å¼€å¯ <code>enablePullDownRefresh</code></p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>  <span class="token string">"path"</span><span class="token punctuation">:</span><span class="token string">"pages/list/list"</span><span class="token punctuation">,</span>    <span class="token string">"style"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>      <span class="token string">"enablePullDownRefresh"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="b-é€šè¿‡APIå¼€å¯"><a href="#b-é€šè¿‡APIå¼€å¯" class="headerlink" title="b) é€šè¿‡APIå¼€å¯"></a>b) é€šè¿‡APIå¼€å¯</h4><p><a href="https://uniapp.dcloud.io/api/ui/pulldown">apiæ–‡æ¡£</a></p><pre class=" language-html"><code class="language-html">uni.startPullDownRefresh({})</code></pre><h3 id="7-1-2-ç›‘å¬ä¸‹æ‹‰åˆ·æ–°"><a href="#7-1-2-ç›‘å¬ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="7.1.2 ç›‘å¬ä¸‹æ‹‰åˆ·æ–°"></a>7.1.2 ç›‘å¬ä¸‹æ‹‰åˆ·æ–°</h3><p>é€šè¿‡onPullDownRefreshå¯ä»¥ç›‘å¬åˆ°ä¸‹æ‹‰åˆ·æ–°çš„åŠ¨ä½œ</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        è¿™æ˜¯ä¿¡æ¯é¡µé¢    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token function">startPull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">startPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è§¦å‘ä¸‹æ‹‰åˆ·æ–°äº†'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h3 id="7-1-3-å…³é—­ä¸‹æ‹‰åˆ·æ–°"><a href="#7-1-3-å…³é—­ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="7.1.3 å…³é—­ä¸‹æ‹‰åˆ·æ–°"></a>7.1.3 å…³é—­ä¸‹æ‹‰åˆ·æ–°</h3><p>uni.stopPullDownRefresh()      åœæ­¢å½“å‰é¡µé¢ä¸‹æ‹‰åˆ·æ–° </p><h2 id="7-2-ä¸Šæ‹‰åŠ è½½"><a href="#7-2-ä¸Šæ‹‰åŠ è½½" class="headerlink" title="7.2 ä¸Šæ‹‰åŠ è½½"></a>7.2 ä¸Šæ‹‰åŠ è½½</h2><p>é€šè¿‡åœ¨pages.jsonæ–‡ä»¶ä¸­æ‰¾åˆ°å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ä¸‹styleä¸­é…ç½®onReachBottomDistanceå¯ä»¥è®¾ç½®è·ç¦»åº•éƒ¨å¼€å¯åŠ è½½çš„è·ç¦»ï¼Œé»˜è®¤ä¸º50px</p><p>é€šè¿‡onReachBottomç›‘å¬åˆ°è§¦åº•çš„è¡Œä¸º</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in arr"</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"index"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>            <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'å‰ç«¯'</span><span class="token punctuation">,</span> <span class="token string">'java'</span><span class="token punctuation">,</span> <span class="token string">'ui'</span><span class="token punctuation">,</span> <span class="token string">'å¤§æ•°æ®'</span><span class="token punctuation">,</span> <span class="token string">'å‰ç«¯'</span><span class="token punctuation">,</span> <span class="token string">'java'</span><span class="token punctuation">,</span> <span class="token string">'ui'</span><span class="token punctuation">,</span> <span class="token string">'å¤§æ•°æ®'</span><span class="token punctuation">,</span><span class="token string">'ui'</span><span class="token punctuation">,</span> <span class="token string">'å¤§æ•°æ®'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">startPull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">startPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è§¦å‘ä¸‹æ‹‰åˆ·æ–°äº†'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è§¦åº•äº†'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span><span class="token operator">></span>    <span class="token punctuation">.</span>item <span class="token punctuation">{</span>        height<span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>        line<span class="token operator">-</span>height<span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span class="token comment" spellcheck="true">//App.vueä¸­æ·»åŠ </span><span class="token operator">&lt;</span>style<span class="token operator">></span>    page<span class="token punctuation">{</span>        overflow<span class="token operator">-</span>y<span class="token punctuation">:</span>scroll<span class="token operator">!</span>important<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h2 id="7-3-ç½‘ç»œè¯·æ±‚"><a href="#7-3-ç½‘ç»œè¯·æ±‚" class="headerlink" title="7.3 ç½‘ç»œè¯·æ±‚"></a>7.3 ç½‘ç»œè¯·æ±‚</h2><p>åœ¨uniä¸­å¯ä»¥è°ƒç”¨uni.requestæ–¹æ³•è¿›è¡Œè¯·æ±‚ç½‘ç»œè¯·æ±‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨å°ç¨‹åºä¸­ç½‘ç»œç›¸å…³çš„ API åœ¨ä½¿ç”¨å‰éœ€è¦é…ç½®åŸŸåç™½åå•ã€‚</p><pre class=" language-javascript"><code class="language-javascript">uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> <span class="token string">'http://localhost/myUniApp/php/login.php'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//ä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶éçœŸå®æ¥å£åœ°å€ã€‚</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//å‚æ•°</span>        rawData<span class="token punctuation">:</span> rawData<span class="token punctuation">,</span>        code<span class="token punctuation">:</span> loginRes<span class="token punctuation">.</span>code    <span class="token punctuation">}</span><span class="token punctuation">,</span>    header<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">'custom-header'</span><span class="token punctuation">:</span> <span class="token string">'hello'</span> <span class="token comment" spellcheck="true">//è‡ªå®šä¹‰è¯·æ±‚å¤´ä¿¡æ¯</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    method<span class="token punctuation">:</span><span class="token string">'POST'</span><span class="token comment" spellcheck="true">//è¯·æ±‚æ–¹å¼  æˆ–GET</span>    success<span class="token punctuation">:</span> res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿”å›'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p><strong>è¯·æ±‚ç¤ºä¾‹</strong></p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"sendGet"</span><span class="token operator">></span>å‘é€è¯·æ±‚<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"movieData"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>text<span class="token operator">></span>ç”µå½±åå­—ï¼š<span class="token punctuation">{</span><span class="token punctuation">{</span>movieData<span class="token punctuation">.</span>originalName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span>view<span class="token operator">></span>                å¯¼æ¼”ï¼š                <span class="token operator">&lt;</span>text v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in movieData.director"</span><span class="token operator">></span>                    <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>            <span class="token operator">&lt;</span>view<span class="token operator">></span>ç”µå½±ä¿¡æ¯                <span class="token punctuation">{</span><span class="token punctuation">{</span>movieData<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>genre<span class="token punctuation">}</span><span class="token punctuation">}</span>                <span class="token punctuation">{</span><span class="token punctuation">{</span>movieData<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>language<span class="token punctuation">}</span><span class="token punctuation">}</span>                <span class="token punctuation">{</span><span class="token punctuation">{</span>movieData<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token punctuation">}</span>                <span class="token punctuation">{</span><span class="token punctuation">{</span>movieData<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>country<span class="token punctuation">}</span><span class="token punctuation">}</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    type MovieBasicType <span class="token operator">=</span> <span class="token punctuation">{</span>        genre<span class="token punctuation">:</span>string        name<span class="token punctuation">:</span>string        lang<span class="token punctuation">:</span>string        language<span class="token punctuation">:</span>string        poster<span class="token punctuation">:</span>string        description<span class="token punctuation">:</span>string        country<span class="token punctuation">:</span>string    <span class="token punctuation">}</span>    type MovieDirectorType <span class="token operator">=</span> <span class="token punctuation">{</span>        name<span class="token punctuation">:</span>string<span class="token punctuation">,</span>        lang<span class="token punctuation">:</span>string    <span class="token punctuation">}</span>    type MovieDataType <span class="token operator">=</span> <span class="token punctuation">{</span>        id<span class="token operator">?</span><span class="token punctuation">:</span>string<span class="token punctuation">,</span>        originalName<span class="token operator">?</span><span class="token punctuation">:</span>string<span class="token punctuation">,</span>        duration<span class="token operator">?</span><span class="token punctuation">:</span>number<span class="token punctuation">,</span>        data<span class="token operator">?</span><span class="token punctuation">:</span>MovieBasicType<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        director<span class="token operator">?</span><span class="token punctuation">:</span><span class="token punctuation">{</span>data<span class="token punctuation">:</span>MovieDirectorType<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> movieData<span class="token punctuation">:</span>MovieDataType<span class="token operator">|</span><span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token function">sendGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                url<span class="token punctuation">:</span> <span class="token string">'https://movie.querydata.org/api?id=1302425'</span><span class="token punctuation">,</span>                success<span class="token punctuation">:</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token keyword">const</span> resobj <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>movieData <span class="token operator">=</span> resobj <span class="token keyword">as</span> MovieDataType<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span class="token comment" spellcheck="true">//uni-appä¸­å¯¹tsçš„æ”¯æŒåªæ˜¯ä¸€èˆ¬ï¼Œæ²¡æœ‰éå¸¸ä¸¥æ ¼</span></code></pre><h2 id="7-4-æ•°æ®ç¼“å­˜"><a href="#7-4-æ•°æ®ç¼“å­˜" class="headerlink" title="7.4 æ•°æ®ç¼“å­˜"></a>7.4 æ•°æ®ç¼“å­˜</h2><p><a href="https://uniapp.dcloud.io/api/storage/storage?id=setstorage">å®˜æ–¹æ–‡æ¡£</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"setStor"</span><span class="token operator">></span>å­˜å‚¨æ•°æ®<span class="token operator">-</span>å¼‚æ­¥<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"setStorSync"</span><span class="token operator">></span>å­˜å‚¨æ•°æ®<span class="token operator">-</span>åŒæ­¥<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"getStorage"</span><span class="token operator">></span>è·å–æ•°æ®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"getStorageSync"</span><span class="token operator">></span>è·å–æ•°æ®<span class="token operator">-</span>åŒæ­¥<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"removeStorage"</span><span class="token operator">></span>åˆ é™¤æ•°æ®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"removeStorageSync"</span><span class="token operator">></span>åˆ é™¤æ•°æ®<span class="token operator">-</span>åŒæ­¥<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token function">setStor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>                data<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>                <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å­˜å‚¨æˆåŠŸ'</span><span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">setStorSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'id2'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>                success<span class="token punctuation">:</span> res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> id <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">removeStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">removeStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>                success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'åˆ é™¤æˆåŠŸ'</span><span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h2 id="7-5-ä¸Šä¼ å›¾ç‰‡ã€é¢„è§ˆå›¾ç‰‡"><a href="#7-5-ä¸Šä¼ å›¾ç‰‡ã€é¢„è§ˆå›¾ç‰‡" class="headerlink" title="7.5 ä¸Šä¼ å›¾ç‰‡ã€é¢„è§ˆå›¾ç‰‡"></a>7.5 ä¸Šä¼ å›¾ç‰‡ã€é¢„è§ˆå›¾ç‰‡</h2><h3 id="7-5-1-ä¸Šä¼ å›¾ç‰‡"><a href="#7-5-1-ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="7.5.1 ä¸Šä¼ å›¾ç‰‡"></a>7.5.1 ä¸Šä¼ å›¾ç‰‡</h3><p>uni.chooseImageæ–¹æ³•ä»æœ¬åœ°ç›¸å†Œé€‰æ‹©å›¾ç‰‡æˆ–ä½¿ç”¨ç›¸æœºæ‹ç…§ã€‚</p><p>æ¡ˆä¾‹ä»£ç </p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>chooseImg<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šä¼ å›¾ç‰‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in imgArr<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">    <span class="token keyword">import</span> <span class="token punctuation">{</span>        Component<span class="token punctuation">,</span>        Vue    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>    @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> imgArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token function">chooseImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>            uni<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                count<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>                success<span class="token punctuation">:</span> res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>imgArr <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="7-5-2-é¢„è§ˆå›¾ç‰‡"><a href="#7-5-2-é¢„è§ˆå›¾ç‰‡" class="headerlink" title="7.5.2 é¢„è§ˆå›¾ç‰‡"></a>7.5.2 é¢„è§ˆå›¾ç‰‡</h3><p>ç»“æ„</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in imgArr<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>previewImg(item)<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>é¢„è§ˆå›¾ç‰‡çš„æ–¹æ³•</p><pre class=" language-js"><code class="language-js">previewImg <span class="token punctuation">(</span>current<span class="token punctuation">:</span>any<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>  uni<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    urls<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imgArr<span class="token punctuation">,</span>    current  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="7-6-uniä¸­çš„å¯¼èˆªè·³è½¬"><a href="#7-6-uniä¸­çš„å¯¼èˆªè·³è½¬" class="headerlink" title="7.6 uniä¸­çš„å¯¼èˆªè·³è½¬"></a>7.6 uniä¸­çš„å¯¼èˆªè·³è½¬</h2><h3 id="7-6-1-åˆ©ç”¨navigatorè¿›è¡Œè·³è½¬"><a href="#7-6-1-åˆ©ç”¨navigatorè¿›è¡Œè·³è½¬" class="headerlink" title="7.6.1 åˆ©ç”¨navigatorè¿›è¡Œè·³è½¬"></a>7.6.1 åˆ©ç”¨navigatorè¿›è¡Œè·³è½¬</h3><p>navigatorè¯¦ç»†æ–‡æ¡£ï¼š<a href="https://uniapp.dcloud.io/component/navigator">æ–‡æ¡£åœ°å€</a></p><p>è·³è½¬åˆ°æ™®é€šé¡µé¢</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/pages/about/about<span class="token punctuation">"</span></span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navigator-hover<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è·³è½¬åˆ°å…³äºé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span></code></pre><p>è·³è½¬åˆ°tabbaré¡µé¢</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/pages/message/message<span class="token punctuation">"</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switchTab<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è·³è½¬åˆ°messageé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span></code></pre><h3 id="7-6-2-åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªè¿›è¡Œè·³è½¬"><a href="#7-6-2-åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªè¿›è¡Œè·³è½¬" class="headerlink" title="7.6.2 åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªè¿›è¡Œè·³è½¬"></a>7.6.2 åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªè¿›è¡Œè·³è½¬</h3><p><a href="%5Buni.navigateTo%5D(https://uniapp.dcloud.io/api/router?id=navigateto)">å¯¼èˆªè·³è½¬æ–‡æ¡£</a></p><h3 id="7-6-3-åˆ©ç”¨navigateToè¿›è¡Œå¯¼èˆªè·³è½¬"><a href="#7-6-3-åˆ©ç”¨navigateToè¿›è¡Œå¯¼èˆªè·³è½¬" class="headerlink" title="7.6.3 åˆ©ç”¨navigateToè¿›è¡Œå¯¼èˆªè·³è½¬"></a>7.6.3 åˆ©ç”¨navigateToè¿›è¡Œå¯¼èˆªè·³è½¬</h3><p>ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œä½¿ç”¨<code>uni.navigateBack</code>å¯ä»¥è¿”å›åˆ°åŸé¡µé¢ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>goAbout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è·³è½¬åˆ°å…³äºé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><p>é€šè¿‡navigateToæ–¹æ³•è¿›è¡Œè·³è½¬åˆ°æ™®é€šé¡µé¢</p><pre class=" language-js"><code class="language-js">goAbout <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>  uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> <span class="token string">'/pages/about/about'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p><strong>é€šè¿‡switchTabè·³è½¬åˆ°tabbaré¡µé¢</strong></p><p>è·³è½¬åˆ°tabbaré¡µé¢</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>goMessage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è·³è½¬åˆ°messageé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><p>é€šè¿‡switchTabæ–¹æ³•è¿›è¡Œè·³è½¬</p><pre class=" language-js"><code class="language-js">goMessage <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span>  <span class="token punctuation">{</span>  uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> <span class="token string">'/pages/message/message'</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p><strong>redirectToè¿›è¡Œè·³è½¬</strong> </p><p>å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- template --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>goMessage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è·³è½¬åˆ°messageé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- js --></span>goMessage ():void  {  uni.switchTab({    url: '/pages/message/message'  })}</code></pre><p>é€šè¿‡onUnloadæµ‹è¯•å½“å‰ç»„ä»¶ç¡®å®å¸è½½</p><pre class=" language-js"><code class="language-js">onUnload <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç»„ä»¶å¸è½½äº†'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h3 id="7-6-4-å¯¼èˆªè·³è½¬ä¼ é€’å‚æ•°"><a href="#7-6-4-å¯¼èˆªè·³è½¬ä¼ é€’å‚æ•°" class="headerlink" title="7.6.4 å¯¼èˆªè·³è½¬ä¼ é€’å‚æ•°"></a>7.6.4 å¯¼èˆªè·³è½¬ä¼ é€’å‚æ•°</h3><p>åœ¨å¯¼èˆªè¿›è¡Œè·³è½¬åˆ°ä¸‹ä¸€ä¸ªé¡µé¢çš„åŒæ—¶ï¼Œå¯ä»¥ç»™ä¸‹ä¸€ä¸ªé¡µé¢ä¼ é€’ç›¸åº”çš„å‚æ•°ï¼Œæ¥æ”¶å‚æ•°çš„é¡µé¢å¯ä»¥é€šè¿‡onLoadç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ¥æ”¶</p><p>ä¼ é€’å‚æ•°çš„é¡µé¢</p><pre class=" language-js"><code class="language-js">goAbout <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span>  <span class="token punctuation">{</span>  uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> <span class="token string">'/pages/about/about?id=80'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ¥æ”¶å‚æ•°çš„é¡µé¢</p><pre class=" language-js"><code class="language-js">onLoad <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h1 id="8-æ¡ä»¶æ³¨é‡Šå®ç°è·¨ç«¯å…¼å®¹"><a href="#8-æ¡ä»¶æ³¨é‡Šå®ç°è·¨ç«¯å…¼å®¹" class="headerlink" title="8 æ¡ä»¶æ³¨é‡Šå®ç°è·¨ç«¯å…¼å®¹"></a>8 æ¡ä»¶æ³¨é‡Šå®ç°è·¨ç«¯å…¼å®¹</h1><p>æ¡ä»¶ç¼–è¯‘æ˜¯ç”¨ç‰¹æ®Šçš„æ³¨é‡Šä½œä¸ºæ ‡è®°ï¼Œåœ¨ç¼–è¯‘æ—¶æ ¹æ®è¿™äº›ç‰¹æ®Šçš„æ³¨é‡Šï¼Œå°†æ³¨é‡Šé‡Œé¢çš„ä»£ç ç¼–è¯‘åˆ°ä¸åŒå¹³å°ã€‚</p><p><strong>å†™æ³•ï¼š</strong>ä»¥ #ifdef åŠ å¹³å°æ ‡è¯† å¼€å¤´ï¼Œä»¥ #endif ç»“å°¾ã€‚</p><p>å¹³å°æ ‡è¯†</p><table><thead><tr><th>å€¼</th><th>å¹³å°</th><th>å‚è€ƒæ–‡æ¡£</th></tr></thead><tbody><tr><td>APP-PLUS</td><td>5+App</td><td><a href="http://www.html5plus.org/doc/">HTML5+ è§„èŒƒ</a></td></tr><tr><td>H5</td><td>H5</td><td></td></tr><tr><td>MP-WEIXIN</td><td>å¾®ä¿¡å°ç¨‹åº</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/">å¾®ä¿¡å°ç¨‹åº</a></td></tr><tr><td>MP-ALIPAY</td><td>æ”¯ä»˜å®å°ç¨‹åº</td><td><a href="https://docs.alipay.com/mini/developer/getting-started">æ”¯ä»˜å®å°ç¨‹åº</a></td></tr><tr><td>MP-BAIDU</td><td>ç™¾åº¦å°ç¨‹åº</td><td><a href="https://smartprogram.baidu.com/docs/develop/tutorial/codedir/">ç™¾åº¦å°ç¨‹åº</a></td></tr><tr><td>MP-TOUTIAO</td><td>å¤´æ¡å°ç¨‹åº</td><td><a href="https://developer.toutiao.com/dev/cn/mini-app/develop/framework/basic-reference/introduction">å¤´æ¡å°ç¨‹åº</a></td></tr><tr><td>MP-QQ</td><td>QQå°ç¨‹åº</td><td>ï¼ˆç›®å‰ä»…cliç‰ˆæ”¯æŒï¼‰</td></tr><tr><td>MP</td><td>å¾®ä¿¡å°ç¨‹åº/æ”¯ä»˜å®å°ç¨‹åº/ç™¾åº¦å°ç¨‹åº/å¤´æ¡å°ç¨‹åº/QQå°ç¨‹åº</td><td></td></tr></tbody></table><h2 id="8-1-ç»„ä»¶çš„æ¡ä»¶æ³¨é‡Š"><a href="#8-1-ç»„ä»¶çš„æ¡ä»¶æ³¨é‡Š" class="headerlink" title="8.1 ç»„ä»¶çš„æ¡ä»¶æ³¨é‡Š"></a>8.1 ç»„ä»¶çš„æ¡ä»¶æ³¨é‡Š</h2><p>ä»£ç æ¼”ç¤º</p><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- #ifdef H5 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  h5é¡µé¢ä¼šæ˜¾ç¤º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- #endif --></span><span class="token comment" spellcheck="true">&lt;!-- #ifdef MP-WEIXIN --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  å¾®ä¿¡å°ç¨‹åºä¼šæ˜¾ç¤º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- #endif --></span><span class="token comment" spellcheck="true">&lt;!-- #ifdef APP-PLUS --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  appä¼šæ˜¾ç¤º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- #endif --></span></code></pre><h2 id="8-2-apiçš„æ¡ä»¶æ³¨é‡Š"><a href="#8-2-apiçš„æ¡ä»¶æ³¨é‡Š" class="headerlink" title="8.2 apiçš„æ¡ä»¶æ³¨é‡Š"></a>8.2 apiçš„æ¡ä»¶æ³¨é‡Š</h2><p>ä»£ç æ¼”ç¤º</p><pre class=" language-js"><code class="language-js">onLoad <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//#ifdef MP-WEIXIN</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¾®ä¿¡å°ç¨‹åº'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//#endif</span>  <span class="token comment" spellcheck="true">//#ifdef H5</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'h5é¡µé¢'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//#endif</span><span class="token punctuation">}</span></code></pre><h2 id="8-3-æ ·å¼çš„æ¡ä»¶æ³¨é‡Š"><a href="#8-3-æ ·å¼çš„æ¡ä»¶æ³¨é‡Š" class="headerlink" title="8.3 æ ·å¼çš„æ¡ä»¶æ³¨é‡Š"></a>8.3 æ ·å¼çš„æ¡ä»¶æ³¨é‡Š</h2><p>ä»£ç æ¼”ç¤º</p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* #ifdef H5 */</span><span class="token selector">view</span><span class="token punctuation">{</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* #endif */</span><span class="token comment" spellcheck="true">/* #ifdef MP-WEIXIN */</span><span class="token selector">view</span><span class="token punctuation">{</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* #endif */</span></code></pre><h1 id="9-uni-uiçš„ä½¿ç”¨"><a href="#9-uni-uiçš„ä½¿ç”¨" class="headerlink" title="9 uni-uiçš„ä½¿ç”¨"></a>9 uni-uiçš„ä½¿ç”¨</h1><p>uni-appä¸­çš„UIç»„ä»¶åº“ï¼š<a href="https://ask.dcloud.net.cn/article/35489">https://ask.dcloud.net.cn/article/35489</a></p><p><a href="https://uniapp.dcloud.io/component/README?id=uniui">uni-uiæ–‡æ¡£</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.å°†èµ„æ–™ä¸­çš„uni-uiæ”¾å…¥åˆ°é¡¹ç›®componentsç›®å½•ä¸‹(æ³¨æ„ï¼šä¸è¦npm install @dcloudio/uni-ui ï¼Œè¿™ç§æ–¹å¼åœ¨å­ç»„ä»¶ä¸­æ— æ³•ä½¿ç”¨)</span><span class="token comment" spellcheck="true">//2.å®‰è£…sass-loader</span>npm install node<span class="token operator">-</span>sass sass<span class="token operator">-</span>loader@<span class="token number">8.0</span><span class="token punctuation">.</span><span class="token number">2</span>      é‡å¯hubuilderX<span class="token comment" spellcheck="true">//3.åœ¨é¡µé¢ç»„ä»¶å’Œè‡ªå®šä¹‰ç»„ä»¶ä¸­ä½¿ç”¨uni-ui</span><span class="token keyword">import</span> uniBadge <span class="token keyword">from</span> <span class="token string">"@/components/uni-ui/lib/uni-badge/uni-badge.vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> uniGrid <span class="token keyword">from</span> <span class="token string">"@/components/uni-ui/lib/uni-grid/uni-grid.vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> uniGridItem <span class="token keyword">from</span> <span class="token string">"@/components/uni-ui/lib/uni-grid-item/uni-grid-item.vue"</span><span class="token punctuation">;</span>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    components<span class="token punctuation">:</span> <span class="token punctuation">{</span>        uniBadge<span class="token punctuation">,</span>        uniGrid<span class="token punctuation">,</span>        uniGridItem    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>view<span class="token operator">></span>        <span class="token operator">&lt;</span>uni<span class="token operator">-</span>badge text<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>badge<span class="token operator">></span>        <span class="token operator">&lt;</span>uni<span class="token operator">-</span>badge text<span class="token operator">=</span><span class="token string">"2"</span> type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>badge<span class="token operator">></span>        <span class="token operator">&lt;</span>uni<span class="token operator">-</span>badge text<span class="token operator">=</span><span class="token string">"3"</span> type<span class="token operator">=</span><span class="token string">"primary"</span> <span class="token punctuation">:</span>inverted<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>badge<span class="token operator">></span>        <span class="token operator">&lt;</span>uni<span class="token operator">-</span>grid <span class="token punctuation">:</span>column<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>æ–‡æœ¬<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>æ–‡æœ¬<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>æ–‡æœ¬<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>grid<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>uni<span class="token operator">-</span>grid<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> uniapp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="2019/11/15/zu-jian-de-sheng-ming-zhou-qi/"/>
      <url>2019/11/15/zu-jian-de-sheng-ming-zhou-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h1><h3 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ-1"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ-1" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="created"><a href="#created" class="headerlink" title="created()"></a><code>created()</code></h4><p>åœ¨dataåŒå±‚çº§ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">lifetimes<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"this.data.msg"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment" spellcheck="true">//èƒ½è·å–åˆ°</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"this.properties.item"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è·å–ä¸åˆ°</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><p>created()åœ¨ç»„ä»¶å®ä¾‹åˆšåˆšè¢«åˆ›å»ºçš„æ—¶å€™æ‰§è¡Œï¼Œè¿™é‡Œä¸èƒ½è°ƒç”¨<code>setData</code>æ–¹æ³•</p><h4 id="attached"><a href="#attached" class="headerlink" title="attached()"></a><code>attached()</code></h4><p>åœ¨ç»„ä»¶å®ä¾‹è¿›å…¥é¡µé¢èŠ‚ç‚¹æ ‘çš„æ—¶å€™æ‰§è¡Œ</p><p>å¯ä»¥è·å–<code>this.properties.item</code></p><pre><code>lifetimes:{    attached(){      console.log("this.data.msg",this.data.msg);               //èƒ½è·å–åˆ°      console.log("this.properties.item",this.properties.items);//èƒ½è·å–åˆ°    }},</code></pre><h4 id="ready"><a href="#ready" class="headerlink" title="ready()"></a><code>ready()</code></h4><p>ç»„ä»¶å¸ƒå±€å®Œæˆåæ‰§è¡Œ</p><pre><code>lifetimes:{    ready(){      console.log("this.data.msg",this.data.msg);               //èƒ½è·å–åˆ°      console.log("this.properties.item",this.properties.items);//èƒ½è·å–åˆ°    }},</code></pre><h4 id="move"><a href="#move" class="headerlink" title="move()"></a><code>move()</code></h4><p>ç»„ä»¶è¢«ç§»åŠ¨åˆ°èŠ‚ç‚¹æ ‘çš„å¦ä¸€ä¸ªä½ç½®çš„æ—¶å€™æ‰§è¡Œ</p><h4 id="detached"><a href="#detached" class="headerlink" title="detached()"></a><code>detached()</code></h4><p>ç»„ä»¶è¢«ä»èŠ‚ç‚¹æ ‘ä¸Šç§»é™¤çš„æ—¶å€™è§¦å‘</p><pre><code>lifetimes:{    detached(){      console.log("detached");    }}</code></pre><h3 id="å­ä¼ çˆ¶"><a href="#å­ä¼ çˆ¶" class="headerlink" title="å­ä¼ çˆ¶"></a>å­ä¼ çˆ¶</h3><p>åœ¨å­ç»„ä»¶ä¸­ï¼š</p><p>æ–¹æ³•è¦å†™åœ¨methodsé‡Œé¢</p><p>åœ¨å­ç»„ä»¶çš„æ ‡ç­¾ä¸Šç»‘å®šç‚¹å‡»äº‹ä»¶</p><pre><code>&lt;view class="box"  bindtap="handleClick"&gt;    &lt;view class="img"&gt;      &lt;image class="imgs" src="{{items.img}}"&gt;      &lt;/image&gt;    &lt;/view&gt;    &lt;view class="text"&gt;      {{items.name}}    &lt;/view&gt;    &lt;view class="count"&gt;{{items.count}}&lt;/view&gt;  &lt;/view&gt;</code></pre><p>åœ¨<code>methods</code>é‡Œå†™ç‚¹å‡»äº‹ä»¶</p><p><code>this.triggerEvent</code></p><pre><code>methods: {    handleClick(){      console.log(this.properties.items.id);      this.triggerEvent("delete",id)    }     }})</code></pre><p>åœ¨çˆ¶ç»„ä»¶ä¸­æ¥æ”¶è‡ªå·±å®šä¹‰çš„æ–¹æ³•<br><img src="https://i.loli.net/2020/11/05/nWJGLiIqdSurBMH.png" alt="å­ä¼ çˆ¶-çˆ¶ç»„ä»¶ç»‘å®šäº‹ä»¶.png"></p><p>åœ¨çˆ¶ç»„ä»¶çš„<code>js</code>ä¸­å†™è¿™ä¸ªåˆ é™¤äº‹ä»¶</p><pre><code>handleDelete(e){    console.log(e.detail);    let datas = this.data.arr;    let result =  datas.filter(v=&gt;{      return v.id!=e.detail;    })    this.setData({      arr:result    })  }</code></pre><h3 id="æ’æ§½slot"><a href="#æ’æ§½slot" class="headerlink" title="æ’æ§½slot"></a>æ’æ§½<code>slot</code></h3><p>æœ‰çš„å­˜åœ¨ä¸€ä¸ªå›ºå®šæ ·å¼ï¼Œæœ‰çš„ä¸å­˜åœ¨é‚£ä¸ªæ ·å¼ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶å†…è®¾ç½®ä¸€ä¸ªæ’æ§½ï¼Œè°éœ€è¦è¿™ä¸ªæ’æ§½å°±è°ƒç”¨ï¼Œä¸éœ€è¦å°±ä¸è°ƒç”¨</p><p>åœ¨å­ç»„ä»¶ä¸­ï¼š<br><img src="https://i.loli.net/2020/11/05/JTSb281Vko3BlW9.png" alt="æ’æ§½.png"></p><p>å¹¶ä¸”åœ¨<code>item.js</code>ä¸­è®¾ç½®</p><pre><code> options:{    multipleSlots:true }</code></pre><p>åœ¨éœ€è¦è°ƒç”¨è¿™ä¸ªæ’æ§½çš„åœ°æ–¹<br><img src="https://i.loli.net/2020/11/05/ysoXNSt4vHQjmKZ.png" alt="çˆ¶ç»„ä»¶è°ƒç”¨æ’æ§½.png"></p><p>æ ·å¼åœ¨çˆ¶ç»„ä»¶ä¸­è®¾ç½®</p><p>å¤§æ¦‚æ•ˆæœå¦‚ä¸‹ï¼š</p><p>ä½¿ç”¨æ’æ§½ï¼š<br><img src="https://i.loli.net/2020/11/05/qfQGWHPwsKT5rvt.png" alt="ç•Œé¢ä¸€ä½¿ç”¨æ’æ§½.png"></p><p>æœªä½¿ç”¨æ’æ§½ï¼š<br><img src="https://i.loli.net/2020/11/05/49IYcE2feX8lzsQ.png" alt="ç•Œé¢äºŒæœªä½¿ç”¨æ’æ§½.png"></p><h3 id="vant-uiçš„ä½¿ç”¨"><a href="#vant-uiçš„ä½¿ç”¨" class="headerlink" title="vant-uiçš„ä½¿ç”¨"></a><code>vant-ui</code>çš„ä½¿ç”¨</h3><p>åœ¨<code>github</code>ä¸‹è½½<code>vant-ui</code></p><p>æ”¾åœ¨è‡ªå·±çš„é¡¹ç›®ä¸‹è§£å‹</p><p>åœ¨é¡¹ç›®ä¸‹æ–°å»ºæ–‡ä»¶<code>plugins</code>,</p><p>å†å†ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<code>vant</code></p><p>å°†è§£å‹åŒ…ä¸­çš„<code>dist</code>æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ç«™ç²˜è´´åˆ°åˆšæ‰æ–°å»ºçš„<code>vant</code> æ–‡ä»¶å¤¹ä¸‹</p><p>éœ€è¦ç”¨è¿™ä¸ªç»„ä»¶çš„<code>json</code>æ–‡ä»¶æ·»åŠ ï¼š</p><pre><code>{  "usingComponents": {    "van-button":"/plugins/vant/button/index"  }}</code></pre><p><code>wxml</code>é‡Œå¯ä»¥ä½¿ç”¨äº†ï¼š</p><pre><code>&lt;van-button type="warning"&gt;è­¦å‘ŠæŒ‰é’®&lt;/van-button&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="2019/11/14/wei-xin-xiao-cheng-xu-zu-jian-de-shi-yong/"/>
      <url>2019/11/14/wei-xin-xiao-cheng-xu-zu-jian-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºç»„ä»¶çš„ä½¿ç”¨"><a href="#å¾®ä¿¡å°ç¨‹åºç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºç»„ä»¶çš„ä½¿ç”¨"></a>å¾®ä¿¡å°ç¨‹åºç»„ä»¶çš„ä½¿ç”¨</h1><h3 id="ç»„ä»¶çš„ä½¿ç”¨"><a href="#ç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="ç»„ä»¶çš„ä½¿ç”¨"></a>ç»„ä»¶çš„ä½¿ç”¨</h3><h4 id="ç»„ä»¶çš„ä½¿ç”¨åŸå› "><a href="#ç»„ä»¶çš„ä½¿ç”¨åŸå› " class="headerlink" title="ç»„ä»¶çš„ä½¿ç”¨åŸå› "></a>ç»„ä»¶çš„ä½¿ç”¨åŸå› </h4><p>é‡å¤å‡ºç°çš„ä»£ç åœ¨ç»„ä»¶çš„ä½¿ç”¨ä¸‹å¯ä»¥ä¸ç”¨å»å†™é‡å¤çš„ä»£ç </p><p>ä¾‹å¦‚ä¸¤ä¸ªé¡µé¢çš„æ’ç‰ˆç›¸ä¼¼ï¼Œåªæœ‰å†…éƒ¨çš„æ•°æ®æ¸²æŸ“ä¸åŒï¼Œè¿™æ ·çš„éƒ¨åˆ†å¯ä»¥ä½¿ç”¨ç»„ä»¶å»å°è£…<br><img src="https://i.loli.net/2020/11/05/6AXOsKT8jfY2vVU.png" alt="componentsç›¸ä¼¼é¡µé¢.png"></p><p>å¦‚æœä¸¤ä¸ªé¡µé¢éƒ½é‡æ–°å†™ï¼Œä¼šæœ‰ä¸€å¤§éƒ¨åˆ†é‡å¤ä»£ç </p><p>è¿™é‡Œå¯ä»¥ä½¿ç”¨<code>components</code>ç»„ä»¶</p><h3 id="ä½¿ç”¨ç»„ä»¶æ­¥éª¤"><a href="#ä½¿ç”¨ç»„ä»¶æ­¥éª¤" class="headerlink" title="ä½¿ç”¨ç»„ä»¶æ­¥éª¤"></a>ä½¿ç”¨ç»„ä»¶æ­¥éª¤</h3><h4 id="ä¸€ã€åˆ›å»ºæ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶"><a href="#ä¸€ã€åˆ›å»ºæ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶" class="headerlink" title="ä¸€ã€åˆ›å»ºæ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶"></a>ä¸€ã€åˆ›å»ºæ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶</h4><p>åˆ›å»º<code>components</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åˆ›å»ºå¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ª<code>item</code>ç»„ä»¶ï¼Œå³é”®åˆ›å»º<br><img src="https://i.loli.net/2020/11/05/KMicLjoqOp65zBT.png" alt="åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶æ–‡ä»¶.png"></p><h4 id="äºŒã€åœ¨item-wxmlé‡Œå†™å¤ç”¨ä»£ç "><a href="#äºŒã€åœ¨item-wxmlé‡Œå†™å¤ç”¨ä»£ç " class="headerlink" title="äºŒã€åœ¨item.wxmlé‡Œå†™å¤ç”¨ä»£ç "></a>äºŒã€åœ¨<code>item.wxml</code>é‡Œå†™å¤ç”¨ä»£ç </h4><p>è¿™æ ·çš„æ ·å¼å°±ç›¸åŒäº†</p><h4 id="ä¸‰ã€ä½¿ç”¨ç»„ä»¶"><a href="#ä¸‰ã€ä½¿ç”¨ç»„ä»¶" class="headerlink" title="ä¸‰ã€ä½¿ç”¨ç»„ä»¶"></a>ä¸‰ã€ä½¿ç”¨ç»„ä»¶</h4><p>åœ¨éœ€è¦ä½¿ç”¨çš„æ–‡ä»¶å¤¹ä¸‹çš„<code>json</code>æ–‡ä»¶å†…å†™å¼•ç”¨<strong>ç»„ä»¶æ ‡ç­¾å</strong>å’Œ<strong>åœ°å€</strong></p><p>åœ¨<code>wxml</code>æ–‡ä»¶å†…å°±å¯ä»¥ä½¿ç”¨ç»„ä»¶æ ‡ç­¾æ¥è°ƒç”¨è¿™ä¸ªå†™å¥½çš„ç»„ä»¶äº†<br><img src="https://i.loli.net/2020/11/05/PRlTFhULf1DvsW7.png" alt="ä½¿ç”¨ç»„ä»¶çš„æ ‡ç­¾.png"></p><h4 id="å››ã€çˆ¶ç»„ä»¶è‡ªå®šä¹‰å±æ€§æ•°æ®ä¼ å‘å­ç»„ä»¶"><a href="#å››ã€çˆ¶ç»„ä»¶è‡ªå®šä¹‰å±æ€§æ•°æ®ä¼ å‘å­ç»„ä»¶" class="headerlink" title="å››ã€çˆ¶ç»„ä»¶è‡ªå®šä¹‰å±æ€§æ•°æ®ä¼ å‘å­ç»„ä»¶"></a>å››ã€çˆ¶ç»„ä»¶è‡ªå®šä¹‰å±æ€§æ•°æ®ä¼ å‘å­ç»„ä»¶</h4><p>çˆ¶ç»„ä»¶æ•°æ®ä¼ å…¥å­ç»„ä»¶å†…åŸå› ï¼š</p><p>å› ä¸ºè°ƒç”¨ç»„ä»¶çš„æ¯ä¸€ä¸ªåœ°æ–¹æ·»åŠ çš„æ•°æ®å¯èƒ½éƒ½ä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªçˆ¶ç»„ä»¶çš„æ•°æ®æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥æ¯æ¬¡å•ç‹¬è°ƒç”¨ç»„ä»¶çš„æ—¶å€™æ¸²æŸ“çš„æ•°æ®éƒ½æ˜¯å„è‡ªçˆ¶ç»„ä»¶è‡ªå·±çš„</p><h5 id="é¦–å…ˆçˆ¶ç»„ä»¶æ ‡ç­¾å†…è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§"><a href="#é¦–å…ˆçˆ¶ç»„ä»¶æ ‡ç­¾å†…è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§" class="headerlink" title="é¦–å…ˆçˆ¶ç»„ä»¶æ ‡ç­¾å†…è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§"></a>é¦–å…ˆçˆ¶ç»„ä»¶æ ‡ç­¾å†…è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§</h5><p><img src="https://i.loli.net/2020/11/05/zLPKec5d2ZM6FV4.png" alt="ç»„ä»¶è‡ªå®šä¹‰å±æ€§.png"></p><h5 id="æ¥ç€åœ¨å­ç»„ä»¶æ³¨å†Œè¿™ä¸ªå±æ€§"><a href="#æ¥ç€åœ¨å­ç»„ä»¶æ³¨å†Œè¿™ä¸ªå±æ€§" class="headerlink" title="æ¥ç€åœ¨å­ç»„ä»¶æ³¨å†Œè¿™ä¸ªå±æ€§"></a>æ¥ç€åœ¨å­ç»„ä»¶æ³¨å†Œè¿™ä¸ªå±æ€§</h5><p><img src="https://i.loli.net/2020/11/05/pwbX75ZYSMargL4.png" alt="åœ¨å­ç»„ä»¶å†…æ³¨å†Œè¿™ä¸ªå±æ€§.png"></p><p>è¿™æ ·å°±å°†çˆ¶ç»„ä»¶å†…çš„æ•°æ®ä¼ ç»™äº†å­ç»„ä»¶ï¼Œåœ¨å­ç»„ä»¶å†…è°ƒç”¨çˆ¶ç»„ä»¶çš„æ•°æ®å°±ç”¨</p>ï¼Œå¦‚ä¸‹<p><img src="https://i.loli.net/2020/11/05/CFX9yYiBZvWuT1Q.png" alt="ä½¿ç”¨çˆ¶ç»„ä»¶çš„å±æ€§.png"></p><p>è¿™é‡Œé¢çš„<code>img</code>,<code>name</code>,<code>count</code>éƒ½æ˜¯çˆ¶ç»„ä»¶æ•°æ®å¯¹è±¡ä¸­æœ‰çš„å±æ€§</p>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºwxs</title>
      <link href="2019/11/14/wei-xin-xiao-cheng-xu-wxs/"/>
      <url>2019/11/14/wei-xin-xiao-cheng-xu-wxs/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºwxs"><a href="#å¾®ä¿¡å°ç¨‹åºwxs" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºwxs"></a>å¾®ä¿¡å°ç¨‹åºwxs</h1><h3 id="1ã€wxs"><a href="#1ã€wxs" class="headerlink" title="1ã€wxs"></a>1ã€<code>wxs</code></h3><p>ä½œç”¨:å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ–¹æ³•ï¼Œå¯¹æ•°æ®å†æ¬¡å¤„ç†</p><pre><code>data: {    name:"åè¯­ç§äººæœ€æ‡‚ä½ "  },</code></pre><pre><code>//1-1å®šä¹‰ä¸€ä¸ªwxsæ–‡ä»¶//utils/util.wxsfunction handleName(value){  if(value.length&gt;5){    value = value.slice(0,5)+"..."  }  return value}module.exports = {  handleName:handleName}</code></pre><pre><code>//1-2åœ¨æ¨¡æ¿ä¸­å¼•å…¥//pages/index/index.wxml&lt;wxs src="../../utils/util.wxs" module="tools"&gt;&lt;/wxs&gt;&lt;view&gt;    {{tools.handleName(name)}}&lt;/view&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> wxs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºåŸºç¡€</title>
      <link href="2019/11/13/wei-xin-xiao-cheng-xu-zhi-shi-dian/"/>
      <url>2019/11/13/wei-xin-xiao-cheng-xu-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹"><a href="#å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹"></a>å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹</h1><h3 id="hiddenå±æ€§"><a href="#hiddenå±æ€§" class="headerlink" title="hiddenå±æ€§"></a><code>hidden</code>å±æ€§</h3><p>ä½¿ç”¨<code>hidden</code>å±æ€§æ§åˆ¶æ˜¾ç¤ºéšè—</p><p>å…ˆåœ¨<code>index.js</code>çš„<code>page</code>é‡Œè®¾ç½®<code>flag</code>ä¸º<code>true</code></p><pre><code>Page({  data: {    flag:true  }})</code></pre><p>åœ¨<code>wxml</code>é‡Œè®¾ç½®<code>hidden</code>å±æ€§ï¼Œä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼</p><pre><code>&lt;view hidden="{{flag?true:false}}"&gt;  hidden&lt;/view&gt;</code></pre><h3 id="åˆ¤æ–­"><a href="#åˆ¤æ–­" class="headerlink" title="åˆ¤æ–­"></a>åˆ¤æ–­</h3><p>åœ¨<code>wxml</code>é‡Œæ ‡ç­¾åä½¿ç”¨</p><pre><code>wx:if=""wx:elif=""wx:else=""</code></pre><p>ä¾‹å¦‚</p><pre><code>&lt;view wx:if="{{flag}}"&gt;  a&lt;/view&gt;&lt;view wx:else&gt;  b&lt;/view&gt;</code></pre><p>åœ¨Pageé‡Œ</p><pre><code>data: {   flag:true  }</code></pre><h3 id="ä¸‰å…ƒå®ç°ç‚¹å‡»åˆ‡æ¢"><a href="#ä¸‰å…ƒå®ç°ç‚¹å‡»åˆ‡æ¢" class="headerlink" title="ä¸‰å…ƒå®ç°ç‚¹å‡»åˆ‡æ¢"></a>ä¸‰å…ƒå®ç°ç‚¹å‡»åˆ‡æ¢</h3><p>ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶,å®ç°ç‚¹å‡»æ’­æ”¾å’Œæš‚åœçš„å›¾ç‰‡åˆ‡æ¢</p><pre><code>&lt;image src="{{state?'/images/play.png':'/images/pause.png'}}" bindtap="handleClick"&gt;&lt;/image&gt;</code></pre><p><code>index.js</code>é‡Œå†™ä¸€ä¸ªçŠ¶æ€å’Œç‚¹å‡»äº‹ä»¶é€»è¾‘</p><pre><code>data: {    state:true  },  onLoad: function () {  },  handleClick(e){    let flag = !this.data.state;    this.setData({      state:flag    })  }</code></pre><h3 id="block"><a href="#block" class="headerlink" title="block"></a><code>block</code></h3><p>ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦ï¼Œå®é™…ä¸Šå¹¶ä¸ä¼šæ¸²æŸ“åˆ°<code>html</code>é¡µé¢</p><h3 id="inputè¡¨å•å±æ€§"><a href="#inputè¡¨å•å±æ€§" class="headerlink" title="inputè¡¨å•å±æ€§"></a><code>input</code>è¡¨å•å±æ€§</h3><h4 id="bindconfirm"><a href="#bindconfirm" class="headerlink" title="bindconfirm"></a><code>bindconfirm</code></h4><p><code>bindconfirm=""</code>ï¼Œç¡®è®¤åä½¿ç”¨<code>e.detail</code>å¯ä»¥è·å–åˆ°è¾“å…¥çš„å†…å®¹</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">confirm-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>åˆ°è¾¾<span class="token punctuation">"</span></span>    <span class="token attr-name">bindconfirm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleConfirm<span class="token punctuation">"</span></span>   <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>è¯·æœç´¢<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">></span></span></code></pre><p><code>js</code>å†…å¯ä»¥è·å–åˆ°è¾“å…¥å†…å®¹</p><pre><code>handleConfirm(e){    console.log(e.detail);}</code></pre><h4 id="confirm-type-quot-quot"><a href="#confirm-type-quot-quot" class="headerlink" title="confirm-type=&quot;&quot;"></a><code>confirm-type=""</code></h4><p><code>confirm-type="send"</code>                        å³ä¸‹è§’æŒ‰é’®ä¸ºâ€œå‘é€â€</p><p><code>confirm-type="search"</code> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;                &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;å³ä¸‹è§’æŒ‰é’®ä¸ºâ€œæœç´¢â€</p><p><code>confirm-type="next"</code> &nbsp;                     &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;å³ä¸‹è§’æŒ‰é’®ä¸ºâ€œä¸‹ä¸€ä¸ªâ€</p><p><code>confirm-type="go"</code> &nbsp;                         &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;å³ä¸‹è§’æŒ‰é’®ä¸ºâ€œå‰å¾€â€</p><p><code>confirm-type="done"</code> &nbsp;                    &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;å³ä¸‹è§’æŒ‰é’®ä¸ºâ€œå®Œæˆâ€</p><h3 id="formè¡¨å•"><a href="#formè¡¨å•" class="headerlink" title="formè¡¨å•"></a><code>form</code>è¡¨å•</h3><p>é€šè¿‡<code>e.detail.value.search</code>å¯ä»¥è·å¾—è¾“å…¥æ•°æ®</p><p>1ã€ç»™<code>form</code>è¡¨å•<code>bindsubmit="submit"</code></p><p>2ã€ç»™<code>input</code>è¾“å…¥æ¡†<code>name="search"</code></p><p>3ã€ç»™<code>button</code>ç‚¹å‡»æŒ‰é’®<code>form-type="submit"</code></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">bindsubmit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥åå­—<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœç´¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><p><code>index.js</code>é‡Œä½¿ç”¨<code>submit</code>æ–¹æ³•å¾—åˆ°è¾“å…¥æ•°æ®</p><pre><code>submit(e){    console.log(e.detail.value.search); }</code></pre><h3 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h3><p>å°ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨<code>node.js</code>ä¸­æ¨¡å—åŒ–çš„æ–¹æ¡ˆ</p><p>å¯¼å‡º</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//å¯¼å‡º</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">http</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"http"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  a<span class="token punctuation">,</span>  http<span class="token punctuation">}</span></code></pre><p>å¯¼å…¥</p><pre><code>const obj  =require("../../data/a")</code></pre><h3 id="httpè¯·æ±‚çš„å°è£…"><a href="#httpè¯·æ±‚çš„å°è£…" class="headerlink" title="httpè¯·æ±‚çš„å°è£…"></a><code>http</code>è¯·æ±‚çš„å°è£…</h3><p>åœ¨ä¸€ä¸ªæ¨¡å—çš„æ–‡ä»¶å¤¹å†…å°è£…ä¸€ä¸ªæ¥å£çš„åœ°å€ï¼Œä¹‹åç›¸åŒå‰ç¼€çš„åœ°å€ç›´æ¥é€šè¿‡æš´éœ²çš„æ¥å£æ·»åŠ åç¼€åœ°å€è·å¾—ï¼Œå‡å°‘ä¹¦å†™å†—ä½™ä»£ç </p><p>åœ¨<code>model</code>é‡Œåˆ›å»ºä¸€ä¸ª<code>http.js</code>,é‡Œé¢å†™ä¸€ä¸ªåœ°å€çš„æ¥å£ï¼Œå¹¶æš´éœ²å‡ºå»ï¼Œå¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> baseUrl <span class="token operator">=</span> <span class="token string">"http://192.168.1.8:3000/"</span><span class="token keyword">function</span> <span class="token function">http</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>  wx<span class="token operator">-</span>wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    url<span class="token punctuation">:</span> baseUrl<span class="token operator">+</span>url<span class="token punctuation">,</span>    dataType<span class="token punctuation">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>    header<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'content-type'</span><span class="token punctuation">:</span><span class="token string">'json'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    method<span class="token punctuation">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>    responseType<span class="token punctuation">:</span><span class="token string">'text'</span><span class="token punctuation">,</span>    success<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token function">callback</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">getSearchHttp</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">http</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`search?keywords=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">getCatHttp</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">http</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`top/playlist?cat=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  getSearchHttp<span class="token punctuation">,</span>  getCatHttp<span class="token punctuation">}</span></code></pre><p>æ¥å£è·¯å¾„ç›¸åŒçš„å°±å¯ä»¥ä¸ç”¨å†™å¾ˆé•¿çš„è·¯å¾„ç›´æ¥é€šè¿‡è¿™ä¸ªæ¥å£å¾—åˆ°äº†</p><p>ä¾‹å¦‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> getSearchHttp <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../model/http"</span><span class="token punctuation">)</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">getSearchHttp</span><span class="token punctuation">(</span><span class="token string">"æ™¨è¯»"</span><span class="token punctuation">,</span>res<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>è¿™é‡Œéœ€è¦ä¸€ä¸ªè·¯å¾„çš„æ•°æ®æ—¶å€™é€šè¿‡æ¥å£ç›´æ¥èƒ½å¾—åˆ°è·¯å¾„ä¸ºï¼š</p><p><code>http://192.168.1.8:3000/search?keywords=æ™¨è¯»</code></p><p>è¿™é‡Œçš„æ•°æ®</p><h3 id="å°ç¨‹åºä¸­åœ¨å‡½æ•°å†…è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦ä½¿ç”¨this"><a href="#å°ç¨‹åºä¸­åœ¨å‡½æ•°å†…è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦ä½¿ç”¨this" class="headerlink" title="å°ç¨‹åºä¸­åœ¨å‡½æ•°å†…è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦ä½¿ç”¨this"></a>å°ç¨‹åºä¸­åœ¨å‡½æ•°å†…è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦ä½¿ç”¨this</h3>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå…¥é—¨</title>
      <link href="2019/11/12/wei-xin-xiao-cheng-xu-kai-fa/"/>
      <url>2019/11/12/wei-xin-xiao-cheng-xu-kai-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå¼€å‘"><a href="#å¾®ä¿¡å°ç¨‹åºå¼€å‘" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå¼€å‘"></a>å¾®ä¿¡å°ç¨‹åºå¼€å‘</h1><h2 id="å°ç¨‹åºå¼€å‘ç¯å¢ƒé…ç½®"><a href="#å°ç¨‹åºå¼€å‘ç¯å¢ƒé…ç½®" class="headerlink" title="å°ç¨‹åºå¼€å‘ç¯å¢ƒé…ç½®"></a>å°ç¨‹åºå¼€å‘ç¯å¢ƒé…ç½®</h2><p>1ã€å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·<br>2ã€æ‰«ä¸€æ‰«è¿›å…¥å¼€å‘è€…å·¥å…·<br>3ã€æ–°å»ºé¡¹ç›®<br>4ã€å®‰è£…vscodeæ’ä»¶<br>5ã€åˆå§‹åŒ–é¡¹ç›®</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="ä½¿ç”¨åŠ¨æ€æ•°æ®"><a href="#ä½¿ç”¨åŠ¨æ€æ•°æ®" class="headerlink" title="ä½¿ç”¨åŠ¨æ€æ•°æ®"></a>ä½¿ç”¨åŠ¨æ€æ•°æ®</h3><p>ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼åœ¨é¡µé¢æ¸²æŸ“æ•°æ®ï¼Œå¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//1.index.js  é…ç½®</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span><span class="token punctuation">{</span>    msg<span class="token punctuation">:</span><span class="token string">"wechat"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=" language-html"><code class="language-html">//2.index.wxml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    //æ’å€¼è¡¨è¾¾å¼  å¯ä»¥ä½¿ç”¨å˜é‡,ä½¿ç”¨javascriptè¡¨è¾¾å¼     {{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>é€šè¿‡<code>{{msg}}</code>å¯ä»¥è·å–åˆ°<code>index.js</code>é‡Œ<code>data</code>é‡Œå±æ€§<code>msg</code>çš„å±æ€§å€¼ï¼Œå¹¶å°†å…¶æ¸²æŸ“åˆ°ç•Œé¢</p><h3 id="åˆ—è¡¨æ¸²æŸ“-wx-for"><a href="#åˆ—è¡¨æ¸²æŸ“-wx-for" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“ wx:for"></a>åˆ—è¡¨æ¸²æŸ“ <code>wx:for</code></h3><p><code>wx:for</code>ç±»ä¼¼äºä¸€ä¸ªå¾ªç¯ï¼Œå°†è¦å¾ªç¯çš„æ•°ç»„å†…éœ€è¦çš„å¯¹è±¡å±æ€§æ¸²æŸ“åˆ°ç›¸åº”ä½ç½®ï¼Œå¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    friends<span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"h6"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1001</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"html"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1002</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">"css"</span> <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=" language-html"><code class="language-html">//index.wmxl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{friends}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{id}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  {{item.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>ä½¿ç”¨<code>wx:for="{{friends}}"</code>å¯¹<code>frinends</code>è¿™ä¸ª<code>data</code>é‡Œçš„<code>friends</code>æ•°ç»„è¿›è¡Œå¾ªç¯ï¼Œå¹¶é€šè¿‡<code>item.å±æ€§å</code>å°†ç›¸åº”çš„å±æ€§å€¼çš„å¾ªç¯ç»“æœå‘ˆç°åœ¨ç•Œé¢</p><h3 id="ç»‘å®šäº‹ä»¶"><a href="#ç»‘å®šäº‹ä»¶" class="headerlink" title="ç»‘å®šäº‹ä»¶"></a>ç»‘å®šäº‹ä»¶</h3><p>ä½¿ç”¨<code>bindtap</code>åœ¨ç›¸åº”çš„æ ‡ç­¾å†…ç»‘å®šç›¸åº”çš„äº‹ä»¶</p><p>ä¸¾ä¸ªä¾‹å­ï¼šé€šè¿‡ç‚¹å‡»é¡µé¢ä¸­çš„å­—æ¥æ”¹å˜å®ƒçš„å†…å®¹</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    msg<span class="token punctuation">:</span><span class="token string">"hello world"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=" language-html"><code class="language-html">//index.wxml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  {{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>é¡µé¢çš„æ•°æ®åº”è¯¥æ˜¯<code>hello world</code>ï¼Œæˆ‘ä»¬ç°åœ¨åœ¨æ•°æ®çš„<code>view</code>æ ‡ç­¾ä¸Šç»‘å®šäº†ä¸€ä¸ªäº‹ä»¶<code>handleClick</code>,æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨<code>js</code>å†…è®¾ç½®è¿™ä¸ªäº‹ä»¶çš„å†…å®¹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    msg<span class="token punctuation">:</span><span class="token string">"hello world"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//this.setData() è®¾ç½®dataä¸­çš„å€¼</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        msg<span class="token punctuation">:</span><span class="token string">"change"</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>åœ¨<code>handleClick</code>äº‹ä»¶å†…æˆ‘ä»¬ä½¿ç”¨<code>this.setData()</code>è®¾ç½®dataé‡Œçš„å±æ€§çš„å±æ€§å€¼ï¼Œå°†å‘ˆç°åœ¨é¡µé¢çš„<code>msg</code>å±æ€§æ”¹ä¸º<code>â€œchangeâ€</code>ï¼Œæ­¤æ—¶ç‚¹å‡»çš„æ—¶å€™è§¦å‘ç‚¹å‡»äº‹ä»¶å°±ä¼šæ”¹å˜é¡µé¢çš„å­—ä¸º<code>â€œchangeâ€</code>äº†</p><h3 id="è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®å’Œè·å–"><a href="#è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®å’Œè·å–" class="headerlink" title="è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®å’Œè·å–"></a>è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®å’Œè·å–</h3><h4 id="è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®"><a href="#è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®" class="headerlink" title="è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®"></a>è‡ªå®šä¹‰å±æ€§çš„è®¾ç½®</h4><p>ä½¿ç”¨<code>data-è‡ªå®šä¹‰å±æ€§å</code>æ¥è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œä¾‹å¦‚ï¼š</p><pre class=" language-html"><code class="language-html">//1.data-id è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{id}}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    {{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>åœ¨è¿™ä¸ªä½¿ç”¨<code>data-id</code>è‡ªå®šä¹‰å±æ€§<code>id</code>,å¹¶ä¸”å°†<code>data</code>å†…çš„<code>id</code>å€¼ä¼ ç»™è¿™ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œæ¯”å¦‚åœ¨<code>data</code>é‡Œè®¾å®š<code>id</code>å€¼ä¸º1001</p><pre><code>Page({    data:{        msg:"hello world",        id:1001    }})</code></pre><h4 id="è‡ªå®šä¹‰å±æ€§çš„è·å–"><a href="#è‡ªå®šä¹‰å±æ€§çš„è·å–" class="headerlink" title="è‡ªå®šä¹‰å±æ€§çš„è·å–"></a>è‡ªå®šä¹‰å±æ€§çš„è·å–</h4><p>é€šè¿‡ä»¥ä¸Šä¾‹å­å·²ç»è®¾ç½®å¥½äº†ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§å¹¶ä¸”æŠŠå·²æœ‰çš„<code>id</code>çš„å€¼ä¼ ç»™äº†è¿™ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ€ä¹ˆè·å–è¿™ä¸ªå€¼å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ¥æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ªè‡ªå®šä¹‰å±æ€§å€¼çš„è·å–ï¼š</p><pre><code>Page({    data:{        msg:"hello world",        id:1001    },    handleClick(event){        console.log(event)        console.log(event.currentTarget.dataset)    }})</code></pre><p>é€šè¿‡åœ¨ç‚¹å‡»äº‹ä»¶ä¼ ä¸€ä¸ªeventå‚æ•°<br>æˆ‘ä»¬é€šè¿‡æ‰“å°<code>event</code>å¯ä»¥çœ‹åˆ°ä¸€äº›å·²æœ‰çš„å±æ€§<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2158361/1597235311467-f6aa97d3-e5d8-430b-9e17-ebe6724d031b.png#align=left&amp;display=inline&amp;height=204&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fevent.png&amp;originHeight=204&amp;originWidth=583&amp;size=21797&amp;status=done&amp;style=none&amp;width=583" alt="å¾®ä¿¡å°ç¨‹åºevent.png"><br>åœ¨<code>event.currentTarget</code>é‡Œå¯ä»¥çœ‹åˆ°ä¸€äº›ç°æˆçš„æ•°æ®ï¼Œå…¶ä¸­<code>dataset</code>é‡Œå°±æ˜¯è‡ªå·±è®¾ç½®çš„è‡ªå®šä¹‰å±æ€§çš„å€¼äº†<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2158361/1597235320288-50d1e3cb-95aa-4b36-8bac-ea2f6af44c09.png#align=left&amp;display=inline&amp;height=312&amp;margin=%5Bobject%20Object%5D&amp;name=event.currentTargrt.dataset.png&amp;originHeight=312&amp;originWidth=585&amp;size=26069&amp;status=done&amp;style=none&amp;width=585" alt="event.currentTargrt.dataset.png"><br>æ­¤æ—¶å¯ä»¥çœ‹åˆ°idç¡®å®åœ¨è¿™é‡Œé¢ï¼Œé€šè¿‡æ‰“å°<code>event.currentTarget.dataset.id</code>å°±å¯ä»¥è·å¾—1001äº†</p><h3 id="è·å–dataä¸­çš„å€¼"><a href="#è·å–dataä¸­çš„å€¼" class="headerlink" title="è·å–dataä¸­çš„å€¼"></a>è·å–dataä¸­çš„å€¼</h3><p>é€šè¿‡<code>this.data.å±æ€§</code>å°±å¯ä»¥è·å¾—åˆ°<code>data</code> å†…ç›¸åº”çš„å±æ€§äº†</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span><span class="token punctuation">{</span>    msg<span class="token punctuation">:</span><span class="token string">"hello world"</span><span class="token punctuation">,</span>    arr<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"xxx"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"yyy"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"zzz"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    id<span class="token punctuation">:</span><span class="token number">1001</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">handleClick</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//zzz</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="åˆ—è¡¨åˆ é™¤"><a href="#åˆ—è¡¨åˆ é™¤" class="headerlink" title="åˆ—è¡¨åˆ é™¤"></a>åˆ—è¡¨åˆ é™¤</h3><p>é€šè¿‡ä»¥ä¸Šçš„å­¦ä¹ æˆ‘ä»¬å·²ç»ä½¿ç”¨<code>wx:for="{{arr}}"</code>,å°†æ•°ç»„å†…çš„æ•°æ®å¾ªç¯æ¸²æŸ“åˆ°äº†ç•Œé¢ï¼Œæˆ‘ä»¬è¿™æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰å±æ€§ï¼Œé€šè¿‡è‡ªå®šä¹‰å±æ€§ä¼ ä¸€ä¸ªå½“å‰å¾ªç¯çš„å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å€¼å’Œå¾ªç¯çš„æ•°ç»„å†…çš„å±æ€§çš„ç›¸åº”å±æ€§å€¼æ¯”å¯¹ï¼Œæ‰¾åˆ°ç›¸åŒçš„æ’é™¤ï¼Œä¿ç•™ç‚¹å‡»ç›¸åŒçš„å°±å¯ä»¥å®ç°ç‚¹å‡»åˆ é™¤äº†ã€‚</p><h4 id="1ã€é¦–å…ˆå…ˆå¾ªç¯æ¸²æŸ“é¡µé¢"><a href="#1ã€é¦–å…ˆå…ˆå¾ªç¯æ¸²æŸ“é¡µé¢" class="headerlink" title="1ã€é¦–å…ˆå…ˆå¾ªç¯æ¸²æŸ“é¡µé¢"></a>1ã€é¦–å…ˆå…ˆå¾ªç¯æ¸²æŸ“é¡µé¢</h4><p>ä½¿ç”¨<code>wx:for="{{arr}}"</code></p><h4 id="2ã€è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#2ã€è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="2ã€è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶"></a>2ã€è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶</h4><p>è®¾ç½®è‡ªå®šä¹‰å±æ€§<code>data-id="{{item.id}}"</code>ï¼Œå°†è‡ªå®šä¹‰å±æ€§çš„å€¼è®¾ç½®ä¸ºå¾ªç¯çš„å½“å‰<code>id</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡äº‹ä»¶å¾—åˆ°å½“å‰ç‚¹å‡»çš„<code>id</code>å¹¶å’ŒåŸæ•°æ®å†…çš„æ•°æ®æ¯”å¯¹äº†</p><p>ä»¥ä¸Šä¸¤æ­¥å®Œæˆä»£ç å¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span><span class="token punctuation">{</span>    msg<span class="token punctuation">:</span><span class="token string">"hello world"</span><span class="token punctuation">,</span>    arr<span class="token punctuation">:</span><span class="token punctuation">[</span>        <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"xxx"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"yyy"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>id<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span>title<span class="token punctuation">:</span><span class="token string">"zzz"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    id<span class="token punctuation">:</span><span class="token number">1001</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=" language-html"><code class="language-html">//index.wxml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{arr}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{item.idid}}<span class="token punctuation">"</span></span>  <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{item.id}}<span class="token punctuation">"</span></span><span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    {{item.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><p>æ­¤æ—¶é¡µé¢å¾ªç¯æ¸²æŸ“ç»“æŸ</p><h4 id="3ã€é€šè¿‡ç‚¹å‡»äº‹ä»¶å’Œè‡ªå®šä¹‰å±æ€§åˆ é™¤ç›¸åº”å±æ€§"><a href="#3ã€é€šè¿‡ç‚¹å‡»äº‹ä»¶å’Œè‡ªå®šä¹‰å±æ€§åˆ é™¤ç›¸åº”å±æ€§" class="headerlink" title="3ã€é€šè¿‡ç‚¹å‡»äº‹ä»¶å’Œè‡ªå®šä¹‰å±æ€§åˆ é™¤ç›¸åº”å±æ€§"></a>3ã€é€šè¿‡ç‚¹å‡»äº‹ä»¶å’Œè‡ªå®šä¹‰å±æ€§åˆ é™¤ç›¸åº”å±æ€§</h4><p>å› ä¸ºä¸€å¼€å§‹æˆ‘ä»¬è‡ªå®šä¹‰å±æ€§ç»‘å®šçš„å°±æ˜¯ç›¸åº”çš„idå±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è·å–åˆ°ç‚¹å‡»çš„è‡ªå®šä¹‰å±æ€§çš„idå€¼ï¼Œå’ŒåŸæœ‰çš„æ•°ç»„å†…çš„idå€¼æ¯”å¯¹ï¼Œç›¸åŒçš„è¿‡æ»¤æ‰ï¼Œå°±å¯ä»¥å®ç°ç‚¹å‡»è¿‡æ»¤æ•ˆæœï¼Œä»£ç å¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token function">handleClick</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      <span class="token keyword">return</span> value<span class="token punctuation">.</span>id <span class="token operator">!=</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      arr<span class="token punctuation">:</span>arr2    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span></code></pre><p><code>event.currentTarget.dataset.id</code>è·å¾—çš„å°±æ˜¯ç‚¹å‡»çš„é‚£æ¡å¯¹è±¡çš„<code>id</code>å€¼ï¼Œé€šè¿‡<code>filter</code>è¿‡æ»¤æ‰</p><h4 id="4ã€æœ€åå°†è¿‡æ»¤åçš„ç»“æœè¿”å›ç»™data"><a href="#4ã€æœ€åå°†è¿‡æ»¤åçš„ç»“æœè¿”å›ç»™data" class="headerlink" title="4ã€æœ€åå°†è¿‡æ»¤åçš„ç»“æœè¿”å›ç»™data"></a>4ã€æœ€åå°†è¿‡æ»¤åçš„ç»“æœè¿”å›ç»™data</h4><p>ä¸Šä¸€æ®µä»£ç å·²ç»å†™å‡ºæ¥äº†ï¼Œé€šè¿‡<code>this.setData</code>å°†å¤„ç†å¥½çš„<code>arr2</code>ä¼ å›<code>data</code></p>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„ä»¶åŒ–</title>
      <link href="2019/10/20/zu-jian-hua-chong-dian/"/>
      <url>2019/10/20/zu-jian-hua-chong-dian/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»„ä»¶åŒ–-é‡ç‚¹"><a href="#ç»„ä»¶åŒ–-é‡ç‚¹" class="headerlink" title="ç»„ä»¶åŒ–(é‡ç‚¹)"></a>ç»„ä»¶åŒ–(é‡ç‚¹)</h1><h3 id="Vueç»„ä»¶åŒ–æ€æƒ³"><a href="#Vueç»„ä»¶åŒ–æ€æƒ³" class="headerlink" title="Vueç»„ä»¶åŒ–æ€æƒ³"></a><code>Vue</code>ç»„ä»¶åŒ–æ€æƒ³</h3><h4 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h4><p>ç»„ä»¶åŒ–æä¾›äº†ä¸€ç§æŠ½è±¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºä¸€ä¸ªä¸ªç‹¬ç«‹å¯å¤ç”¨çš„å°ç»„ä»¶æ¥æ„é€ æˆ‘ä»¬çš„åº”ç”¨</p><p>ä»»ä½•çš„åº”ç”¨éƒ½ä¼šè¢«æŠ½è±¡æˆä¸€ä¸ªç»„ä»¶æ ‘</p><h4 id="ç»„ä»¶åŒ–æ€æƒ³çš„åº”ç”¨"><a href="#ç»„ä»¶åŒ–æ€æƒ³çš„åº”ç”¨" class="headerlink" title="ç»„ä»¶åŒ–æ€æƒ³çš„åº”ç”¨"></a>ç»„ä»¶åŒ–æ€æƒ³çš„åº”ç”¨</h4><p>æœ‰äº†ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œæˆ‘ä»¬åœ¨ä¹‹åçš„å¼€å‘ä¸­å°±è¦å……åˆ†åˆ©ç”¨å®ƒ</p><p>å°½å¯èƒ½åœ°å°†é¡µé¢æ‹†åˆ†æˆä¸€ä¸ªå°çš„ã€å¯å¤ç”¨åœ°ç»„ä»¶</p><p>è¿™æ ·æˆ‘ä»¬çš„ä»£ç æ›´åŠ æ–¹ä¾¿ç»„ç»‡å’Œç®¡ç†ï¼Œæ‰©å±•æ€§ä¹Ÿæ›´å¼º</p><h3 id="æ³¨å†Œç»„ä»¶çš„åŸºæœ¬æ­¥éª¤"><a href="#æ³¨å†Œç»„ä»¶çš„åŸºæœ¬æ­¥éª¤" class="headerlink" title="æ³¨å†Œç»„ä»¶çš„åŸºæœ¬æ­¥éª¤"></a>æ³¨å†Œç»„ä»¶çš„åŸºæœ¬æ­¥éª¤</h3><h4 id="åˆ›å»ºç»„ä»¶æ„é€ å™¨"><a href="#åˆ›å»ºç»„ä»¶æ„é€ å™¨" class="headerlink" title="åˆ›å»ºç»„ä»¶æ„é€ å™¨"></a>åˆ›å»ºç»„ä»¶æ„é€ å™¨</h4><p>è°ƒç”¨<code>Vue.extend()</code>æ–¹æ³•åˆ›å»º<strong>ç»„ä»¶æ„é€ å™¨</strong></p><p>ä¼ å…¥<code>template</code>æ˜¯è‡ªå®šä¹‰ç»„ä»¶æ¨¡æ¿</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">const</span> cpnC <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`            &lt;div>                &lt;h2>æˆ‘æ˜¯æ ‡é¢˜&lt;/h2>                &lt;p>æˆ‘æ˜¯å†…å®¹å“ˆå“ˆå“ˆ&lt;/p>                &lt;p>æˆ‘æ˜¯å†…å®¹ç¬‘ç¬‘ç¬‘ç¬‘ç¬‘ç¬‘ç¬‘ç¬‘ç¬‘&lt;/p>                &lt;p>æˆ‘æ˜¯å†…å®¹æ°´æ°´æ°´æ°´&lt;/p>            &lt;/div>            `</span></span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 id="æ³¨å†Œç»„ä»¶"><a href="#æ³¨å†Œç»„ä»¶" class="headerlink" title="æ³¨å†Œç»„ä»¶"></a>æ³¨å†Œç»„ä»¶</h4><p>è°ƒç”¨<code>Vue.component()</code>æ–¹æ³•</p><p>è°ƒç”¨<code>Vue.component()</code>æ–¹æ³•æ˜¯å°†åˆšæ‰çš„ç§Ÿä»·èƒ½å¤Ÿæ—©æœŸæ³¨å†Œä¸ºä¸€ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ç»™ä»–èµ·ä¸€ä¸ªç»„ä»¶çš„æ ‡ç­¾å</p><p>æ‰€ä»¥éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼š1ã€æ³¨å†Œç»„ä»¶çš„æ ‡ç­¾å &nbsp;2ã€ç»„ä»¶æ„é€ å™¨</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ³¨å†Œç»„ä»¶</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-cpn'</span><span class="token punctuation">,</span>cpnC<span class="token punctuation">)</span></code></pre><h4 id="ä½¿ç”¨ç»„ä»¶"><a href="#ä½¿ç”¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ç»„ä»¶"></a>ä½¿ç”¨ç»„ä»¶</h4><p>åœ¨<code>Vue</code>å®ä¾‹çš„ä½œç”¨èŒƒå›´å†…ä½¿ç”¨ç»„ä»¶</p><p>æ¯”å¦‚ä¸‹ä¾‹çš„<code>id="app"</code>ä¸‹æ‰æœ‰æ•ˆ</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-cpn</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-cpn</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h3 id="å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶"></a>å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶</h3><h4 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶"></a>å…¨å±€ç»„ä»¶</h4><p>åœ¨<code>Vue</code>å®ä¾‹å¤–æ³¨å†Œçš„éƒ½æ˜¯å…¨å±€ç»„ä»¶ï¼Œåªè¦åœ¨<code>Vue</code>çš„å®ä¾‹èŒƒå›´å†…ä½¿ç”¨éƒ½å¯ä»¥</p><p>è°ƒç”¨<code>Vue.component()</code>æ–¹æ³•</p><h4 id="å±€éƒ¨ç»„ä»¶"><a href="#å±€éƒ¨ç»„ä»¶" class="headerlink" title="å±€éƒ¨ç»„ä»¶"></a>å±€éƒ¨ç»„ä»¶</h4><p>åœ¨<code>Vue</code>å®ä¾‹å†…æ³¨å†Œç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶åªå¯ä»¥åœ¨è‡ªå·±çš„ç»„ä»¶èŒƒå›´å†…ä½¿ç”¨</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            components<span class="token punctuation">:</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//cpnä½¿ç”¨ç»„ä»¶æ—¶çš„æ ‡ç­¾å</span>                cpn<span class="token punctuation">:</span>cpnC            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre><code>components:{       //cpnä½¿ç”¨ç»„ä»¶æ—¶çš„æ ‡ç­¾å       cpn:cpnC}</code></pre><p>ä¸Šé¢çš„å±€éƒ¨ç»„ä»¶åªå¯ä»¥åœ¨<code>id="app"</code>çš„å®ä¾‹èŒƒå›´å†…ä½¿ç”¨è¿™ä¸ªç»„ä»¶</p><h3 id="çˆ¶å­ç»„ä»¶"><a href="#çˆ¶å­ç»„ä»¶" class="headerlink" title="çˆ¶å­ç»„ä»¶"></a>çˆ¶å­ç»„ä»¶</h3><p>å¯ä»¥åœ¨ç»„ä»¶å†…è°ƒç”¨ç»„ä»¶</p><p>ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºäº†cpnC1 ç»„ä»¶ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> cpnC1 <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`            &lt;div>                &lt;h2>æˆ‘æ˜¯æ ‡ç­¾1&lt;/h2>                &lt;p>æˆ‘æ˜¯å†…å®¹ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ&lt;/p>            &lt;/div>                `</span></span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>æ¥ç€æˆ‘ä»¬åˆ›å»ºç¬¬äºŒä¸ªç»„ä»¶cpnC2 ï¼Œåœ¨è¿™ä¸ªç»„ä»¶å†…æˆ‘ä»¬æƒ³è°ƒç”¨ç¬¬ä¸€ä¸ªç»„ä»¶,æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒä¸ªç»„ä»¶æ³¨å†Œç¬¬ä¸€ä¸ªç»„ä»¶ï¼š<code>components : { cpn1 : cpnC1 }</code>ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¬¬äºŒä¸ªç»„ä»¶å†…ä½¿ç”¨ç»„ä»¶ä¸€äº†</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> cpnC2 <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`            &lt;div>                &lt;h2>æˆ‘æ˜¯æ ‡ç­¾2&lt;/h2>                &lt;p>æˆ‘æ˜¯å†…å®¹ï¼Œè°¢è°¢è°¢è°¢è°¢è°¢&lt;/p>                &lt;cpn1>&lt;/cpn1>            &lt;/div>                `</span></span><span class="token punctuation">,</span>            components<span class="token punctuation">:</span><span class="token punctuation">{</span>               cpn1<span class="token punctuation">:</span>cpnC1             <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>åŒæ—¶æˆ‘ä»¬ä½¿ç”¨ç»„ä»¶äºŒçš„æ—¶å€™ä¹Ÿéœ€è¦æ³¨å†Œç»„ä»¶äºŒæ‰å¯ä»¥</p><h3 id="æ³¨å†Œç»„ä»¶è¯­æ³•ç³–"><a href="#æ³¨å†Œç»„ä»¶è¯­æ³•ç³–" class="headerlink" title="æ³¨å†Œç»„ä»¶è¯­æ³•ç³–"></a>æ³¨å†Œç»„ä»¶è¯­æ³•ç³–</h3><p>çœå»åˆ›å»ºçš„è¿‡ç¨‹ï¼Œæä¾›æ³¨å†Œçš„è¯­æ³•ç³–</p><p>æˆ‘ä»¬åŸæ¥ä½¿ç”¨ç»„ä»¶ï¼Œé¦–å…ˆé€šè¿‡<code>const&nbsp;cpnC1&nbsp;= Vue.extend({...})</code> åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œç„¶åæ³¨å†Œè¿™ä¸ªç»„ä»¶<code>Vue.component("cpn1", cpnC1)</code></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯­æ³•ç³–çœå»ç¬¬ä¸€æ­¥åˆ›å»ºå…¨å±€ç»„ä»¶ï¼š</p><pre class=" language-javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"cpn1"</span><span class="token punctuation">,</span><span class="token punctuation">{</span>            template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`            &lt;div>                &lt;h2>æˆ‘æ˜¯æ ‡ç­¾1&lt;/h2>                &lt;p>æˆ‘æ˜¯å†…å®¹ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ&lt;/p>            &lt;/div>                `</span></span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>åˆ›å»ºå±€éƒ¨ç»„ä»¶å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            components<span class="token punctuation">:</span> <span class="token punctuation">{</span>                <span class="token string">'cpn1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>                    template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`                        &lt;div>                            &lt;h2>æˆ‘æ˜¯æ ‡ç­¾1&lt;/h2>                            &lt;p>æˆ‘æ˜¯å†…å®¹ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ&lt;/p>                        &lt;/div>                            `</span></span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="ç»„ä»¶æ¨¡æ¿çš„åˆ†ç¦»å†™æ³•"><a href="#ç»„ä»¶æ¨¡æ¿çš„åˆ†ç¦»å†™æ³•" class="headerlink" title="ç»„ä»¶æ¨¡æ¿çš„åˆ†ç¦»å†™æ³•"></a>ç»„ä»¶æ¨¡æ¿çš„åˆ†ç¦»å†™æ³•</h3><h4 id="scriptæ ‡ç­¾"><a href="#scriptæ ‡ç­¾" class="headerlink" title="scriptæ ‡ç­¾"></a>scriptæ ‡ç­¾</h4><p>ç±»å‹å¿…é¡»æ˜¯<code>text/x-template</code></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/x-template<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token operator">&lt;</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span>h2<span class="token operator">></span>æˆ‘æ˜¯æ ‡é¢˜<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>            <span class="token operator">&lt;</span>h2<span class="token operator">></span>æˆ‘æ˜¯å†…å®¹å“ˆå“ˆå“ˆå“ˆ<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åæ³¨å†Œç»„ä»¶ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ³¨å†Œä¸€ä¸ªå…¨å±€ç»„ä»¶</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'cpn'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>    template<span class="token punctuation">:</span><span class="token string">'#cpn'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>        message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>ç„¶ååœ¨å®ä¾‹èŒƒå›´å†…è°ƒç”¨ç»„ä»¶å°±å¯ä»¥äº†ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h4 id="templateæ ‡ç­¾"><a href="#templateæ ‡ç­¾" class="headerlink" title="templateæ ‡ç­¾"></a>templateæ ‡ç­¾</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æˆ‘æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æˆ‘æ˜¯å†…å®¹å“ˆå“ˆå“ˆå“ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åæ³¨å†Œå’Œè°ƒç”¨åŒä¸Š</p><h3 id="ç–‘é—®ï¼Ÿ"><a href="#ç–‘é—®ï¼Ÿ" class="headerlink" title="ç–‘é—®ï¼Ÿ"></a>ç–‘é—®ï¼Ÿ</h3><h4 id="1ã€ç»„ä»¶å†…éƒ¨å¯ä»¥è®¿é—®Vueé‡Œçš„æ•°æ®å—ï¼Ÿ"><a href="#1ã€ç»„ä»¶å†…éƒ¨å¯ä»¥è®¿é—®Vueé‡Œçš„æ•°æ®å—ï¼Ÿ" class="headerlink" title="1ã€ç»„ä»¶å†…éƒ¨å¯ä»¥è®¿é—®Vueé‡Œçš„æ•°æ®å—ï¼Ÿ"></a>1ã€ç»„ä»¶å†…éƒ¨å¯ä»¥è®¿é—®<code>Vue</code>é‡Œçš„æ•°æ®å—ï¼Ÿ</h4><p>ä¸èƒ½è®¿é—®ï¼Œç»„ä»¶æ˜¯ä¸€ä¸ªå•ç‹¬åŠŸèƒ½æ¨¡å—çš„å°è£…ï¼Œé‚£ä¹ˆç»„ä»¶è‡ªå·±çš„æ•°æ®æ”¾åœ¨å“ªå‘¢ï¼Ÿ</p><p>ç»„ä»¶å¯¹è±¡é‡Œä¹Ÿæœ‰ä¸€ä¸ªdataå±æ€§(ä¹Ÿå¯ä»¥æœ‰methodsç­‰å±æ€§)ï¼Œåªæ˜¯è¿™ä¸ªdataå±æ€§å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å†…éƒ¨ä¿å­˜æ•°æ®</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>ç»„ä»¶å†…çš„æ•°æ®ï¼šï¼š{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'cpn'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>          template<span class="token punctuation">:</span><span class="token string">'#cpn'</span><span class="token punctuation">,</span>          <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              <span class="token keyword">return</span><span class="token punctuation">{</span>                  title<span class="token punctuation">:</span><span class="token string">"æˆ‘æ˜¯ç»„ä»¶å†…çš„æ•°æ®"</span>              <span class="token punctuation">}</span>          <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>åªæœ‰è¿™æ ·æ‰èƒ½ä¿å­˜ç»„ä»¶å†…çš„æ•°æ®</p><h4 id="2ã€ç»„ä»¶å†…çš„dataä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"><a href="#2ã€ç»„ä»¶å†…çš„dataä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ" class="headerlink" title="2ã€ç»„ä»¶å†…çš„dataä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"></a>2ã€ç»„ä»¶å†…çš„dataä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ</h4><p>å› ä¸ºç»„ä»¶å°è£…åå°±ä¼šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•ä½ï¼Œè°ƒç”¨ç›¸åŒç»„ä»¶å¤šæ¬¡ï¼Œå†…éƒ¨æ•°æ®ç”±äºæ˜¯ç”¨å‡½æ•°ä¿å­˜çš„ï¼Œç”¨å‡½æ•°ä¿å­˜ï¼Œæ¯ä¸€æ¬¡ä¸€ä¸ªæ–°çš„ç»„ä»¶éœ€è¦çš„æ•°æ®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„åœ°å€ä¿å­˜å„è‡ªçš„æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šæ±¡æŸ“ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span><span class="token punctuation">{</span>        counter<span class="token punctuation">:</span><span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¦‚æœä½¿ç”¨å¯¹è±¡dataä¿å­˜æ•°æ®ï¼Œè°ƒç”¨å¤šæ¬¡çš„æ—¶å€™ï¼Œä¿®æ”¹ä¸€ä¸ªdataï¼Œå…¶ä»–dataæ•°æ®ä¹Ÿä¼šè¢«æ±¡æŸ“ï¼Œå› ä¸ºè°ƒç”¨å¯¹è±¡çš„å®è´¨æ˜¯è°ƒç”¨äº†å¯¹è±¡çš„åœ°å€ï¼Œå¦‚æœæ•°æ®ç”¨å¯¹è±¡ä¿å­˜ï¼Œé‚£ä¹ˆç›¸åŒç»„ä»¶è°ƒç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡åœ°å€</p><pre class=" language-javascript"><code class="language-javascript">data<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token keyword">return</span><span class="token punctuation">{</span>        counter<span class="token punctuation">:</span><span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ä½¿ç”¨å¯¹è±¡ä¿å­˜æ•°æ®ï¼Œå°±ä¼šæŠ¥é”™</p><h3 id="çˆ¶å­ç»„ä»¶çš„é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶çš„é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶çš„é€šä¿¡"></a>çˆ¶å­ç»„ä»¶çš„é€šä¿¡</h3><h4 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h4><p>ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å­ç»„ä»¶ä¸èƒ½å¼•ç”¨çˆ¶ç»„ä»¶æˆ–è€…<code>Vue</code>å®ä¾‹çš„æ•°æ®çš„</p><p>ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ä¸­ç¡®å®éœ€è¦ä¸€äº›æ•°æ®å±•ç¤ºåœ¨å°ç»„é—´ä¸­</p><p>è¿™æ—¶å€™æˆ‘ä»¬ä¸ä¼šè®©å°ç»„ä»¶å†å‘é€ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥è®©çˆ¶ç»„ä»¶å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶</p><h4 id="å¦‚ä½•çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Ÿ"><a href="#å¦‚ä½•çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Ÿ"></a>å¦‚ä½•çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Ÿ</h4><h5 id="çˆ¶ä¼ å­ï¼šé€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®"><a href="#çˆ¶ä¼ å­ï¼šé€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®" class="headerlink" title="çˆ¶ä¼ å­ï¼šé€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®"></a>çˆ¶ä¼ å­ï¼šé€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®</h5><p>çˆ¶ç»„ä»¶çš„æ•°æ®ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>        message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span><span class="token punctuation">,</span>        movies<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'æµ·ç‹'</span><span class="token punctuation">,</span><span class="token string">'æµ·è´¼ç‹'</span><span class="token punctuation">,</span><span class="token string">'æµ·å°”å…„å¼Ÿ'</span><span class="token punctuation">,</span><span class="token string">'ç«å½±å¿è€…'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    components<span class="token punctuation">:</span><span class="token punctuation">{</span>        cpn    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h6 id="propsç”¨æ•°ç»„æ¥æ”¶æ•°æ®"><a href="#propsç”¨æ•°ç»„æ¥æ”¶æ•°æ®" class="headerlink" title="propsç”¨æ•°ç»„æ¥æ”¶æ•°æ®"></a>propsç”¨æ•°ç»„æ¥æ”¶æ•°æ®</h6><p>é¦–å…ˆåœ¨<code>props</code>é‡Œå®šä¹‰æ¥æ”¶æ•°æ®çš„å®¹å™¨åå­—ï¼ˆ<strong>æ³¨æ„è¿™é‡Œä¸æ”¯æŒé©¼å³°å‘½åï¼Œå› ä¸ºv-bindä¸æ”¯æŒé©¼å³°å‘½å</strong>ï¼‰</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> cpn <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    template<span class="token punctuation">:</span><span class="token string">'#cpn2'</span><span class="token punctuation">,</span>    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'cmovies'</span><span class="token punctuation">,</span><span class="token string">'cmessage'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>åœ¨è°ƒç”¨ç»„ä»¶çš„æ ‡ç­¾å†…ç»‘å®šçˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cpn</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>cmovies</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>movies<span class="token punctuation">"</span></span> <span class="token attr-name">:cmessage</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>è¿™æ ·å­ç»„ä»¶å†…å°±èƒ½æ¥æ”¶åˆ°çˆ¶ç»„ä»¶çš„æ•°æ®äº†ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpn2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æˆ‘æ˜¯å­ç»„ä»¶å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in cmovies<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¾—åˆ°çˆ¶ç»„ä»¶æ•°æ®ç”µå½±åç§°--->{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>å¾—åˆ°çˆ¶ç»„ä»¶æ•°æ®çŸ­ä¿¡--->{{cmessage}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h6 id="propsç”¨å¯¹è±¡æ¥æ”¶æ•°æ®"><a href="#propsç”¨å¯¹è±¡æ¥æ”¶æ•°æ®" class="headerlink" title="propsç”¨å¯¹è±¡æ¥æ”¶æ•°æ®"></a>propsç”¨å¯¹è±¡æ¥æ”¶æ•°æ®</h6><p>ç”¨è¿™ç§æ–¹æ³•ï¼Œè¿˜éœ€è¦å¯¹ä¼ è¿‡æ¥çš„æ•°æ®è¿›è¡Œä¸€ä¸ªéªŒè¯ï¼Œå¯¹ä¼ è¿‡æ¥çš„æ•°æ®æœ‰ä¸€ä¸ªç±»å‹é™åˆ¶ï¼Œè¿˜å¯ä»¥è®¾ç½®é»˜è®¤å€¼<code>default</code>ï¼Œè¿˜æœ‰å¦‚æœ<code>required:true</code>ï¼Œè°ƒç”¨çš„æ—¶å€™å¿…é¡»ç»‘å®šè¿™ä¸ªå±æ€§</p><pre class=" language-javascript"><code class="language-javascript">props<span class="token punctuation">:</span><span class="token punctuation">{</span>    cmovies<span class="token punctuation">:</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span>Array<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    cmessage<span class="token punctuation">:</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span>String<span class="token punctuation">,</span>        <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token string">'aaaaaa'</span><span class="token punctuation">,</span>        required<span class="token punctuation">:</span><span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="å­ä¼ çˆ¶ï¼šé€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯"><a href="#å­ä¼ çˆ¶ï¼šé€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯" class="headerlink" title="å­ä¼ çˆ¶ï¼šé€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯"></a>å­ä¼ çˆ¶ï¼šé€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯</h5><p>ä¸¾ä¸ªä¾‹å­ï¼Œä»å­ç»„ä»¶ä¼ é€’å­ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶å›åˆ°çˆ¶ç»„ä»¶ï¼Œå¹¶ä¸”è·å¾—ç‚¹å‡»çš„id</p><h6 id="é¦–å…ˆåœ¨å­ç»„ä»¶å®šä¹‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼š"><a href="#é¦–å…ˆåœ¨å­ç»„ä»¶å®šä¹‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼š" class="headerlink" title="é¦–å…ˆåœ¨å­ç»„ä»¶å®šä¹‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼š"></a>é¦–å…ˆåœ¨å­ç»„ä»¶å®šä¹‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼š</h6><p><code>@click="btnClick(item)"</code></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpn2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in categories<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btnClick(item)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h6 id="åœ¨å­ç»„ä»¶çš„æ–¹æ³•é‡Œå‘é€ç»™çˆ¶ç»„ä»¶ï¼š"><a href="#åœ¨å­ç»„ä»¶çš„æ–¹æ³•é‡Œå‘é€ç»™çˆ¶ç»„ä»¶ï¼š" class="headerlink" title="åœ¨å­ç»„ä»¶çš„æ–¹æ³•é‡Œå‘é€ç»™çˆ¶ç»„ä»¶ï¼š"></a>åœ¨å­ç»„ä»¶çš„æ–¹æ³•é‡Œå‘é€ç»™çˆ¶ç»„ä»¶ï¼š</h6><p><code>this.$emit('itemclick',item.id)</code></p><p>æ³¨æ„è¿™é‡Œè‡ªå®šä¹‰çš„æ–¹æ³•åä¸èƒ½ç”¨é©¼å³°å‘½å</p><pre class=" language-javascript"><code class="language-javascript">methods<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token function">btnClick</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æŠŠç‚¹å‡»äº‹ä»¶ä¼ ç»™çˆ¶ç»„ä»¶</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'itemclick'</span><span class="token punctuation">,</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h6 id="çˆ¶ç»„ä»¶çš„æ ‡ç­¾ä¸Šæ¥æ”¶è¿™ä¸ªäº‹ä»¶"><a href="#çˆ¶ç»„ä»¶çš„æ ‡ç­¾ä¸Šæ¥æ”¶è¿™ä¸ªäº‹ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶çš„æ ‡ç­¾ä¸Šæ¥æ”¶è¿™ä¸ªäº‹ä»¶"></a>çˆ¶ç»„ä»¶çš„æ ‡ç­¾ä¸Šæ¥æ”¶è¿™ä¸ªäº‹ä»¶</h6><p><code>@itemclick="cpnClick"</code></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cpn</span> <span class="token attr-name">@itemclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cpnClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cpn</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h6 id="åœ¨çˆ¶ç»„ä»¶çš„æ–¹æ³•é‡Œå°±å¯ä»¥å¾—åˆ°å­ç»„ä»¶ä¼ æ¥çš„æ•°æ®äº†"><a href="#åœ¨çˆ¶ç»„ä»¶çš„æ–¹æ³•é‡Œå°±å¯ä»¥å¾—åˆ°å­ç»„ä»¶ä¼ æ¥çš„æ•°æ®äº†" class="headerlink" title="åœ¨çˆ¶ç»„ä»¶çš„æ–¹æ³•é‡Œå°±å¯ä»¥å¾—åˆ°å­ç»„ä»¶ä¼ æ¥çš„æ•°æ®äº†"></a>åœ¨çˆ¶ç»„ä»¶çš„æ–¹æ³•é‡Œå°±å¯ä»¥å¾—åˆ°å­ç»„ä»¶ä¼ æ¥çš„æ•°æ®äº†</h6><pre class=" language-javascript"><code class="language-javascript">methods<span class="token punctuation">:</span><span class="token punctuation">{</span>    <span class="token function">cpnClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//è¾“å‡ºçš„æ˜¯ç‚¹å‡»çš„å­ç»„ä»¶çš„id</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> ç»„ä»¶é€šä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v-on</title>
      <link href="2019/10/17/v-on/"/>
      <url>2019/10/17/v-on/</url>
      
        <content type="html"><![CDATA[<h1 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h1><h3 id="v-onçš„è¯­æ³•ç³–"><a href="#v-onçš„è¯­æ³•ç³–" class="headerlink" title="v-onçš„è¯­æ³•ç³–"></a><code>v-on</code>çš„è¯­æ³•ç³–</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{counter}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>increment<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>decrement<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                counter<span class="token punctuation">:</span><span class="token number">0</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            methods<span class="token punctuation">:</span><span class="token punctuation">{</span>                <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">--</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="v-onå‚æ•°"><a href="#v-onå‚æ•°" class="headerlink" title="v-onå‚æ•°"></a><code>v-on</code>å‚æ•°</h3><p>é€šè¿‡<code>methods</code>ä¸­å®šä¹‰æ–¹æ³•ï¼Œä»¥ä¾›<code>@click</code>è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„å‚æ•°é—®é¢˜</p><h4 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="æƒ…å†µä¸€"></a>æƒ…å†µä¸€</h4><p>å¦‚æœè¯¥æ–¹æ³•ä¸éœ€è¦é¢å¤–å‚æ•°ï¼Œé‚£ä¹ˆæ–¹æ³•åçš„()å¯ä»¥ä¸æ·»åŠ </p><p>æ³¨æ„ï¼šåœ¨äº‹ä»¶å®šä¹‰æ—¶ï¼Œå†™å‡½æ•°æ—¶çœç•¥äº†å°æ‹¬å·ï¼Œä½†æ˜¯æ–¹æ³•æœ¬èº«æ˜¯éœ€è¦ä¸€ä¸ªå‚æ•°çš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ<code>vue</code>ä¼šé»˜è®¤å°†æµè§ˆå™¨ç”Ÿäº§çš„<code>event</code>äº‹ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°æ–¹æ³•ä¸­</p><h4 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="æƒ…å†µäºŒ"></a>æƒ…å†µäºŒ</h4><p>æ–¹æ³•å®šä¹‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦<code>event</code>å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å…¶ä»–çš„å‚æ•°</p><p>åœ¨è°ƒç”¨æ–¹æ³•æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>$event</code>æ‰‹åŠ¨è·å–åˆ°æµè§ˆå™¨å‚æ•°çš„<code>event</code>å¯¹è±¡</p><p><img src="https://i.loli.net/2020/11/05/mrp7toyRNbfFSWI.png" alt="v-onä¼ å‚.png"><br><img src="https://i.loli.net/2020/11/05/Lvu2ElxFsI4kVYK.png" alt="v-onä¼ å‚ç»“æœ.png"></p><h3 id="v-onä¿®é¥°ç¬¦"><a href="#v-onä¿®é¥°ç¬¦" class="headerlink" title="v-onä¿®é¥°ç¬¦"></a><code>v-on</code>ä¿®é¥°ç¬¦</h3><h4 id="é˜»æ­¢äº‹ä»¶å†’æ³¡-stop"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡-stop" class="headerlink" title="é˜»æ­¢äº‹ä»¶å†’æ³¡.stop"></a>é˜»æ­¢äº‹ä»¶å†’æ³¡<code>.stop</code></h4><p><code>@click.stop="btnClick"</code></p><h4 id="é˜»æ­¢é»˜è®¤äº‹ä»¶-prevent"><a href="#é˜»æ­¢é»˜è®¤äº‹ä»¶-prevent" class="headerlink" title="é˜»æ­¢é»˜è®¤äº‹ä»¶.prevent"></a>é˜»æ­¢é»˜è®¤äº‹ä»¶<code>.prevent</code></h4><p><code>@click.prevent="submitClick"</code>ä¾‹å¦‚ç‚¹å‡»<code>submit</code>è‡ªåŠ¨æäº¤æ•°æ®ï¼Œä½¿ç”¨è¯¥ä¿®é¥°ç¬¦ä¹‹åï¼Œç‚¹å‡»åä¼šè§¦å‘æ–¹æ³•ï¼Œè€Œä¸ä¼šé»˜è®¤æäº¤æ•°æ®</p><h4 id="ç›‘å¬é”®ç›˜çš„é”®å¸½"><a href="#ç›‘å¬é”®ç›˜çš„é”®å¸½" class="headerlink" title="ç›‘å¬é”®ç›˜çš„é”®å¸½"></a>ç›‘å¬é”®ç›˜çš„é”®å¸½</h4><p><code>@keyup.enter="keyup"</code>è¿™ä¸ªæ˜¯ç›‘å¬åˆ°ç‚¹å‡»<code>enter</code>åæ‰§è¡Œ<code>keyup</code>æ–¹æ³•</p><h4 id="ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶-native"><a href="#ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶-native" class="headerlink" title="ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶.native"></a>ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶<code>.native</code></h4><h4 id="åªè§¦å‘ä¸€æ¬¡å›è°ƒ-once"><a href="#åªè§¦å‘ä¸€æ¬¡å›è°ƒ-once" class="headerlink" title="åªè§¦å‘ä¸€æ¬¡å›è°ƒ.once"></a>åªè§¦å‘ä¸€æ¬¡å›è°ƒ<code>.once</code></h4><p><code>@click.once="btnClick"</code>åªä¼šç¬¬ä¸€æ¬¡ç‚¹å‡»è§¦å‘è¯¥æ–¹æ³•</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> v-onæŒ‡ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å±æ€§computed</title>
      <link href="2019/10/16/ji-suan-shu-xing/"/>
      <url>2019/10/16/ji-suan-shu-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h1><h3 id="ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§"><a href="#ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§"></a>ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥é€šè¿‡æ’å€¼è¯­æ³•æ˜¾ç¤ºä¸€äº›dataä¸­çš„æ•°æ®</p><p>ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œä¸€äº›è½¬åŒ–åå†æ˜¾ç¤ºï¼Œæˆ–è€…éœ€è¦å°†å¤šä¸ªæ•°æ®ç»“åˆèµ·æ¥è¿›è¡Œæ˜¾ç¤º</p><pre><code>æ¯”å¦‚æˆ‘ä»¬æœ‰`firstName`å’Œ`lastName`ä¸¤ä¸ªå˜é‡ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºå®Œæ•´çš„åç§°ä½†æ˜¯å¦‚æœå¤šä¸ªåœ°æ–¹éƒ½éœ€è¦æ˜¾ç¤ºå®Œæ•´çš„åç§°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™å¤šä¸ª`{{firstName}}`å’Œ`{{lastName}}`</code></pre><p>æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ä»£ç æ¢æˆè®¡ç®—å±æ€§ï¼š</p><pre><code>æˆ‘ä»¬å‘ç°è®¡ç®—å±æ€§æ˜¯å†™åœ¨å®ä¾‹çš„`computed`é€‰é¡¹ä¸­çš„</code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{firstName+'  '+lastName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{firstName}} {{lastName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{getFullName()}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{fullName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                 firstName<span class="token punctuation">:</span> <span class="token string">'Lebron'</span><span class="token punctuation">,</span>                lastName<span class="token punctuation">:</span><span class="token string">'James'</span>             <span class="token punctuation">}</span><span class="token punctuation">,</span>            computed<span class="token punctuation">:</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">/* è®¡ç®—å±æ€§ï¼Œä¸€èˆ¬ä¸ç”¨åŠ¨è¯ */</span>                fullName<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'  '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            methods<span class="token punctuation">:</span><span class="token punctuation">{</span>                getFullName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'  '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>è®¡ç®—å±æ€§ä¸è¦åŠ å°æ‹¬å·()</p><h3 id="è®¡ç®—å±æ€§çš„å¤æ‚æ“ä½œ"><a href="#è®¡ç®—å±æ€§çš„å¤æ‚æ“ä½œ" class="headerlink" title="è®¡ç®—å±æ€§çš„å¤æ‚æ“ä½œ"></a>è®¡ç®—å±æ€§çš„å¤æ‚æ“ä½œ</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æ€»ä»·æ ¼:{{totalPrice}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript"><span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span>            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                books<span class="token punctuation">:</span> <span class="token punctuation">[</span>                    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">110</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Unixç¼–ç¨‹è‰ºæœ¯'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">119</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">111</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'ä»£ç å¤§å…¨'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">105</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">112</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'æ·±å…¥ç†è§£è®¡ç®—æœºåŸç†'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">98</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                    <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">113</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'ç°ä»£æ“ä½œç³»ç»Ÿ'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">87</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">]</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>                totalPrice<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">let</span> result  <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>books<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        result <span class="token operator">+</span><span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>books<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>price                    <span class="token punctuation">}</span>                    <span class="token keyword">return</span> result                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="è®¡ç®—å±æ€§çš„setterå’Œgetter"><a href="#è®¡ç®—å±æ€§çš„setterå’Œgetter" class="headerlink" title="è®¡ç®—å±æ€§çš„setterå’Œgetter"></a>è®¡ç®—å±æ€§çš„<code>setter</code>å’Œ<code>getter</code></h3><p>æˆ‘ä»¬ä¹‹å‰åœ¨è®¡ç®—å±æ€§çš„åŸºç¡€æ“ä½œä¸­ä½¿ç”¨äº†ä¸€ä¸ªæ–¹æ³•<code>fullName</code>,å¦‚ä¸‹</p><pre><code>fullName:function(){                    return this.firstName + '  ' + this.lastName                }</code></pre><p>å…¶å®æ˜¯è¿™æ ·çš„</p><pre><code>computed: {                fullName:{                    set:function(){                    },                    get:function(){                        return this.firstName + '  ' + this.lastName                    }                }            }</code></pre><p>å…¶ä¸­<code>set</code>å±æ€§æ˜¯ä¸éœ€è¦å®ç°çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è®¡ç®—å±æ€§æœ‰<code>set</code>å±æ€§ï¼Œå…¶å®è®¡ç®—å±æ€§æ˜¯ä¸ªåªè¯»å±æ€§ï¼Œå¦‚ä¸‹</p><pre><code>computed: {                fullName:{                    get:function(){                        return this.firstName + '  ' + this.lastName                    }                }            }</code></pre><p>æˆ‘ä»¬æ–¹ä¾¿ä½¿ç”¨å°±ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼</p><p><strong>è®¡ç®—å±æ€§çš„æ–¹æ³•ï¼Œå³ä½¿è°ƒç”¨å¤šæ¬¡ï¼Œè®¡ç®—å±æ€§ä¹Ÿåªæ˜¯è°ƒç”¨äº†ä¸€æ¬¡ï¼Œå†…éƒ¨æ˜¯æœ‰ç¼“å­˜çš„</strong>ï¼Œå¦‚æœæ–¹æ³•çš„è¿”å›ç»“æœä¸å˜ï¼Œå°±ä¸ä¼šé‡å¤è°ƒç”¨å¤šæ¬¡ï¼Œç›´æ¥è°ƒç”¨ç¼“å­˜ã€‚</p><p><strong>ä½¿ç”¨<code>methods</code>çš„æ—¶å€™ï¼Œè°ƒç”¨å‡ æ¬¡ï¼Œå‡½æ•°å°±ä¼šè°ƒç”¨å‡ æ¬¡</strong></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> computed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VueåŸºæœ¬è¯­æ³•</title>
      <link href="2019/10/11/vue-ji-ben-yu-fa/"/>
      <url>2019/10/11/vue-ji-ben-yu-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="VueåŸºæœ¬è¯­æ³•"><a href="#VueåŸºæœ¬è¯­æ³•" class="headerlink" title="VueåŸºæœ¬è¯­æ³•"></a>VueåŸºæœ¬è¯­æ³•</h1><h3 id="æ’å€¼æ“ä½œ"><a href="#æ’å€¼æ“ä½œ" class="headerlink" title="æ’å€¼æ“ä½œ"></a>æ’å€¼æ“ä½œ</h3><h4 id="Mustache"><a href="#Mustache" class="headerlink" title="Mustache"></a><code>Mustache</code></h4><p><code>Mustache</code>è¯­æ³•:åŒå¤§æ‹¬å·</p><p><code>Mustache</code>:èƒ¡é¡»/èƒ¡å­</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        {{message}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>{{firstName+' '+lastName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>{{counter*2}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span><span class="token punctuation">,</span>                firstName<span class="token punctuation">:</span> <span class="token string">'Kobe'</span><span class="token punctuation">,</span>                lastName<span class="token punctuation">:</span> <span class="token string">'Bryant'</span><span class="token punctuation">,</span>                counter<span class="token punctuation">:</span> <span class="token number">1900</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="v-onceæŒ‡ä»¤"><a href="#v-onceæŒ‡ä»¤" class="headerlink" title="v-onceæŒ‡ä»¤"></a><code>v-once</code>æŒ‡ä»¤</h4><p>åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ•°æ®ï¼Œä¹‹åä¿®æ”¹å¹¶ä¸ä¼šæ”¹å˜</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">v-once</span><span class="token punctuation">></span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                message<span class="token punctuation">:</span> <span class="token string">'ä½ å¥½å•Š'</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a><code>v-html</code></h4><p>è§£æå­—ç¬¦ä¸²ï¼Œè¯†åˆ«aæ ‡ç­¾ï¼Œå¹¶ä¸”èƒ½è§£æ<code>href</code>åœ°å€</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            el<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`#app`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                url<span class="token punctuation">:</span><span class="token string">'&lt;a href="https://www.baidu.com">ç™¾åº¦ä¸€ä¸‹&lt;/a>'</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a><code>v-text</code></h4><p>ç”¨èµ·æ¥å¹¶ä¸çµæ´»ï¼Œä¼šè¦†ç›–åé¢çš„å†…å®¹</p><pre><code>&lt;div id="app"&gt;        &lt;h2 v-once&gt;{{message}},æé“¶æ²³&lt;/h2&gt;            //ä½ å¥½å•Š,æé“¶æ²³        &lt;h2 v-text="message"&gt;,æé“¶æ²³&lt;/h2&gt;            //ä½ å¥½å•Š    &lt;/div&gt;    &lt;script src="../js/vue.js"&gt;&lt;/script&gt;    &lt;script&gt;        let app = new Vue({            el: `#app`,            data: {                message: 'ä½ å¥½å•Š'            }        })    &lt;/script&gt;</code></pre><h4 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a><code>v-pre</code></h4><p>ä¸è§£æ<code>Mustache</code>è¯­æ³•ï¼Œå°†å†…å®¹åŸå°ä¸åŠ¨è¾“å‡º</p><pre><code>&lt;div id="app"&gt;        &lt;h2 v-pre&gt;{{message}},æé“¶æ²³&lt;/h2&gt;        //{{message}},æé“¶æ²³    &lt;/div&gt;    &lt;script src="../js/vue.js"&gt;&lt;/script&gt;    &lt;script&gt;        let app = new Vue({            el: `#app`,            data: {                message: 'ä½ å¥½å•Š'            }        })    &lt;/script&gt;</code></pre><h4 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a><code>v-cloak</code></h4><h4 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a><code>v-bind</code></h4><p>åŠ¨æ€ç»‘å®šå±æ€§</p><pre><code>&lt;div id="app"&gt;        {{message}}        &lt;a v-bind:href="url"&gt;ç™¾åº¦ä¸€ä¸‹&lt;/a&gt;    &lt;/div&gt;    &lt;script src="../js/vue.js"&gt;&lt;/script&gt;    &lt;script&gt;let app = new Vue({            el: `#app`,            data: {                message: 'ä½ å¥½å•Š',                url:'https://www.baidu.com'            }        })    &lt;/script&gt;</code></pre><p>è¯­æ³•ç³–ï¼ˆç®€å†™ï¼‰ï¼š</p><p><code>&lt;a :href="url"&gt;ç™¾åº¦ä¸€ä¸‹&lt;/a&gt;</code></p><h4 id="v-bindåŠ¨æ€ç»‘å®šclasså±æ€§"><a href="#v-bindåŠ¨æ€ç»‘å®šclasså±æ€§" class="headerlink" title="v-bindåŠ¨æ€ç»‘å®šclasså±æ€§"></a><code>v-bind</code>åŠ¨æ€ç»‘å®š<code>class</code>å±æ€§</h4><p>ç‚¹å‡»æŒ‰é’®åˆ‡æ¢<code>class</code></p><pre><code>&lt;!-- css --&gt;&lt;style&gt;        .active{            color: red;        }        .line{            font-size: larger;        }&lt;/style&gt;&lt;!-- html --&gt;    &lt;div id="app"&gt;        &lt;h2 class="title" v-bind:class="{active:isActive,line:isLine}"&gt;{{message}}&lt;/h2&gt;        &lt;button v-on:click="btnClick"&gt;åˆ‡æ¢&lt;/button&gt;    &lt;/div&gt;    &lt;script src="../js/vue.js"&gt;&lt;/script&gt;    &lt;script&gt;let app = new Vue({            el: `#app`,            data: {                message:'Hello Vuejs',                isActive:true,                isLine:true            },            methods:{                btnClick:function(){                    this.isActive=!this.isActive,                    this.isLine=!this.isLine                }            }        })    &lt;/script&gt;</code></pre><p><img src="https://i.loli.net/2020/11/05/OAr2TMR5pLj9vPw.png" alt="v-bindç»‘å®šclass.png"><br><img src="https://i.loli.net/2020/11/05/cTLMvb8mFaRqlu5.png" alt="v-bindç»‘å®šclass2.png"></p><h5 id="ç»‘å®šæ–¹å¼ä¸€ã€å¯¹è±¡è¯­æ³•"><a href="#ç»‘å®šæ–¹å¼ä¸€ã€å¯¹è±¡è¯­æ³•" class="headerlink" title="ç»‘å®šæ–¹å¼ä¸€ã€å¯¹è±¡è¯­æ³•"></a>ç»‘å®šæ–¹å¼ä¸€ã€å¯¹è±¡è¯­æ³•</h5><p>ç”¨æ³•æœ‰ï¼š</p><p>1ã€é€šè¿‡ä¸€ä¸ªå¯¹è±¡ç»‘å®šä¸€ä¸ªç±»(å¯ä»¥ä¼ å¤šä¸ªå€¼)ï¼Œå¹¶ä¸”å’Œæ™®é€šç±»åŒæ—¶å­˜åœ¨å¹¶ä¸å†²çª</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{active:isActive,line:isLine}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></code></pre><p>2ã€å¦‚æœç”¨æ³•è¿‡äºå¤æ‚ï¼Œå¯ä»¥æ”¾åœ¨ä¸€ä¸ª<code>methods</code>æˆ–è€…<code>computed</code>ä¸­</p><pre class=" language-html"><code class="language-html">//hmtl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getClasses()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>//jslet app = new Vue({            el: `#app`,            data: {                message:'Hello Vuejs',                isActive:true,                isLine:true            },            methods:{                btnClick:function(){                    this.isActive=!this.isActive,                    this.isLine=!this.isLine                },                getClasses:function(){                    return {active:this.isActive,line:this.isLine}                }            }        })</code></pre><h5 id="ç»‘å®šæ–¹å¼äºŒã€æ•°ç»„è¯­æ³•"><a href="#ç»‘å®šæ–¹å¼äºŒã€æ•°ç»„è¯­æ³•" class="headerlink" title="ç»‘å®šæ–¹å¼äºŒã€æ•°ç»„è¯­æ³•"></a>ç»‘å®šæ–¹å¼äºŒã€æ•°ç»„è¯­æ³•</h5><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>active<span class="token punctuation">'</span>,<span class="token punctuation">'</span>line<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></code></pre><p>æ³¨æ„ï¼šå…¶ä¸­<code>active</code>åŠ å¼•å·å°±æ˜¯å­—ç¬¦ä¸²ï¼Œä¸åŠ å¼•å·å°±æ˜¯å˜é‡</p><h4 id="v-bindç»‘å®šstyle"><a href="#v-bindç»‘å®šstyle" class="headerlink" title="v-bindç»‘å®šstyle"></a>v-<code>bind</code>ç»‘å®š<code>style</code></h4><h5 id="å¯¹è±¡è¯­æ³•"><a href="#å¯¹è±¡è¯­æ³•" class="headerlink" title="å¯¹è±¡è¯­æ³•"></a>å¯¹è±¡è¯­æ³•</h5><p>å±æ€§å€¼éœ€è¦åŠ å¼•å·ï¼Œä½¿ä¹‹è§£ææˆä¸ºå­—ç¬¦ä¸²ï¼Œä¸åŠ å¼•å·å°±ä¼šè§£ææˆä¸ºå˜é‡,å¦‚ä¸‹50pxå¿…é¡»åŠ å¼•å·ï¼Œå¦åˆ™ä¼šè¢«å½“æˆå˜é‡è§£æ</p><p>å¯¹è±¡çš„å€¼å¯ä»¥æ¥è‡ªäº<code>data</code>ä¸­çš„å±æ€§</p><pre><code>&lt;h2 class="title" :style="{fontSize:'50px'}"&gt;{{message}}&lt;/h2&gt;&lt;h2 class="title" :style="{fontSize:finaSize + 'px',backgroundColor:finaColor}"&gt;{{message}}&lt;/h2&gt;</code></pre><p><img src="https://i.loli.net/2020/11/05/xpUDdeOoZSz6cV3.png" alt="v-bindç»‘å®šstyle.png"></p><h5 id="æ•°ç»„è¯­æ³•"><a href="#æ•°ç»„è¯­æ³•" class="headerlink" title="æ•°ç»„è¯­æ³•"></a>æ•°ç»„è¯­æ³•</h5><pre><code>&lt;h2 class="title" :style="[baseStyle1 , baseStyle2]"&gt;{{message}}&lt;/h2&gt;</code></pre><pre><code>data: {     message:'Hello Vuejs',     baseStyle1:{backgroundColor:'red'},     baseStyle2:{fontSize:'100px'}}</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Mustache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MVVM</title>
      <link href="2019/10/08/mvvm/"/>
      <url>2019/10/08/mvvm/</url>
      
        <content type="html"><![CDATA[<h1 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h1><h3 id="ä»€ä¹ˆæ˜¯MVVM"><a href="#ä»€ä¹ˆæ˜¯MVVM" class="headerlink" title="ä»€ä¹ˆæ˜¯MVVM"></a>ä»€ä¹ˆæ˜¯<code>MVVM</code></h3><h4 id="Viewå±‚"><a href="#Viewå±‚" class="headerlink" title="Viewå±‚"></a><code>View</code>å±‚</h4><p>è§†å›¾å±‚</p><p>åœ¨æˆ‘ä»¬å‰ç«¯å¼€å‘ä¸­ï¼Œé€šå¸¸å°±æ˜¯DOMå±‚</p><p>ä¸»è¦çš„ä½œç”¨æ˜¯ç»™ç”¨æˆ·å±•ç¤ºå„ç§ä¿¡æ¯</p><h4 id="Modelå±‚"><a href="#Modelå±‚" class="headerlink" title="Modelå±‚"></a><code>Model</code>å±‚</h4><p>æ•°æ®å±‚</p><p>æ•°æ®å¯èƒ½æ˜¯æˆ‘ä»¬å›ºå®šçš„æ­»æ•°æ®ï¼Œæ›´å¤šçš„æ˜¯æ¥è‡ªæˆ‘ä»¬æœåŠ¡å™¨ï¼Œç½‘ç»œä¸Šè¯·æ±‚ä¸‹æ¥çš„æ•°æ®</p><p>åœ¨æˆ‘ä»¬çš„è®¡æ•°å™¨æ¡ˆä¾‹ä¸­ï¼Œå°±æ˜¯åé¢æŠ½å–å‡ºæ¥çš„<code>obj</code></p><h4 id="VueModelå±‚"><a href="#VueModelå±‚" class="headerlink" title="VueModelå±‚"></a><code>VueModel</code>å±‚</h4><p>è§†å›¾æ¨¡å‹å±‚</p><p>è§†å›¾æ¨¡å‹å±‚æ˜¯<code>View</code>å’Œ<code>Model</code>æ²Ÿé€šçš„æ¡¥æ¢</p><p>ä¸€æ–¹é¢å®ƒå®ç°äº†<code>Data Binding</code>,ä¹Ÿå°±æ˜¯æ•°æ®ç»‘å®šï¼Œå°†<code>Model</code>çš„æ”¹å˜å®æ—¶ååº”åˆ°<code>View</code>ä¸­</p><p>å¦ä¸€æ–¹é¢å®ƒå®ç°äº†ä¸€äº›äº‹ä»¶ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ã€touchç­‰ï¼‰æ—¶ï¼Œå¯ä»¥ç›‘å¬åˆ°ï¼Œå¹¶åœ¨éœ€è¦çš„æƒ…å†µä¸‹æ”¹å˜å¯¹åº”çš„Dataã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> MVVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueç®€ä»‹å’Œå®‰è£…</title>
      <link href="2019/10/03/vue-jian-jie-he-an-zhuang/"/>
      <url>2019/10/03/vue-jian-jie-he-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="vueç®€ä»‹å’Œå®‰è£…"><a href="#vueç®€ä»‹å’Œå®‰è£…" class="headerlink" title="vueç®€ä»‹å’Œå®‰è£…"></a>vueç®€ä»‹å’Œå®‰è£…</h1><h3 id="Vueç®€ä»‹"><a href="#Vueç®€ä»‹" class="headerlink" title="Vueç®€ä»‹"></a><code>Vue</code>ç®€ä»‹</h3><h4 id="vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶"><a href="#vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶" class="headerlink" title="vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶"></a><code>vue</code>æ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶</h4><p>æ¸è¿›å¼æ„å‘³ç€ä½ å¯ä»¥å°†<code>vue</code>ä½œä¸ºä½ åº”ç”¨çš„ä¸€éƒ¨åˆ†åµŒå¥—è¿›å»ï¼Œå¸¦æ¥æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒ</p><p>æˆ–è€…ä½ å¸Œæœ›å°†æ›´å¤šçš„ä¸šåŠ¡é€»è¾‘ä½¿ç”¨<code>vue</code>å®ç°ï¼Œé‚£ä¹ˆ<code>vue</code>çš„æ ¸å¿ƒåº“ä»¥åŠå…¶ç”Ÿæ€ç³»ç»Ÿæ¯”å¦‚<code>Core+Vue+router+Vuex</code>ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³å„ç§éœ€æ±‚</p><h4 id="Vueæœ‰å¾ˆå¤šç‰¹ç‚¹å’ŒWebå¼€å‘ä¸­å¸¸è§çš„é«˜çº§åŠŸèƒ½"><a href="#Vueæœ‰å¾ˆå¤šç‰¹ç‚¹å’ŒWebå¼€å‘ä¸­å¸¸è§çš„é«˜çº§åŠŸèƒ½" class="headerlink" title="Vueæœ‰å¾ˆå¤šç‰¹ç‚¹å’ŒWebå¼€å‘ä¸­å¸¸è§çš„é«˜çº§åŠŸèƒ½"></a><code>Vue</code>æœ‰å¾ˆå¤šç‰¹ç‚¹å’Œ<code>Web</code>å¼€å‘ä¸­å¸¸è§çš„é«˜çº§åŠŸèƒ½</h4><h5 id="è§£è€¦è§†å›¾å’Œæ•°æ®"><a href="#è§£è€¦è§†å›¾å’Œæ•°æ®" class="headerlink" title="è§£è€¦è§†å›¾å’Œæ•°æ®"></a>è§£è€¦è§†å›¾å’Œæ•°æ®</h5><h5 id="å¯å¤ç”¨ç»„ä»¶"><a href="#å¯å¤ç”¨ç»„ä»¶" class="headerlink" title="å¯å¤ç”¨ç»„ä»¶"></a>å¯å¤ç”¨ç»„ä»¶</h5><h5 id="å‰ç«¯è·¯ç”±æŠ€æœ¯"><a href="#å‰ç«¯è·¯ç”±æŠ€æœ¯" class="headerlink" title="å‰ç«¯è·¯ç”±æŠ€æœ¯"></a>å‰ç«¯è·¯ç”±æŠ€æœ¯</h5><h5 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h5><h5 id="è™šæ‹ŸDOM"><a href="#è™šæ‹ŸDOM" class="headerlink" title="è™šæ‹ŸDOM"></a>è™šæ‹ŸDOM</h5><h3 id="Vueçš„å®‰è£…"><a href="#Vueçš„å®‰è£…" class="headerlink" title="Vueçš„å®‰è£…"></a><code>Vue</code>çš„å®‰è£…</h3><h4 id="ä¸€ã€ç›´æ¥CDNå¼•å…¥"><a href="#ä¸€ã€ç›´æ¥CDNå¼•å…¥" class="headerlink" title="ä¸€ã€ç›´æ¥CDNå¼•å…¥"></a>ä¸€ã€ç›´æ¥CDNå¼•å…¥</h4><pre><code>&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;    &lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;    &lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;</code></pre><p>åœ¨<code>vue</code>å®˜ç½‘å³é”®é“¾æ¥å¦å­˜ä¸ºå°±å¯ä»¥ä¸‹è½½ä¸‹æ¥äº†</p><h4 id="äºŒã€ä¸‹è½½å’Œå¼•å…¥"><a href="#äºŒã€ä¸‹è½½å’Œå¼•å…¥" class="headerlink" title="äºŒã€ä¸‹è½½å’Œå¼•å…¥"></a>äºŒã€ä¸‹è½½å’Œå¼•å…¥</h4><p>å¼€å‘ç¯å¢ƒï¼š<a href="https://vuejs.org/js/vue.js">https://vuejs.org/js/vue.js</a></p><p>ç”Ÿäº§ç¯å¢ƒï¼š<a href="https://vuejs.org/js/vue.min.js">https://vuejs.org/js/vue.min.js</a></p><h4 id="ä¸‰ã€NPMå®‰è£…"><a href="#ä¸‰ã€NPMå®‰è£…" class="headerlink" title="ä¸‰ã€NPMå®‰è£…"></a>ä¸‰ã€NPMå®‰è£…</h4><p>åç»­é€šè¿‡<code>webpack</code>å’Œ<code>CLI</code>çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–¹å¼</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> æ¸è¿›å¼æ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
